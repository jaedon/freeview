/*
 * (c) 2011-2012 Humax Co., Ltd. 
 * This program is produced by Humax Co., Ltd. ("Humax") and 
 * the proprietary Software of Humax and its licensors. Humax provides you, as an Authorized Licensee, 
 * non-assignable, non-transferable and non-exclusive license to use this Software. 
 * You acknowledge that this Software contains valuable trade secrets of Humax and by using this Software 
 * you agree to the responsibility to take all reasonable efforts to protect the any information 
 * you receive from Humax. You are not permitted to duplicate, modify, distribute, sell or lease and 
 * reverse engineer or extract the source code of this Software unless you have Humax's written permission to do so.
 * If you have no authorized license, discontinue using this Software immediately. 
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND HUMAX MAKES NO PROMISES, REPRESENTATIONS OR WARRANTIES, EITHER EXPRESS, 
 * IMPLIED OR STATUTORY, OR OTHERWISE, WITH RESPECT TO THE SOFTWARE. 
 * IN NO EVENT SHALL HUMAX BE LIABLE FOR LOST PROFITS, REVENUES, OR DATA, FINANCIAL LOSSES OR INDIRECT, SPECIAL,
 * CONSEQUENTIAL, EXEMPLARTY OR PUNITIVE DAMAGES WHATSOEVER RELATING TO YOUR USE OR INABILITY TO USE THE SOFTWARE.

 * This License is effective until terminated. You may terminate this License at any time by destroying all copies 
 * of the Software including all documentation. This License will terminate immediately without notice from Humax 
 * to you if you fail to comply with any provision of this License. Upon termination, you must destroy all copies 
 * of the Software and all documentation.  

 * The laws of the Republic of Korea will apply to any disputes arising out of or relating to this Copyright Notice. 
 * All claims arising out of or relating to this Copyright Notice will be litigated in the Seoul Central District Court, 
 * in the Republic of Korea.
*/
/*
	connect.c
	Copyright(c) 1996-2005 ACCESS CO., LTD.
	All rights are reserved by ACCESS CO., LTD., whether the whole or
	part of the source code including any modifications.
*/


#include "askdef.h"

#define KATUYOU_SUU		11
#define JODOUSI_SUU		51
#define JOSI_SUU		63

#define FUZOKUGO_SUU	(JODOUSI_SUU + JOSI_SUU)

unsigned char	bitpool[] = {
	0x00,	0x08,	0x76,	0xE8,	0x4F,	0xEE,	0xDC,	0x00,
	0x08,	0x76,	0xF8,	0xFF,	0xFF,	0xDD,	0x00,	0x08,
	0x76,	0xF8,	0xEF,	0xFF,	0xDD,	0x00,	0x08,	0x76,
	0xF8,	0xCF,	0xFF,	0xCC,	0x00,	0x08,	0x76,	0xE8,
	0xCF,	0xEB,	0x5D,	0x00,	0x04,	0x38,	0xF4,	0x27,
	0x77,	0x2E,	0x00,	0x00,	0x00,	0x00,	0x00,	0x58,
	0x10,	0x00,	0x81,	0x0E,	0x30,	0x01,	0x8C,	0x0A,
	0x80,	0x40,	0x87,	0xFE,	0x64,	0x4E,	0x05,	0x40,
	0xA0,	0x03,	0x6C,	0x04,	0xA3,	0x02,	0x20,	0xD0,
	0x01,	0x00,	0x80,	0x51,	0x01,	0x10,	0xE8,	0xD0,
	0x97,	0xDD,	0xBB,	0x00,	0x08,	0x74,	0x00,	0x01,
	0x20,	0x40,	0x00,	0x04,	0x3A,	0xF4,	0x67,	0x31,
	0x2E,	0x00,	0x02,	0x1D,	0xFA,	0xB3,	0x19,	0x15,
	0x00,	0x01,	0x0E,	0x3D,	0x09,	0x8C,	0x0A,	0x80,
	0x40,	0x87,	0xBC,	0x68,	0x56,	0x05,	0x40,	0xA0,
	0x43,	0x1B,	0x36,	0xAF,	0x02,	0x20,	0xD0,	0x01,
	0x26,	0x81,	0x77,	0x01,	0x10,	0xE8,	0x40,	0x90,
	0xCC,	0xAA,	0x00,	0x08,	0x74,	0x28,	0x08,	0x60,
	0x54,	0x00,	0x04,	0x3A,	0xC4,	0x2C,	0xF3,	0x3F,
	0x00,	0x02,	0x1D,	0x6A,	0x92,	0x79,	0x17,	0x00,
	0x00,	0x00,	0xFF,	0xFD,	0xBF,	0x03,	0x00,	0x00,
	0xC0,	0x0A,	0x00,	0x3B,	0x00,	0x00,	0x00,	0xA4,
	0x60,	0xB3,	0x03,	0x20,	0x00,	0x40,	0x02,	0x06,
	0x3B,	0x00,	0xFE,	0x01,	0x00,	0x20,	0x00,	0x00,
	0x01,	0x48,	0x50,	0x60,	0x00,	0x00,	0x02,	0x10,
	0x00,	0x00,	0x00,	0x00,	0x00,	0x00,	0xC0,	0x1F,
	0x00,	0x00,	0x00,	0x00,	0xF0,	0x01,	0x00,	0x00,
	0x00,	0x00,	0x0C,	0x00,	0x00,	0x00,	0x00,	0xA0,
	0x00,	0x00,	0x00,	0x00,	0x00,	0x02,	0x04,	0x00,
	0x00,	0x1E,	0x00,	0x00,	0x00,	0x00,	0x40,	0x00,
	0x00,	0x00,	0x04,	0x00,	0x00,	0x00,	0x00,	0x00,
	0x02,	0x04,	0x00,	0x00,	0x81,	0x0E,	0x00,	0x01,
	0x00,	0x18,	0x00,	0x00,	0x00,	0x00,	0x02,	0x1D,
	0x00,	0x20,	0x18,	0x15,	0x89,	0x40,	0x00,	0x02,
	0x10,	0x80,	0x00,	0x37,	0x20,	0x00,	0x01,	0x08,
	0x40,	0x40,	0x02,	0x18,	0x80,	0x40,	0x04,	0x20,
	0x00,	0x03,	0x00,	0x20,	0x00,	0x00,	0x01,	0x08,
	0x40,	0x00,	0x00,	0x00,	0x00,	0x00,	0x00,	0x00,
	0x02,	0x01,	0x00,	0x00,	0x00,	0x00,	0x80,	0x00,
	0x00,	0x80,	0x00,	0x00,	0x08,	0x20,	0x10,	0x01,
	0x18,	0xC0,	0x00,	0x10,	0x00,	0x00,	0x02,	0x00,
	0x00,	0x01,	0x04,	0x08,	0x00,	0x03,	0x12,	0x00,
	0x80,	0x40,	0x00,	0x02,	0x00,	0x43,	0x11,	0x80,
	0x00,	0x04,	0x00,	0x00,	0x00,	0x08,	0x20,	0x00,
	0x00,	0x08,	0x00,	0x00,	0x00,	0x00,	0x80,	0x00,
	0x08,	0x04,	0x40,	0x00,	0x00,	0x80,	0x00,	0x04,
	0x20,	0x00,	0x01,	0x08,	0x40,	0x00,	0x02,	0x10,
	0x80,	0x00,	0x00,	0x20,	0x00,	0x01,	0x08,	0x40,
	0x00,	0x02,	0x10,	0x80,	0x00,	0x04,	0x28,	0x00,
	0x00,	0x08,	0x40,	0x00,	0x02,	0x10,	0x80,	0x00,
	0x40,	0x00,	0x00,	0x00,	0x02,	0x40,	0x00,	0x00,
	0x00,	0x00,	0x00,	0x80,	0x00,	0x00,	0x00,	0x01,
	0x11,	0x00,	0x00,	0x00,	0x00,	0x20,	0x00,	0x00,
	0x20,	0x00,	0x00,	0x00,	0x00,	0x00,	0x00,	0x02,
	0x10,	0x00,	0x00,	0x00,	0x00,	0x01,	0x00,	0x00,
	0x00,	0x00,	0x40,	0x00,	0x20,	0x00,	0x00,	0x00,
	0x00,	0x00,	0x14,	0x41,	0x00,	0x02,	0x10,	0x80,
	0x00,	0x04,	0x08,	0x80,	0x03,	0x00,	0x40,	0x00,
	0x00,	0x10,	0x80,	0x00,	0x02,	0x50,	0x40,	0x00,
	0x06,	0x30,	0x80,	0x00,	0x08,	0xC0,	0x00,	0x04,
	0x00,	0x00,	0x01,	0x00,	0x90,	0x00,	0x03,	0x10,
	0x80,	0x00,	0x05,	0xA0,	0x00,	0x06,	0x30,	0x00,
	0x00,	0x00,	0x80,	0x08,	0x02,	0x34,	0xC0,	0x00,
	0x08,	0x20,	0x40,	0x00,	0x08,	0x00,	0x00,	0x02,
	0x24,	0x00,	0x01,	0x0C,	0x40,	0x00,	0x02,	0x10,
	0x80,	0x00,	0x04,	0x20,	0x00,	0x01,	0x08,	0x60,
	0x00,	0x02,	0x10,	0x80,	0x00,	0x02,	0x22,	0x80,
	0x01,	0x0C,	0x40,	0x00,	0x02,	0x10,	0x20,	0x00,
	0x04,	0x00,	0x00,	0x00,	0x00,	0x20,	0x00,	0x00,
	0x09,	0x40,	0x00,	0x02,	0x10,	0x80,	0x00,	0x00,
	0x00,	0x80,	0x00,	0x08,	0x00,	0x00,	0x02,	0x18,
	0x40,	0x00,	0x02,	0x30,	0x80,	0x02,	0x08,	0xC0,
	0x50,	0x04,	0x20,	0x00,	0x01,	0x00,	0x00,	0x00,
	0x03,	0x00,	0x00,	0x00,	0x01,	0x00,	0x00,	0x00,
	0x20,	0x00,	0x01,	0x0A,	0x40,	0x00,	0x02,	0x10,
	0x00,	0x00,	0x04,	0x20,	0x00,	0x01,	0x08,	0x40,
	0x00,	0x02,	0x00,	0xA0,	0x20,	0x01,	0x08,	0x40,
	0x00,	0x20,	0x00,	0x01,	0x09,	0x40,	0x00,	0x02,
	0x10,	0x80,	0x00,	0x00,	0x00,	0x00,	0x80,	0x00,
	0x00,	0x40,	0x02,	0x18,	0x00,	0x00,	0x00,	0x22,
	0x00,	0x01,	0x08,	0x40,	0x00,	0x02,	0x10,	0x80,
	0x00,	0x04,	0x20,	0x00,	0x00,	0x08,	0x40,	0x00,
	0x02,	0x10,	0x80,	0x00,	0x04,	0x20,	0x00,	0x01,
	0x09,	0x40,	0x00,	0x02,	0x10,	0x80,	0x00,	0x03,
	0x20,	0x00,	0x00,	0x08,	0x00,	0x40,	0x00,	0x18,
	0x88,	0x40,	0x00,	0x22,	0x10,	0x80,	0x00,	0x04,
	0x20,	0x00,	0x01,	0x09,	0x40,	0x00,	0x02,	0x10,
	0x80,	0x00,	0x22,	0x20,	0x00,	0x00,	0x08,	0x00,
	0x40,	0x02,	0x18,	0x80,	0x00,	0x04,	0x20,	0x50,
	0x82,	0x10,	0x84,	0x20,	0x00,	0x40,	0x00,	0x02,
	0x10,	0x80,	0x00,	0x04,	0x20,	0x00,	0x00,	0x00,
	0x41,	0x00,	0x40,	0x10,	0x80,	0x00,	0x00,	0x00,
	0x00,	0x01,	0x80,	0x50,	0x04,	0x20,	0x00,	0x01,
	0x10,	0x80,	0x01,	0x00,	0x00,	0x00,	0x00,	0x08,
	0x20,	0x01,	0x06,	0x00,	0x00,	0x00,	0x02,	0x01,
	0x08,	0x40,	0x00,	0x02,	0x10,	0x80,	0x00,	0x04,
	0x20,	0x00,	0x01,	0x08,	0x40,	0x00,	0x02,	0x18,
	0x80,	0x00,	0x04,	0x00,	0x00,	0x00,	0x84,	0x22,
	0x00,	0x01,	0x08,	0x20,	0x00,	0x00,	0x00,	0x00,
	0x00,	0x08,	0x00,	0x00,	0x04,	0x20,	0x00,	0x00,
	0x00,	0x10,	0x48,	0x40,	0x02,	0x10,	0x90,	0x00,
	0x00,	0x00,	0x00,	0x01,	0x00,	0x40,	0x00,	0x00,
	0x02,	0x40,	0x00,	0x04,	0x20,	0x20,	0x41,	0x02,
	0x10,	0x80,	0x00,	0x04,	0x20,	0x80,	0x00,	0x00,
	0x00,	0x00,	0x00,	0x00,	0x90,	0x00,	0x46,	0x2A,
	0x90,	0x80,	0x0C,	0x24,	0x20,	0xC0,	0x0D,	0x08,
	0x40,	0x00,	0x02,	0x10,	0x90,	0x00,	0x06,	0x20,
	0x01,	0x01,	0x48,	0xA4,	0x22,	0x01,	0x09,	0x48,
	0x20,	0x02,	0x10,	0x00,	0x00,	0x00,	0x20,	0x00,
	0x01,	0x08,	0x60,	0x00,	0x00,	0x00,	0x90,	0x48,
	0x00,	0x02,	0x10,	0x80,	0x00,	0x04,	0x40,	0x00,
	0x00,	0x00,	0x40,	0x00,	0x00,	0x12,	0xC0,	0x00,
	0x04,	0x00,	0x00,	0x41,	0x02,	0x10,	0x80,	0x00,
	0x04,	0x20,	0xC0,	0x00,	0x00,	0x00,	0x00,	0x00,
	0x04,	0x80,	0x00,	0x06,	0x20,	0x00,	0x00,	0x08,
	0x12,	0x80,	0x00,	0x04,	0x20,	0x40,	0x01,	0x04,
	0x00,	0x00,	0x00,	0x10,	0x00,	0x80,	0x04,	0x38,
	0x00,	0x01,	0x00,	0x40,	0x90,	0x00,	0x04,	0x20,
	0x00,	0x01,	0x08,	0x00,	0x02,	0x02,	0x10,	0x80,
	0x00,	0x00,	0x24,	0x80,	0x01,	0x08,	0x40,	0x00,
	0x02,	0x24,	0x00,	0x01,	0x08,	0x40,	0x00,	0x02,
	0x00,	0x00,	0x00,	0x00,	0x20,	0x00,	0x00,	0x08,
	0x60,	0x00,	0x00,	0x00,	0x80,	0x00,	0x00,	0x40,
	0x00,	0x04,	0x3A,	0xF4,	0x67,	0xB3,	0x6A,	0x00
};

typedef short	BITSTR;
typedef struct {
	BITSTR	kn_setu;
	BITSTR	k_setu;
} CNTAB;

CNTAB cntab[FUZOKUGO_SUU] = {		// ºÎÁ¶»ç 
	{ 2086, 4095 },			/* ª«ªé£ÛÌ«?ïÈ£Ý */
	{ 1214, 4095 },			/*	ª¬£ÛÌ«?ïÈ£Ý  */
	{ 1159, 2141 },			/*	ªÈ£ÛÌ«?ïÈ£Ý  */
	{ 1104, 3370 },			/*	  ªÇ£ÛÌ«¡¹	  */
	{ 1049, 6416 },			/*	ªË£ÛÌ«?ïÈ£Ý  */
	{ 1104, 3370 },			/*	  ªØ£ÛÌ«£Ý	  */
	{ 1104, 6579 },			/*	 ªèªê£ÛÌ«£Ý	  */
	{  994, 3370 },			/*	  ªò£ÛÌ«£Ý	  */
	{  939, 7032 },			/*	ªÎ£ÛÌ«?ðû£Ý  */
	{  884, 3554 },			/*	ªä£ÛÌ«?ðû£Ý  */
	{ 2375, 5221 },			/*	ª±ªìªÉ£ÛïÈ£Ý  */
	{ 2375, 5221 },			/* ª±ªìªÉªâ£ÛïÈ£Ý */
	{ 2375, 5221 },			/*	 ª±ªÉ£ÛïÈ£Ý	  */
	{ 2375, 5221 },			/*	  ª·£ÛïÈ£Ý	  */
	{ 1899, 3600 },			/*	 ª¿ªê£ÛïÈ£Ý	  */
	{ 2375, 2790 },			/*	 ªÀªê£ÛïÈ£Ý	  */
	{ 1899, 3987 },			/*	  ªÆ£ÛïÈ£Ý	  */
	{ 2375, 3201 },			/*	  ªÇ£ÛïÈ£Ý	  */
	{ 1899, 3987 },			/*	 ªÆªâ£ÛïÈ£Ý	  */
	{ 7871, 3120 },			/* ªÇªâ£ÛïÈ?Üù£Ý */
	{ 2005, 2538 },			/*	ªÊª¬ªé£ÛïÈ£Ý  */
	{ 1927, 2276 },			/*	 ªÄªÄ£ÛïÈ£Ý	  */
	{ 2375, 4734 },			/*	 ªÎªÇ£ÛïÈ£Ý	  */
	{ 2375, 4734 },			/*	 ªÎªË£ÛïÈ£Ý	  */
	{ 2375, 2919 },			/*	  ªÐ£ÛïÈ£Ý	  */
	{ 1807, 2920 },			/*	ªÈª³ªí£ÛïÈ£Ý  */
	{  829, 5110 },			/*	ª°ªéª¤£ÛÜù£Ý  */
	{  774, 5908 },			/*	 ª³ª½£ÛÜù£Ý	  */
	{  774, 5908 },			/*	 ªµª¨£ÛÜù£Ý	  */
	{  774, 7195 },			/*	 ª·ª«£ÛÜù£Ý	  */
	{  774, 7032 },			/*	 ªÀª±£ÛÜù£Ý	  */
	{  719, 5309 },			/*	 ªÊªÉ£ÛÜù£Ý	  */
	{  664, 7032 },			/*	 ªÊªê£ÛÜù£Ý	  */
	{  609, 3763 },			/*	  ªÏ£ÛÜù£Ý	  */
	{  774, 7032 },			/*	ªÐª«ªê£ÛÜù£Ý  */
	{  554, 7032 },			/*	 ªÛªÉ£ÛÜù£Ý	  */
	{  499, 6579 },			/*	 ªÞªÇ£ÛÜù£Ý	  */
	{  444, 3897 },			/*	  ªâ£ÛÜù£Ý	  */
	{  389, 7358 },			/*	 ªäªé£ÛÜù£Ý	  */
	{  774, 4547 },			/*	 ª¹ªé£ÛÜù£Ý	  */
	{  774, 4957 },			/*	 ªÎªß£ÛÜù£Ý	  */
	{  168, 7521 },			/*	ª«£ÛÜù?ðû£Ý  */
	{  168, 7521 },			/*	ª«ª·ªé£Ûðû£Ý  */
	{  112, 5525 },			/*	  ªµ£Ûðû£Ý	  */
	{ 2375, 6066 },			/*	  ª¼£Ûðû£Ý	  */
	{ 1940, 5221 },			/*	  ª¾£Ûðû£Ý	  */
	{  334, 5221 },			/*	 ªÈªâ£Ûðû£Ý	  */
	{ 1269, 5437 },			/*	  ªÊ£Ûðû£Ý	  */
	{ 1269, 5437 },			/*	 ªÊª¢£Ûðû£Ý	  */
	{	56, 2141 },			/*	  ªÍ£Ûðû£Ý	  */
	{	56, 2141 },			/*	 ªÍª¨£Ûðû£Ý	  */
	{	56, 6707 },			/*	  ªè£Ûðû£Ý	  */
	{ 2375, 4194 },			/*	  ªï£Ûðû£Ý	  */
	{ 1807, 2920 },			/*	ª³ªÈ£ÛÜÍÙ££Ý  */
	{ 1807, 3030 },			/*	ª¿ªá£ÛÜÍÙ££Ý  */
	{ 1852, 2856 },			/*	 ª²£Û£«û¡£Ý	  */
	{ 1775, 2318 },			/*	 ªß£Û£«û¡£Ý	  */
	{ 1731, 2318 },			/*	 ªá£Û£«û¡£Ý	  */
	{ 1688, 2837 },			/*	 ª­£Û£«û¡£Ý	  */
	{ 1642, 2837 },			/*	 ªµ£Û£«û¡£Ý	  */
	{ 1915, 2318 },			/*	 ªÈ£Û£«Üù£Ý	  */
	{ 1914, 2318 },			/*	 ªË£Û£«Üù£Ý	  */
	{ 1913, 2318 },			/*	 ªÎ£Û£«Üù£Ý	  */
	{ 1596, 2318 },			/*	 ª¯£Û««çé£Ý	  */
	{ 1595, 2318 },			/*	 ª°£Û«¬çé£Ý	  */
	{ 1594, 4341 },			/*	 ª¹£Û«µçé£Ý	  */
	{ 1593, 2318 },			/*	 ªÄ£Û«¿çé£Ý	  */
	{ 1592, 2318 },			/*	 ªÌ£Û«Êçé£Ý	  */
	{ 1591, 2318 },			/*	 ªÖ£Û«Ðçé£Ý	  */
	{ 1590, 2318 },			/*	 ªà£Û«Þçé£Ý	  */
	{ 1589, 2318 },			/*	 ªë£Û«éçé£Ý	  */
	{ 1588, 2318 },			/*	 ª¦£Û«ïçé£Ý	  */
	{ 1527, 2463 },			/*		ª¹ªë	  */
	{ 1575, 2318 },			/*		ªºªë	  */
	{ 1871, 2318 },			/*		ª¯ªë	  */
	{ 1927, 2325 },			/*	 ªë£Ûß¾ù»£Ý	  */
	{ 1688, 2318 },			/*	 ª¤£Ûû¡é»£Ý	  */
	{ 2042, 2318 },			/*	 ªÀ£Ûû¡ÔÑ£Ý	  */
	{ 2375, 3701 },			/*		 ª¦		  */
	{ 1927, 2680 },			/*	   ªµª»ªë	  */
	{ 2375, 4341 },			/*		ª»ªë	  */
	{ 1478, 6871 },			/*	   ª½ª¦ªÀ	  */
	{ 1478, 6871 },			/*	  ª½ª¦ªÇª¹	  */
	{ 1899, 3600 },			/*		 ª¿		  */
	{ 2375, 2790 },			/*		 ªÀ		  */
	{ 1899, 2726 },			/*		ª¿ª¤	  */
	{  279, 3370 },			/*		 ªÀ		  */
	{  279, 4413 },			/*	  £¨ªÀªí£©	  */
	{	 0, 2437 },			/*		ªÇª¹	  */
	{	 0, 4413 },			/*	 £¨ªÇª·ªç£©	  */
	{ 1426, 4893 },			/*		ªÊª¤	  */
	{ 1927, 4265 },			/*		 ªÌ		  */
	{ 1899, 5686 },			/*		ªÞª¤	  */
	{ 1899, 2726 },			/*		ªÞª¹	  */
	{ 1927, 2341 },			/*		ªèª¦	  */
	{ 1959, 5735 },			/*	   ªèª¦ªÀ	  */
	{ 1959, 5735 },			/*	  ªèª¦ªÇª¹	  */
	{  224, 7687 },			/*	   ªéª·ª¤	  */
	{ 1899, 3427 },			/*	   ªéªìªë	  */
	{ 2375, 4341 },			/*		ªìªë	  */
	{ 1927, 4265 },			/*		 ªó		  */
	{ 1374, 2768 },			/*		ª¢ªë	  */
	{ 1374, 2318 },			/*		ª¤ªë	  */
	{ 1871, 2318 },			/*		ªßªë	  */
	{ 1871, 2318 },			/*		ªªª¯	  */
	{ 1871, 2318 },			/*		ª¤ª¯	  */
	{ 1478, 6255 },			/*	   ª¹ª®ªë	  */
	{ 1852, 2856 },			/*		ª¬ªë	  */
	{ 1899, 4604 },			/*	   ªÊªµªë	  */
	{ 2375, 6187 },			/*		ªÙª·	  */
	{ 1919, 2318 },			/*		ª¿ªë	  */
	{ 1322, 3272 },			/*		ªÊªë	  */
	{ 1574, 3370 },			/*	   ªÃªÝª¤	  */
	{ 1927, 3427 }			/*		ªµª¹	  */
};

unsigned char	offsetmap[256] = {
	0xFF,	0,		1,		2,		3,		4,		5,		6,
	7,		8,		9,		10,		0xFF,	11,		12,		13,
	14,		15,		16,		17,		18,		19,		20,		21,
	22,		20,		22,		22,		22,		22,		22,		22,
	0xFF,	0xFF,	0xFF,	23,		24,		25,		26,		0xFF,
	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,
	0xFF,	0xFF,	22,		20,		18,		12,		0,		7,
	22,		0xFF,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,
	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,
	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,
	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,
	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,
	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,
	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,
	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,
	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,
	0,		0,		0,		0,		0,		0,		0,		0,
	0,		11,		11,		22,		33,		44,		55,		66,
	33,		33,		55,		77,		88,		88,		44,		99,
	110,	77,		110,	121,	110,	66,		132,	143,
	55,		77,		44,		33,		33,		110,	154,	33,
	33,		154,	154,	33,		154,	154,	165,	176,
	154,	44,		154,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,
	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,	0xFF,
	27,		28,		29,		30,		31,		32,		33,		34,
	35,		36,		37,		37,		37,		37,		38,		38,
	39,		39,		40,		40,		41,		42,		43,		43,
	44,		45,		46,		47,		47,		47,		46,		46,
	48,		49,		46,		50,		50,		51,		50,		50,
	50,		52,		36,		53,		53,		53,		53,		53,
	53,		53,		53,		36,		36,		54,		54,		55,
	54,		54,		56,		54,		9,		9,		57,		0xFF
};

/*
**		¾î±¸ÀÇ Á¢¼Ó°üå°è¿¡ °üÇÑ ÇÔ¼ö. 
*/
typedef int		bool;
#define TRUE	(1 == 1)
#define FALSE	(!TRUE)

static u_char power[] = { 0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80 };

static bool		getbit(short b);
static u_char	g2jodo(u_char sn);

#include "connect.h"


static bool getbit(short b)
{
	return(bitpool[b >> 3] & power[b & 0x07]);
}

static u_char g2jodo(u_char sn)
{
	if (sn >= 1 && sn <= 13)
		return((u_char)(sn + 0x7F));
	return(0);
}

bool goku_connect(u_char snu, u_char ktu, u_char snd)
{
	short ofs;
	CNTAB *cnp;

	if (snd < 0x80)							/* "µÚ·Î"°¡ ÀÚ¸³¾î */
		return(FALSE);
	if (snu < 45 && ktu) {					/* È°¿ë ºÙÀ½ */
		if ((snu = g2jodo(snu)) == 0)		/* 45(Á¢µÎ¾î) by Kamada */
			return(FALSE);
	}
	if ((ofs = offsetmap[snu]) == 0xff)		/* "¾Õ" ¿¡´Â ¾Æ¹«°Íµµ Á¢¼ÓÇÏÁö ¾ÊÀ½ */
		return(FALSE);
	cnp = (snd >= 0xc0) ? &cntab[snd - 0xc0] : &cntab[snd - 0x80 + JOSI_SUU];
	if (snu < 0x80 || snu >= 0xc0)
		return(getbit((short)(cnp->kn_setu + ofs)));
	return(getbit((short)(cnp->k_setu + ofs + ktu - 1)));
}

/*
**
**		ÁÖ¾îÁø ¹®¹ýÀÌ ¹®Àý ³¡¿¡ ¿À´Â°¡ °ËÁ¤ÇÑ´Ù. 
**
*/
int		setu_end(u_char sn, u_char kt)
{
	if (sn >= 0xC0)							/* Á¶»ç		*/
		return(TRUE);

	if (sn < 0x80) {						/* ÀÚ¸³¾î ¾î°£	*/
		if (sn < 45 && kt != 0) {			/* sn < 45 by Kamada */
			if ((sn = g2jodo(sn)) == 0)
				return(FALSE);
		} else {
			if (sn == 13 ||					/* 1´Ü µ¿»ç */
				(sn >= 19 && sn <= 52) ||	/* Ã¼¾ð°è */
				sn == 56)					/* Á¢¹Ì¾î(¼ýÀÚ) */
				return(TRUE);
			else
				return(FALSE);
		}
	}
	switch (sn) {
	/* Çü¿ë»ç.'Ä«'º¯ "µ¥½º" Çü, ÀÏ´Ü(ÀÖ´Ù,º»´Ù) */
	case 139:						/* Ä« º¯ µ¿»ç */
	case 141:						/* Çü¿ë»ç */
	case 147:						/* ¼Ò¿Àµ¥½º */
	case 150:						/* Å¸ÀÌ	*/
	case 153:						/* µ¥½º 	*/
	case 154:						/* (µ¥¼î¿À) */
	case 155:						/* ³ªÀÌ 		*/
	case 158:						/* ¸¶½º		*/
	case 161:						/* ¿ä¿Àµ¥½º 	*/
	case 162:						/* ¶ó½ÃÀÌ	*/
	case 167:						/* ÀÌ·ç	*/
	case 168:						/* ¹Ì·ç	*/
	case 177:						/* ~»ÇÀÌ	*/
		if ((kt >= 5 && kt <= 8) || kt >= 10)
			return(TRUE);
			break;
	/* Çü¿ëµ¿»çÇü */
	case 151:						/* ~´Ù (´ÜÁ¤)*/
		if (kt == 8)				/* ¿¬Ã¼Çü '~ªÊ" ´Â Á¦¿Ü */
			return(FALSE);
	case 142:						/* Çü¿ëµ¿»ç */
	case 146:						/* ¼Ò¿À´Ù 	*/
	case 148:						/* Å¸		*/
	case 149:						/* ´Ù (°ú°ÅÇü)	*/
	case 152:						/* (´Ù·Î) */
	case 160:						/* ¿ä¿À´Ù	*/
		if (kt >= 5)
			return(TRUE);
			break;
	/* ±× ¿ÜÀÇ µ¿»çÇü  */
	default:
		if (kt == 4 || kt == 7 || kt == 8 || kt >= 10)
			return(TRUE);
			break;
	}
	return(FALSE);
}
