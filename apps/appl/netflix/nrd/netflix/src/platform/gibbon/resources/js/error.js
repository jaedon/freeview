function BigInteger(e,t,n){e!=null&&("number"==typeof e?this.fromNumber(e,t,n):t==null&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function nbi(){return new BigInteger(null)}function am1(e,t,n,r,i,s){var o;while(--s>=0)o=t*this[e++]+n[r]+i,i=Math.floor(o/67108864),n[r++]=o&67108863;return i}function am2(e,t,n,r,i,s){var o,u,a,f=t&32767,l=t>>15;while(--s>=0)o=this[e]&32767,u=this[e++]>>15,a=l*o+u*f,o=f*o+((a&32767)<<15)+n[r]+(i&1073741823),i=(o>>>30)+(a>>>15)+l*u+(i>>>30),n[r++]=o&1073741823;return i}function am3(e,t,n,r,i,s){var o,u,a,f=t&16383,l=t>>14;while(--s>=0)o=this[e]&16383,u=this[e++]>>14,a=l*o+u*f,o=f*o+((a&16383)<<14)+n[r]+i,i=(o>>28)+(a>>14)+l*u,n[r++]=o&268435455;return i}function int2char(e){return BI_RM.charAt(e)}function intAt(e,t){var n=BI_RC[e.charCodeAt(t)];return n==null?-1:n}function bnpCopyTo(e){var t;for(t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function bnpFromInt(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+DV:this.t=0}function nbv(e){var t=nbi();return t.fromInt(e),t}function bnpFromString(e,t){var n,r,i,s,o;if(t==16)n=4;else if(t==8)n=3;else if(t==256)n=8;else if(t==2)n=1;else if(t==32)n=5;else{if(t!=4){this.fromRadix(e,t);return}n=2}this.t=0,this.s=0,r=e.length,i=!1,s=0;while(--r>=0){o=n==8?e[r]&255:intAt(e,r);if(o<0){e.charAt(r)=="-"&&(i=!0);continue}i=!1,s==0?this[this.t++]=o:s+n>this.DB?(this[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this[this.t++]=o>>this.DB-s):this[this.t-1]|=o<<s,s+=n,s>=this.DB&&(s-=this.DB)}n==8&&(e[0]&128)!=0&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&BigInteger.ZERO.subTo(this,this)}function bnpClamp(){var e=this.s&this.DM;while(this.t>0&&this[this.t-1]==e)--this.t}function bnToString(e){var t,n,r,i,s,o,u;if(this.s<0)return"-"+this.negate().toString(e);if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else{if(e!=4)return this.toRadix(e);t=2}n=(1<<t)-1,i=!1,s="",o=this.t,u=this.DB-o*this.DB%t;if(o-->0){u<this.DB&&(r=this[o]>>u)>0&&(i=!0,s=int2char(r));while(o>=0)u<t?(r=(this[o]&(1<<u)-1)<<t-u,r|=this[--o]>>(u+=this.DB-t)):(r=this[o]>>(u-=t)&n,u<=0&&(u+=this.DB,--o)),r>0&&(i=!0),i&&(s+=int2char(r))}return i?s:"0"}function bnNegate(){var e=nbi();return BigInteger.ZERO.subTo(this,e),e}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(e){var t,n=this.s-e.s;if(n!=0)return n;t=this.t,n=t-e.t;if(n!=0)return this.s<0?-n:n;while(--t>=0)if((n=this[t]-e[t])!=0)return n;return 0}function nbits(e){var t,n=1;return(t=e>>>16)!=0&&(e=t,n+=16),(t=e>>8)!=0&&(e=t,n+=8),(t=e>>4)!=0&&(e=t,n+=4),(t=e>>2)!=0&&(e=t,n+=2),(t=e>>1)!=0&&(e=t,n+=1),n}function bnBitLength(){return this.t>0?this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM):0}function bnpDLShiftTo(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s}function bnpDRShiftTo(e,t){var n;for(n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s}function bnpLShiftTo(e,t){var n,r=e%this.DB,i=this.DB-r,s=(1<<i)-1,o=Math.floor(e/this.DB),u=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)t[n+o+1]=this[n]>>i|u,u=(this[n]&s)<<r;for(n=o-1;n>=0;--n)t[n]=0;t[o]=u,t.t=this.t+o+1,t.s=this.s,t.clamp()}function bnpRShiftTo(e,t){var n,r,i,s,o;t.s=this.s,n=Math.floor(e/this.DB);if(n>=this.t){t.t=0;return}r=e%this.DB,i=this.DB-r,s=(1<<r)-1,t[0]=this[n]>>r;for(o=n+1;o<this.t;++o)t[o-n-1]|=(this[o]&s)<<i,t[o-n]=this[o]>>r;r>0&&(t[this.t-n-1]|=(this.s&s)<<i),t.t=this.t-n,t.clamp()}function bnpSubTo(e,t){var n=0,r=0,i=Math.min(e.t,this.t);while(n<i)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){r-=e.s;while(n<this.t)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{r+=this.s;while(n<e.t)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()}function bnpMultiplyTo(e,t){var n=this.abs(),r=e.abs(),i=n.t;t.t=i+r.t;while(--i>=0)t[i]=0;for(i=0;i<r.t;++i)t[i+n.t]=n.am(0,r[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&BigInteger.ZERO.subTo(t,t)}function bnpSquareTo(e){var t,n=this.abs(),r=e.t=2*n.t;while(--r>=0)e[r]=0;for(r=0;r<n.t-1;++r)t=n.am(r,n[r],e,2*r,0,1),(e[r+n.t]+=n.am(r+1,2*n[r],e,2*r+1,t,n.t-r-1))>=n.DV&&(e[r+n.t]-=n.DV,e[r+n.t+1]=1);e.t>0&&(e[e.t-1]+=n.am(r,n[r],e,2*r,0,1)),e.s=0,e.clamp()}function bnpDivRemTo(e,t,n){var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y=null,b="copyTo",w="dlShiftTo",E="subTo",S=e.abs();if(S.t<=0)return;r=this.abs();if(r.t<S.t){t!=y&&t.fromInt(0),n!=y&&this[b](n);return}n==y&&(n=nbi()),i=nbi(),s=this.s,o=e.s,u=this.DB-nbits(S[S.t-1]),u>0?(S.lShiftTo(u,i),r.lShiftTo(u,n)):(S[b](i),r[b](n)),a=i.t,f=i[a-1];if(f==0)return;l=f*(1<<this.F1)+(a>1?i[a-2]>>this.F2:0),c=this.FV/l,h=(1<<this.F1)/l,p=1<<this.F2,d=n.t,v=d-a,m=t==y?nbi():t,i[w](v,m),n.compareTo(m)>=0&&(n[n.t++]=1,n[E](m,n)),BigInteger.ONE[w](a,m),m[E](i,i);while(i.t<a)i[i.t++]=0;while(--v>=0){g=n[--d]==f?this.DM:Math.floor(n[d]*c+(n[d-1]+p)*h);if((n[d]+=i.am(0,g,n,v,0,a))<g){i[w](v,m),n[E](m,n);while(n[d]<--g)n[E](m,n)}}t!=y&&(n.drShiftTo(a,t),s!=o&&BigInteger.ZERO[E](t,t)),n.t=a,n.clamp(),u>0&&n.rShiftTo(u,n),s<0&&BigInteger.ZERO[E](n,n)}function bnMod(e){var t=nbi();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(BigInteger.ZERO)>0&&e.subTo(t,t),t}function Classic(e){this.m=e}function cConvert(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function cRevert(e){return e}function cReduce(e){e.divRemTo(this.m,null,e)}function cMulTo(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function cSqrTo(e,t){e.squareTo(t),this.reduce(t)}function bnpInvDigit(){var e,t;return this.t<1?0:(e=this[0],(e&1)==0?0:(t=e&3,t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t))}function Montgomery(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function montConvert(e){var t=nbi();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(BigInteger.ZERO)>0&&this.m.subTo(t,t),t}function montRevert(e){var t=nbi();return e.copyTo(t),this.reduce(t),t}function montReduce(e){var t,n,r;while(e.t<=this.mt2)e[e.t++]=0;for(t=0;t<this.m.t;++t){n=e[t]&32767,r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM,n=t+this.m.t,e[n]+=this.m.am(0,r,e,t,0,this.m.t);while(e[n]>=e.DV)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function montSqrTo(e,t){e.squareTo(t),this.reduce(t)}function montMulTo(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function bnpIsEven(){return(this.t>0?this[0]&1:this.s)==0}function bnpExp(e,t){var n,r,i,s,o;if(e>4294967295||e<1)return BigInteger.ONE;n=nbi(),r=nbi(),i=t.convert(this),s=nbits(e)-1,i.copyTo(n);while(--s>=0)t.sqrTo(n,r),(e&1<<s)>0?t.mulTo(r,i,n):(o=n,n=r,r=o);return t.revert(n)}function bnModPowInt(e,t){var n;return e<256||t.isEven()?n=new Classic(t):n=new Montgomery(t),this.exp(e,n)}var App,XMLHttpRequest,localStorage,sessionStorage,navigator,screen,Image,application,NOOP,UNIT,devicebridge,netflix,logging,webapi,dbits,canary,j_lm,BI_FP,BI_RM,BI_RC,rr,vv,errorpage,CurrentUrlParams,aspectRatio;gibbon=function(e){var t="gibbon",n="scene",r=this.nrdp;return!r||!r[t]?{}:e?e:(e={makeWidget:r[t].makeWidget,setScene:function(e){r[t][n].widget=e},log:function(e){r.log.debug(e+"","UI_SCRIPT")},setTimeout:r[t].setTimeout,clearTimeout:r[t].clearTimeout,eval:r[t].eval,collectGarbage:r[t].collectGarbage,loadScript:r[t].loadScript,load:r[t].load,stopLoad:r[t].stopLoad,addEventListener:r[t].addEventListener.bind(r[t]),removeEventListener:r[t].removeEventListener.bind(r[t]),get email(){return r[t].email},get password(){return r[t].password},sync:r[t].sync},e[n]={get width(){return r[t][n].width},get height(){return r[t][n].height}},e)}(this.gibbon),App={markup:{}},gibbon.defaultTextStyle=function(){this.color=new gibbon.color},gibbon.defaultTextStyle.prototype={size:30,align:"left",weight:"normal",variant:"normal",wrap:!1,richText:!1,underline:!1,strikethrough:!1,merge:function(e){var t,n="hasOwnProperty",r="color";for(t in e)e[n](t)&&(this[t]=e[t]);e[n](r)&&(this[r]=new gibbon[r](e[r]))}},gibbon.rect=function(e,t,n,r){var i="height",s=this;typeof e=="object"?(s.x=e.x,s.y=e.y,s.width=e.width,s[i]=e[i]):(s.x=e!==undefined?e:0,s.y=t!==undefined?t:0,s.width=n!==undefined?n:0,s[i]=r!==undefined?r:0)},gibbon.rect.prototype={get left(){return this.x},set left(e){var t=this;t.width+=t.x-e,t.x=e},get top(){return this.y},set top(e){var t=this;t.height+=t.y-e,t.y=e},get right(){return this.x+this.width},set right(e){this.width=e-this.x},get bottom(){return this.y+this.height},set bottom(e){this.height=e-this.y},get size(){return{width:this.width,height:this.height}},copy:function(e){var t=this;t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height},clear:function(){var e=this;e.x=0,e.y=0,e.width=0,e.height=0},get empty(){return this.width<=0||this.height<=0},overlaps:function(e){var t=this;return!(t.x>e.right||t.y>e.bottom||t.right<e.x||t.bottom<e.y)},unite:function(e){var t="right",n="bottom",r=this;r.empty?(r.x=e.x,r.y=e.y,r.width=e.width,r.height=e.height):e.empty||(r.x>e.x&&(r.left=e.x),r.y>e.y&&(r.top=e.y),r[t]<e[t]&&(r[t]=e[t]),r[n]<e[n]&&(r[n]=e[n]))},intersect:function(e){var t,n="right",r="bottom",i=this;return i.overlaps(e)?(t=new gibbon.rect(i.x>e.x?i.x:e.x,i.y>e.y?i.y:e.y,0,0),t[n]=i[n]<e[n]?i[n]:e[n],t[r]=i[r]<e[r]?i[r]:e[r],t):new gibbon.rect}},gibbon.color=function(e){var t=this;t.a=255,e===undefined?(t.r=0,t.g=0,t.b=0):typeof e=="object"?(t.r=e.r,t.g=e.g,t.b=e.b,e.a!==undefined&&(t.a=e.a)):typeof e=="string"&&t.parseString(e)},gibbon.color.prototype={parseString:function(e){var t,n=!0,r=this,i=gibbon.color.regex;return e=e.replace(i.trimLeft,"").replace(i.trimRight,"").toLowerCase(),(t=i.hex6.exec(e))?(r.a=255,r.r=parseInt(t[1],16),r.g=parseInt(t[2],16),r.b=parseInt(t[3],16),n):(t=i.hex3.exec(e))?(r.a=255,r.r=parseInt(t[1]+""+t[1],16),r.g=parseInt(t[2]+""+t[2],16),r.b=parseInt(t[3]+""+t[3],16),n):(t=i.rgb.exec(e))?(r.a=255,r.r=t[1],r.g=t[2],r.b=t[3],n):(t=i.rgba.exec(e))?(r.r=t[1],r.g=t[2],r.b=t[3],r.a=t[4],n):e=="transparent"?(r.r=0,r.g=0,r.b=0,n):!1}},gibbon.color.regex=function(){var e="[\\s|\\(]+(",t=")[,|\\s]+(",n=")\\s*\\)?",r="[-\\+]?\\d+%?",i="[-\\+]?\\d*\\.\\d+%?",s="(?:"+i+")|(?:"+r+")",o=e+s+t+s+t+s+n,u=e+s+t+s+t+s+t+s+n;return{rgb:RegExp("rgb"+o),rgba:RegExp("rgba"+u),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,trimLeft:/^[\s,#]+/,trimRight:/\s+$/}}(),function(){var e="scene",t="hasOwnProperty",n="widgets",r="createWidgets",i="backstage";gibbon[e].start=function(i){if(!i[t](e))throw Error("gibbon.scene.start: no scene specified in markup");gibbon[e][n]=gibbon[r](i[e]),gibbon.setScene(gibbon[e][n]._proxy)},gibbon[i]={},gibbon[i].start=function(i){if(!i[t](e))throw Error("gibbon.backstage.start: no scene specified in markup");i[e].visible=!1,gibbon[e][n]=gibbon[r](i[e]),gibbon.setScene(gibbon[e][n]._proxy)},gibbon[i].cue=function(){gibbon[e][n].visible=!0}}(),gibbon.getElementById=function(e){var t="scene",n="widgets",r="getElementById",i="backstage";return gibbon[t]&&gibbon[t][n]?gibbon[t][n].id===e?gibbon[t][n]:gibbon[t][n][r](e):gibbon[i]&&gibbon[i][n]?gibbon[i][n].id===e?gibbon[i][n]:gibbon[i][n][r](e):undefined},gibbon.getElementsByClassName=function(e){return gibbon.scene&&gibbon.scene.widgets?gibbon.scene.widgets.getElementsByClassName(e):[]},gibbon.Observable=function(e){this._subscribe=e},gibbon.Observable.prototype.subscribe=function(e){return typeof e=="function"?this._subscribe({onNext:e,onCompleted:this._noop,onError:this._onError}):this._subscribe(e)},gibbon.Observable.prototype._noop=function(){},gibbon.Observable.prototype._onError=function(e){throw e},function(){function an(e,t){var n;return typeof e=="string"&&(e.indexOf("%")!=-1?(n=e.split("%",1),e=parseInt(n[0],10),t===undefined&&(t=0),e=e*t/100):e=parseInt(e,10)),e}function fn(e,t){var n=[];return e===st?n.push(pt):n.push(e),t===st?n.push(St):n.push(t),n.join(" ")}function ln(e){var t,n,i,s=this;for(i in e)t=s[i],n=e[i],typeof n===Mt&&t!=undefined&&t[r]!==undefined?t[r](n):s[i]=n}function cn(e,t){this[o]=e,this[s]=t}function hn(e,t){this[o]=e,this[s]=t}function pn(e){this[E]=e}function dn(e){this[E]=e}function vn(e,t){this._prop=e,this[o]=t[a]}function mn(e){this[o]=e}function gn(e){this[s]=e}function yn(e){this[o]=e}function bn(e,t,n){this[E]=e,this[o]=e[a],this[l]=t,this[nt]=n}function wn(e){this[l]=e}function En(e){this[o]=e,this[i]=new gibbon.defaultTextStyle}function Sn(e){this[f]=e}function xn(e){this[f]=e,e[i][Ut]={offsetX:0,offsetY:0,color:new gibbon[O]}}function Tn(e){this[f]=e,this[i]=e[i],e[i][N]={type:"none",width:1,outlineColor:new gibbon[O],lightColor:new gibbon[O],darkColor:new gibbon[O]}}function Nn(e){this[f]=e,this[i]=e[i],e[i][U]={visible:c,position:0,interval:200,style:"line",width:1,color:new gibbon[O]}}function Cn(e){this[f]=e,this[i]=e[i],this[i][M]={position:"none"}}function kn(e){this[o]=e,this[P]={layout:T,align:[Ot,"top"]}}function Ln(e){this[R]=e}var e,t,n,r="setProperties",i="_textStyle",s="_update",o="_proxyWidget",u="serialize",a="_proxy",f="_textProperty",l="_proxyImage",c=!1,h="prototype",p="children",d="_height",v="_widgetIdCache",m="_horizontal",g="width",y="_width",b="_transform",w="height",E="_widget",S="_vertical",x="_color",T="horizontal",N="edgeEffect",C="_outlineColor",k="position",L="_align",A="_scale",O="color",M="truncation",_="_lightColor",D="outlineColor",P="_layout",H="_opacity",B="_darkColor",j="vertical",F="_imageContent",I="padding",q="_renderPropertyChange",R="_layoutProperty",U="cursor",z="length",W="widget.style has been deprecated",X="scale",V="lightColor",$="_truncation",J="_background",K="removeEventListener",Q="_transition",G="_edgeEffect",Y=!0,Z="_minSize",et="darkColor",tt="_maxSize",nt="_imageEventType",rt="align",it="parent",st="center",ot="addEventListener",ut="interval",at="ellipsis",ft="smoothScale",lt="_children",ct="mutations",ht="_mirror",pt="center-horizontal",dt="_duration",vt="renderpropertychange",mt="transform",gt="_transitionEnd",yt="dirty",bt="sourceRect",wt="offset",Et="mirror",St="center-vertical",xt="opacity",Tt="_offset",Nt="strikethrough",Ct="_padding",kt="animationFinished",Lt="visible",At="_parent",Ot="left",Mt="object",_t="_imageLoaded",Dt="_updateAlign",Pt="imageContent",Ht="_smoothScale",Bt="_origin",jt="sendRenderProperties",Ft="_bottom",It="_shadow",qt="layout",Rt="textCursorPosition",Ut="shadow",zt="Observable",Wt="_drawOrder",Xt="childMutations",Vt="lineHeight",$t="create",Jt="underline",Kt="Widget",Qt="direction",Gt="_updatePosition",Yt="imageLoaded",Zt="getElementById",en="maxLines",tn="richText",nn="textFirstLine",rn="_spacing",sn="_stretch",on="_visible",un="style";cn[h]={_x:0,_y:0,get x(){return this._x},set x(e){this._x=e,this[s](e,undefined)},get y(){return this._y},set y(e){this._y=e,this[s](undefined,e)},setProperties:function(e){e.x!==undefined&&(this._x=e.x),e.y!==undefined&&(this._y=e.y),this[s](e.x,e.y)},serialize:function(){return{x:this._x,y:this._y}}},hn[h]={_width:0,_height:0,get width(){return this[y]},set width(e){this[y]=e,this[s](e,undefined)},get height(){return this[d]},set height(e){this[d]=e,this[s](undefined,e)},setProperties:function(e){e[g]!==undefined&&(this[y]=e[g]),e[w]!==undefined&&(this[d]=e[w]),this[s](e[g],e[w])},serialize:function(){return{width:this[y],height:this[d]}}},pn[h]={get x(){return this._x===undefined&&(this._x=new vn("x",this[E])),this._x},set x(e){this.x[r](e)},get y(){return this._y===undefined&&(this._y=new vn("y",this[E])),this._y},set y(e){this.y[r](e)},get width(){return this[y]===undefined&&(this[y]=new vn(g,this[E])),this[y]},set width(e){this[g][r](e)},get height(){return this[d]===undefined&&(this[d]=new vn(w,this[E])),this[d]},set height(e){this[w][r](e)},get transform(){return this[b]===undefined&&(this[b]=new dn(this[E])),this[b]},set transform(e){this[mt][r](e)},get scale(){return this[A]===undefined&&(this[A]=new vn(X,this[E])),this[A]},set scale(e){this[X][r](e)},get opacity(){return this[H]===undefined&&(this[H]=new vn(xt,this[E])),this[H]},set opacity(e){this[xt][r](e)},setProperties:ln,serialize:function(){var e,t=this;return t._x&&(e||(e={}))&&(e.x=t._x[u]()),t._y&&(e||(e={}))&&(e.y=t._y[u]()),t[y]&&(e||(e={}))&&(e[g]=t[y][u]()),t[d]&&(e||(e={}))&&(e[w]=t[d][u]()),t[b]&&(e||(e={}))&&(e[mt]=t[b][u]()),t[A]&&(e||(e={}))&&(e[X]=t[A][u]()),t[H]&&(e||(e={}))&&(e[xt]=t[H][u]()),e}},dn[h]={get scale(){return this[A]===undefined&&(this[A]=new vn(X,this[E])),this[A]},set scale(e){this[X][r](e)},setProperties:ln,serialize:function(){var e,t=this;return t[A]&&(e||(e={}))&&(e[X]=t[A][u]()),e}},vn[h]={_duration:0,_ease:"linear",_flags:"",get duration(){return this[dt]},set duration(e){this[dt]=e,this[s]()},get ease(){return this._ease},set ease(e){this._ease=e,this[s]()},get flags(){return this._flags},set flags(e){this._flags=e,this[s]()},setProperties:ln,_update:function(){var e=this;e[o].animate(e._prop,e[dt],e._ease,e._flags)},serialize:function(){var e=this;return{duration:e[dt],ease:e._ease,flags:e._flags}}},mn[h]={_left:0,_top:0,_right:0,_bottom:0,_wrap:0,get left(){return this._left},set left(e){this._left=e,this[o][I]=this},get top(){return this._top},set top(e){this._top=e,this[o][I]=this},get right(){return this._right},set right(e){this._right=e,this[o][I]=this},get bottom(){return this[Ft]},set bottom(e){this[Ft]=e,this[o][I]=this},get wrap(){return this._wrap},set wrap(e){this._wrap=e,this[o][I]=this},setProperties:function(e){e[Ot]!==undefined&&(this._left=e[Ot]),e.top!==undefined&&(this._top=e.top),e.right!==undefined&&(this._right=e.right),e.bottom!==undefined&&(this[Ft]=e.bottom),e.wrap!==undefined&&(this._wrap=e.wrap),this[o][I]=this},serialize:function(){var e=this;return{left:e._left,top:e._top,right:e._right,bottom:e[Ft],wrap:e._wrap}}},gn[h]={_r:0,_g:0,_b:0,_a:255,get r(){return this._r},set r(e){var t=this;t._r=e,t[s]()},get g(){return this._g},set g(e){var t=this;t._g=e,t[s]()},get b(){return this._b},set b(e){var t=this;t._b=e,t[s]()},get a(){return this._a},set a(e){var t=this;t._a=e,t[s]()},setProperties:function(e){var t=this;t._r=e.r,t._g=e.g,t._b=e.b,t._a=e.a!==undefined?e.a:255,t[s]()},serialize:function(){var e=this;return{r:e._r,g:e._g,b:e._b,a:e._a}}},yn[h]={_scale:1,get scale(){return this[A]},set scale(e){this[A]=e,this[o][X]=e},get origin(){return this[Bt]===undefined&&(this[Bt]=new cn(this[o],function(e,t){e!==undefined&&(this[o].transformOriginX=e),t!==undefined&&(this[o].transformOriginY=t)})),this[Bt]},set origin(e){this.origin[r](e)},setProperties:function(e){e[X]!==undefined&&(this[X]=e[X]),e.origin!==undefined&&this.origin[r](e.origin)},serialize:function(){var e=this;return{scale:e[A],origin:e[Bt]}}},bn[h]={_x:0,_y:0,_smoothScale:c,_purge:Y,lazy:c,fast:c,async:Y,set src(e){var t={url:e&&e.url||e,lazy:this.lazy,async:this.async,fast:this.fast};e&&e.hash&&(t.headers={"X-Gibbon-Hash":e.hash}),this._src=t.url,this[l].url=t},get src(){return this._src},get align(){return this[L]===undefined&&(this[L]=new wn(this[l])),this[L]},set align(e){this[rt][r](e)},set mirror(e){this[ht]=e,this[l][Et]=e},get mirror(){return this[l]?this[l][Et]:this[ht]},get color(){var e;return this[x]===undefined&&(e=this,e[x]=new gn(function(){e[o][O]=this})),this[x]},set color(e){this[O][r](e)},get x(){return this._x},set x(e){this._x=e,this[Gt]()},get y(){return this._y},set y(e){this._y=e,this[Gt]()},get smoothScale(){return this[Ht]},set smoothScale(e){this[Ht]=e,this[o][ft]=e},_updatePosition:function(){var e=this[l],t={x:this._x,y:this._y,width:this[y]>0?this[y]:e[g],height:this[d]>0?this[d]:e[w]};e[bt]=t},get width(){return this[y]},set width(e){this[y]=e,this._updateSize(e,undefined)},get height(){return this[d]},set height(e){this[d]=e,this._updateSize(undefined,e)},_updateSize:function(){var e=this[l],t=e[bt],n={x:t!==undefined?t.x:0,y:t!==undefined?t.y:0,width:this[g],height:this[w]};e[bt]=n},set load(){throw"image load called"},loadImage:function(){var e=this[l];e&&e.reload()},get purge(){return this._purge},set purge(e){this._purge=this[l].purge=e},get imageLoaded(){var e=this;return e[_t]===undefined&&(e[_t]=new gibbon[zt](function(t){var n=function(e){t.onNext(e)};return e[o][ot](e[nt],n),{dispose:function(){e[o][K](e[nt],n)}}})),e[_t]},set imageLoaded(){throw"illegal set imageLoaded"},setProperties:function(e){var t,n;e.lazy!==undefined&&(this.lazy=e.lazy),e.async!==undefined&&(this.async=e.async),e.fast!==undefined&&(this.fast=e.fast),e.purge!==undefined&&(this.purge=e.purge),e.src!==undefined&&(this.src=e.src),e[ft]!==undefined&&(this[ft]=e[ft]),e[rt]!==undefined&&this[rt][r](e[rt]),e[O]!==undefined&&this[O][r](e[O]);if(e.x!==undefined||e.y!==undefined||e[g]!==undefined||e[w]!==undefined)t=this,n=t[l],n[bt]={x:e.x!==undefined?e.x:t.x,y:e.y!==undefined?e.y:t.y,width:e[g]!==undefined?e[g]:t[E][g]!==undefined?t[E][g]:n[g],height:e[w]!==undefined?e[w]:t[E][w]!==undefined?t[E][w]:n[w]},t._x=e.x,t._y=e.y,t[y]=e[g],t[d]=e[w];e[Et]!==undefined&&(t=this,n=t[l],n[Et]=e[Et],t[ht]=e[Et]),e.load!==undefined&&(this.load=e.load)},serialize:function(){var e=this,t={x:e._x,y:e._y,width:e[y],height:e[d],lazy:e.lazy,fast:e.fast,async:e.async,src:e.src,load:e.load,smoothScale:e[Ht],purge:e._purge};return e[L]&&(t[rt]=e[L][u]()),e[x]&&(t[O]=e[x][u]()),t}},wn[h]={get horizontal(){return this[m]||""},set horizontal(e){this[m]=e,this[l].halign=e},get vertical(){return this[S]||""},set vertical(e){this[S]=e,this[l].valign=e},setProperties:function(e){var t=this;e[T]!==undefined&&(t[m]=e[T],this[l].halign=e[T]),e[j]!==undefined&&(t[S]=e[j],this[l].valign=e[j])},serialize:function(){var e=this;return{horizontal:e[m],vertical:e[S]}}},En[h]={get italic(){return!!this._italic},set italic(e){this._italic=!!e,this[i].variant=e?"italic":"normal",this[s]()},get bold(){return!!this._bold},set bold(e){this._bold=!!e,this[i].weight=e?"bold":"normal",this[s]()},get richText(){return this[i][tn]},set richText(e){this[i][tn]=!!e,this[s]()},get underline(){return this[i][Jt]},set underline(e){this[i][Jt]=!!e,this[s]()},get strikethrough(){return this[i][Nt]},set strikethrough(e){this[i][Nt]=!!e,this[s]()},get family(){return this[i].family},set family(e){this[i].family=e,this[s]()},get lineHeight(){return this[i][Vt]},set lineHeight(e){this[i][Vt]=e,this[s]()},get wrap(){return this[i].wrap},set wrap(e){this[i].wrap=!!e,this[s]()},get maxLines(){return this[i][en]},set maxLines(e){this[i][en]=e,this[s]()},get size(){return this[i].size},set size(e){this[i].size=e,this[s]()},get locale(){return this[i].locale},set locale(e){this[i].locale=e,this[s]()},get color(){var e;return this[x]===undefined&&(e=this,e[x]=new gn(function(){var t=this,n=e[i][O];n.r=t.r,n.g=t.g,n.b=t.b,n.a=t.a,e[s]()})),this[x]},set color(e){this[O][r](e)},get align(){return this[L]===undefined&&(this[L]=new Sn(this)),this[L]},set align(e){this[rt][r](e)},get shadow(){return this[It]===undefined&&(this[It]=new xn(this)),this[It]},set shadow(e){this[Ut][r](e)},get edgeEffect(){return this[G]===undefined&&(this[G]=new Tn(this)),this[G]},set edgeEffect(e){this[N][r](e)},get cursor(){return this._cursor===undefined&&(this._cursor=new Nn(this)),this._cursor},set cursor(e){this[U][r](e)},get truncation(){return this[$]===undefined&&(this[$]=new Cn(this)),this[$]},set truncation(e){this[M][r](e)},set typography(e){this[i].typography=e,this[s]()},get typography(){return this[i].typography},setProperties:function(e){var t=this,n=t[s];t[s]=t._noop,t._setPropertiesDefault(e),t[s]=n,t[s]()},_update:function(){this[i]&&(this[o].textStyle=this[i])},_noop:function(){},_setPropertiesDefault:ln,serialize:function(){var e=this,t={size:e.size,family:e.family,bold:e._bold,italic:e._italic,lineHeight:e[Vt],wrap:e.wrap,maxLines:e[en],richText:e[tn],underline:e[Jt],strikethrough:e[Nt]};return e[x]&&(t[O]=e[x][u]()),e[L]&&(t[rt]=e[L][u]()),e[It]&&(t[Ut]=e[It][u]()),e[G]&&(t[N]=e[G][u]()),e[$]&&(t[M]=e[$][u]()),t}},Sn[h]={_horizontal:Ot,_vertical:"top",get horizontal(){return this[m]},set horizontal(e){var t=this;t[m]=e,t[s]()},get vertical(){return this[S]},set vertical(e){var t=this;t[S]=e,t[s]()},setProperties:function(e){var t=this;e[T]!==undefined&&(t[m]=e[T]),e[j]!==undefined&&(t[S]=e[j]),t[s]()},_update:function(){var e=this[f];e[i][rt]=fn(this[m],this[S]),e[s]()},serialize:function(){var e=this;return{horizontal:e[m],vertical:e[S]}}},xn[h]={get color(){var e;return this[x]===undefined&&(e=this,e[x]=new gn(function(){e[s]()})),this[x]},set color(e){this[O][r](e)},get offset(){var e;return this[Tt]===undefined&&(e=this,e[Tt]=new cn(null,function(){e[s]()})),this[Tt]},set offset(e){this[wt][r](e)},setProperties:function(e){e[O]!==undefined&&this[O][r](e[O]),e[wt]!==undefined&&this[wt][r](e[wt]),this[s]()},_update:function(){var e=this[Tt],t=this[x],n=this[f][i],r=n[Ut][O];e&&(n[Ut].offsetX=e.x,n[Ut].offsetY=e.y),t&&(r.r=t.r,r.g=t.g,r.b=t.b,r.a=t.a),this[f][s]()},serialize:function(){var e,t=this;return t[x]&&(e||(e={}))&&(e[O]=t[x][u]()),t[Tt]&&(e||(e={}))&&(e[wt]=t[Tt][u]()),e}},Tn[h]={get type(){return this[i][N].type},set type(e){this[i][N].type=e,this[f][s]()},get width(){return this[i][N][g]},set width(e){this[i][N][g]=e,this[f][s]()},get outlineColor(){var e;return this[C]===undefined&&(e=this,e[C]=new gn(function(){e[C][yt]=Y,e[s]()})),this[C]},set outlineColor(e){this[D][r](e)},get lightColor(){var e;return this[_]===undefined&&(e=this,e[_]=new gn(function(){e[_][yt]=Y,e[s]()})),this[_]},set lightColor(e){this[V][r](e)},get darkColor(){var e;return this[B]===undefined&&(e=this,e[B]=new gn(function(){e[B][yt]=Y,e[s]()})),this[B]},set darkColor(e){this[et][r](e)},setProperties:function(e){e.type&&(this.type=e.type),e[g]&&(this[g]=e[g]),e[D]!==undefined&&this[D][r](e[D]),e[V]!==undefined&&this[V][r](e[V]),e[et]!==undefined&&this[et][r](e[et]),e[wt]!==undefined&&this[wt][r](shadow[wt]),this[s]()},_update:function(){var e,t=this,n=t[f][i],r=this[C];r&&r[yt]&&(r[yt]=c,e=n[N][D],e.r=r.r,e.g=r.g,e.b=r.b,e.a=r.a),r=this[_],r&&r[yt]&&(r[yt]=c,e=n[N][V],e.r=r.r,e.g=r.g,e.b=r.b,e.a=r.a),r=this[B],r&&r[yt]&&(r[yt]=c,e=n[N][et],e.r=r.r,e.g=r.g,e.b=r.b,e.a=r.a),this[f][s]()},serialize:function(){var e=this,t={type:e.type,width:e[g]};return e[C]&&(t||(t={}))&&(t[D]=e[C][u]()),e[_]&&(t||(t={}))&&(t[V]=e[_][u]()),e[B]&&(t||(t={}))&&(t[et]=e[B][u]()),t}},Nn[h]={get visible(){return this[i][U][Lt]},set visible(e){this[i][U][Lt]=!!e,this[f][s]()},get position(){return this[i][U][k]},set position(e){this[i][U][k]=e,this[f][s]()},get interval(){return this[i][U][ut]},set interval(e){this[i][U][ut]=e,this[f][s]()},get style(){return this[i][U][un]},set style(e){this[i][U][un]=e,this[f][s]()},get width(){return this[i][U][g]},set width(e){this[i][U][g]=e,this[f][s]()},get color(){var e;return this[x]===undefined&&(e=this,e[x]=new gn(function(){e[x][yt]=Y,e[s]()})),this[x]},set color(e){this[O][r](e)},setProperties:function(e){e[O]!==undefined&&this[O][r](e[O]),e[Lt]!==undefined&&(this[Lt]=e[Lt]),e[k]!==undefined&&(this[k]=e[k]),e[ut]!==undefined&&(this[ut]=e[ut]),e[un]!==undefined&&(this[un]=e[un]),e[g]!==undefined&&(this[g]=e[g]),this[s]()},_update:function(){var e,t=this,n=t[f][i],r=this[x];r&&r[yt]&&(r[yt]=c,e=n[U][O],e.r=r.r,e.g=r.g,e.b=r.b,e.a=r.a),this[f][s]()},serialize:function(){var e=this,t={visible:e[Lt],position:e[k],style:e[un],interval:e[ut],width:e[g]};return e[x]&&(t||(t={}))&&(t[O]=e[x][u]()),t}},Cn[h]={get position(){return this[i][M][k]},set position(e){this[i][k]=e,this[f][s]()},get ellipsis(){return this[i][M][at]},set ellipsis(e){this[i][M][at]=e,this[f][s]()},setProperties:function(e){e[k]!==undefined&&(this[i][M][k]=e[k]),e[at]!==undefined&&(this[i][M][at]=e[at]),this[f][s]()},serialize:function(){var e=this;return{position:e[k],ellipsis:e[at]}}},kn[h]={get direction(){return this[P][qt]},set direction(e){this[P][qt]=e,this[s]()},get align(){return this[L]===undefined&&(this[L]=new Ln(this)),this[L]},set align(e){this[rt][r](e)},setProperties:function(e){var t=this,n=t[s];t[s]=t._noop,e[Qt]!==undefined&&(t[P][qt]=e[Qt]),e[rt]!==undefined&&t[rt][r](e[rt]),t[s]=n,t[s]()},_updateAlign:function(){var e=this;e[P][rt][0]=e[L][T]==st?pt:e[L][T],e[P][rt][1]=e[L][j]==st?St:e[L][j],e[s]()},_update:function(){this[o][qt]=this[P]},_noop:function(){},serialize:function(){var e=this,t={direction:e[Qt]};return e[L]&&(t[rt]=e[L][u]()),t}},Ln[h]={set vertical(e){this[S]=e,this[R][Dt]()},get vertical(){return this[S]||"top"},set horizontal(e){this[m]=e,this[R][Dt]()},get horizontal(){return this[m]||Ot},setProperties:function(e){e[T]!==undefined&&(this[m]=e[T]),e[j]!==undefined&&(this[S]=e[j]),this[R][Dt]()},serialize:function(){var e=this;return{vertical:e[S],horizontal:e[m]}}},e=function(e){var t=this,n=gibbon[Kt][$t](),i,s,o;n.id=t.id,n.textContent=t.textContent,n[r](t[u]()),t[ct]!==undefined&&(n[ct]=t[ct]);if(e)for(s=0,o=t[p][z];s<o;s++)i=t[p][s].clone(e),i[it]=n;return n},t={_x:0,_y:0,_drawOrder:0,_visible:Y,_opacity:1,_stretch:0,_spacing:0,_cache:c,_init:function(){var e=this;e[a]=gibbon.makeWidget(),e[a].cache=e._cache,e[a][Et]=e[ht],e[v]={}},destroy:function(){var e=this[p],t;this[it]=undefined;for(t=e[z];--t>=0;)e[t].destroy();this[lt][z]=0,delete this[lt],delete this[a],delete this[v]},isAncestorOf:function(e){var t=this[p],n;if(t.indexOf(e)!=-1)return Y;for(n=t[z];--n>=0;)if(t[n].isAncestorOf(e))return Y;return c},setProperties:function(e,t){var n=this,i,s,o,u,a,f;for(s in e){i=n[s];if(s!==p)typeof i===Mt&&i[r]?i[r](e[s]):n[s]=e[s];else if(t===undefined||t){a=e[p];for(o=0,u=a[z];o<u;o++)f=gibbon[Kt][$t](a[o],this),f[it]=n}}},get x(){return this._x},set x(e){this._x=e,this[a].x=e},get y(){return this._y},set y(e){this._y=e,this[a].y=e},get renderX(){return this[a].renderX},get renderY(){return this[a].renderY},get width(){return this[y]},set width(e){var t=this[it];this[y]=an(e,t!==undefined?t[g]:gibbon.scene[g]),this[a][g]=this[y]},get height(){return this[d]},set height(e){var t=this[it];this[d]=an(e,t!==undefined?t[w]:gibbon.scene[w]),this[a][w]=this[d]},get renderWidth(){return this[a].renderWidth},get renderHeight(){return this[a].renderHeight},get renderCursor(){return this[a].renderCursor},get renderTextFirstLine(){return this[a].renderTextFirstLine},get renderTextLines(){return this[a].renderTextLines},get renderTextCursorPosition(){return this[a].renderTextCursorPosition},get minSize(){return this[Z]===undefined&&(this[Z]=new hn(this[a],function(e,t){e!==undefined&&(this[o].minWidth=e),t!==undefined&&(this[o].minHeight=t)}),this[Z][y]=undefined,this[Z][d]=undefined),this[Z]},set minSize(e){this.minSize[r](e)},get maxSize(){return this[tt]===undefined&&(this[tt]=new hn(this[a],function(e,t){e!==undefined&&(this[o].maxWidth=e),t!==undefined&&(this[o].maxHeight=t)}),this[tt][y]=undefined,this[tt][d]=undefined),this[tt]},set maxSize(e){this.maxSize[r](e)},get padding(){return this[Ct]===undefined&&(this[Ct]=new mn(this[a])),this[Ct]},set padding(e){this[I][r](e)},get background(){return this[J]===undefined&&(this[J]=new bn(this,this[a].backgroundImage,"backgroundImageLoaded")),this[J]},set background(e){this.background[r](e)},get text(){return this._text===undefined&&(this._text=new En(this[a])),this._text},set text(e){this.text[r](e)},get layout(){return this[P]===undefined&&(this[P]=new kn(this[a])),this[P]},set layout(e){this[qt][r](e)},get transform(){return this[b]===undefined&&(this[b]=new yn(this[a])),this[b]},set transform(e){this[mt][r](e)},get transition(){return this[Q]===undefined&&(this[Q]=new pn(this)),this[Q]},set transition(e){this.transition[r](e)},get drawOrder(){return this[Wt]},set drawOrder(e){this[Wt]=e,this[a].drawOrder=e},get erase(){return this._erase},set erase(e){this._erase=e,this[a].erase=e},get visible(){return this[on]},set visible(e){this[on]=e,this[a].hidden=!e},get opacity(){return this[H]},set opacity(e){this[H]=e,this[a][xt]=e},get stretch(){return this[sn]},set stretch(e){this[sn]=e,this[a].layoutStretch=e},get spacing(){return this[rn]},set spacing(e){this[rn]=e,this[a].layoutSpacing=e},get clip(){return this._clip},set clip(e){this._clip=e,this[a].clip=e},get cache(){return this._cache},set cache(e){this._cache=e,this[a].cache=e},get mirror(){return this[ht]},set mirror(e){this[ht]=e,this[a][Et]=e},get opaque(){return this._opaque},set opaque(e){this._opaque=e,this[a].opaque=e},serialize:function(){var e=this,t={x:e._x,y:e._y,width:e[y],height:e[d],drawOrder:e[Wt],visible:e[on],opacity:e[H],stretch:e[sn],spacing:e[rn],clip:e._clip,cache:e._cache,opaque:e._opaque,mirror:e[ht]};return e[Z]&&(t.minSize=e[Z][u]()),e[tt]&&(t.maxSize=e[tt][u]()),e[Ct]&&(t[I]=e[Ct][u]()),e[F]&&(t[Pt]=e[F][u]()),e[J]&&(t.background=e[J][u]()),e._text&&(t.text=e._text[u]()),e[P]&&(t[qt]=e[P][u]()),e[b]&&(t[mt]=e[b][u]()),e[Q]&&(t.transition=e[Q][u]()),t},loadImage:function(){var e=this[a].image;e&&e.reload()},appendChild:function(e){if(e)return e[it]=this,e},removeChild:function(e){e&&(e[it]=undefined)},removeChildren:function(){var e=this[p];if(e!==undefined)while(e[z]!=0)e[0][it]=undefined},startTransition:function(e,t,n,r,i,s,o){this[a].startAnimation(e,t,n,r,i,s,o)},stopTransition:function(e,t){this[a].stopAnimation(e,t)},getElementById:function(e){var t=this,n,r,i=t[v][e];if(i===undefined)for(n=0,r=t[p][z];n<r;n++){i=t[p][n],i=i[Zt](e);if(i)return i}return i},getElementByProperty:function(e,t){var n=this,r,i,s;for(r=0,i=n[p][z];r<i;r++){s=n[p][r];if(s[e]==t)return s;s=s.getElementByProperty(e,t);if(s)return s}},getElementsByProperty:function(e,t,n){var r=this,i=r[p],s,o,u;n||(n=[]);for(s=0,o=i[z];s<o;s++)u=i[s],u[e]==t&&n.push(u),u.getElementsByProperty(e,t,n);return n},getElementsWithProperty:function(e,t){var n=this,r=n[p],i,s,o;t||(t=[]);for(i=0,s=r[z];i<s;i++)o=r[i],o.hasOwnProperty(e)&&t.push(o),o.getElementsWithProperty(e,t);return t},forEachChild:function(e,t){var n=this[p],r,i,s;if(t)for(r=0,i=n[z];r<i;r++)s=n[r],e(s),s.forEachChild(e,Y);else for(r=0,i=n[z];r<i;r++)e(n[r])},cloneNode:e,clone:e},n={id:{configurable:c,get:function(){return this._id},set:function(e){var t=this,n=t[At];n!==undefined&&(t._id!==undefined&&n[v][t._id]===t&&delete n[v][t._id],e!==undefined&&(n[v][e]=t)),t._id=e,t[a].name=e}},children:{configurable:c,enumerable:c,writeable:c,get:function(){return this[lt]===undefined&&(this[lt]=[]),this[lt]}},style:{configurable:c,get:function(){throw W},set:function(e){throw W}},mutation:{configurable:c,get:function(){return this._mutation},set:function(e){var t=this,n=t[ct]&&t[ct][e],i,s,o,u,a,f,l;t._mutation=e;if(n)for(a in n){o=t[a];if(a===Xt){s=n[Xt];for(u in s)if(u==="*")for(f=0,l=t[p][z];f<l;f++)t[p][f].mutation=s[u];else i=this[Zt](u),i&&(i.mutation=s[u])}else typeof o===Mt?o[r]&&o[r](n[a]):t[a]=n[a]}}},textContent:{configurable:c,get:function(){return this._textContent||""},set:function(e){this._textContent=e,this[a].text=e}},textCursorPosition:{configurable:c,get:function(){return this[a][Rt]},set:function(e){this[a][Rt]=e}},textFirstLine:{configurable:c,get:function(){return this[a][nn]},set:function(e){this[a][nn]=e}},sendRenderProperties:{configurable:c,get:function(){return this[a][jt]},set:function(e){this[a][jt]=e}},imageContent:{configurable:c,set:function(e){util.log.error("Image content set = "+JSON.stringify(e)),this[Pt][r](e)},get:function(){return this[F]===undefined&&(this[F]=new bn(this,this[a].image,Yt)),this[F]}},imageLoaded:{configurable:c,writeable:c,enumerable:c,get:function(){return this[Pt][Yt]}},transitionEnd:{configurable:c,writeable:c,enumerable:c,get:function(){var e=this;return this[gt]===undefined&&(this[gt]=new gibbon[zt](function(t){var n=function(n){n.target=e,t.onNext(n)};return e[a][ot](kt,n),{dispose:function(){e[a][K](kt,n)}}})),this[gt]}},renderPropertyChange:{configurable:c,writeable:c,enumerable:c,get:function(){var e=this;return this[q]===undefined&&(this[q]=new gibbon[zt](function(t){var n=function(n){n.target=e,t.onNext(n)};return e[a][ot](vt,n),{dispose:function(){e[a][K](vt,n)}}})),this[q]}},parent:{configurable:c,enumerable:c,get:function(){return this[At]},set:function(e){var t=this,n=t[At],r;t[At]=e,n!==e&&(n!==undefined&&(r=n[p].indexOf(t),r!=-1&&n[p].splice(r,1),t.id!==undefined&&n[v][t.id]===t&&delete n[v][t.id]),e!==undefined?(e[p]===undefined&&(e[p]=[]),e[p].push(t),t[a][it]=e[a],t.id!==undefined&&e[v][t.id]===undefined&&(e[v][t.id]=t)):t[a][it]=undefined)}}},gibbon[Kt]=Object[$t](t,n),gibbon[Kt][$t]=function(e,t,n){var i=Object[$t](gibbon[Kt]);return i._init(),e&&(i[At]=t,i[r](e,n),i[At]=undefined),i}}(),function(){var e="parseMarkup";gibbon[e]=function(t,n){var r,i,s,o,u,a=[];for(s=0,o=t.length;s<o;s++)r=t[s],i=gibbon.Widget.create(),i._parent=n,i.setProperties(r,!1),i._parent=undefined,i.parent=n,u=r.children,typeof u=="object"&&gibbon[e](u,i),a.push(i);return a},gibbon.createWidgets=function(t){return gibbon[e]([t])[0]}}(),function(e,t){function f(e){var t=f.options,n=t.parser[t.mode].exec(e),r={},i=14;while(i--)r[t.key[i]]=n[i]||"";return r[t.q.name]={},r[t.key[12]].replace(t.q.parser,function(e,n,i){n&&(r[t.q.name][n]=i)}),r}function l(e){this._reset(),t[i]&&t[i][s]&&(t[i][s][o]=e)}var n,r="protocol",i="nrdp",s="gibbon",o="location",u="_uriParts",a="_uri";f.options={key:["source",r,"authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},mode:"loose",parser:{loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n={toString:function(){var e="";return t[i]&&t[i][s]&&(e=t[i][s][o]),e},assign:l,replace:l,reload:function(){this.href+=""},_reset:function(){delete this[u]},get _uri(){return this[u]===undefined&&(this[u]=f(t[i][s][o])),this[u]},get hash(){var e=this[a].anchor;return e?"#"+e:e},get href(){return this+""},set href(e){this.assign(e)},get protocol(){var e=this[a][r];return e=e&&e.length>0?e+":":e,e},get host(){var e=this.port,t=this.hostname;return e?t+":"+e:t},get hostname(){return this[a].host},get origin(){return this[r]+"//"+n.host},get pathname(){return this[a].path},get port(){return this[a].port},get search(){var e=this[a].query;return e.length?"?"+e:e}},Object.defineProperty(e,o,{configurable:!1,get:function(){return n},set:function(e){n.assign(e)}})}(gibbon,this);if(typeof window=="undefined"){function setTimeout(e,t){return nrdp.gibbon.setTimeout(e,t,!0)}function clearTimeout(e){e!==undefined&&nrdp.gibbon.clearTimeout(e)}function setInterval(e,t){return nrdp.gibbon.setTimeout(function(){return e(),t},t,!1)}function clearInterval(e){e!==undefined&&nrdp.gibbon.clearTimeout(e)}this.setTimeout=setTimeout,this.clearTimeout=clearTimeout,this.setInterval=setInterval,this.clearInterval=clearInterval,window={__proto__:this,get innerWidth(){return nrdp.gibbon.scene.width},get innerHeight(){return nrdp.gibbon.scene.height}},XMLHttpRequest=function(){this._id=0,this._eventListeners={},this._readyState=0,this.timeout=3e4,this._responseText="",this._status=0,this._headers={}},XMLHttpRequest.prototype={constructor:XMLHttpRequest,get UNSENT(){return 0},get OPENED(){return 1},get HEADERS_RECEIVED(){return 2},get LOADING(){return 3},get DONE(){return 4},addEventListener:function(e,t){var n="_eventListeners";t&&(this[n][e]||(this[n][e]=[]),this[n][e].push(t))},removeEventListener:function(e,t){var n,r,i="_eventListeners";t&&(n=this[i][e],n&&(r=n.indexOf(t),r>=0&&(n.length==1?delete this[i][e]:this[i][e].splice(r,1))))},_callEventListeners:function(e){var t,n,r,i="toLowerCase",s="_eventListeners";this["on"+e.type[i]()]&&this["on"+e.type[i]()](e);if(this[s][e.type]){t=this[s][e.type].slice(0);for(n=0;n<t.length;n++)r=t[n],r&&r(e)}},_setReadyState:function(e){this._readyState=e,this._callEventListeners({type:"readyStateChange"})},open:function(e,t,n){if(e!="GET")throw"SyntaxError";this._url=t,this._async=n,this._setReadyState(this.OPENED)},setRequestHeader:function(e,t){this._headers[e]=t},_finished:function(e){this._responseText=e,this._setReadyState(this.DONE)},send:function(e){var t;if(e)throw"XMLHTTP send data not supported!!";this.abort(),t=this,this._id=nrdp.gibbon.load({url:this._url,headers:this._headers,async:this._async},function(e){t._finished(e.data)}),this._setReadyState(this.LOADING)},abort:function(){this._id&&(nrdp.gibbon.stopLoad(this._id),this._id=0)},get readyState(){return this._readyState},get responseXML(){return},get responseText(){return this._responseText},get response(){return this.responseText},get responseType(){return"text"},get status(){return this._status}},localStorage={setItem:function(e,t){nrdp.storage.setItem(nrdp.storage.NO_DEVICE_ACCOUNT,e,t)},getItem:function(e){return nrdp.storage.getItem(nrdp.storage.NO_DEVICE_ACCOUNT,e)},removeItem:function(e){nrdp.storage.removeItem(nrdp.storage.NO_DEVICE_ACCOUNT,e)},clear:function(){nrdp.storage.clear()}},sessionStorage={setItem:function(e,t){var n="transientData",r="sessionStorage";if(!nrdp.isReady)return;var i=nrdp.storage[n]||{};i[r]===undefined&&(i[r]={}),i[r][e]=t,nrdp.storage[n]=i},getItem:function(e){var t="sessionStorage";if(!nrdp.isReady)return undefined;var n=nrdp.storage.transientData||{};return n[t]===undefined&&(n[t]={}),n[t][e]},removeItem:function(e){var t="transientData",n="sessionStorage";if(!nrdp.isReady)return;var r=nrdp.storage[t]||{};r[n]===undefined&&(r[n]={}),delete r[n][e],nrdp.storage[t]=r},clear:function(){delete nrdp.storage.transientData}},navigator={userAgent:"Gibbon/nGn"},screen={get width(){return nrdp.gibbon.scene.width},get height(){return nrdp.gibbon.scene.height}},console={_log:function(e,t){nrdp.log[e](t+"")},info:function(e){this._log("info",e)},log:function(e){this._log("debug",e)},error:function(e){this._log("error",e)},warn:function(e){this._log("warn",e)},debug:function(e){this._log("debug",e)}},window.addEventListener=window.removeEventListener=function(){},document={_listeners:{DOMContentLoaded:[],keyup:[],keydown:[]},removeEventListener:function(e,t){var n,r,i="_listeners",s=this[i][e].length,o=e==="keyup"||e==="keydown"?"key":e;for(n=0;n<s;n++){r=this[i][e][n];if(r.orgListener===t){nrdp.gibbon.removeEventListener(o,r.nrdpListener),this[i][e].splice(n,1);break}}},addEventListener:function(){function r(){}function i(e,t){return function(n){var i=n.data;i.type===e&&(i.which=i.keyCode=i.code,i.preventDefault=r,t(i))}}var e="addEventListener",t="_listeners",n={keyup:"release",keydown:"press"};return function(r,s){var o;switch(r){case"DOMContentLoaded":o=s,nrdp.isReady?s():nrdp&&nrdp[e]&&nrdp[e]("init",s);break;case"keyup":case"keydown":o=i(n[r],s),nrdp.gibbon[e]("key",o)}this[t][r]&&this[t][r].push({orgListener:s,nrdpListener:o})}}(),get cookie(){return nrdp.gibbon.cookie},set cookie(e){nrdp.gibbon.cookie=e}},Image=function(){return this._src="",this},Image.prototype={constructor:Image,get src(){return this._src},set src(e){var t=this;t._src=e,setTimeout(function(){t.onload()},5)}}}(function(){var e="gibbon",t="undefined";gibbon.reasons={PENDING:nrdp[e].PENDING,SUCCESS:nrdp[e].SUCCESS,NOT_SECURE_ERROR:nrdp[e].NOT_SECURE_ERROR,FILE_ACCESS_ERROR:nrdp[e].FILE_ACCESS_ERROR,DATA_URI_ERROR:nrdp[e].DATA_URI_ERROR,DNS_ERROR:nrdp[e].DNS_ERROR,CONNECT_ERROR:nrdp[e].CONNECT_ERROR,TIMEOUT_ERROR:nrdp[e].TIMEOUT_ERROR,SSL_HANDSHAKE_ERROR:nrdp[e].SSL_HANDSHAKE_ERROR,SSL_CA_CERT_ERROR:nrdp[e].SSL_CA_CERT_ERROR,SSL_CA_CERT_FILE_ERROR:nrdp[e].SSL_CA_CERT_FILE_ERROR,CERT_STATUS_ERROR:nrdp[e].CERT_STATUS_ERROR,SEND_ERROR:nrdp[e].SEND_ERROR,RECV_ERROR:nrdp[e].RECV_ERROR,NETWORK_ERROR:nrdp[e].NETWORK_ERROR},config=typeof config===t?{}:config,global=typeof global===t?{}:global})(),application=this.application={},util=typeof util=="undefined"?{}:util,function(e){NOOP=e.NOOP=function(){},UNIT=e.UNIT={}}(this),model=typeof model=="undefined"?{}:model,config.debugCodes={startup:{configService:"ui-100",uiLanguageText:"ui-103",nrdp:"ui-104",geoRejected:"ui-105",geoComingSoon:"ui-106",geoUnsupportedNrdp:"ui-107",serverRequest:"ui-108",languages:"ui-109",geolocation:"ui-110",uiExperience:"ui-111",browse:"ui-112",noConnectNoDiagnosis:"ui-113",appConfig:"ui-114",onBoot404:"ui-115",onBoot500:"ui-116",onBootBadJS:"ui-117",onHashCheckFailJS:"ui-120"},appBoot:{standard:"ui-800-",actionId:"ui-801-"},authentication:{currentUser:"ui-200",loginMaxRetries:"ui-201",secureNetflixIdMissing:"ui-202",missingTarget:"ui-203"},payment:{noCreditCardEncryptionKeys:"ui-300",paymentError:"ui-301"},registration:{maxAccounts:"ui-500",network:"ui-501",bind:"ui-502",activate:"ui-503",rendezvous:"ui-504",unsupportedVersion:"ui-505"},merch:{topList:"ui-400"},account:{paymentHold:"ui-600"},player:{NFErr_MC_NCCP_NonRecoverableError:"aip-701",NFErr_MC_NCCP_PotentiallyRecoverableError:"aip-702",NFErr_MC_NCCP_CustomError:"aip-703",NFErr_MC_NCCP_RegistrationRequired:"aip-704",NFErr_MC_NCCP_CTicketRenewalRequired:"aip-705",NFErr_MC_NCCP_MTicketRenewalRequired:"aip-706",NFErr_MC_NCCP_ImpossibleImpossibility:"aip-707",NFErr_MC_NCCP_GetNewCredentials:"aip-708",NFErr_MC_NCCP_UnsupportedVersion:"aip-709",NFErr_MC_NCCP_CustomerCredentialsRenewalRequired:"aip-710a",NFErr_MC_NCCP_CannotObtainNpTicket:"aip-710b",NFErr_MC_NCCP_SecondaryCredentialsRenewalRequired:"aip-710c",NFErr_MC_NCCP_AbortPlayback:"aip-711",NFErr_MC_NCCP_StaleCredentials:"aip-712",NFErr_MC_NCCP_ResetRequired:"aip-713",NFErr_MC_AuthFailure:"tvp-801",NFErr_MC_InitStreamFailure:"tvp-802",NFErr_MC_StreamSetIncomplete:"tvp-803",NFErr_MC_ContentNotAvailable:"tvp-804",NFErr_MC_OpenDeviceFailure:"tvp-805",NFErr_MC_AcquireLicenseFailure:"tvp-806",NFErr_MC_RefuseToPlayNonDrmed:"tvp-810",NFErr_MC_EncodingError:"tvp-811",NFErr_MC_ConnectionFailure:"tvp-830",NFErr_MC_HttpServerError:"tvp-831",NFErr_MC_HttpClientError:"tvp-832",NFErr_MC_NCCP_Exception:"tvp-850",NFErr_MC_DevicePlaybackError:"tvp-851",NFErr_MC_DeviceDecryptionError:"tvp-852",NFErr_MC_SubtitleFailure:"tvp-860",NFErr_MalformedData:"nf-900"}},util.extend=function(){var e,t,n,r=arguments,i=r[0],s=r.length,o=typeof i=="boolean"?i:!1,u=1;o&&(i=r[1],u=2);for(u;u<s;u++){e=r[u];if(e!=null)for(t in e){if(o&&t in i)continue;n=e[t],n!==undefined&&n!==i&&(i[t]=n)}}return i},function(){var e=typeof nrdp=="object"&&nrdp.now;util.Date=function(){var t=e?nrdp.now():Date.now();return new Date(t)},util.Date.now=function(){return e?nrdp.now():Date.now()}}(),util.isObjectLiteral=function(e){return e!==null&&typeof e=="object"&&e.constructor===Object},util.extendDeep=function(){var e,t,n,r,i,s,o,u="isObjectLiteral",a=arguments[0],f=1,l=arguments.length,c=!1;typeof a=="boolean"&&(c=a,a=arguments[1],f=2);for(;f<l;f++)if((e=arguments[f])!=null)for(t in e){if(c&&t in a)continue;o=e.__lookupGetter__(t);if(o)a.__defineGetter__(t,o);else{r=e[t];if(a===r)continue;r!==undefined&&(n=a[t],r&&(util[u](r)||(i=Array.isArray(r)))?(i?(i=!1,s=n&&Array.isArray(n)?n:[]):s=n&&util[u](n)?n:{},a[t]=util.extendDeep(c,s,r)):a[t]=r)}}return a},function(){function u(t,r){return function(){var i,s=t[e];return t[e]=r,i=t[n](this,arguments),t[e]=s,i}}function a(n,i,s){var a,f,l,c,h,p,d="function";s=s||o,p=!!s.extendAll;for(a in i)f=i.__lookupGetter__(a),l=i.__lookupSetter__(a),f||l?(f&&n.__defineGetter__(a,f),l&&n.__defineSetter__(a,l)):(c=i[a],h=n[a],typeof c===d&&typeof h===d&&c!==h?(c[e]!==Function[t][e]&&(c=u(c,h)),c[e]=h):(p||s[a])&&util[r](c)&&util[r](h)&&(c=util.extendDeep({},h,c)),n[a]=c);return n}function f(){var r=Array[t].slice,s=r.call(arguments,1);return this[i]({init:function o(){var t=r.call(arguments,0);o[e][n](this,s.concat(t))}})}function l(e,t){var n=new this(s);return a(n,e,t),h(n)}function c(e,n){return a(this[t],e,n),this}function h(e){var r=function(){var e=this.init;e&&arguments[0]!==s&&e[n](this,arguments)};return e&&(r[t]=e),r[t].constructor=r,r[i]=l,r.bind=f,r.mixin=c,r}var e="base",t="prototype",n="apply",r="isObjectLiteral",i="extend",s={},o={actions:!0};Function[t][e]=function(){},util.Class={create:h,mixin:a,extend:function(e,n){var r=h();return r[t]=new e,r[i](n)}},util.mixin=function(){a[n](null,arguments)}}(),util.Error=util.Class.extend(Error,{init:function(e,t,n,r){e&&(this.message=e),t&&(this.debugCode=t),n&&(this.innerError=n),r&&(this.userMessage=r)},get errorStack(){var e=[],t=this;while(t)e.push(t),t=t.innerError;return e}}),function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G,Y,Z,et,tt,nt,rt,it,st,ot,ut,at,ft,lt,ct,ht,pt,dt,vt,mt,gt,yt,bt="prototype",wt="onCompleted",Et="onError",St="subscribe",xt="disposable",Tt="length",Nt=!1,Ct="isDisposed",kt=!0,Lt="isStopped",At="observers",Ot="dispose",Mt="onNext",_t="scheduleWithRelativeAndState",Dt="items",Pt="call",Ht="constructor",Bt="exception",jt="setDisposable",Ft="observer",It=null,qt="toArray",Rt="scheduleRecursive",Ut="_subscribe",zt="disposables",Wt="getDisposable",Xt="comparer",Vt="function",$t="ensureActive",Jt="_acceptObservable",Kt="value",Qt="createOnCompleted",Gt="scheduler",Yt="multicast",Zt="isEnabled",en="remove",tn="scheduleRecursiveWithState",nn="schedule",rn="isHigherPriority",sn="current",on="catchException",un="_scheduleRelative",an="isPrimaryDisposed",fn="_scheduleAbsolute",ln="createOnError",cn="queue",hn="createOnNext",pn="base",dn="underlyingDisposable",vn="scheduleRecursiveWithRelativeAndState",mn="scheduleRecursiveWithAbsoluteAndState",gn="dueTime",yn="toString",bn="clearTimeout",wn="Internals",En="completed",Sn="scheduleWithState",xn="subject",Tn="accept",Nn="scheduleRelative",Cn="setTimeout",kn="scheduleAbsolute",Ln="scheduleRequired",An="removeAt",On="hasValue",Mn="scheduleWithAbsoluteAndState",_n="mergeObservable",Dn="push",Pn="isCancelled",Hn="hasSubscription",Bn="isInnerDisposed",jn="apply",Fn="compareTo",In="clock",qn="select",Rn="bufferSize",Un="isAcquired",zn="rightObserver",Wn="materialize",Xn="shift",Vn="getEnumerator",$n="normalize",Jn="leftObserver",Kn="enqueue",Qn="underlyingObservable",Gn="connect",Yn="percolate",Zn="fromArray",er="concat",tr="_enqueue",nr="getCurrent",rr="contains",ir="selectMany",sr="onErrorResumeNext",or="hasFaulted",ur="create",ar="windowWithCount",fr="_accept",lr="count",cr="_schedule",hr="moveNext",pr="error",dr=function(){},vr=function(){return(new Date).getTime()},mr=function(e,t){return e===t},gr=function(e){return e},yr=function(e){return e[yn]()},br=Object[bt].hasOwnProperty,wr=function(e,t){function r(){this[Ht]=e}for(var n in t)n!==bt&&br[Pt](t,n)&&(e[n]=t[n]);return r[bt]=t[bt],e[bt]=new r,e[pn]=t[bt],e},Er=function(e,t){for(var n in t)n!==bt&&br[Pt](t,n)&&(e[n]=t[n])},Sr=Array[bt].slice,xr="Argument out of range",Tr="Object has been disposed",Nr=e.Rx={Internals:{}};!e[Cn]&&!e[bn]&&setTimeout&&clearTimeout&&(e[Cn]=setTimeout,e[bn]=clearTimeout),Nr.VERSION="2.0.20327",n=function(e,t){return function(){return e[t][jn](e,arguments)}},r=function(e,t){return lt(function(n){return new p(t[Wt](),e[St](n))})},i=function(e,t,n){return lt(function(r){var i=new g,s=new g,o=n(r,i,s);return i[xt](e[Wn]()[qn](function(e){return{switchValue:function(t){return t(e)}}})[St](o)),s[xt](t[Wn]()[qn](function(e){return{switchValue:function(t,n){return n(e)}}})[St](o)),new p(i,s)})},s=function(e){var t=Object(this);for(var n=0,r=t[Tt]>>>0;n<r;n++)if(!e[Pt](arguments[1],t[n],n,t))return Nt;return kt},o=function(e){var t=[],n,r=Object(this);for(var i=0,s=r[Tt]>>>0;i<s;i++)n=r[i],e[Pt](arguments[1],n,i,r)&&t[Dn](n);return t},u=function(e){var t=[],n=Object(this);for(var r=0,i=n[Tt]>>>0;r<i;r++)t[Dn](e[Pt](arguments[1],n[r],r,n));return t},a=function(e,t){return e[Tt]===1&&e[t]instanceof Array?e[t]:Sr[Pt](e)},f=Nr[wn].List=function(){function e(e){this[Xt]=e||mr,this[Tt]=0,this[Dt]=[]}return e[Zn]=function(t,n){var r=new e(n);return r[Dt]=t.slice(),r[Tt]=t[Tt],r},e[bt].add=function(e){this[Dt][this[Tt]++]=e},e[bt][An]=function(e){if(e<0||e>=this[Tt])throw Error(xr);this[Dt].splice(e,1),this[Tt]--},e[bt].indexOf=function(e){for(var t=0,n=this[Dt][Tt];t<n;t++)if(this[Xt](e,this[Dt][t]))return t;return-1},e[bt][en]=function(e){var t=this.indexOf(e);return t===-1?Nt:(this[An](t),kt)},e[bt].clear=function(){this[Dt]=[],this[Tt]=0},e[bt].item=function(e,n){if(e<0||e>=count)throw Error(xr);if(n===t)return this[Dt][e];this[Dt][e]=n},e[bt][qt]=function(){return this[Dt].slice(0)},e[bt][rr]=function(e){for(var t=0,n=this[Dt][Tt];t<n;t++)if(this[Xt](e,this[Dt][t]))return kt;return Nt},e}(),l=function(e,t,n,r,i){var s=i;while(s>0)n[s+r-1]=e[s+t-1],s--},c=function(){function e(e,t){this.id=e,this[Kt]=t}return e[bt][Fn]=function(e){var t=this[Kt][Fn](e[Kt]);return t===0&&(t=this.id-e.id),t},e}(),h=function(){function e(e){this[Dt]=Array(e),this[Tt]=0}return e[bt][rn]=function(e,t){return this[Dt][e][Fn](this[Dt][t])<0},e[bt][Yn]=function(e){var t,n;if(e>=this[Tt]||e<0)return;t=e-1>>1;if(t<0||t===e)return;this[rn](e,t)&&(n=this[Dt][e],this[Dt][e]=this[Dt][t],this[Dt][t]=n,this[Yn](t))},e[bt].heapify=function(e){var n,r,i,s;e===t&&(e=0);if(e>=this[Tt]||e<0)return;r=2*e+1,i=2*e+2,n=e,r<this[Tt]&&this[rn](r,n)&&(n=r),i<this[Tt]&&this[rn](i,n)&&(n=i),n!==e&&(s=this[Dt][e],this[Dt][e]=this[Dt][n],this[Dt][n]=s,this.heapify(n))},e[bt].peek=function(){return this[Dt][0][Kt]},e[bt][An]=function(e){var t;this[Dt][e]=this[Dt][--this[Tt]],delete this[Dt][this[Tt]],this.heapify(),this[Tt]<this[Dt][Tt]>>2&&(t=this[Dt],this[Dt]=Array(this[Dt][Tt]>>1),l(t,0,this[Dt],0,this[Tt]))},e[bt].dequeue=function(){var e=this.peek();return this[An](0),e},e[bt][Kn]=function(t){var n,r;this[Tt]>=this[Dt][Tt]&&(r=this[Dt],this[Dt]=Array(this[Dt][Tt]*2),l(r,0,this[Dt],0,r[Tt])),n=this[Tt]++,this[Dt][n]=new c(e[lr]++,t),this[Yn](n)},e[bt][en]=function(e){for(var t=0;t<this[Tt];t++)if(this[Dt][t][Kt]===e)return this[An](t),kt;return Nt},e[lr]=0,e}(),p=Nr.CompositeDisposable=function(){function e(){var e=a(arguments,0);this[zt]=f[Zn](e),this[Ct]=Nt,this[Tt]=this[zt][Tt]}return e[bt].add=function(e){this[Ct]?e[Ot]():(this[zt].add(e),this[Tt]++)},e[bt][en]=function(e){var t=Nt;return this[Ct]||(t=this[zt][en](e),this[Tt]--),t&&e[Ot](),t},e[bt][Ot]=function(){var e;this[Ct]||(this[Ct]=kt,e=this[zt][qt](),this[zt].clear(),this[Tt]=0);if(e)for(var t=0,n=e[Tt];t<n;t++)e[t][Ot]()},e[bt].clear=function(){var e=this[zt][qt]();this[zt].clear(),this[Tt]=0;for(var t=0,n=e[Tt];t<n;t++)e[t][Ot]()},e[bt][rr]=function(e){return this[zt][rr](e)},e[bt][qt]=function(){return this[zt][qt]()},e}(),d=Nr.Disposable=function(){function e(e){this[Ct]=Nt,this.action=e}return e[bt][Ot]=function(){this[Ct]||(this.action(),this[Ct]=kt)},e}(),v=d[ur]=function(e){return new d(e)},m=d.empty=new d(function(){}),g=Nr.SingleAssignmentDisposable=function(){function e(){this[Ct]=Nt,this[sn]=It}return e[bt][xt]=function(e){return e?this[jt](e):this[Wt]()},e[bt][Wt]=function(){return this[sn]},e[bt][jt]=function(e){if(this[sn]!==It)throw Error("Disposable has already been assigned");var t=this[Ct];t||(this[sn]=e),t&&e!==It&&e[Ot]()},e[bt][Ot]=function(){var e=It;this[Ct]||(this[Ct]=kt,e=this[sn],this[sn]=It),e!==It&&e[Ot]()},e}(),y=Nr.SerialDisposable=function(){function e(){this[Ct]=Nt,this[sn]=It}return e[bt][Wt]=function(){return this[sn]},e[bt][jt]=function(e){var t=this[Ct],n=It;t||(n=this[sn],this[sn]=e),n!==It&&n[Ot](),t&&e!==It&&e[Ot]()},e[bt][xt]=function(e){if(!e)return this[Wt]();this[jt](e)},e[bt][Ot]=function(){var e=It;this[Ct]||(this[Ct]=kt,e=this[sn],this[sn]=It),e!==It&&e[Ot]()},e}(),b=Nr.RefCountDisposable=function(){function e(e){this[dn]=e,this[Ct]=Nt,this[an]=Nt,this[lr]=0}e[bt][Ot]=function(){this[Ct]||this[an]||(this[an]=kt,this[lr]===0&&(this[Ct]=kt,this[dn][Ot]()))},e[bt][Wt]=function(){return this[Ct]?m:new t(this)};var t=function(){function e(e){this[xt]=e,this[xt][lr]++,this[Bn]=Nt}return e[bt][Ot]=function(){this[xt][Ct]||this[Bn]||(this[Bn]=kt,this[xt][lr]--,this[xt][lr]===0&&this[xt][an]&&(this[xt][Ct]=kt,this[xt][dn][Ot]()))},e}();return e}(),w=function(){function e(e,t){this[Gt]=e,this[xt]=t,this[Ct]=Nt}return e[bt][Ot]=function(){var e=this;this[Gt][nn](function(){e[Ct]||(e[Ct]=kt,e[xt][Ot]())})},e}(),E=function(){function e(e,t,n,r,i){this[Gt]=e,this.state=t,this.action=n,this[gn]=r,this[Xt]=i||function(e,t){return e-t},this[xt]=new g}return e[bt].invoke=function(){return this[xt][xt](this.invokeCore())},e[bt][Fn]=function(e){return this[Xt](this[gn],e[gn])},e[bt][Pn]=function(){return this[xt][Ct]},e[bt].invokeCore=function(){return this.action(this[Gt],this.state)},e}(),S=Nr.Scheduler=function(){function e(e,t,n,r){this.now=e,this[cr]=t,this[un]=n,this[fn]=r}var t=function(e,t){var n=t.first,r=t.second,i=new p,s=function(t){r(t,function(t){var n=Nt,r=Nt,o=e[Sn](t,function(e,t){return n?i[en](o):r=kt,s(t),m});r||(i.add(o),n=kt)})};return s(n),i},n=function(e,t){var n=t.first,r=t.second,i=new p,s=function(t){r(t,function(t,n){var r,o,u;o=Nt,u=Nt,r=e[_t](t,n,function(e,t){return o?i[en](r):u=kt,s(t),m}),u||(i.add(r),o=kt)})};return s(n),i},r=function(e,t){var n=t.first,r=t.second,i=new p,s=function(t){r(t,function(t,n){var r=Nt,o=Nt,u=e[Mn](t,n,function(e,t){return r?i[en](u):o=kt,s(t),m});o||(i.add(u),r=kt)})};return s(n),i},i=function(e,t){return t(),m};return e[bt][nn]=function(e){return this[cr](e,i)},e[bt][Sn]=function(e,t){return this[cr](e,t)},e[bt].scheduleWithRelative=function(e,t){return this[un](t,e,i)},e[bt][_t]=function(e,t,n){return this[un](e,t,n)},e[bt].scheduleWithAbsolute=function(e,t){return this[fn](t,e,i)},e[bt][Mn]=function(e,t,n){return this[fn](e,t,n)},e[bt][Rt]=function(e){return this[tn](e,function(e,t){e(function(){t(e)})})},e[bt][tn]=function(e,n){return this[Sn]({first:e,second:n},function(e,n){return t(e,n)})},e[bt].scheduleRecursiveWithRelative=function(e,t){return this[vn](t,e,function(e,t){e(function(n){t(e,n)})})},e[bt][vn]=function(e,t,r){return this[un]({first:e,second:r},t,function(e,t){return n(e,t)})},e[bt].scheduleRecursiveWithAbsolute=function(e,t){return this[mn](t,e,function(e,t){e(function(n){t(e,n)})})},e[bt][mn]=function(e,t,n){return this[fn]({first:e,second:n},t,function(e,t){return r(e,t)})},e.now=vr,e[$n]=function(e){return e<0&&(e=0),e},e}(),x=function(){function e(){var t=this;e[pn][Ht][Pt](this,vr,function(e,n){return n(t,e)},function(e,n,r){while(S[$n](n)>0);return r(t,e)},function(e,n,r){return t[_t](e,n-t.now(),r)})}return wr(e,S),e}(),T=S.Immediate=new x,N=function(){function e(){C[cn]=new h(4)}return e[bt][Ot]=function(){C[cn]=It},e[bt].run=function(){var e,t=C[cn];while(t[Tt]>0){e=t.dequeue();if(!e[Pn]()){while(e[gn]-S.now()>0);e[Pn]()||e.invoke()}}},e}(),C=function(){function e(){var t=this;e[pn][Ht][Pt](this,vr,function(e,n){return t[_t](e,0,n)},function(n,r,i){var s=t.now()+S[$n](r),o=e[cn],u=new E(t,n,i,s),a;if(o===It){a=new N;try{e[cn][Kn](u),a.run()}finally{a[Ot]()}}else o[Kn](u);return u[xt]},function(e,n,r){return t[_t](e,n-t.now(),r)})}return wr(e,S),e[bt][Ln]=function(){return e[cn]===It},e[bt].ensureTrampoline=function(e){return this[Ln]()?this[nn](e):e()},e[cn]=It,e}(),k=S.CurrentThread=new C,Nr.VirtualTimeScheduler=function(){function e(t,n){var r=this;this[In]=t,this[Xt]=n,this[Zt]=Nt,e[pn][Ht][Pt](this,function(){return r.toDateTimeOffset(r[In])},function(e,t){return r[kn](e,r[In],t)},function(e,t,n){return r[Nn](e,r.toRelative(t),n)},function(e,t,n){return r[Nn](e,r.toRelative(t-r.now()),n)}),this[cn]=new h(1024)}return wr(e,S),e[bt][Nn]=function(e,t,n){var r=this.add(this[In],t);return this[kn](e,r,n)},e[bt].start=function(){var e;if(!this[Zt]){this[Zt]=kt;do e=this.getNext(),e!==It?(this[Xt](e[gn],this[In])>0&&(this[In]=e[gn]),e.invoke()):this[Zt]=Nt;while(this[Zt])}},e[bt].stop=function(){return this[Zt]=Nt},e[bt].advanceTo=function(e){var t;if(this[Xt](this[In],e)>=0)throw Error(xr);if(!this[Zt]){this[Zt]=kt;do t=this.getNext(),t===It||this[Xt](t[gn],e)>0?this[Zt]=Nt:(this[Xt](t[gn],this[In])>0&&(this[In]=t[gn]),t.invoke());while(this[Zt]);return this[In]=e}},e[bt].advanceBy=function(e){var t=this.add(this[In],e);if(this[Xt](this[In],t)<0)return this.advanceTo(t);throw Error(xr)},e[bt].getNext=function(){var e;while(this[cn][Tt]>0){e=this[cn].peek();if(!e[Pn]())return e;this[cn].dequeue()}return It},e[bt][kn]=function(e,t,n){var r=this,i=function(e,t){return r[cn][en](s),n(e,t)},s=new E(r,e,i,t,r[Xt]);return r[cn][Kn](s),s[xt]},e}(),L=function(){function t(n){var r=this;t[pn][Ht][Pt](this,vr,function(t,i){var s=new g,o=e[Cn](function(){s[jt](i(r,t))},n||0);return new p(s,v(function(){e[bn](o)}))},function(t,n,i){var s=new g,o=S[$n](n),u=e[Cn](function(){s[jt](i(r,t))},o);return new p(s,v(function(){e[bn](u)}))},function(e,t,n){return r[_t](e,t-r.now(),n)})}return wr(t,S),t}(),A=S.Timeout=new L,Nr.TimeoutScheduler=L,O=Nr.Notification=function(){function e(){}return e[bt][Tn]=function(e,t,n){return arguments[Tt]>1||typeof e===Vt?this[fr](e,t,n):this[Jt](e)},e[bt].toObservable=function(e){var t=this;return e=e||S.Immediate,lt(function(n){return e[nn](function(){t[Jt](n),t.kind==="N"&&n[wt]()})})},e[bt][On]=Nt,e[bt].equals=function(e){var n=e===t||e===It?"":e[yn]();return this[yn]()===n},e}(),O[hn]=function(e){var t=new O;return t[Kt]=e,t[On]=kt,t.kind="N",t[fr]=function(e){return e(this[Kt])},t[Jt]=function(e){return e[Mt](this[Kt])},t[yn]=function(){return"OnNext("+this[Kt]+")"},t},O[ln]=function(e){var t=new O;return t[Bt]=e,t.kind="E",t[fr]=function(e,t){return t(this[Bt])},t[Jt]=function(e){return e[Et](this[Bt])},t[yn]=function(){return"OnError("+this[Bt]+")"},t},O[Qt]=function(){var e=new O;return e.kind="C",e[fr]=function(e,t,n){return n()},e[Jt]=function(e){return e[wt]()},e[yn]=function(){return"OnCompleted()"},e},M=Nr[wn].Enumerator=function(e,t,n){this[hr]=e,this[nr]=t,this[Ot]=n},_=M[ur]=function(e,t,n){var r=Nt;return n||(n=dr),new M(function(){if(r)return Nt;var t=e();return t||(r=kt,n()),t},function(){return t()},function(){r||(n(),r=kt)})},D=Nr[wn].Enumerable=function(e){this[Vn]=e},P=D[bt],P[er]=function(){var e=this;return lt(function(t){var n=e[Vn](),r=Nt,i=new y,s=T[Rt](function(e){var s,o,u,a=Nt;if(!!r)return;try{a=n[hr](),a?s=n[nr]():n[Ot]()}catch(f){u=f,n[Ot]()}if(u){t[Et](u);return}if(!a){t[wt]();return}o=new g,i[xt](o),o[xt](s[St](function(e){t[Mt](e)},function(e){t[Et](e)},function(){e()}))});return new p(i,s,v(function(){r=kt,n[Ot]()}))})},P[on]=function(){var e=this;return lt(function(t){var n,r=e[Vn](),i=Nt,s=new y,o=T[Rt](function(e){var o,u,a,f=Nt;if(!!i)return;try{f=r[hr](),f&&(o=r[nr]())}catch(l){a=l}if(a){t[Et](a);return}if(!f){n?t[Et](n):t[wt]();return}u=new g,s[xt](u),u[xt](o[St](function(e){t[Mt](e)},function(t){n=t,e()},function(){t[wt]()}))});return new p(s,o,v(function(){i=kt}))})},H=D.repeat=function(e,n){return n===t&&(n=-1),new D(function(){var t,r=n;return _(function(){return r===0?Nt:(r>0&&r--,t=e,kt)},function(){return t})})},B=D.forEach=function(e,t){return t||(t=gr),new D(function(){var n,r=-1;return _(function(){return++r<e[Tt]?(n=t(e[r],r),kt):Nt},function(){return n})})},j=Nr.Observer=function(){},F=Nr[wn].AbstractObserver=function(){function e(){this[Lt]=Nt}return wr(e,j),e[bt][Mt]=function(e){this[Lt]||this.next(e)},e[bt][Et]=function(e){this[Lt]||(this[Lt]=kt,this[pr](e))},e[bt][wt]=function(){this[Lt]||(this[Lt]=kt,this[En]())},e[bt][Ot]=function(){this[Lt]=kt},e}(),I=function(){function e(t,n,r){e[pn][Ht][Pt](this),this._onNext=t,this._onError=n,this._onCompleted=r}return wr(e,F),e[bt].next=function(e){this._onNext(e)},e[bt][pr]=function(e){this._onError(e)},e[bt][En]=function(){this._onCompleted()},e}(),q=Nr[wn].BinaryObserver=function(){function e(e,t){typeof e===Vt&&typeof t===Vt?(this[Jn]=W(e),this[zn]=W(t)):(this[Jn]=e,this[zn]=t)}return wr(e,j),e[bt][Mt]=function(e){var t=this;return e.switchValue(function(e){return e[Tn](t[Jn])},function(e){return e[Tn](t[zn])})},e[bt][Et]=function(){},e[bt][wt]=function(){},e}(),R=function(){function e(e,t){this[Gt]=e,this[Ft]=t,this[Un]=Nt,this[or]=Nt,this[cn]=[],this[xt]=new y}return wr(e,F),e[bt][$t]=function(){var e=Nt,t=this;!this[or]&&this[cn][Tt]>0&&(e=!this[Un],this[Un]=kt),e&&this[xt][xt](this[Gt][Rt](function(e){var n;if(t[cn][Tt]<=0){t[Un]=Nt;return}n=t[cn][Xn]();try{n()}catch(r){throw t[cn]=[],t[or]=kt,r}e()}))},e[bt].next=function(e){var t=this;this[cn][Dn](function(){t[Ft][Mt](e)})},e[bt][pr]=function(e){var t=this;this[cn][Dn](function(){t[Ft][Et](e)})},e[bt][En]=function(){var e=this;this[cn][Dn](function(){e[Ft][wt]()})},e[bt][Ot]=function(){e[pn][Ot][Pt](this),this[xt][Ot]()},e}(),U=j[ur]=function(e,t,n){return e||(e=dr),t||(t=function(e){throw e}),n||(n=dr),new I(e,t,n)},z=j.fromNotifier=function(e){return new I(function(t){return e(O[hn](t))},function(t){return e(O[ln](t))},function(){return e(O[Qt]())})},W=function(e){return new I(function(t){e(O[hn](t))},function(t){e(O[ln](t))},function(){e(O[Qt]())})},j[bt].toNotifier=function(){var e=this;return function(t){return t[Tn](e)}},j[bt].asObserver=function(){var e=this;return new I(function(t){return e[Mt](t)},function(t){return e[Et](t)},function(){return e[wt]()})},X=Nr.Observable=function(){function e(){}return e[bt][St]=function(e,t,n){var r;return arguments[Tt]===0||arguments[Tt]>1||typeof e===Vt?r=U(e,t,n):r=e,this[Ut](r)},e}(),V=X[bt],$=function(){function e(t){e[pn][Ht][Pt](this),this[Ut]=function(e){var n=new J(e);return k[Ln]()?k[nn](function(){n[xt](t(n))}):n[xt](t(n)),n}}return wr(e,X),e[bt][Ut]=function(e){return this[Ut](e)},e}(),J=function(){function e(t){e[pn][Ht][Pt](this),this[Ft]=t,this.m=new g}return wr(e,F),e[bt][xt]=function(e){return this.m[xt](e)},e[bt].next=function(e){this[Ft][Mt](e)},e[bt][pr]=function(e){this[Ft][Et](e),this.m[Ot]()},e[bt][En]=function(){this[Ft][wt](),this.m[Ot]()},e[bt][Ot]=function(){e[pn][Ot][Pt](this),this.m[Ot]()},e}(),K=function(){function e(t,n,r){e[pn][Ht][Pt](this),this.key=t,this[Qn]=r?lt(function(e){return new p(r[Wt](),n[St](e))}):n}return wr(e,X),e[bt][Ut]=function(e){return this[Qn][St](e)},e}(),Q=Nr.ConnectableObservable=function(){function e(e,t){var n={subject:t,source:e.asObservable(),hasSubscription:Nt,subscription:It};this[Gn]=function(){return n[Hn]||(n[Hn]=kt,n.subscription=new p(n.source[St](n[xn]),v(function(){n[Hn]=Nt}))),n.subscription},this[Ut]=function(e){return n[xn][St](e)}}return wr(e,X),e[bt][Gn]=function(){return this[Gn]()},e[bt].refCount=function(){var e=It,t=0,n=this;return lt(function(r){var i,s;return t++,i=t===1,s=n[St](r),i&&(e=n[Gn]()),v(function(){s[Ot](),t--,t===0&&e[Ot]()})})},e[bt][Ut]=function(e){return this[Ut](e)},e}(),G=function(){function e(e,t){this[xn]=e,this[Ft]=t}return e[bt][Ot]=function(){!this[xn][Ct]&&this[Ft]!==It&&(this[xn][At][en](this[Ft]),this[Ft]=It)},e}(),Y=Nr.Subject=function(){function e(){e[pn][Ht][Pt](this),this[Ct]=Nt,this[Lt]=Nt,this[At]=new f}wr(e,X),Er(e,j);var t=function(){if(this[Ct])throw Error(Tr)};return e[bt][wt]=function(){var e;t[Pt](this),this[Lt]||(e=this[At][qt](),this[At]=new f,this[Lt]=kt);if(e)for(var n=0,r=e[Tt];n<r;n++)e[n][wt]()},e[bt][Et]=function(e){var n;t[Pt](this),this[Lt]||(n=this[At][qt](),this[At]=new f,this[Lt]=kt,this[Bt]=e);if(n)for(var r=0,i=n[Tt];r<i;r++)n[r][Et](e)},e[bt][Mt]=function(e){var n;t[Pt](this),this[Lt]||(n=this[At][qt]());if(n)for(var r=0,i=n[Tt];r<i;r++)n[r][Mt](e)},e[bt][Ut]=function(e){return t[Pt](this),this[Lt]?this[Bt]?(e[Et](this[Bt]),m):(e[wt](),m):(this[At].add(e),new G(this,e))},e[bt][Ot]=function(){this[Ct]=kt,this[At]=It},e[ur]=function(e,t){return new nt(e,t)},e}(),Z=Nr.AsyncSubject=function(){function e(){e[pn][Ht][Pt](this),this[Ct]=Nt,this[Lt]=Nt,this[Kt]=It,this[On]=Nt,this[At]=new f,this[Bt]=It}wr(e,X),Er(e,j);var t=function(){if(this[Ct])throw Error(Tr)};return e[bt][wt]=function(){var e=Nt,n,r,i,s,o;t[Pt](this),this[Lt]||(r=this[At][qt](),this[At]=new f,this[Lt]=kt,i=this[Kt],e=this[On]);if(r)if(e)for(s=0,o=r[Tt];s<o;s++)n=r[s],n[Mt](i),n[wt]();else for(s=0,o=r[Tt];s<o;s++)r[s][wt]()},e[bt][Et]=function(e){var n;t[Pt](this),this[Lt]||(n=this[At][qt](),this[At]=new f,this[Lt]=kt,this[Bt]=e);if(n)for(var r=0,i=n[Tt];r<i;r++)n[r][Et](e)},e[bt][Mt]=function(e){t[Pt](this),this[Lt]||(this[Kt]=e,this[On]=kt)},e[bt][Ut]=function(e){var n,r,i;return t[Pt](this),this[Lt]?(n=this[Bt],r=this[On],i=this[Kt],n?e[Et](n):r?(e[Mt](i),e[wt]()):e[wt](),m):(this[At].add(e),new G(this,e))},e[bt][Ot]=function(){this[Ct]=kt,this[At]=It,this[Bt]=It,this[Kt]=It},e}(),et=Nr.BehaviorSubject=function(){function e(t){e[pn][Ht][Pt](this),this[Kt]=t,this[At]=new f,this[Ct]=Nt,this[Lt]=Nt,this[Bt]=It}wr(e,X),Er(e,j);var t=function(){if(this[Ct])throw Error(Tr)};return e[bt][wt]=function(){var e;t[Pt](this),this[Lt]||(e=this[At][qt](),this[At]=new f,this[Lt]=kt);if(e)for(var n=0,r=e[Tt];n<r;n++)e[n][wt]()},e[bt][Et]=function(e){var n;t[Pt](this),this[Lt]||(n=this[At][qt](),this[At]=new f,this[Lt]=kt,this[Bt]=e);if(n)for(var r=0,i=n[Tt];r<i;r++)n[r][Et](e)},e[bt][Mt]=function(e){var n;t[Pt](this),this[Lt]||(this[Kt]=e,n=this[At][qt]());if(n)for(var r=0,i=n[Tt];r<i;r++)n[r][Mt](e)},e[bt][Ut]=function(e){var n;return t[Pt](this),this[Lt]?(n=this[Bt],n?e[Et](n):e[wt](),m):(this[At].add(e),e[Mt](this[Kt]),new G(this,e))},e[bt][Ot]=function(){this[Ct]=kt,this[At]=It,this[Kt]=It,this[Bt]=It},e}(),tt=Nr.ReplaySubject=function(){function e(e,n,r){this[Rn]=e===t?Number.MAX_VALUE:e,this.window=n===t?Number.MAX_VALUE:n,this[Gt]=r||k,this.q=[],this[At]=new f,this[Lt]=Nt,this[Ct]=Nt}wr(e,X),Er(e,X);var n=function(){if(this[Ct])throw Error(Tr)};e[bt]._trim=function(e){var t=this[Lt]?1:0,n=t+this[Rn];n<this[Rn]&&(n=this[Rn]);while(this.q[Tt]>n)this.q[Xn]();while(this.q[Tt]>t&&e-this.q[0].timestamp>this.window)this.q[Xn]()},e[bt][tr]=function(e){var t=this[Gt].now(),n={value:e,timestamp:t};this.q[Dn](n),this._trim(t)},e[bt][Mt]=function(e){var t,r,i,s;n[Pt](this);if(!this[Lt]){t=this[At][qt](),this[tr](O[hn](e));for(i=0,s=t[Tt];i<s;i++)r=t[i],r[Mt](e)}if(t)for(i=0,s=t[Tt];i<s;i++)r=t[i],r[$t]()},e[bt][Et]=function(e){var t,r,i;n[Pt](this);if(!this[Lt]){this[Lt]=kt,this[tr](O[ln](e)),t=this[At][qt]();for(r=0,i=t[Tt];r<i;r++)t[r][Et](e);this[At]=new f}if(t)for(r=0,i=t[Tt];r<i;r++)t[r][$t]()},e[bt][wt]=function(){var e,t,r;n[Pt](this);if(!this[Lt]){this[Lt]=kt,this[tr](O[Qt]()),e=this[At][qt]();for(t=0,r=e[Tt];t<r;t++)e[t][wt]();this[At]=new f}if(e)for(t=0,r=e[Tt];t<r;t++)e[t][$t]()},e[bt][Ut]=function(e){var t=new R(this[Gt],e),i=new r(this,t);n[Pt](this),this._trim(this[Gt].now()),this[At].add(t);for(var s=0,o=this.q[Tt];s<o;s++)this.q[s][Kt][Tn](t);return t[$t](),i},e[bt][Ot]=function(){this[Ct]=kt,this[At]=It};var r=function(){function e(e,t){this[xn]=e,this[Ft]=t}return e[bt][Ot]=function(){this[Ft][Ot](),this[xn][Ct]||this[xn][At][en](this[Ft])},e}();return e}(),nt=function(){function e(e,t){this[Ft]=e,this.observable=t}return wr(e,X),Er(e,j),e[bt][wt]=function(){return this[Ft][wt]()},e[bt][Et]=function(e){return this[Ft][Et](e)},e[bt][Mt]=function(e){return this[Ft][Mt](e)},e[bt][Ut]=function(e){return this.observable[St](e)},e}(),X.start=function(e,t,n,r){return n||(n=[]),rt(e,r)[jn](t,n)},rt=X.toAsync=function(e,t){return t||(t=A),function(){var n=new Z,r=function(){var t;try{t=e[jn](this,arguments)}catch(r){n[Et](r);return}n[Mt](t),n[wt]()},i=Sr[Pt](arguments),s=this;return t[nn](function(){r[jn](s,i)}),n}},V[Yt]=function(e,t){var n=this;return typeof e===Vt?lt(function(r){var i=n[Yt](e());return new p(t(i)[St](r),i[Gn]())}):new Q(n,e)},V.publish=function(e){return e?this[Yt](function(){return new Y},e):this[Yt](new Y)},V.publishLast=function(e){return e?this[Yt](function(){return new Z},e):this[Yt](new Z)},V.replay=function(e,t,n,r){return!e||e===It?this[Yt](new tt(t,n,r)):this[Yt](function(){return new tt(t,n,r)},e)},V.publishValue=function(e,t){return typeof e===Vt?this[Yt](function(){return new et(t)},e):this[Yt](new et(e))},it=X.never=function(){return lt(function(){return m})},st=X.empty=function(e){return e||(e=T),lt(function(t){return e[nn](function(){t[wt]()})})},ot=X.returnValue=function(e,t){return t||(t=T),lt(function(n){return t[nn](function(){n[Mt](e),n[wt]()})})},ut=X.throwException=function(e,t){return t||(t=T),lt(function(n){return t[nn](function(){n[Et](e)})})},X.generate=function(e,t,n,r,i){return i||(i=k),lt(function(s){var o=kt,u=e;return i[Rt](function(e){var i,a;try{o?o=Nt:u=n(u),i=t(u),i&&(a=r(u))}catch(f){s[Et](f);return}i?(s[Mt](a),e()):s[wt]()})})},at=X.defer=function(e){return lt(function(t){var n;try{n=e()}catch(r){return ut(r)[St](t)}return n[St](t)})},X.using=function(e,t){return lt(function(n){var r,i,s=m;try{r=e(),r!==It&&(s=r),i=t(r)}catch(o){return new p(ut(o)[St](n),s)}return new p(i[St](n),s)})},ft=X[Zn]=function(e,t){return t||(t=k),lt(function(n){var r=0;return t[Rt](function(t){r<e[Tt]?(n[Mt](e[r++]),t()):n[wt]()})})},lt=X.createWithDisposable=function(e){return new $(e)},X[ur]=function(e){return lt(function(t){return v(e(t))})},X.range=function(e,t,n){return n||(n=k),lt(function(r){return n[tn](0,function(n,i){n<t?(r[Mt](e+n),i(n+1)):r[wt]()})})},V.repeat=function(e){return H(this,e)[er]()},V.retry=function(e){return H(this,e)[on]()},X.repeat=function(e,n,r){return r||(r=k),n===t&&(n=-1),ot(e,r).repeat(n)},V[qn]=function(e){var t=this;return lt(function(r){var i=0;return t[St](function(t){var n;try{n=e(t,i++)}catch(s){r[Et](s);return}r[Mt](n)},n(r,Et),n(r,wt))})},V.where=function(e){var t=this;return lt(function(r){var i=0;return t[St](function(t){var n;try{n=e(t,i++)}catch(s){r[Et](s);return}n&&r[Mt](t)},n(r,Et),n(r,wt))})},V.groupByUntil=function(e,n,r,i){var s=this;return n||(n=gr),i||(i=yr),lt(function(o){var u={},a=new p,f=new b(a);return a.add(s[St](function(s){var l,c,h,p,d,v,m,y,b,w,E;try{m=e(s),y=i(m)}catch(S){for(E in u)u[E][Et](S);o[Et](S);return}d=Nt;try{w=u[y],w||(w=new Y,u[y]=w,d=kt)}catch(S){for(E in u)u[E][Et](S);o[Et](S);return}if(d){v=new K(m,w,f),c=new K(m,w);try{l=r(c)}catch(S){for(E in u)u[E][Et](S);o[Et](S);return}o[Mt](v),b=new g,a.add(b),p=function(){u[y]!==t&&(delete u[y],w[wt]()),a[en](b)},b[xt](l.take(1)[St](function(){},function(e){for(E in u)u[E][Et](e);o[Et](e)},function(){p()}))}try{h=n(s)}catch(S){for(E in u)u[E][Et](S);o[Et](S);return}w[Mt](h)},function(e){var t;for(t in u)u[t][Et](e);o[Et](e)},function(){var e;for(e in u)u[e][wt]();o[wt]()})),f})},V.groupBy=function(e,t,n){return this.groupByUntil(e,t,function(){return it()},n)},V.take=function(e,t){var r;if(e<0)throw Error(xr);return e===0?st(t):(r=this,lt(function(t){var i=e;return r[St](function(e){i>0&&(i--,t[Mt](e),i===0&&t[wt]())},n(t,Et),n(t,wt))}))},V.skip=function(e){var t;if(e<0)throw Error(xr);return t=this,lt(function(r){var i=e;return t[St](function(e){i>0?i--:r[Mt](e)},n(r,Et),n(r,wt))})},V.takeWhile=function(e){var t=this;return lt(function(r){var i=0,s=kt;return t[St](function(t){if(s){try{s=e(t,i++)}catch(n){r[Et](n);return}s?r[Mt](t):r[wt]()}},n(r,Et),n(r,wt))})},V.skipWhile=function(e){var t=this;return lt(function(r){var i=0,s=Nt;return t[St](function(t){if(!s)try{s=!e(t,i++)}catch(n){r[Et](n);return}s&&r[Mt](t)},n(r,Et),n(r,wt))})},V[ir]=function(e,t){return t?this[ir](function(n){return e(n)[qn](function(e){return t(n,e)})}):typeof e===Vt?ct[Pt](this,e):ct[Pt](this,function(){return e})},ct=function(e){return this[qn](e)[_n]()},ht="Sequence contains no elements.",V.finalValue=function(){var e=this;return lt(function(t){var n,r=Nt;return e[St](function(e){r=kt,n=e},function(e){t[Et](e)},function(){r?(t[Mt](n),t[wt]()):t[Et](Error(ht))})})},V[qt]=function(){var e=function(e,t){return e[Dn](t),e};return this.scan([],e).startWith([]).finalValue()},V[Wn]=function(){var e=this;return lt(function(t){return e[St](function(e){t[Mt](O[hn](e))},function(e){t[Mt](O[ln](e)),t[wt]()},function(){t[Mt](O[Qt]()),t[wt]()})})},V.dematerialize=function(){var e=this;return lt(function(t){return e[St](function(e){return e[Tn](t)},n(t,Et),n(t,wt))})},V.asObservable=function(){var e=this;return lt(function(t){return e[St](t)})},V[ar]=function(e,n){var i=this;if(e>0){n===t&&(n=e);if(n>0)return lt(function(t){var s=new g,o=new b(s),u=0,a=[],f=function(){var e=new Y;a[Dn](e),t[Mt](r(e,o))};return f(),s[xt](i[St](function(t){var r,i,s;for(i=0;i<a[Tt];i++)a[i][Mt](t);r=u-e+1,r>=0&&r%n===0&&(s=a[Xn](),s[wt]()),u++,u%n===0&&f()},function(e){while(a[Tt]>0)a[Xn]()[Et](e);t[Et](e)},function(){while(a[Tt]>0)a[Xn]()[wt]();t[wt]()})),o});throw Error(xr)}throw Error(xr)},V.bufferWithCount=function(e,n){return n===t&&(n=e),this[ar](e,n)[ir](function(e){return e[qt]()}).where(function(e){return e[Tt]>0})},V.startWith=function(){var e,t,n=0;return arguments[Tt]>0&&arguments[0]!==It&&arguments[0].now!==undefined?(t=arguments[0],n=1):t=T,e=Sr[Pt](arguments,n),B([ft(e,t),this])[er]()},V.scan=function(){var e,t,n,r=Nt;return arguments[Tt]===2?(e=arguments[0],t=arguments[1],r=kt):t=arguments[0],n=this,at(function(){var i,s=Nt;return n[qn](function(n){return s?i=t(i,n):(i=r?t(e,n):n,s=kt),i})})},V.distinctUntilChanged=function(e,t){var r=this;return e||(e=gr),t||(t=mr),lt(function(i){var s,o=Nt;return r[St](function(n){var r,u=Nt;try{r=e(n)}catch(a){i[Et](a);return}if(o)try{u=t(s,r)}catch(a){i[Et](a);return}if(!o||!u)o=kt,s=r,i[Mt](n)},n(i,Et),n(i,wt))})},V.finallyAction=function(e){var t=this;return lt(function(n){var r=t[St](n);return v(function(){try{r[Ot]()}finally{e()}})})},V.doAction=function(e,t,n){var r,i=this;return typeof e===Vt?r=e:(r=function(t){e[Mt](t)},t=function(t){e[Et](t)},n=function(){e[wt]()}),lt(function(e){return i[St](function(t){try{r(t)}catch(n){e[Et](n)}e[Mt](t)},function(n){if(!t)e[Et](n);else{try{t(n)}catch(r){e[Et](r)}e[Et](n)}},function(){if(!n)e[wt]();else{try{n()}catch(t){e[Et](t)}e[wt]()}})})},V.skipLast=function(e){var t=this;return lt(function(r){var i=[];return t[St](function(t){i[Dn](t),i[Tt]>e&&r[Mt](i[Xn]())},n(r,Et),n(r,wt))})},V.takeLast=function(e){var t=this;return lt(function(r){var i=[];return t[St](function(t){i[Dn](t),i[Tt]>e&&i[Xn]()},n(r,Et),function(){while(i[Tt]>0)r[Mt](i[Xn]());r[wt]()})})},V.ignoreElements=function(){var e=this;return lt(function(t){return e[St](dr,n(t,Et),n(t,wt))})},V.elementAt=function(e){var t;if(e<0)throw Error(xr);return t=this,lt(function(r){var i=e;return t[St](function(e){i===0&&(r[Mt](e),r[wt]()),i--},n(r,Et),function(){r[Et](Error(xr))})})},V.elementAtOrDefault=function(e,r){var i=this;if(e<0)throw Error(xr);return r===t&&(r=It),lt(function(t){var s=e;return i[St](function(e){s===0&&(t[Mt](e),t[wt]()),s--},n(t,Et),function(){t[Mt](r),t[wt]()})})},V.defaultIfEmpty=function(e){var r=this;return e===t&&(e=It),lt(function(t){var i=Nt;return r[St](function(e){i=kt,t[Mt](e)},n(t,Et),function(){i||t[Mt](e),t[wt]()})})},V.distinct=function(e,t){var r=this;return e||(e=gr),t||(t=yr),lt(function(i){var s={};return r[St](function(n){var r,o,u,a=Nt;try{r=e(n),o=t(r)}catch(f){i[Et](f);return}for(u in s)if(o===u){a=kt;break}a||(s[o]=It,i[Mt](n))},n(i,Et),n(i,wt))})},V[_n]=function(){var e=this;return lt(function(t){var n=new p,r=Nt,i=new g;return n.add(i),i[xt](e[St](function(e){var i=new g;n.add(i),i[xt](e[St](function(e){t[Mt](e)},function(e){t[Et](e)},function(){n[en](i),r&&n[Tt]===1&&t[wt]()}))},function(e){t[Et](e)},function(){r=kt,n[Tt]===1&&t[wt]()})),n})},V.merge=function(e){var t;return typeof e!="number"?X.merge(this,e):(t=this,lt(function(r){var i=0,s=new p,o=Nt,u=[],a=function(e){var t=new g;s.add(t),t[xt](e[St](function(e){r[Mt](e)},function(e){r[Et](e)},function(){var e;s[en](t),u[Tt]>0?(e=u[Xn](),a(e)):(i--,o&&i===0&&r[wt]())}))};return s.add(t[St](function(t){i<e?(i++,a(t)):u[Dn](t)},n(r,Et),function(){o=kt,i===0&&r[wt]()})),s}))},V.switchLatest=function(){var e=this;return lt(function(t){var r=Nt,i=new y,s=Nt,o=0,u=e[St](function(e){var n=new g,u=++o;return r=kt,i[xt](n),n[xt](e[St](function(e){o===u&&t[Mt](e)},function(e){o===u&&t[Et](e)},function(){o===u&&(r=Nt,s&&t[wt]())}))},n(t,Et),function(){s=kt,r||t[wt]()});return new p(u,i)})},X.merge=function(){var e,t;return arguments[0]?arguments[0].now?(e=arguments[0],t=Sr[Pt](arguments,1)):(e=T,t=Sr[Pt](arguments,0)):(e=T,t=Sr[Pt](arguments,1)),t[0]instanceof Array&&(t=t[0]),ft(t,e)[_n]()},pt=function(e,t,n){var r=Sr[Pt](n,0);return r.unshift(e),t[jn](e,r)},V[er]=function(){return pt(this,dt,arguments)},V.concatObservable=function(){return this.merge(1)},dt=X[er]=function(){var e=a(arguments,0);return B(e)[er]()},V[on]=function(e){return typeof e===Vt?vt(this,e):mt([this,e])},vt=function(e,t){return lt(function(r){var i=new g,s=new y;return i[xt](e[St](n(r,Mt),function(e){var n,i;try{i=t(e)}catch(o){r[Et](o);return}n=new g,s[xt](n),n[xt](i[St](r))},n(r,wt))),s})},mt=X[on]=function(){var e=a(arguments,0);return B(e)[on]()},V[sr]=function(e){if(!e)throw Error("Second observable is required");return gt([this,e])},gt=X[sr]=function(){var e=a(arguments,0);return lt(function(t){var r=0,i=new y,s=T[Rt](function(s){var o,u;r<e[Tt]?(o=e[r++],u=new g,i[xt](u),u[xt](o[St](n(t,Mt),function(){s()},function(){s()}))):t[wt]()});return new p(i,s)})},V.combineLatest=function(){var e=this,t=Sr[Pt](arguments),r=t.pop();return t.unshift(this),lt(function(i){var u,a=t[Tt],f=Array(a),l=Nt,c=Array(a),h=Array(a),d=function(t){var n;f[t]=kt;if(l||(l=s[Pt](f,gr))){try{n=r[jn](e,h)}catch(u){i[Et](u);return}i[Mt](n)}else s[Pt](o[Pt](c,function(e,n){return n!==t}),gr)&&i[wt]()},v=function(e){c[e]=kt,s[Pt](c,gr)&&i[wt]()},m=Array(a);for(u=0;u<a;u++)(function(e){m[e]=new g,m[e][jt](t[e][St](function(t){h[e]=t,d(e)},n(i,Et),function(){v(e)}))})(u);return new p(m)})},V.zip=function(){var e=this,t=Sr[Pt](arguments),r=t.pop();return t.unshift(e),lt(function(i){var a,f,l=t[Tt],c=Array(l),h=Array(l),d=function(t){var n,a;if(s[Pt](c,function(e){return e&&e[Tt]>0})){try{a=u[Pt](c,function(e){return e[Xn]()}),n=r[jn](e,a)}catch(f){i[Et](f);return}i[Mt](n)}else s[Pt](o[Pt](h,function(e,n){return n!==t}),gr)&&i[wt]()},m=function(e){h[e]=kt,s[Pt](h,gr)&&i[wt]()},y=Array(l);for(a=0;a<l;a++)(function(e){y[e]=new g,y[e][jt](t[e][St](function(t){c[e]||(c[e]=[]),c[e][Dn](t),d(e)},n(i,Et),function(){m(e)}))})(a);return f=new p(y),f.add(v(function(){var e;for(e=0;e<l;e++)c[e]=It})),f})},V.takeUntil=function(e){var t=this;return i(e,t,function(e,t){var n=Nt,r=Nt;return new q(function(t){!r&&!n&&(t.kind==="C"?n=kt:t.kind==="E"?(n=kt,r=kt,e[Et](t[Bt])):(r=kt,e[wt]()))},function(n){r||(n[Tn](e),r=n.kind!=="N",r&&t[Ot]())})})},V.skipUntil=function(e){return i(this,e,function(e,t,n){var r=Nt,i=Nt;return new q(function(t){t.kind=="E"?e[Et](t[Bt]):r&&t[Tn](e)},function(t){i||(t.kind==="N"?r=kt:t.kind==="E"&&e[Et](t[Bt]),i=kt,n[Ot]())})})},X.amb=function(){var e,t,n=it(),r=a(arguments,0),i=function(e,t){return e.amb(t)};for(e=0,t=r[Tt];e<t;e++)n=i(n,r[e]);return n},V.amb=function(e){return i(this,e,function(e,t,n){var r="N";return new q(function(t){r==="N"&&(r="L",n[Ot]()),r==="L"&&t[Tn](e)},function(n){r==="N"&&(r="R",t[Ot]()),r==="R"&&n[Tn](e)})})},yt=function(e){function t(){t[pn][Ht][jn](this,arguments)}return wr(t,e),t[bt].next=function(e){t[pn].next[Pt](this,e),this[$t]()},t[bt][pr]=function(e){t[pn][pr][Pt](this,e),this[$t]()},t[bt][En]=function(){t[pn][En][Pt](this),this[$t]()},t}(R),V.observeOn=function(e){var t=this;return lt(function(n){return t[St](new yt(e,n))})},V.subscribeOn=function(e){var t=this;return lt(function(n){var r=new g,i=new y;return i[jt](r),r[jt](e[nn](function(){i[jt](new w(e,t[St](n)))})),i})}}(this),function(e,t){var n,r="undefined",i="subscribe",s="onError",o="onNext",u="onCompleted",a="aggregate",f="finalValue",l="select",c="length",h=r!==typeof e.module&&r!==typeof e.module.exports?e.require("./rx.min.js"):e.Rx,p=h.Observable,d=p.prototype,v=p.createWithDisposable,m=h.CompositeDisposable,g=function(e,t){return e===t},y=function(e){return e},b=function(e,t){return e>t?1:e===t?0:-1},w=function(e,t,n){return v(function(r){var a=!1,f=null,l=[];return e[i](function(e){var i,o;try{o=t(e)}catch(u){r[s](u);return}i=0;if(a)try{i=n(o,f)}catch(c){r[s](c);return}else a=!0,f=o;0<i&&(f=o,l=[]),0<=i&&l.push(e)},function(e){r[s](e)},function(){r[o](l),r[u]()})})};d[a]=function(e,t){return this.scan(e,t).startWith(e)[f]()},d.aggregate1=function(e){return this.scan1(e)[f]()},d.any=function(e){var n=this;return e!==t?n.where(e).any():v(function(e){return n[i](function(){e[o](!0),e[u]()},function(t){e[s](t)},function(){e[o](!1),e[u]()})})},d.all=function(e){return this.where(function(t){return!e(t)}).any()[l](function(e){return!e})},d.contains=function(e,t){return t||(t=g),this.where(function(n){return t(n,e)}).any()},d.count=function(){return this[a](0,function(e){return e+1})},d.sum=function(){return this[a](0,function(e,t){return e+t})},d.minBy=function(e,t){return t||(t=b),w(this,e,function(e,n){return-1*t(e,n)})},n=function(e){if(0==e[c])throw Error("Sequence contains no elements.");return e[0]},d.min=function(e){return this.minBy(y,e)[l](function(e){return n(e)})},d.maxBy=function(e,t){return t||(t=b),w(this,e,t)},d.max=function(e){return this.maxBy(y,e)[l](function(e){return n(e)})},d.average=function(){return this.scan({sum:0,count:0},function(e,t){return{sum:e.sum+t,count:e.count+1}})[f]()[l](function(e){return e.sum/e.count})},d.sequenceEqual=function(e,t){var n=this;return t||(t=g),v(function(r){var a=!1,f=!1,l=[],h=[],p=n[i](function(e){var n,i;if(0<h[c]){i=h.shift();try{n=t(i,e)}catch(a){r[s](a);return}n||(r[o](!1),r[u]())}else f?(r[o](!1),r[u]()):l.push(e)},function(e){r[s](e)},function(){a=!0,0===l[c]&&(0<h[c]?(r[o](!1),r[u]()):f&&(r[o](!0),r[u]()))}),d=e[i](function(e){var n,i;if(0<l[c]){i=l.shift();try{n=t(i,e)}catch(f){r[s](f);return}n||(r[o](!1),r[u]())}else a?(r[o](!1),r[u]()):h.push(e)},function(e){r[s](e)},function(){f=!0,0===h[c]&&(0<l[c]?(r[o](!1),r[u]()):a&&(r[o](!0),r[u]()))});return new m(p,d)})}}(this),Rx=this.Rx,model.AppConfig={loaded:new Rx.ReplaySubject,setModel:function(e){this._setModelOrError(e)},error:function(e){this._setModelOrError(null,e)},_setModelOrError:function(e,t){var n,r,i,s=this.loaded,o=!0,u=!e;util.storage.setJSON(localStorage,"config",""),u&&(o=!1,e=this._loadFromStorage(),u=!e);if(!u){for(i in e)try{e[i]=JSON.parse(e[i])}catch(a){}n=Boolean(e.user),o&&(r=e.clockTime,e.timeOffset=r?r*1e3-util.Date.now():0),util.extend(this,e),this.fromUser=n,o&&n&&util.storage.setJSON(localStorage,"appconfig",e),s.onNext(this),s.onCompleted()}else s.onError(new util.Error("App config model empty",config.debugCodes.startup.appConfig,t))},_loadFromStorage:function(){var e,t=util.storage.getJSON(localStorage,"appconfig");return t&&(t.data&&(t=t.data),t.user===webapi.ApiSession.userId&&(e=t)),e}},devicebridge=this.devicebridge={},util.NameValuePairParser=util.Class.create({init:function(e,t,n,r){this.delimiters=[t,e],this._encode=n,this._decode=r},get:function(e,t,n){var r,i,s,o,u="length",a=this.indexOf(e,t);return a!==-1?(i=this.delimiters,s=this._decode,a+=t[u]+i[1][u],r=e.indexOf(i[0],a),o=e.substring(a,r!==-1?r:e[u]),s&&(o=s(o))):o=n!==undefined?n:null,o},has:function(e,t){return this.indexOf(e,t)!==-1},indexOf:function(e,t){var n,r,i,s,o,u;if(e){r=this.delimiters,i=r[0],s=i.length,n=e.indexOf(t+r[1]);while(n>0&&!u){u=!0;for(o=1;o<=s;o++)if(e[n-o]!==i[s-o]){n=e.indexOf(t+r[1],n+1),u=!1;break}}}else n=-1;return n},add:function(e,t,n){var r=this.delimiters,i=this._encode;return i&&(n=i(n)),e&&(e+=r[0]),e+t+r[1]+n},remove:function(e,t){var n,r,i,s,o=this.indexOf(e,t);return o!==-1&&(n=this.delimiters[0],r=e.indexOf(n,o),o>0?(i=e.substr(0,o-1),s=0):(i="",s=n.length),r!==-1&&(i+=e.substring(r+s)),e=i),e},getMap:function(e){var t,n,r,i,s,o,u,a={};if(e){t=this.delimiters,e=e.split(t[0]),i=t[1],n=this._decode,r=Boolean(n);for(s=0,o=e.length;s<o;s++)u=e[s].split(i),a[u[0]]=u.length>1?r?n(u[1]):u[1]:""}return a}}),util.NameValuePair=util.Class.create({init:function(e,t,n,r,i,s){this._parser=new util.NameValuePairParser(e,t,i,s),this._allowDuplicates=r||!1,this.pairs=n||""},toString:function(){return this.pairs},has:function(e){return this._parser.indexOf(this.pairs,e)!==-1},get:function(e,t){return this._parser.get(this.pairs,e,t)},add:function(e,t){return this._allowDuplicates||this.remove(e),this.pairs=this._parser.add(this.pairs,e,t),this},addAll:function(e){var t;for(t in e)this.add(t,e[t]);return this},remove:function(e){return this.pairs=this._parser.remove(this.pairs,e),this},getMap:function(){return this._parser.getMap(this.pairs)}}),util.UrlParams=util.NameValuePair.extend({init:function init(e,t,n){var r="indexOf",i=encodeURIComponent,s=decodeURIComponent;e&&!n&&(e[r]("#")!==-1&&(e=e.split("#"),this._hash=e[1],e=e[0]),e[r]("?")!==-1?(e=e.split("?"),this.baseUrl=e.shift(),e=e.join("?")):e[r]("=")===-1&&(this.baseUrl=e,e=null)),init.base.call(this,"=","&",e,t,i,s)},getParams:function(){return this.pairs},getBoolean:function(e){var t=this.get(e);return t==="true"?!0:!1},getNumber:function(e){return parseInt(this.get(e),10)},toString:function toString(){var e=toString.base.call(this),t=this.baseUrl||"",n=this._hash;return e&&(t&&(t+="?"),t+=e),n&&(t+="#"+n),t}}),util.Class.mixin(util,{get location(){return gibbon.location},set location(e){gibbon.location=e}}),util.CurrentUrlParams=new util.UrlParams(util.location.href),config.environment={},function(){var e="webapiGlobalRouting",t="true",n="api-global.netflix.com",r=config.environment;r.type="prod",r.urlProtocol="https",r.cookieShopperId="NetflixShopperId",r.cookieShopperSecret="NetflixShopperSecret",r.cookieNetflixId="NetflixId",r.cookieNetflixIdSecure="SecureNetflixId",r.cookieVisitorId="VisitorId",r[e]="13.3".indexOf("3.0")!==0,r.webapiHostRewrite=t===t,r.webapiConfigAppName="htmltvui",r.webapiLoginUrl="",r.webapiListsTimeout=parseInt("10000",10),r.ecomApiHost=n,r.ecomDuxHost="signup.netflix.com",r.nmBeaconsHost="nmtracking.netflix.com",r.creditCardEncryptionKeyCDN="ncds.netflix.com/v1/2/current",r.webapiHost=r[e]?n:"api.netflix.com",r.pathEvaluator="innovation/projects/BIEPv2/",r.pathEvaluatorRevision="",r.presentationTrackingHost="presentationtracking.netflix.com",r.customer_events_host="customerevents.netflix.com",r.clientLoggingServer="https://ichnaea.netflix.com/log"}(),function(){var e="urlProtocol",t="ntsUser",n=!1,r=config.environment,i=util.CurrentUrlParams;config.isDebugBuild=n,config.nrdpVersion="13.3",config[e]=n&&i.get(e)||r[e],config.urlGetLimit=2e3,config.uiBootUrl="://uiboot.netflix.com/apps/gibbontvui/upgrade_policy",config.isPaladin2Enabled=i.has("isPaladin2"),config[t]=i.get(t),config._wwwHostBase="signup.netflix.com",config._wwwHost=n&&i.get("wwwHost"),config.idleReloadTimeout=n&&parseInt(i.get("reloadTimeout"),10)||288e5,config.appRefreshThreshold=6e4,config.screensaverTimeout=n&&parseInt(i.get("saverTimeout"),10)||12e5,config.rapidKeyDelay=275,config.determinatePressHoldTime=80,config.rapidOffAxisThreshold=150,config.stuckKeyDelay=100,config.uiCardShowDelay=parseInt("500",10),config.uiVersion="20150514112537",config.uiBestResolution="720p",config.uiName="lruderrorpage",config.uiAppName="htmltvui",config.startupDone=!1}(),config.__defineGetter__("wwwHost",function(){return this._wwwHost||this._wwwHostBase}),function(e){function l(){f.onNext(),f.onCompleted()}var t,n,r,i="init",s="removeEventListener",o="fatalerror",u="addEventListener",a="nativeTransport",f=new Rx.ReplaySubject;if(typeof nrdp!="undefined"&&nrdp[i]){t=util.CurrentUrlParams;function c(e){nrdp[s](o,c),f.onError(new util.Error("NRDP init fatalerror",config.debugCodes.startup.nrdp,e))}nrdp.isReady?nrdp.js?nrdp.js[i](l):l():(nrdp[u](o,c),nrdp[u](i,function(){nrdp[s](i,arguments.callee),nrdp[s](o,c),nrdp.js?nrdp.js[i](l):l()}),n=config.isDebugBuild&&t.get("nbpdHost")||"http://localcontrol.netflix.com/",r=t.has(a)?JSON.parse(t.get(a)):undefined,nrdp[i](n,r))}else l();e.nrdpInited=f}(devicebridge),state=typeof state=="undefined"?{}:state,util.describeObject=function(e){var t,n,r=[],i=arguments.callee;for(t in e)n=e[t],r.push(t+": "+(typeof n=="object"?i(n):n));return"{ "+r.join(", ")+" }"},state.Context={_PROPERTIES:["uiContext","movieIndex","listIndex","trackId","trackUrl","playData","uiContextData"],get listIndices(){return this._getAllOccurrences(state.activeState.parentState,"listIndex",!0,[])},get uiContext(){return this._getTopOccurrence(state.rootState,"uiContext",!0)},get movieIndex(){return this._getTopOccurrence(state.rootState,"movieIndex",!0)},get characterId(){return this._getTopOccurrence(state.rootState,"characterId",!0)},get videoId(){return this._getTopOccurrence(state.rootState,"videoId",!0)},get listIndex(){return this._getTopOccurrence(state.rootState,"listIndex",!0)},get trackId(){return this._getTopOccurrence(state.rootState,"trackId",!0)},get trackUrl(){return this._getTopOccurrence(state.rootState,"trackUrl",!0)},get playData(){return this._getTopOccurrence(state.rootState,"playData",!0)},get uiContextData(){return this._getTopOccurrence(state.rootState,"uiContextData",!0)},get apiRequestId(){return this._getTopOccurrence(state.rootState,"apiRequestId",!0)},get uiContextPath(){return this._getPathOfOccurances(state.rootState,"uiContext",[]).join("/")},toString:function(){var e,t,n,r=this._PROPERTIES,i=[];for(e=0,t=r.length;e<t;e++)n=r[e],i.push(n+" = "+this[n]);return i.join(", ")},_getTopOccurrence:function(e,t){var n,r,i,s,o;if(!e)return undefined;n=e.stack,r=n.length;for(i=r-1;i>=0;i--){o=n[i];if(o instanceof state.ICompoundState){s=this._getTopOccurrence(o,t);if(s!==undefined)return s}if(o.providesContext){s=o[t];if(s!==undefined)return s}}return undefined},_getAllOccurrences:function(e,t,n,r){var i,s,o,u,a,f="providesContext",l=e;while(!l.isRoot&&n)l=l.parentState;i=l.stack,s=i.length;for(o=0;o<s;o++)a=i[o],a instanceof state.ICompoundState&&this._getAllOccurrences(a,t,!1,r),a[f]&&(u=a[t],u!=undefined&&r.push(u));return l[f]&&n&&(u=l[t],u!=undefined&&r.push(u)),r},_getPathOfOccurances:function(e,t,n){var r,i,s,o;e.providesContext&&(i=e[t])&&i!=null&&n.push(i);if(e instanceof state.ICompoundState){r=e.stack,o=r.length;if(o)for(s=0;s<o;s++)this._getPathOfOccurances(r[s],t,n)}return n}},function(){var e;Array.slice||(e=Array.prototype.slice,Array.slice=function(t,n,r){return r==null?e.call(t,n):e.call(t,n,r)}),Array.without||(Array.without=function(e,t){var n,r=e.length,i=[],s=0;for(s;s<r;s++)n=e[s],n!==t&&i.push(n);return i})}(),typeof Function.prototype.bind!="function"&&Object.defineProperty(Function.prototype,"bind",{enumerable:!1,value:function(e){var t=Array.prototype.slice,n=t.call(arguments,1),r=this;return function(){return r.apply(e,n.concat(t.call(arguments)))}}}),netflix=this.netflix={},function(){var e="slice",t="prototype",n=function(){};typeof console=="undefined"&&(console={log:n,info:n,warn:n,debug:n,error:n}),console.log.bind?netflix.console={log:function(){console.log(arguments)},info:function(){console.info(arguments)},warn:function(){console.warn(arguments)},debug:function(){console.debug(arguments)},error:function(){console.error(arguments)}}:netflix.console={log:function(){console.log(Array[t][e](arguments))},info:function(){console.info(Array[t][e](arguments))},warn:function(){console.warn(Array[t][e](arguments))},debug:function(){console.debug(Array[t][e](arguments))}}}(),util.isObjectOrArray=function(e){return e&&typeof e=="object"},util.makeShallowCopy=function(e){var t,n;if(Array.isArray(e)){t=[];for(n in e)t[n]=e[n];t.length=e.length}else if(e&&typeof e=="object"){t=Object.create(e.__proto__);for(n in e)t[n]=e[n]}else t=e;return t},function(e){function o(e,i){var u,a,f,l,c,h,p=i.arrAncestorObjects,d=i.valueToReplaceCyclesWith,v=i.maxIterationCount;if(!n(e))return e;if(e instanceof r)return{type:"Widget",id:e._id,name:e._name,path:e._path};if(p.indexOf(e)>-1)return d;u=e,a=!1,p.push(e);for(f in e){++i[s];if(i[s]>v)throw"Exceeded max iteration count of "+v;l=e[f];if(!n(l))continue;p.indexOf(l)>-1?(c=d,h=!0):(c=o(l,i),h=l!==c),h&&(a||(u=t(e),a=!0),u[f]=c)}return p.pop(),u}function u(e,t){var n,r,i=Array.isArray(e)?[]:{},s=0;t=t||100;for(n in e){++s;if(s>t)break;r=e[n],Array.isArray(r)?i[n]="(Array)":r&&typeof r=="object"?i[n]="(Object)":i[n]=r}return i}function a(e,t){var n=u(t),r=JSON.stringify(n);return Error("util.removeCycles: "+e+" for object: "+r)}var t,n,r,i="removeCycles",s="iterationCount";if(e[i])return;t=util.makeShallowCopy,n=util.isObjectOrArray,r=nrdp&&nrdp.gibbon&&nrdp.gibbon.Widget||function(){},e[i]=function(e,t,n){var r,i={arrAncestorObjects:[],iterationCount:0,valueToReplaceCyclesWith:t,maxIterationCount:n||1e4};try{return o(e,i)}catch(s){throw r=a(s,e),util.log.error(r.message),r}}}(util),function(e){var t="stringify";if(e[t])return;e[t]=function(e,n){return JSON[t](util.removeCycles(e),null,n)}}(util),function(e){function L(e){var t;try{t=util.stringify(e)}catch(n){t=e.toString?e+"":"Unknown object"}return t&&t[S]>p&&(t=t.slice(0,c)+"...snip..."+t.slice(-h)),t}function A(e,t){o[x](function(n,r){var i,u,a;s[w](n)===-1&&(e[n]?t[n]=function(){for(i=0,u=arguments[S];i<u;i++)a=arguments[i],typeof a=="object"&&(a=L(a)),e[n](a)}:t[n]=t[o[r-1]])})}function O(e,t,n){var s={};t[r]=function(e){s[e]||(s[e]=Date.now())},t[i]=function(t){var r=s[t];r&&(delete s[t],r=Date.now()-r,e[n](t+": "+r+"ms"))}}function M(e){var t=l+e,n=o[w](e)<a?u:e;return function(){var e,r,i,s=devicebridge&&devicebridge.Adapter,o=s&&s.device,u=o&&o[T]&&o[T][N]&&o[T][N].nrdapp,a=o&&o.getUIVersion();for(e=0,r=arguments[S];e<r;e++)i=arguments[e],typeof i=="string"&&(i={message:i}),i=util.extend({event:t,sdk_version:u,ui_version:a,ui_context:state.Context.uiContext},i),nrdp.log[n](L(i))}}function _(){function h(e){var t=m[e];return function(n){var r=t[n];return r&&(c[e]=r.toLowerCase()),r}}var n,r,u,a={},l=!!y,c={};f.some(h(C)),f.some(h(k)),n=c[C],r=o[w](n),u=o[w](c[k]),o[x](function(e,n){var o,f;if(n>=r)if(l&&n>=u){f=e===i;if(f||s[w](e)===-1)o=y(e),f&&(O({debug:o},g,t),o=g[e])}else o=g[e];a[e]=o||NOOP}),e.log=a}var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b="error",w="indexOf",E="config",S="length",x="forEach",T="SDKVersion",N="components",C="local",k="remote";if(e.log)return;t="debug",n=b,r="time",i="timeEnd",s=[r,i,"group","groupEnd"],o=[t].concat(s,["info","warn",n,"fatal"]),u=n,a=o[w](u),f=["url","nrdp",E,"code"],l="ui-",c=2e3,h=2e3,p=c+h,d=util.CurrentUrlParams,v=window.navigator?/win\d{2}|mac\w{3,5}/i.test(window.navigator.platform):!1,m={local:{code:b,url:d.get("logLevel")},remote:{code:b,url:d.get("remoteLogLevel")}},g={},console&&(A(console,g),s[x](function(e){var t=console[e];t&&(t=t.bind(console)),g[e]=t||NOOP})),console&&console[r]&&console[i]||O(g,g,t),_(),model.AppConfig.loaded.subscribe(function(e){var t=e.log_level_local,n=e.log_level_remote;if(t||n)m[C][E]=t,m[k][E]=n,_()},NOOP),devicebridge.nrdpInited.subscribe(function(){var e,n=window.nrdp&&nrdp.log;n&&(e=n&&n.traceAreas,e&&e[w]("UI_SCRIPT")!==-1&&(m[C].nrdp=t),v||(A(n,g),O(g,g,t),y=M),_())},NOOP)}(util),netflix.console.log=util.log.debug,["error","warn","info"].forEach(function(e){netflix.console[e]=util.log[e]}),util.makeEnum=function(){var e,t={},n=0,r=arguments.length;for(;n<r;n++)e=arguments[n],t[e]=e;return t},util.arrayToMapSelector=function(e,t,n){var r,i,s,o={};for(i=0,s=e.length;i<s;i++)r=e[i],o[t?t(r):r]=n?n(r):r;return o},application.BindingsContainer=util.Class.create({Type:util.makeEnum("CLASS","FACTORY","POOL","SINGLETON"),init:function(e){this.bindings=e,this._boundGet=this.get.bind(this)},setIfUnique:function(e,t){var n=!(e in this.bindings);return n&&this.set(e,t),n},set:function(e,t){this.bindings[e]=t},has:function(e){var t,n,r=this.bindings;return Boolean(r&&(t=r[e])&&(n=t.value))},get:function(e){var t,n,r,i,s="_cachedValue",o=null,u=this.bindings;if(u&&(t=u[e])&&(n=t.value)){r=Array.slice(arguments,1),i=this.Type;switch(t.type){case undefined:return t[s]||(t[s]=n(this._resolveDependencies(t.dependsOn))),t[s];case i.CLASS:return this._applyCtor(n,r);case i.FACTORY:return n.make.apply(n,r);case i.POOL:return r.unshift(o),n.borrow.apply(n,r);case i.SINGLETON:return n;default:return o}}return o},release:function(e,t){var n,r=this.bindings;r&&(n=r[e])&&n.type===this.Type.POOL&&n.value.release(t)},_resolveDependencies:function(e){var t,n,r;if(!Array.isArray(e)){t={};for(n in e)r=e[n],t[n]=typeof r=="string"?this.get(r):r}else t=util.arrayToMapSelector(e,null,this._boundGet);return t},_applyCtor:function(){var e=function(){};return function(t,n){var r;return e.prototype=t.prototype,r=new e,t.apply(r,n),r}}()}),config.binding={},application.Binding=new application.BindingsContainer(config.binding),window.nrdpPartner==undefined&&(window.nrdpPartner={}),nrdpPartner.Fonts==undefined&&(nrdpPartner.Fonts={WGL:"Arial_for_Netflix"}),function(){function tt(e,t){return e[c](t)===0}function nt(e,t){return e[a](e[s]-t[s])===t}function rt(t){return(t+"")[E](e,"")}function it(e,t,n){var r;for(r=e[s];r<t;r++)e=n?"0"+e:e+"0";return e}function st(e,t,n){var r,i,o,u,f,l,c,h=n.groupSizes,p=h[0],d=1,v=Math.pow(10,t),m=Math.round(e*v)/v;isFinite(m)||(m=e),e=m,r=e+"",i="",o=r[S](/e/i),u=o[s]>1?parseInt(o[1],10):0,r=o[0],o=r[S](F),r=o[0],i=o[s]>1?o[1]:"",u>0?(i=it(i,u,L),r+=i[g](0,u),i=i[a](u)):u<0&&(u=-u,r=it(r,u+1),i=r[g](-u,r[s])+i,r=r[g](0,-u)),t>0?i=n[F]+(i[s]>t?i[g](0,t):it(i,t)):i="",f=r[s]-1,l=n[","],c="";while(f>=0){if(p===0||p>f)return r[g](0,f+1)+(c[s]?l+c+i:i);c=r[g](f-p+1,f+1)+(c[s]?l+c:""),f-=p,d<h[s]&&(p=h[d],d++)}return r[g](0,f+1)+l+c+i}function ot(e,t,n){var r,i=t[N],o=t[P];switch(n){case"n -":i=M+i,o=M+o;case"n-":nt(e,i)?r=[N,e[a](0,e[s]-i[s])]:nt(e,o)&&(r=[P,e[a](0,e[s]-o[s])]);break;case"- n":i+=M,o+=M;case V:tt(e,i)?r=[N,e[a](i[s])]:tt(e,o)&&(r=[P,e[a](o[s])]);break;case"(n)":tt(e,"(")&&nt(e,")")&&(r=[N,e[a](1,e[s]-2)])}return r||["",e]}function ut(e,t,n){var r,i,o,u,a,f,c,h,p,d;if(!t||t==="i")return n[A][s]?e[q]():e[W]();t=t||"D",r=n[l],i=Math.abs(e),o=-1,t[s]>1&&(o=parseInt(t[g](1),10)),a=t[_](0).toUpperCase();switch(a){case"D":u="n",o!==-1&&(i=it(""+i,o,R)),e<0&&(i=-i);break;case"N":f=r;case"C":f=f||r[x];case"P":f=f||r.percent,u=e<0?f[D][0]:f[D][1]||"n",o===-1&&(o=f.decimals),i=st(i*(a==="P"?100:1),o,f);break;default:throw"Bad number format specifier: "+a}c=/n|\$|-|%/g,h="";for(;;){p=c[H],d=c.exec(u),h+=u[g](p,d?d.index:u[s]);if(!d)break;switch(d[0]){case"n":h+=i;break;case"$":h+=r[x][I];break;case N:/[1-9]/.test(i)&&(h+=r[N]);break;case"%":h+=r.percent[I]}}return h}function at(e,t,n){return e<t||e>n}function ft(e,t){var n,r,i=new util.Date,s=lt(i);return t<100&&(n=e.twoDigitYearMax,n=typeof n===d?(new util.Date)[b]()%100+parseInt(n,10):n,r=pt(i,e,s),t+=r-r%100,t>n&&(t-=100)),t}function lt(e,t){var n,r,i,u;if(!t)return 0;r=e.getTime();for(i=0,u=t[s];i<u;i++){n=t[i].start;if(n===o||r>=n)return i}return 0}function ct(e){return e[S]("").join(M).toUpperCase()}function ht(e){var t,n,r=[];for(t=0,n=e[s];t<n;t++)r[t]=ct(e[t]);return r}function pt(e,t,n,r){var i=e[b]();return!r&&t[C]&&(i-=t[C][n].offset),i}function dt(e,t,n){var r,i=e.days,s=e._upperDays;return s||(e._upperDays=s=[ht(i[B]),ht(i[m]),ht(i.namesShort)]),t=ct(t),n?(r=s[1][c](t),r===-1&&(r=s[2][c](t))):r=s[0][c](t),r}function vt(e,t,n){var r,i=e.months,s=e[k]||e.months,o=e._upperMonths,u=e[J];return o||(e._upperMonths=o=[ht(i[B]),ht(i[m])],e[J]=u=[ht(s[B]),ht(s[m])]),t=ct(t),r=(n?o[1]:o[0])[c](t),r<0&&(r=(n?u[1]:u[0])[c](t)),r}function mt(e,t){var n,r,i,o=0,u=L;for(n=0,r=e[s];n<r;n++){i=e[_](n);switch(i){case"'":u?t[h]("'"):o++,u=L;break;case"\\":u&&t[h]("\\"),u=!u;break;default:t[h](i),u=L}}return o}function gt(e,t){var n,r,i;t=t||"F",r=e[U],i=t[s];if(i===1){n=r[t];if(!n)throw"Invalid date format string '"+t+"'.";t=n}else i===2&&t[_](0)==="%"&&(t=t[_](1));return t}function yt(e,t){var n,r,i,u,a,f,l,c,p,d,v,m,b,w,S=e._parseRegExp;if(!S)e._parseRegExp=S={};else{n=S[t];if(n)return n}r=gt(e,t)[E](/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),i=["^"],u=[],a=0,f=0,l=bt();while((c=l.exec(r))!==o){p=r[g](a,c.index),a=l[H],f+=mt(p,i);if(f%2){i[h](c[0]);continue}d=c[0],v=d[s];switch(d){case Q:case"ddd":case G:case"MMM":case"gg":case"g":m="(\\D+)";break;case"tt":case"t":m="(\\D*)";break;case K:case"fff":case"ff":case"f":m="(\\d{"+v+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":m="(\\d\\d?)";break;case"zzz":m="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":m="([+-]?\\d\\d?)";break;case"/":m="(\\"+e["/"]+")";break;default:throw y+d+"'."}m&&i[h](m),u[h](c[0])}return mt(r[g](a),i),i[h]("$"),b=i.join("")[E](/\s+/g,"\\s+"),w={regExp:b,groups:u},S[t]=w}function bt(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g}function wt(e,t,n){var r,i,u,a,f,l,c,h,d,v,m,g,y,w,E,x,T,k,O,M,_,D,P,H,B,F,I,q,R,U,W;e=rt(e),r=n[z],i=yt(r,t),u=RegExp(i.regExp).exec(e);if(u===o)return o;a=i.groups,f=o,l=o,c=o,h=o,d=o,v=0,g=0,y=0,w=0,E=o,x=L;for(T=0,k=a[s];T<k;T++){O=u[T+1];if(O){M=a[T],_=M[s],D=parseInt(O,10);switch(M){case"dd":case"d":h=D;if(at(h,1,31))return o;break;case"MMM":case G:c=vt(r,O,_===3);if(at(c,0,11))return o;break;case"M":case"MM":c=D-1;if(at(c,0,11))return o;break;case"y":case"yy":case K:l=_<4?ft(r,D):D;if(at(l,0,9999))return o;break;case"h":case"hh":v=D,v===12&&(v=0);if(at(v,0,11))return o;break;case"H":case"HH":v=D;if(at(v,0,23))return o;break;case"m":case"mm":g=D;if(at(g,0,59))return o;break;case"s":case"ss":y=D;if(at(y,0,59))return o;break;case"tt":case"t":x=r.PM&&(O===r.PM[0]||O===r.PM[1]||O===r.PM[2]);if(!x&&(!r.AM||O!==r.AM[0]&&O!==r.AM[1]&&O!==r.AM[2]))return o;break;case"f":case"ff":case"fff":w=D*Math.pow(10,3-_);if(at(w,0,999))return o;break;case"ddd":case Q:d=dt(r,O,_===3);if(at(d,0,6))return o;break;case"zzz":P=O[S](/:/);if(P[s]!==2)return o;m=parseInt(P[0],10);if(at(m,-12,13))return o;H=parseInt(P[1],10);if(at(H,0,59))return o;E=m*60+(tt(O,N)?-H:H);break;case"z":case"zz":m=D;if(at(m,-12,13))return o;E=m*60;break;case"g":case"gg":B=O;if(!B||!r[C])return o;B=rt(B.toLowerCase());for(F=0,I=r[C][s];F<I;F++)if(B===r[C][F][A].toLowerCase()){f=F;break}if(f===o)return o}}}q=new util.Date,U=r.convert,R=U?U[Y](q)[0]:q[b](),l===o?l=R:r[C]&&(l+=r[C][f||0].offset),c===o&&(c=0),h===o&&(h=1);if(U){q=U.toGregorian(l,c,h);if(q===o)return o}else{q.setFullYear(l,c,h);if(q.getDate()!==h)return o;if(d!==o&&q.getDay()!==d)return o}return x&&v<12&&(v+=12),q.setHours(v,g,y,w),E!==o&&(W=q.getMinutes()-(E+q[p]()),q.setHours(q[j]()+parseInt(W/60,10),W%60)),q}function Et(e,t,n){function J(e,t){var n,r=e+"";return t>1&&r[s]<t?(n=c[t-2]+r,n[a](n[s]-t,t)):(n=r,n)}function Z(){return d||v?d:(d=w.test(t),v=R,d)}function et(e,t){if(x)return x[t];switch(t){case 0:return e[b]();case 1:return e.getMonth();case 2:return e.getDate()}}var r,i,o,u,f,l,c,d,v,w,E,S,x,T,L,O,D,F,I,X,V=n[z],$=V.convert;if(!t||!t[s]||t==="i")return n&&n[A][s]?$?r=Et(e,V[U].F,n):(i=new Date(e.getTime()),o=lt(e,V[C]),i.setFullYear(pt(e,V,o)),r=i[q]()):r=e[W](),r;u=V[C],f=t==="s",t=gt(V,t),r=[],c=["0","00","000"],w=/([^d]|^)(d|dd)([^d]|$)/g,E=0,S=bt(),!f&&$&&(x=$[Y](e));for(;;){T=S[H],L=S.exec(t),O=t[g](T,L?L.index:t[s]),E+=mt(O,r);if(!L)break;if(E%2){r[h](L[0]);continue}D=L[0],F=D[s];switch(D){case"ddd":case Q:I=F===3?V.days[m]:V.days[B],r[h](I[e.getDay()]);break;case"d":case"dd":d=R,r[h](J(et(e,2),F));break;case"MMM":case G:X=et(e,1),r[h](V[k]&&Z()?V[k][F===3?m:B][X]:V.months[F===3?m:B][X]);break;case"M":case"MM":r[h](J(et(e,1)+1,F));break;case"y":case"yy":case K:X=x?x[0]:pt(e,V,lt(e,u),f),F<4&&(X%=100),r[h](J(X,F));break;case"h":case"hh":l=e[j]()%12,l===0&&(l=12),r[h](J(l,F));break;case"H":case"HH":r[h](J(e[j](),F));break;case"m":case"mm":r[h](J(e.getMinutes(),F));break;case"s":case"ss":r[h](J(e.getSeconds(),F));break;case"t":case"tt":X=e[j]()<12?V.AM?V.AM[0]:M:V.PM?V.PM[0]:M,r[h](F===1?X[_](0):X);break;case"f":case"ff":case"fff":r[h](J(e.getMilliseconds(),3)[a](0,F));break;case"z":case"zz":l=e[p]()/60,r[h]((l>0?N:P)+J(Math.floor(Math.abs(l)),F));break;case"zzz":l=e[p]()/60,r[h]((l>0?N:P)+J(Math.floor(Math.abs(l)),2)+":"+J(Math.abs(e[p]()%60),2));break;case"g":case"gg":V[C]&&r[h](V[C][lt(e,u)][A]);break;case"/":r[h](V["/"]);break;default:throw y+D+"'."}}return r.join("")}var e,t,n,r,i,s="length",o=null,u="findClosestCulture",a="substr",f="default",l="numberFormat",c="indexOf",h="push",p="getTimezoneOffset",d="string",v="cultures",m="namesAbbr",g="slice",y="Invalid date format pattern '",b="getFullYear",w="culture",E="replace",S="split",x="currency",T="undefined",N="-",C="eras",k="monthsGenitive",L=!1,A="name",O="_findClosestCulture",M=" ",_="charAt",D="pattern",P="+",H="lastIndex",B="names",j="getHours",F=".",I="symbol",q="toLocaleString",R=!0,U="patterns",z="calendar",W="toString",X="language",V="-n",$="object",J="_upperMonthsGen",K="yyyy",Q="dddd",G="MMMM",Y="fromGregorian",Z={cultures:{},cultureChanged:new Rx.ReplaySubject},et={en:{}};et[f]=et.en,Z[u]=function(e){var t,n,r,i,o,u,a="WGL",f="Latn";typeof e===d&&(e=e[S](",")),e instanceof Array||(e=[e]),nrdp&&nrdp.gibbon&&(t=nrdp.gibbon.fonts,t&&(n=t.scripts));for(i=0,r=e[s];i<r;i++){o=this[O](e[i]),u=o&&o.fontGroup;if(u)if(n){u===a&&(u=f);if(n[u])return o}else if(u in nrdpPartner.Fonts)return o}},Z[O]=function(e){var t,n,r,i,u,l,p,m,g,y;if(!e)return this[w]||this[v][f];typeof e===d&&(e=e[S](","));if(e instanceof Array){r=this[v],i=e,l=i[s],p=[];for(u=0;u<l;u++)e=rt(i[u]),g=e[S](";"),n=rt(g[0]),g[s]===1?m=1:(e=rt(g[1]),e[c]("q=")===0?(e=e[a](2),m=parseFloat(e,10),m=isNaN(m)?0:m):m=1),p[h]({lang:n,pri:m});p.sort(function(e,t){return e.pri===t.pri?0:e.pri<t.pri?1:-1});for(u=0;u<l;u++){n=p[u].lang,t=r[n];if(t)return t}for(u=0;u<l;u++){n=p[u].lang;do{y=n.lastIndexOf(N);if(y===-1)break;n=n[a](0,y),t=r[n];if(t)return t}while(1)}}else if(typeof e===$)return e;return t||o},Z.preferCulture=function(e){var t=this[u](e)||this[v][f];this[w]=t,this.cultureChanged.onNext(t)},Z.addCulture=function(e,t){var n,r=typeof t[X]===$?t[X]:t;this[v][e]=r,t.strings&&(r.loaded=R,this.localize("ui-strings",e,t.strings)),(n=this[v][f])&&n[A]===r[A]&&(this[v][f]=r)},Z.localize=function(e,t,n){var r,i,u=t;return typeof t!==d&&(u=this[w]&&this[w][A]?this[w][A]:this[w]||f),u=this[v][u]||{name:u},r=et[u[A]],arguments[s]===3?(r||(r=et[u[A]]={}),r[e]=n):(r&&(n=r[e]),typeof n===T&&(i=et[u[X]],i&&(n=i[e]),typeof n===T&&(n=et[f][e]))),typeof n===T?o:n},Z.format=function(e,t,n){return n=this[u](n),typeof e=="number"?e=ut(e,t,n):e instanceof Date&&(e=Et(e,t,n)),e},Z.parseInt=function(e,t,n){return Math.floor(this.parseFloat(e,t,n))},Z.parseFloat=function(e,i,f){var h,p,v,m,g,y,b,w,T,N,C,k,L,A,O,_;return typeof i===d&&(f=i,i=10),f=this[u](f),h=NaN,p=f[l],e[c](f[l][x][I])>-1&&(e=e[E](f[l][x][I],""),e=e[E](f[l][x][F],f[l][F])),e=rt(e),t.test(e)?h=parseFloat(e,i):!i&&n.test(e)?h=parseInt(e,16):(v=ot(e,p,p[D][0]),m=v[0],g=v[1],m===""&&p[D][0]!==V&&(v=ot(e,p,V),m=v[0],g=v[1]),m=m||P,w=g[c]("e"),w<0&&(w=g[c]("E")),w<0?(b=g,y=o):(b=g[a](0,w),y=g[a](w+1)),C=p[F],k=b[c](C),k<0?(T=b,N=o):(T=b[a](0,k),N=b[a](k+C[s])),L=p[","],T=T[S](L).join(""),A=L[E](/\u00A0/g,M),L!==A&&(T=T[S](A).join("")),O=m+T,N!==o&&(O+=F+N),y!==o&&(_=ot(y,p,V),O+="e"+(_[0]||P)+_[1]),r.test(O)&&(h=parseFloat(O))),h},Z.parseDate=function(e,t,n){var r,i,a,f,l,c;n=this[u](n);if(t){typeof t===d&&(t=[t]);if(t[s])for(f=0,l=t[s];f<l;f++){c=t[f];if(c){r=wt(e,c,n);if(r)break}}}else{a=n[z][U];for(i in a){r=wt(e,a[i],n);if(r)break}}return r||o},e=/^\s+|\s+$/g,t=/^[+-]?infinity$/i,n=/^0x[a-f0-9]+$/i,r=/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/,i=Object.prototype[W],util.localization=Z}(),util.localization.cultures["default"]=util.localization.cultures.en,config.textTemplate={cacheSize:30},config.__defineGetter__("text",function(){return util.localization.localize("ui-strings")}),view=typeof view=="undefined"?{}:view,view.AbstractUiWidget=util.Class.create({_visible:!1,_focused:!1,_rendered:!1,_subscriptions:{},_model:null,_STATES:{},_CHILD_WIDGET_STATES:{},init:function(e,t){e&&(this.id=e),this._rootWidget=t,this._widgetCollection={}},set text(e){this._getRootWidget().textContent=e},set model(e){this._model=e},isVisible:function(){return this._visible},setVisible:function(e){!this._rendered&&e&&this._render(),this._visible=e,this._getRootWidget().visible=e},setFocused:function(e){var t=e?"focused":"default";this._applyState(t),this._focused=e},isFocused:function(){return this._focused},_applyState:function(e){this._applyStateToElement(this._getRootWidget(),this._STATES[e],e)},_applyStateToElement:function(e,t){t&&e&&e.setProperties(t)},_render:function(){this._getRootWidget()||gibbon.parseMarkup([App.markup[this.id].scene],gibbon.getElementById(this.parentId)),this._applyState("default"),this._rendered=!0},setChildWidgetState:function(e,t){this._applyStateToElement(this._getWidget(e),this._CHILD_WIDGET_STATES[t],t)},resetChildWidgets:function(e){var t,n=this._getRootWidget().children,r=n.length,e=e?e:"default";for(t=0;t<r;t++)this.setChildWidgetState(n[t],e,this._CHILD_WIDGET_STATES[e])},_getWidget:function(e){var t="_widgetCollection",n="_rootWidget",r="getElementById";return this[t][e]||(this[t][e]=this[n]?this[n][r](e):gibbon[r](e)),this[t][e]},_getRootWidget:function(){return this._rootWidget||(this.id?this._getWidget(this.id):undefined)},_setWidgetMutations:function(e,t){var n,r;if(!e||!t)return;n=Math.min(e.length,t.length);for(r=0;r<n;r++)this._getWidget(e[r]).mutation=t[r]},_reset:NOOP,renderModel:NOOP,getWidgetById:function(e){return this._getWidget(e)},getStates:function(){return this._STATES.keys},getChildStates:function(){return this._CHILD_WIDGET_STATES.keys},_subscribeToWidgetObservable:function(e,t,n,r){var i,s="_subscriptions",o=this._getWidget(t);o&&o[n]&&e&&(this[s][t]||(this[s][t]={}),this[s][t][n]||(this[s][t][n]=[]),i=o[n].subscribe(function(t){r.call(e,t)}),this[s][t][n].push({scope:e,disposable:i}))},_unsubscribeFromWidgetObservable:function(e,t,n){var r,i="_subscriptions",s=this[i][t]&&this[i][t][n];while(r=s.pop())r.scope==e&&r.disposable.dispose()},subscribeToTransitionEnd:function(e,t,n){this._subscribeToWidgetObservable(e,t,"transitionEnd",n)},unsubscribeFromTransitionEnd:function(e,t){this._unsubscribeFromWidgetObservable(e,t,"transitionEnd")}}),view.ButtonWidgetFactory=function(e){var t=new view.AbstractUiWidget(e.id,e.rootWidget);return e?(t._STATES=e.states,t.text=e.text,t):null},view.UIWidget=view.AbstractUiWidget.extend({}),view2=typeof view2=="undefined"?{}:view2,util.ensureUuid=function(e){return e.uuid||(e.uuid=util._uuid++)},util.uuid=function(){return util._uuid++},util._uuid=1,function(){function e(){}util.beforeAndAfterObservable=function(t,n){var r,i=0;return function(s){var o=this,u=null,a=function(){i--,i||(n.call(o),i=0,r=null)};i=i||0,i++,i===1&&t.call(this),u=s(),r=r?r.zip(u,e):u,r.take(1).subscribe(e,a,a)}}}(),function(e){var t=!1,n=!0,r=undefined;e.Responder=util.Class.create({becomeFirstResponder:function(){var e=t,i=r?r.canResignFirstResponder(this):n;return i&&this.canBecomeFirstResponder()&&(r&&!r.resignFirstResponder(this)?e=t:(r=this,e=n)),e},get isFirstResponder(){return r===this},resignFirstResponder:function(){return n},nextResponder:function(){return undefined},canBecomeFirstResponder:function(){return n},canResignFirstResponder:function(){return n},voice:function(e){var n=this._voiceCommandHandlers,r=this,i=t;return e&&n&&n[e.command]&&(i=n[e.command].apply(r)),i},get aggregateVoiceCommands(){var e=this.voiceCommands;return e.forEach(function(e){e.responder=this},this),e}}),Object.defineProperties(e.Responder,{firstResponder:{get:function(){return r}},clearFirstResponder:{value:function(){r=undefined}}})}(view2),view2.ViewFromUuid=util.Class.create({_map:{},added:null,init:function(){this.added=new Rx.Subject},add:function(e,t){this._map[e]=t,this.added.onNext(t)},remove:function(e){delete this._map[e]},get:function(e){return this._map[e]},forEachView:function(e,t){var n,r=this._map;for(n in r)e.call(t,r[n])}}),view2.viewFromUuid=new view2.ViewFromUuid,view2.AView=view2.Responder.extend({id:"AView",uuid:null,parent:null,focused:!1,visible:!1,x:0,y:0,drawOrder:0,tx:0,ty:0,tz:0,width:0,height:0,opacity:1,scaleFactor:1,get children(){var e;if(this.destroyed)throw Error(this.id+"#children cannot be reused!");return e={},Object.defineProperty(this,"children",{value:e,enumerable:!0,configurable:!0}),e},get element(){var e;if(this.destroyed)throw Error(this.id+"#element cannot be reused!");return e=this._renderer?this._renderer.element:this.template.make(),this._setViewUuidOnElement(e),Object.defineProperty(this,"element",{value:e,enumerable:!0,configurable:!0}),e},_setViewUuidOnElement:NOOP,get _childContainer(){var e="childContainer",t=this.element,n=this._renderer;return n&&(t=n[e]),Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0}),t},init:function(e){var t="rendererFactory";this.uuid=util.uuid(),e&&e[t]&&(this._renderer=e[t]({width:this.width,height:this.height}))},canFocus:function(){return this.focused===!1},focus:function(){var e=this.canFocus();return e&&(this.show(),this.focused=!0),e},canBlur:function(){return this.focused===!0},blur:function(){var e=this.canBlur();return e&&(this.focused=!1),e},canShow:function(){return this.visible===!1},show:function(){var e=this.canShow();return e&&(this.visible=!0,this._onShow()),e},_onShow:NOOP,canHide:function(){return this.visible===!0},hide:function(){var e=this.canHide();return e&&(this.blur(),this.visible=!1,this._onHide()),e},_onHide:NOOP,sizeBy:function(e,t){this.size(this.width+(e||0),this.height+(t||0))},translateBy:function(e,t,n,r,i){this.translate(this.tx+(e||0),this.ty+(t||0),this.tz+(n||0),r,i)},dimBy:function(e,t,n){this.dim(this.opacity+e,t,n)},scaleBy:function(e,t,n){this.scale(this.scaleFactor*e,t,n)},reset:function(){var e=this._renderer;this.tx=this.ty=this.x=this.y=0,this.dim(1),e&&e.reset(),delete this.delegate,delete this.viewController},addChildRelationship:function(e){var t=e.parent,n=t==null&&t!==this,r=e==this;if(r)throw'Cannot parent view "'+this.id+'" to itself.';return n&&(this.children[e.uuid]=e,e.parent=this),n},addChildren:function(){var e=!0,t=arguments,n=t.length,r=0;for(r;r<n;r++)e=this.addChild(t[r])&&e;return e},removeChildRelationship:function(e){var t=!!e&&e.parent===this;return t&&(delete this.children[e.uuid],e.parent=null),t},removeChildren:function(){var e=!0,t=arguments,n=t.length,r=0;for(r;r<n;r++)e=this.removeChild(t[r])&&e;return e},updateChildren:function(e){var t,n=this.children;for(t in n)n[t].update(e)},forEachDescendant:function(e,t){var n,r,i=this.children;for(r in i)n=i[r],e.call(t,n),n.forEachDescendant(e,t)},destroy:function(){var e,t,n=this.parent,r=this.renderer;if(!this.destroyed){n&&n.removeChild(this),r&&r.destroy(),e=this.children;for(t in e)e[t].destroy();delete this.dataContext,delete this._renderer,delete this.element,delete this.children,delete this.childContainer,delete this.parent,delete this.delegate,delete this.viewController,this.destroyed=!0}},nextResponder:function(){return this.viewController||this.parent},canBecomeFirstResponder:function(){var e=this.visible;return e},canResignFirstResponder:function(){return!0},prepareElement:function(){var e=this.element},get aggregateVoiceCommands(){var e=[],t=function(t){var n=t.voiceCommands,r,i;if(n&&t.visible){for(i=0,r=n.length;i<r;i++)n[i].responder=t;e.push.apply(e,n)}};return t(this),this.forEachDescendant(t),e},isOrContains:function(e){var t,n;if(!e)t=!1;else if(this===e)t=!0;else{t=!1,n=e.parent;do n===this?t=!0:n&&(n=n.parent);while(n&&!t)}return t}}),view2.ARenderer=util.Class.create({_props:undefined,_sets:undefined,_resets:undefined,_textElements:undefined,_imageElements:undefined,_toggleElements:undefined,width:0,height:0,childContainer:undefined,get element(){var e="childContainer",t=this._element;return t||(this._element=t=this.render(),this[e]||(this[e]=t)),t},init:function(e){this._props={},this._sets={},this._resets={},e&&(e.width!=null&&(this.width=e.width),e.height!=null&&(this.height=e.height))},set:function(e){var t,n,r,i=this.element,s=this._props,o=this._sets,u=this._textElements,a=this._imageElements,f=this._toggleElements;if(e)for(t in e)r=e[t],n=this[t]||(u?u[t]:undefined)||(a?a[t]:undefined)||(f?f[t]:undefined),n&&r!==s[t]&&(o[t]=r);return this},reset:function(){return util.extend(this._resets,this._props),this._sets={},this._props={},this},commit:function(){var e,t,n,r=this._resets,i=this._sets,s=this._props,o=this._textElements,u=this._imageElements,a=this._toggleElements;for(n in r)delete s[n],delete r[n],t=this[n],t&&t.reset?t.reset.call(this):o&&(t=o[n])?this._textElementReset(t):u&&(t=u[n])?this._imageElementReset(t):a&&(t=a[n])&&this._toggleElementReset(t);for(n in i)e=i[n],delete i[n],s[n]=e,t=this[n],t&&t.set?t.set.call(this,e):o&&(t=o[n])?this._textElementSet(t,e):u&&(t=u[n])?this._imageElementSet(t,e):a&&(t=a[n])&&this._toggleElementSet(t,e);return this},destroy:function(){var e="_element";this[e]&&this[e].destroy(),this.childContainer=this[e]=this._sets=this._resets=this._props=this._imageElements=this._toggleElements=this._textElements=undefined},_getPropertyValue:function(e){return this._sets[e]||this._props[e]}}),view2.ARenderer=view2.ARenderer.extend({_template:null,_cacheTextLayout:!1,render:function(){var e="_template",t=this.constructor.prototype,n=e;return t.hasOwnProperty(n)||(t[n]=this.template),gibbon.Widget.create(this[e],undefined,!0)},_setupTextLayoutCaching:function(e){var t="Observable",n="width",r="height",i=this,s=[],o=function(e,n){return Rx[t].fastCreateWithDisposable(function(t){return e.renderPropertyChange.subscribe(function(e){n===e.renderProperty&&t.onNext(e.value)})})};this[n]||(s.push(o(e,n)),e[n]=undefined),this[r]||(s.push(o(e,r)),e[r]=undefined),Rx[t].zip(s,function(e,t){var s={};return i[n]?s[r]=e:(s[n]=e,s[r]=t),s}).take(1).subscribe(function(t){var i=t[n],s=t[r];s&&(e[r]=s),i&&(e[n]=i)})},_textElementSet:function(e,t){this._cacheTextLayout&&(!this.width||!this.height)&&this._setupTextLayoutCaching(e),e.textContent=t},_textElementReset:function(e){this._textElementSet(e,"")},_imageElementSet:function(e,t){e.imageContent.src=t||""},_imageElementReset:function(e){e.imageContent.src=""},cacheTextLayout:{set:function(e){this._cacheTextLayout=e},reset:function(){this._cacheTextLayout=!1}},cacheSurface:{set:function(e){this.element.cache=e},reset:function(){this.element.cache=!1}},_toggleElementSet:function(e,t){e.visible=!!t},_toggleElementReset:function(e){e.visible=!1}}),function(){var e="colors",t="align",n="center",r="textStyles",i=!0,s="end",o="offWhite",u="right",a="centerBoth",f="centerVertical",l="darkText",c="lightGray",h="centerHorizontal";App[e]={white:{r:255,g:255,b:255,a:255},offWhite:{r:235,g:235,b:235,a:255},lightGray:{r:200,g:200,b:200,a:255},paleGray:{r:191,g:191,b:191,a:255},mediumGray:{r:153,g:153,b:153,a:255},disabledText:{r:102,g:102,b:102,a:255},darkText:{r:34,g:34,b:34,a:255},black:{r:0,g:0,b:0,a:255}},App[t]||(App[t]={}),util.extend(App[t],{centerHorizontal:{horizontal:n},centerVertical:{vertical:n},centerBoth:{horizontal:n,vertical:n}}),App[r]||(App[r]={}),util.extend(App[r],{legendStyle:{size:16,lineHeight:16,color:{r:190,g:190,b:190,a:255},bold:i},poscounterViewStyle:{size:26,color:{r:190,g:190,b:190,a:255},bold:i},bobTitleText:{size:24,wrap:i,maxLines:2,truncation:{position:s},color:App[e][o]},bobConnectInfoTitle:{size:24,wrap:i,truncation:{position:s},color:App[e][o],richText:i},bobSynopsisText:{size:19,wrap:i,truncation:{position:s},color:App[e][o]},bobDurationText:{size:19,align:{horizontal:u,vertical:n},color:App[e][o]},bobDefaultText:{size:19,wrap:i,color:App[e][o]},bobMessagingText:{size:19,bold:i,wrap:i,align:App[t][a],color:App[e][o]},mdpMenuText:{size:21,align:App[t][f],truncation:{position:s},color:App[e][o]},mdpMenuSelectedText:{size:21,align:App[t][f],truncation:{position:s},color:App[e][l]},playbackSubtitleText:{size:40,bold:i,wrap:i,align:{horizontal:n,vertical:"bottom"},color:{r:255,g:255,b:0,a:255},shadow:{offset:{x:2,y:2},color:{r:0,g:0,b:0,a:255}},richText:i},playbackRemainingText:{size:24,bold:i,align:{horizontal:u,vertical:n},color:App[e][l]},playbackCurrentTimeText:{size:24,bold:i,align:App[t][f],color:App[e][l]},ppbHeaderText:{size:30,wrap:i,align:App[t][a],color:App[e].mediumGray},ppbTitleText:{size:30,bold:i,wrap:i,align:App[t][a],color:App[e][c]},ppbEpisodeText:{size:26,wrap:i,align:App[t][a],color:App[e][c]},ppbBufferingText:{size:28,align:{horizontal:u},color:App[e][c]},back2Browse:{size:22,bold:i,align:App[t][a],color:App[e][o]},headerLabel:{size:26,bold:i,color:App[e].paleGray},searchInputKeysText:{size:30,align:App[t][a],color:App[e][o]},kidsSearchInputKeysText:{size:32,align:App[t][a],color:{r:51,g:51,b:51,a:255}},searchInputFieldText:{size:28,bold:i,align:App[t][f],color:{r:186,g:186,b:186,a:255}},kidsSearchInputFieldText:{size:28,bold:i,align:App[t][f],color:{r:51,g:51,b:51,a:255}},searchPromptText:{size:24,bold:i,align:App[t][a],color:App[e][o]},kidsSearchPromptText:{size:35,bold:i,wrap:i,align:App[t][a],color:{r:19,g:101,b:120,a:255}},searchResultsHdr:{size:19,bold:i,align:{vertical:"top"},color:{r:153,g:153,b:153}},searchResultsText:{size:22,align:App[t][f],color:App[e][o],truncation:{position:s}},searchResultsOriginalText:{size:20,align:App[t][f],color:App[e][o],truncation:{position:s}},searchGalleryHeader:{size:24,align:App[t][f],color:App[e][o],truncation:{position:s}},searchAndKidsButtonsMessage:{size:24,wrap:i,align:App[t][f],color:App[e][o]},sdpSeasonText:{size:19,align:App[t][f],color:App[e][o]},mdpSeasonTitleText:{size:21,align:App[t][f],color:App[e][o]},mdpEpisodesCount:{size:19,align:{vertical:n,horizontal:u},color:App[e][o]},mdpEpisodesText:{size:21,align:App[t][f],color:App[e][o],truncation:{position:s}},mdpAudioTTHeader:{size:21,bold:i,align:App[t][f],color:App[e][o]},mdpAudioTTOption:{size:21,color:App[e][o],bold:!1,truncation:{position:s}},mdpAudioTTOptionDisabled:{size:21,color:App[e].disabledText,bold:!1},customerServiceLabel:{size:24,bold:i,align:{horizontal:u,vertical:n},color:App[e][o]},customerServiceValue:{size:24,bold:i,wrap:i,align:App[t][f],color:App[e][o]},csScreenButtons:{size:28,align:App[t][a],color:App[e][o]},appDialogMessage:{size:24,bold:i,wrap:i,truncation:{position:s},color:App[e][o],richText:i},appDialogButtons:{size:28,align:App[t][a],color:App[e][o]},appDialogCode:{size:18,align:{horizontal:u},color:{r:153,g:153,b:153,a:255},bold:i},loginMessageHeader:{size:33,align:App[t][h],bold:i},loginMessageHelpHeader:{size:18,align:App[t][h],bold:i},loginMessageHelp:{size:18,wrap:i,align:App[t][h]},loginFormLabel:{size:22,align:{horizontal:u}},loginButton:{size:22,bold:i,align:App[t][a]},loginValidationTitle:{size:22,align:{horizontal:n},color:{r:255,g:255,b:255,a:255}},loginValidationCopy:{size:16,wrap:i,align:{horizontal:n},color:{r:30,g:29,b:28,a:255}},uiMetadataText:{color:{r:235,g:235,b:235,a:255},bold:i,size:12,shadow:{offset:{x:1,y:2},color:{r:0,g:0,b:0,a:255}}},playbackSocialLegend:{size:17,bold:i,color:{r:255,g:255,b:255,a:255},align:App[t][a]}})}(),view2.DialogButtonRenderer=view2.ARenderer.extend({_buttonStates:{"default":{text:{color:{r:235,g:235,b:235}},background:{color:{r:0,g:0,b:0,a:0}},imageContent:{src:"",align:{vertical:"center",horizontal:"center"}}},focused:{text:{color:{r:34,g:34,b:34}},background:{color:{r:180,g:180,b:180}},imageContent:{src:"../img/720/dialog/DialogButton_Focus.png",x:5,y:5,align:{vertical:"center"}}}},get template(){return{id:"dialog-button",width:375,height:44,text:App.textStyles.appDialogButtons}},render:function render(){var e=render.base.call(this);return this._textElements={text:e},e},state:{set:function(e){var t=this._buttonStates,n=t[e]||t["default"];console.warn("Setting state: "+e+", "+(t[e]===n)),this.element.setProperties(n)},reset:function(){this.element.setProperties(this._buttonStates["default"])}}}),view2.DialogButton=view2.AView.extend({init:function init(){init.base.call(this,{rendererFactory:function(e){return new view2.DialogButtonRenderer(e)}})},update:function(e){this._renderer.set(e).commit()}}),view2.AView.mixin({init:function init(e){var t="_notifyTransitionEnd";init.base.call(this,e),this[t]=this[t].bind(this)},_supportsScale:!0,_supportsBlur:!1,transitionObservableFactory:function(e){var t,n="property",r="scale",i="_observablesByProperty",s="_trasitionListener",o="data",u="onCompleted",a="smoothScale",f="origin",l="transformOriginX",c="transformOriginY",h="start",p=this.element._proxy,d=this,v=e[n]===r&&!d._supportsScale;return d[i]=d[i]||{},d[s]||(d[s]=!0,p.addEventListener("animationFinished",function(e){var t=d[i][e[o][n]];t&&(delete d[i][e[o][n]],t.onNext({property:e[o][n],value:e[o].value,fps:e[o].fps,view:d,type:"complete"}),t[u]())})),Rx.Observable.create(function(s){var o=d[i][e[n]];return e[n]==r&&(p[a]=e[a]||!1,e[f]&&(p[l]=e[f].x,p[c]=e[f].y),e.scaleFromCenter&&(p[l]=640-(p.x?p.x:0),p[c]=360-(p.y?p.y:0))),e.duration>0&&!v?(o&&(delete d[i][e[n]],o.onError({property:e[n],value:p[e[n]],fps:0,view:d,type:"interrupted"})),d[i][e[n]]=s,e[h]!=undefined&&!e.delay&&(p[e[n]]=e[h]),t=setTimeout(function(){p.startAnimation(e[n],e[h],e.end,e.duration,e.ease,e.append,e.flags)},e.delay||0)):(v||(p[e[n]]=e.end),t=setTimeout(function(){s.onNext({property:e[n],value:v?e[h]:e.end,fps:0,view:d,type:v?"unsupported":"completed"}),s[u]()},e.delay||0)),function(){clearTimeout(t),p.stopAnimation(e[n]),delete d[i][e[n]]}})},get transitions(){var e="_transitions",t=this[e];return t||(t=new Rx.Subject,this[e]=t),t},addChild:function(e){var t="parent",n=e[t]===this,r=this._childContainer,i=n?!1:this.addChildRelationship(e);if(i||n&&r!==e.element[t])e.element[t]=r,view2.viewFromUuid.add(e.uuid,e);return i},removeChild:function(e){var t=this.removeChildRelationship(e),n=this._childContainer;if(t||n===e.element.parent)e.element.parent=undefined;return view2.viewFromUuid.remove(e.uuid),t},destroy:function destroy(){var e,t="_transitions";this.destroyed||(e=this.element,e.parent&&(e.parent=undefined),this[t]&&(this[t].onCompleted(),this[t]=undefined),destroy.base.call(this))},size:function(e,t){var n="height",r=this.element;e!==this.width&&(this.width=r.width=e,this.minWidth=this.maxWidth=undefined),t!==this[n]&&(this[n]=r[n]=t,this.minHeight=this.maxHeight=undefined)},flexWidth:function(e,t){var n,r,i=this.element,s=e!==this.minWidth,o=t!==this.maxWidth;s&&(n=i.minSize||{},this.minWidth=e,n.width=e,i.minSize=n),o&&(r=i.maxSize||{},this.maxWidth=t,r.width=t,i.maxSize=r),this.width=undefined},flexHeight:function(e,t){var n,r,i="height",s=this.element,o=e!==this.minHeight,u=t!==this.maxHeight;o&&(n=s.minSize||{},this.minHeight=e,n[i]=e,s.minSize=n),u&&(r=s.maxSize||{},this.maxHeight=t,r[i]=t,s.maxSize=r),this[i]=undefined},position:function(e,t,n){this.x=e,this.y=t,this.drawOrder=n,this._position()},translate:function(e,t,n,r,i){this.tx=e,this.ty=t,this.tz=n,this._position(r,i)},dim:function(e,t,n){var r="opacity",i="_transitionEndTimer",s="duration",o=this.element,u=o.transition[r],a=this.isPreventingAnimation;clearTimeout(this[i]),e=Math.max(Math.min(1,e),0),u[s]=!a&&t||0,u.ease=n||"linear",o[r]=undefined,o[r]=this[r]=e;if(u[s]>0||a)this[i]=setTimeout(this._notifyTransitionEnd,u[s])},scale:function(e,t,n){var r="_transitionEndTimer",i="scaleFactor",s=this.element._proxy,t=t||0;clearTimeout(this[r]),s.smoothScale=!0,this.transition("scale",this[i],e,t,n),this[i]=e;if(t>0||this.isPreventingAnimation)this[r]=setTimeout(this._notifyTransitionEnd,t)},transition:function(e,t,n,r,i,s,o){r=this.isPreventingAnimation?0:r,this.element.startTransition(e,t,n,r,i,s,o)},addEffect:function(e,t){var n=this.supportsEffect(e);return n?this.element._proxy.addEffect(e,t):null},addAcceleratedEffect:function(e,t){var n=this.supportsAcceleratedEffect(e);return n?this.element._proxy.addEffect(e,t):null},removeEffect:function(e){return this.element._proxy.removeEffect(e)},supportsEffect:function(e){var t=nrdp.gibbon.effects;return t?!!t[e]:!1},supportsAcceleratedEffect:function(e){return this.supportsEffect(e)?nrdp.gibbon.effects[e].accelerated:!1},reset:function reset(){var e,t=this.element;clearTimeout(this._transitionEndTimer);if(this.x||this.y)t.x=t.y=0;if(this.tx||this.ty)e=t.transition,e.x.duration=0,e.y.duration=0,t.x=t.y=0;this._lastX=this._lastY=0,reset.base.call(this)},_onShow:function(){this.element.visible=!0},_onHide:function(){this.element.visible=!1},_notifyTransitionStart:function(){var e=this._transitions;this._isTransitioning=!0,e&&(this._transitionPropertyName=undefined,e.onNext({type:"transitionStart",view:this}))},_notifyTransitionEnd:function(){var e=this._transitions;this._isTransitioning=!1,e&&e.onNext({type:"transitionEnd",view:this})},_lastX:0,_lastY:0,_lastDrawOrder:0,_position:function(e,t){var n,r="_transitionEndTimer",i=!0,s="transition",o="_lastDrawOrder",u=this.x+this.tx,a=this.y+this.ty,f=this.drawOrder,l=this.isPreventingAnimation,c=this.element,h=!1;clearTimeout(this[r]),e=!l&&e||0,u!==this._lastX&&(h=i,n=c[s].x,n.duration=e,n.ease=t,c.x=undefined,c.x=this._lastX=u),a!==this._lastY&&(h=i,n=c[s].y,n.duration=e,n.ease=t,c.y=undefined,c.y=this._lastY=a),f!==this[o]&&(h=i,c.drawOrder=this[o]=f),h===i&&(e>0||l)&&(this._notifyTransitionStart(),this[r]=setTimeout(this._notifyTransitionEnd,e))},_setViewUuidOnElement:function(e){e._proxy.dataViewUuid=this.uuid}}),view2.ImageRenderer=view2.ARenderer.extend({get template(){return{id:"img",visible:!1}},render:function render(){var e=render.base.call(this),t=this.width,n=this.height;return t&&(e.width=t),n&&(e.height=n),this._imageContent=e.imageContent,e},destroy:function destroy(){destroy.base.call(this),this._imageContent=null},reset:function reset(){var e=reset.base.call(this);return this._updateAlignment(),e},commit:function commit(){var e=commit.base.call(this);return this._updateAlignment(),e},src:{set:function(e){this._imageContent.src=e||""},reset:function(){this._imageContent.src=""}},aspect:{set:function(e){this._aspect=e},reset:function(){this._aspect=""}},horizontalAlign:{set:function(e){this._horizontalAlign=e},reset:function(){this._horizontalAlign=""}},verticalAlign:{set:function(e){this._verticalAlign=e},reset:function(){this._verticalAlign=""}},_updateAlignment:function(){var e="normal",t="horizontal",n=this._horizontalAlign||"",r=this._verticalAlign||"",i="stretch ",s="aspect ",o=this._imageContent.align;switch(this._aspect){case"x":n=s+n;break;case"y":r=s+r;break;case"stretch":n=i+n,r=i+r}n=n||e,r=r||e,o[t]!==n&&(o[t]=n),o.vertical!==r&&(o.vertical=r)},spacing:{set:function(e){this.element.spacing=e},reset:function(){this.element.spacing=null}},smoothScale:{set:function(e){this._imageContent.smoothScale=!!e},reset:function(){this._imageContent.smoothScale=null}}}),view2.Image=view2.AView.extend({_rendererFactory:function(e){return new view2.ImageRenderer(e)},init:function init(e){var t="height",n=e&&e.config;n&&(this._modelSrcProperty=n.modelSrcProperty||null,n[t]&&(this[t]=n[t]),n.width&&(this.width=n.width)),init.base.call(this,{rendererFactory:this._rendererFactory})},update:function(e){var t=this._modelSrcProperty,n=Object.create(e);t&&e[t]&&(n.src=e[t]),this._renderer.set(n).commit()},reset:function reset(){reset.base.call(this),this._renderer.set({src:""}).commit()}}),function(util){var e="length",t=/[a-fA-F\d]{2}/g;util.hexToRgb=function(n){var r,i=n&&typeof n=="string"?n.match(t):undefined;return i&&(i[e]===3||i[e]===4)&&(r={r:parseInt(i[0],16),g:parseInt(i[1],16),b:parseInt(i[2],16)},i[e]===4&&(r.a=parseInt(i[3],16))),r}}(util),view2.TextRenderer=view2.ARenderer.extend({_defaultTextColor:{r:0,g:0,b:0,a:0},_defaultBackgroundColor:{r:0,g:0,b:0,a:0},get template(){return{id:"text",visible:!1}},render:function render(){var e=render.base.call(this),t=this.width,n=this.height;return t&&(e.width=t),n&&(e.height=n),this._textStyle=e.text,e},destroy:function destroy(){destroy.base.call(this),this._textStyle=undefined},id:{set:function(e){this.element.id=e},reset:function(){this.element.id=this._id}},padding:{set:function(e){var t=e;typeof e=="number"&&(t={top:e,right:e,bottom:e,left:e}),this.childContainer.padding=t},reset:function(){this.childContainer.padding={}}},text:{set:function(e){this._textElementSet(this.element,e)},reset:function(){this._textElementReset(this.element)}},textSize:{set:function(e){this._textStyle.size=e},reset:function(){this._textStyle.size=0}},textColor:{set:function(e){this._textStyle.color=typeof e=="string"?util.hexToRgb(e):e},reset:function(){this._textStyle.color=this._defaultTextColor}},backgroundColor:{set:function(e){this.element.background.color=typeof e=="string"?util.hexToRgb(e):e},reset:function(){this.element.background.color=this._defaultBackgroundColor}},truncateEllipsis:{set:function(e){this._truncateEllipsis=e||"",this._updateTextTruncate()},reset:function(){this._truncateEllipsis="",this._updateTextTruncate()}},truncateEnd:{set:function(e){this._truncatePosition=e?"end":"none",this._updateTextTruncate()},reset:function(){this._truncatePosition="none",this._updateTextTruncate()}},bold:{set:function(e){this._textStyle.bold=!!e},reset:function(){this._textStyle.bold=!1}},italic:{set:function(e){this._textStyle.italic=!!e},reset:function(){this._textStyle.italic=!1}},horizontalAlign:{set:function(e){this._textStyle.align.horizontal=e},reset:function(){this._textStyle.align.horizontal="left"}},verticalAlign:{set:function(e){this._textStyle.align.vertical=e},reset:function(){this._textStyle.align.vertical="top"}},clip:{set:function(e){this.childContainer.clip=e!==!1},reset:function(){this.childContainer.clip=!0}},wrap:{set:function(e){this._textStyle.wrap=!!e},reset:function(){this._textStyle.wrap=!1}},maxLines:{set:function(e){this._textStyle.maxLines=e},reset:function(){this._textStyle.maxLines=null}},lineHeight:{set:function(e){this._textStyle.lineHeight=e},reset:function(){this._textStyle.lineHeight=null}},spacing:{set:function(e){this.element.spacing=e},reset:function(){this.element.spacing=null}},shadowX:{set:function(e){this._textStyle.shadow.offset.x=e},reset:function(){this._textStyle.shadow.offset.x=null}},shadowY:{set:function(e){this._textStyle.shadow.offset.y=e},reset:function(){this._textStyle.shadow.offset.y=null}},shadowColor:{set:function(e){this._textStyle.shadow.color=typeof e=="string"?util.hexToRgb(e):e},reset:function(){this._textStyle.shadow.color=null}},richText:{set:function(e){this._textStyle.richText=e},reset:function(){this._textStyle.richText=!1}},edgeEffect:{set:function(e){this._textStyle.edgeEffect=e},reset:function(){this._textStyle.edgeEffect=null}},kerning:{set:function(e){var t="typography",n=this._textStyle;n[t]?n[t].kerning=e:n[t]={kerning:e}},reset:function(){var e="typography",t=this._textStyle;t[e]?t[e].kerning=!0:t[e]={kerning:!0}}},_updateTextTruncate:function(){this._textStyle.truncation={position:this._truncatePosition,ellipsis:this._truncateEllipsis}}}),view2.Text=view2.AView.extend({_rendererFactory:function(e){return new view2.TextRenderer(e)},init:function init(e){var t="height",n=e&&e.config;n&&(this._modelTextProperty=n.modelTextProperty||null,n[t]&&(this[t]=n[t]),n.width&&(this.width=n.width)),init.base.call(this,{rendererFactory:this._rendererFactory})},update:function(e){var t,n;if(!e)return;t=this._modelTextProperty,n=Object.create(e),t&&e[t]&&(n.text=e[t]),this._renderer.set(n).commit()},bounce:function(e,t,n,r){var i="transitions",s="transitionEnd",o="translateBy",u=this;n/=2,this[i].where(function(e){return e&&e.type===s}).take(1).subscribe(function(){u[i].where(function(e){return e&&e.type===s}).take(1).subscribe(function(){u._notifyBounceEnd()},NOOP,NOOP),u[o](-e,-t,undefined,n,r)},NOOP,NOOP),this._notifyBounceStart(),this[o](e,t,undefined,n,r)},_notifyBounceStart:function(){var e=this._transitions;e&&e.onNext({type:"bounceStart",view:this})},_notifyBounceEnd:function(){var e=this._transitions;e&&e.onNext({type:"bounceEnd",view:this})},reset:function reset(){reset.base.call(this),this._renderer.set({text:""}).commit()}}),view2.ContainerRenderer=view2.ARenderer.extend({_id:"container",_clear:{a:0},_noPad:{top:0,right:0,bottom:0,left:0},get template(){return{id:this._id,visible:!1}},render:function render(){var e=render.base.call(this),t=this.width,n=this.height;return t&&(e.width=t),n&&(e.height=n),this._bgImage=e.background,this._fgImage=e.imageContent,e},destroy:function destroy(){destroy.base.call(this),this._bgImage=this._fgImage=null},id:{set:function(e){this.element.id=e},reset:function(){this.element.id=this._id}},cache:{set:function(e){this.element.cache=e},reset:function(){this.element.cache=!1}},erase:{set:function(e){this.element.erase=e},reset:function(){this.element.erase=!1}},layoutDirection:{set:function(e){this.childContainer.layout.direction=e},reset:function(){this.childContainer.layout.direction=null}},layoutAlign:{set:function(e){var t=this._getPropertyValue("layoutDirection"),n={};t&&(n[t]=e,this.childContainer.layout.align=n)},reset:function(){this.childContainer.layout.align=null}},clip:{set:function(e){this.childContainer.clip=e!==!1},reset:function(){this.childContainer.clip=!0}},spacing:{set:function(e){this.element.spacing=e},reset:function(){this.element.spacing=null}},maxWidth:{set:function(e){this.element.maxSize.width=e},reset:function(){this.element.maxSize.width=null}},maxHeight:{set:function(e){this.element.maxSize.height=e},reset:function(){this.element.maxSize.height=null}},minWidth:{set:function(e){this.element.minSize.width=e},reset:function(){this.element.minSize.width=null}},minHeight:{set:function(e){this.element.minSize.height=e},reset:function(){this.element.minSize.height=null}},backgroundColor:{set:function(e){e=e||this._clear,e&&"string"==typeof e&&(e=util.hexToRgb(e)),this._bgImage.color=e},reset:function(){this._bgImage.color=this._clear}},padding:{set:function(e){this.element.padding=e||this._noPad},reset:function(){this.element.padding=this._noPad}}}),view2.ContainerRenderer._addImageMixin=function(e,t){var n,r=null,i="_updateAlignment",s="horizontal",o="_horizontalAlign"+e,u="_verticalAlign"+e,a="_repeat"+e,f={src:{set:function(e){this[t].src=e||""},reset:function(){this[t].src=""}},srcX:{set:function(e){this[t].x=e},reset:function(){this[t].x=r}},srcY:{set:function(e){this[t].y=e},reset:function(){this[t].y=r}},srcHeight:{set:function(e){this[t].height=e},reset:function(){this[t].height=r}},srcWidth:{set:function(e){this[t].width=e},reset:function(){this[t].width=r}},repeat:{set:function(e){this[a]=e||""},reset:function(){this[a]=""}},horizontalAlign:{set:function(e){this[o]=e},reset:function(){this[o]=""}},verticalAlign:{set:function(e){this[u]=e},reset:function(){this[u]=""}},denySlowSurface:{set:function(e){this[t].fast=!!e},reset:NOOP},lazyDecode:{set:function(e){this[t].lazy=e?nrdp.gibbon.Image.LAZY_DECODE:0},reset:NOOP}},l={reset:function c(){var e=c.base.call(this);return this[i](),e},commit:function h(){var e=h.base.call(this);return this[i](),e},_updateAlignment:function p(){var e="",n=this[a]||e,r=this[o]||e,i=this[u]||e,f=this[t].align,l="tile ";p.base.call(this),n.indexOf("x")>-1&&(r=l+r),n.indexOf("y")>-1&&(i=l+i),f[s]!==r&&(f[s]=r),f.vertical!==i&&(f.vertical=i)}};for(n in f)l[n+e]=f[n];return this.mixin(l)},view2.ContainerRenderer._addImageMixin("","_bgImage")._addImageMixin("1","_fgImage"),view2.BorderContainerRenderer=view2.ContainerRenderer.extend({get template(){return{id:this._id,visible:!1,layout:{direction:"vertical"},children:[{id:"top"},{id:"mid",layout:{direction:"horizontal"},children:[{id:"left"},{id:"children"},{id:"right"}]},{id:"bot"}]}},render:function render(){var e="childContainer",t=render.base.call(this),n=t.children,r=n[1].children;return this[e]=r[1],this._topBorder=n[0],this._leftBorder=r[0],this._rightBorder=r[2],this._bottomBorder=n[2],this._imageContent=this[e].background,t},destroy:function destroy(){destroy.base.call(this),delete this._topBorder,delete this._rightBorder,delete this._bottomBorder,delete this._leftBorder},borderWidth:{set:function(e){var t="height",n="width",r=this._topBorder,i=this._rightBorder,s=this._bottomBorder,o=this._leftBorder;typeof e=="number"?r[t]=i[n]=s[t]=o[n]=e:(r[t]=e.top||0,i[n]=e.right||0,s[t]=e.bottom||0,o[n]=e.left||0)},reset:function(){this._topBorder.height=this._rightBorder.width=this._bottomBorder.height=this._leftBorder.width=0}},borderColor:{set:function(e){var t="background",n="color",r="hexToRgb",i=this._topBorder[t],s=this._rightBorder[t],o=this._bottomBorder[t],u=this._leftBorder[t],a={r:0,g:0,b:0};typeof e=="string"?i[n]=s[n]=u[n]=o[n]=util[r](e):(i[n]=e.top?util[r](e.top):a,s[n]=e.right?util[r](e.right):a,o[n]=e.bottom?util[r](e.bottom):a,u[n]=e.left?util[r](e.left):a)},reset:function(){var e="color",t="background";this._topBorder[t][e]=this._rightBorder[t][e]=this._bottomBorder[t][e]=this._leftBorder[t][e]={r:0,g:0,b:0}}}}),view2.Container=view2.AView.extend({_borderedContainerRendererFactory:function(e){return new view2.BorderContainerRenderer(e)},_containerRendererFactory:function(e){return new view2.ContainerRenderer(e)},init:function init(e){var t="height",n=e&&e.config,r=!1;n&&(n[t]&&(this[t]=n[t]),n.width&&(this.width=n.width),r=n.borderWidth!==undefined||n.borderColor),init.base.call(this,{rendererFactory:r?this._borderedContainerRendererFactory:this._containerRendererFactory})},update:function(e){this._renderer.set(e).commit()}}),util.Timeout=util.Class.create({init:function(e,t,n){this._callback=e,this._delayMs=t,this._scope=n,this._runDone=this._runDone.bind(this),this.active=!1},run:function(e){var t=arguments;return this.active&&this.clear(),this.active=!0,this._data=t.length>1?Array.slice(t,1):undefined,this._id=setTimeout(this._runDone,e!=null?e:this._delayMs),this},clear:function(){return this.active&&(clearTimeout(this._id),this.active=!1,this._id=this._data=null),this},finish:function(){return this.active&&(clearTimeout(this._id),this._runDone()),this},_runDone:function(){var e=this._scope,t=this._callback,n=this._data;this.active=!1,this._id=this._data=null,t.apply(e,n)}}),view2.AnimatedImage=view2.Image.extend({init:function init(e){var t,n="_maxDisplayTime";init.base.call(this,e),t=e&&e.config,this[n]=t&&t.maxDisplayTime||7e3,this._hideTimer=new util.Timeout(this.hide,this[n],this),this.cfg=t},update:function update(e){var t;this._src=e&&e.src,t=Object.create(e),t.src=null,update.base.call(this,t)},_onShow:function _onShow(){_onShow.base.call(this),this._hideTimer.run(),this._renderer.set({src:this._src}).commit()},_onHide:function _onHide(){_onHide.base.call(this),this._hideTimer.clear(),this._renderer.set({src:""}).commit()}}),function(e){var t="update",n="IMAGE_FACTORY",r="TEXT_FACTORY",i="CONTAINER_FACTORY",s="CONTAINER_RENDERER_FACTORY",o="CONTAINER_RENDERER_FACTORY_MAKER",u="ANIMATED_IMAGE_FACTORY",a=function(e,t){var n=new view2.ContainerRenderer(e);return t&&n.set(t).commit(),n};e[i]={value:function(){return function(e){var n=new view2.Container({config:e});return e&&n[t](e),n}}},e[n]={value:function(){return function(e){var n=new view2.Image({config:e});return e&&n[t](e),n}}},e[r]={value:function(){return function(e){var n=new view2.Text({config:e});return e&&n[t](e),n}}},e[s]={value:function(){return a}},e[o]={value:function(){return function(e){return function(t){return a(t,e)}}}},e[u]={value:function(){return function(e){var n=new view2.AnimatedImage({config:e});return e&&n[t](e),n}}}}(config.binding),function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k="undefined",L="Timeout",A="subscribe",O="disposable",M="select",_="materialize",D="scheduleWithAbsolute",P="onNext",H="onCompleted",B="scheduleRecursiveWithAbsolute",j="now",F="scheduleWithRelative",I="number",q="object",R="getTime",U=!1,z=null,W="timestamp",X="value",V=!0,$="onError",J="scheduleRecursiveWithRelative",K="length",Q="accept",G="windowWithTime",Y="windowWithTimeOrCount",Z="selectMany";typeof e.module!==k&&typeof e.module.exports!==k?n=e.require("./rx.min.js"):n=e.Rx,r=n.Observable,i=r.prototype,s=r.createWithDisposable,o=r.defer,u=r.fromArray,a=r.throwException,f=n.Scheduler[L],l=n.SingleAssignmentDisposable,c=n.SerialDisposable,h=n.CompositeDisposable,p=n.RefCountDisposable,d=n.Subject,v=n.Internals.BinaryObserver,m=function(e,t){return s(function(n){return new h(t.getDisposable(),e[A](n))})},g=function(e,t,n){return s(function(r){var i=new l,s=new l,o=n(r,i,s);return i[O](e[_]()[M](function(e){return{switchValue:function(t){return t(e)}}})[A](o)),s[O](t[_]()[M](function(e){return{switchValue:function(t,n){return n(e)}}})[A](o)),new h(i,s)})},y=function(e){return e<0?0:e},b=function(e,t){return s(function(n){return t[D](e,function(){n[P](0),n[H]()})})},w=function(e,t,n){var r=y(t);return s(function(t){var i=0,s=e;return n[B](s,function(e){var o;r>0&&(o=n[j](),s+=r,s<=o&&(s=o+r)),t[P](i++),e(s)})})},E=function(e,t){var n=y(e);return s(function(e){return t[F](n,function(){e[P](0),e[H]()})})},S=function(e,t,n){return o(function(){return w(n[j]()+e,t,n)})},x=r.interval=function(e,t){return t||(t=f),S(e,e,t)},r.timer=function(e,n,r){var i;return r||(r=f),n!==t&&typeof n===I?i=n:n!==t&&typeof n===q&&(r=n),e instanceof Date&&i===t?b(e[R](),r):e instanceof Date&&i!==t?(i=n,w(e[R](),i,r)):i===t?E(e,r):S(e,i,r)},T=function(e,t,n){return s(function(r){var i=U,s=new c,o=z,u=[],a=U,f;return f=e[_]()[W](n)[A](function(e){var f,c;e[X].kind==="E"?(u=[],u.push(e),o=e[X].exception,c=!a):(u.push({value:e[X],timestamp:e[W]+t}),c=!i,i=V),c&&(o!==z?r[$](o):(f=new l,s[O](f),f[O](n[J](t,function(e){var t,s,f,l;if(o!==z)return;a=V;do f=z,u[K]>0&&u[0][W]-n[j]()<=0&&(f=u.shift()[X]),f!==z&&f[Q](r);while(f!==z);l=U,s=0,u[K]>0?(l=V,s=Math.max(0,u[0][W]-n[j]())):i=U,t=o,a=U,t!==z?r[$](t):l&&e(s)}))))}),new h(f,s)})},N=function(e,t,n){return o(function(){var e=t-n[j]();return T(e,n)})},i.delay=function(e,t){return t||(t=f),e instanceof Date?N(this,e[R](),t):T(this,e,t)},i.throttle=function(e,t){var n;return t||(t=f),n=this,s(function(r){var i=new c,s=U,o=0,u=z,a=n[A](function(n){var a,f;s=V,u=n,o++,a=o,f=new l,i[O](f),f[O](t[F](e,function(){s&&o===a&&r[P](u),s=U}))},function(e){i.dispose(),r[$](e),s=U,o++},function(){i.dispose(),s&&r[P](u),r[H](),s=U,o++});return new h(a,i)})},i[G]=function(e,n,r){var i,o=this;return n===t&&(i=e),r===t&&(r=f),typeof n===I?i=n:typeof n===q&&(i=e,r=n),s(function(t){var n=i,s=e,u=[],a=new c,f=0,v=new h(a),g=new p(v),y=function(){var e,o,c,h,p=new l;a[O](p),o=U,e=U,s===n?(o=V,e=V):s<n?o=V:e=V,c=o?s:n,h=c-f,f=c,o&&(s+=i),e&&(n+=i),p[O](r[F](h,function(){var n;e&&(n=new d,u.push(n),t[P](m(n,g))),o&&(n=u.shift(),n[H]()),y()}))};return u.push(new d),t[P](m(u[0],g)),y(),v.add(o[A](function(e){var t,n;for(t=0;t<u[K];t++)n=u[t],n[P](e)},function(e){var n,r;for(n=0;n<u[K];n++)r=u[n],r[$](e);t[$](e)},function(){var e,n;for(e=0;e<u[K];e++)n=u[e],n[H]();t[H]()})),g})},i[Y]=function(e,t,n){var r=this;return n||(n=f),s(function(i){var s=0,o=new c,u=0,a=new h(o),f=new p(a),v=function(t){var r=new l;o[O](r),r[O](n[F](e,function(){var e;if(t!==u)return;s=0,e=++u,g[H](),g=new d,i[P](m(g,f)),v(e)}))},g=new d;return i[P](m(g,f)),v(0),a.add(r[A](function(e){var n=0,r=U;g[P](e),s++,s===t&&(r=V,s=0,n=++u,g[H](),g=new d,i[P](m(g,f))),r&&v(n)},function(e){g[$](e),i[$](e)},function(){g[H](),i[H]()})),f})},i.bufferWithTime=function(e,n,r){var i;return n===t&&(i=e),r||(r=f),typeof n===I?i=n:typeof n===q&&(i=e,r=n),this[G](e,i,r)[Z](function(e){return e.toArray()})},i.bufferWithTimeOrCount=function(e,t,n){return n||(n=f),this[Y](e,t,n)[Z](function(e){return e.toArray()})},i.timeInterval=function(e){var t=this;return e||(e=f),o(function(){var n=e[j]();return t[M](function(t){var r=e[j](),i=r-n;return n=r,{value:t,interval:i}})})},i[W]=function(e){return e||(e=f),this[M](function(t){return{value:t,timestamp:e[j]()}})},C=function(e,n){return g(e,n,function(e){var n=U,r;return new v(function(t){t.kind==="N"&&(r=t),t.kind==="E"&&t[Q](e),t.kind==="C"&&(n=V)},function(){var i=r;r=t,i!==t&&i[Q](e),n&&e[H]()})})},i.sample=function(e,t){return t||(t=f),typeof e===I?C(this,x(e,t)):C(this,e)},i.timeout=function(e,n,r){var i,o=this;return n===t&&(n=a(Error(L))),r||(r=f),e instanceof Date?i=function(e,t){r[D](e,t)}:i=function(e,t){r[F](e,t)},s(function(t){var r,s=0,u=new l,a=new c,f=U,p=new c;return a[O](u),r=function(){var r=s;p[O](i(e,function(){var e;f=s===r,e=f,e&&a[O](n[A](t))}))},r(),u[O](o[A](function(e){var n=!f;n&&(s++,t[P](e),r())},function(e){var n=!f;n&&(s++,t[$](e))},function(){var e=!f;e&&(s++,t[H]())})),new h(a,p)})},r.generateWithAbsoluteTime=function(e,t,n,r,i,o){return o||(o=f),s(function(s){var u,a,f=V,l=U,c=e;return o[B](o[j](),function(e){l&&s[P](u);try{f?f=U:c=n(c),l=t(c),l&&(u=r(c),a=i(c))}catch(o){s[$](o);return}l?e(a):s[H]()})})},r.generateWithRelativeTime=function(e,t,n,r,i,o){return o||(o=f),s(function(s){var u,a,f=V,l=U,c=e;return o[J](0,function(e){l&&s[P](u);try{f?f=U:c=n(c),l=t(c),l&&(u=r(c),a=i(c))}catch(o){s[$](o);return}l?e(a):s[H]()})})}}(this),function(){var e="create",t="unsubscribe",n="outerSubscription",r="dispose",i="subscription",s="subscribe",o="observer",u="observableSubscription",a="Observable",f=Rx.Observer[e](function(e){var u,a,f;this.hasItem=!0;if(u)return;u=this[t],a=this.obsOrFunc,f=this[n],f!==undefined?(f[r](),this[n]=undefined):this[t]=!0,a instanceof Function?this[i]=a(e)[s](this[o]):this[i]=a[s](this[o])},function(e){if(this[t])return;this[o].onError(e)},function(){if(this[t])return;this.hasItem||this[o].onCompleted()}),l=Rx.Disposable[e](function(){var e=this[u],t=this[o],n=t[i];e!==undefined?(e[r](),this[u]=undefined):n!==undefined&&(n[r](),this.observerSubscription=undefined)}),c=Object[e](new Rx[a],{_subscribe:{value:function(i){var o=Object[e](f,{obsOrFunc:{value:this.obsOrFunc},observer:{value:i}}),u=this.source[s](o),a;return o[n]=u,a=Object[e](l,{observableSubscription:{value:u},observer:{value:o}}),o[t]&&u[r](),a}}});Rx[a].prototype.then=function(t){return Object[e](c,{source:{value:this},obsOrFunc:{value:t}})}}(),function(){var e="Observable",t=new Rx[e];t.subscribe=function(e,t,n){return typeof e=="function"?(e(this.value),n&&n()):(e.onNext(this.value),e.onCompleted()),Rx.Disposable.empty},Rx[e].fastReturnValue=function(e){return Object.create(t,{value:{value:e}})}}(),function(){var e="observer",t="Observable",n=Rx.Observer.create(function(t){var n=this.projection(t),r,i,s=this[e];for(i=0,r=n.length;i<r;i++)s.onNext(n[i])},function(t){this[e].onError(t)},function(){this[e].onCompleted()});Rx[t].prototype.selectManyArrays=function(e){var r=this;return Rx[t].fastCreateWithDisposable(function(t){return r.subscribe(Object.create(n,{observer:{value:t},projection:{value:e}}))})}}(),Rx.Observable.prototype.subscribeIgnoreErrors=function(e,t,n){return typeof e!="function"?(e.onError===undefined&&(e.onError=function(){}),this.subscribe(e)):(t===undefined&&(t=function(){}),this.subscribe(e,t,n))},Rx.Observable.prototype.windowWithTime=function(e){var t="onNext",n="length",r=null,i=this;return Rx.Observable.createWithDisposable(function(s){var o,u=[],a=function(){s[t](u.slice()),u[n]=0};return i.subscribe(function(t){u.push(t),o==r&&(o=setTimeout(a,e))},function(e){o!=r&&clearTimeout(o),u[n]>0&&s[t](u),s.onError(e)},function(){o!=r&&clearTimeout(o),u[n]>0&&s[t](u),s.onCompleted()})})},Rx.EventDisposable=function(e,t){this.observers=e,this.observer=t},Rx.EventDisposable.prototype=new Rx.Disposable,Rx.EventDisposable.prototype.dispose=function(){var e=this.observers,t=this.observer,n=e.length;while(n--)if(e[n]===t){e.splice(n,1);break}},Rx.Event=function(){this.observers=[]},Rx.Event.prototype=new Rx.Observable,Rx.Event.prototype.subscribe=function(e){var t=this.observers;return e=typeof e=="function"?{onNext:e}:e,this.observers[t.length]=e,new Rx.EventDisposable(t,e)},Rx.Event.prototype.onNext=function(e){var t,n=this.observers,r=0;while(r<n.length)t=n[r],t.onNext(e),t===n[r]&&r++},Rx.Observable.forkJoin=function(){var e="onCompleted",t=!0,n=function(e,t){return e.length===1&&e[t]instanceof Array?e[t]:slice.call(e)};return function(){var r=n(arguments,0);return Rx.Observable.createWithDisposable(function(n){var i,s,o,u,a,f,l=r.length;if(l===0)return n[e](),disposableEmpty;i=new Rx.CompositeDisposable,s=!1,o=Array(l),u=Array(l),a=Array(l);for(f=0;f<l;f++)(function(f){var c=r[f];i.add(c.subscribe(function(e){s||(o[f]=t,a[f]=e)},function(e){s=t,n.onError(e),i.dispose()},function(){var r;if(!s){if(!o[f]){n[e]();return}u[f]=t;for(r=0;r<l;r++)if(!u[r])return;s=t,n.onNext(a),n[e]()}}))})(f);return i})}}(),Rx.Observable.combineLatest=function(){var e="length",t="select",n=function(e,t){this.value=e,this.next=t};return n.prototype.toArray=function(){var e=this,t=[];while(e)t.push(e.value),e=e.next;return t},function(r,i){var s,o=r[e]-1;if(r[e]>1){s=r[o][t](function(e){return new n(e)});for(o=r[e]-2;o>=0;o--)s=s.combineLatest(r[o],function(e,t){return new n(t,e)});return s[t](function(e){return i.apply(null,e.toArray())})}return r[e]==1?r[0][t](i):Rx.Observable.empty()}}(),Rx.Observable.zip=function(){var e="length",t="select",n=function(e,t){this.value=e,this.next=t};return n.prototype.toArray=function(){var e=this,t=[];while(e)t.push(e.value),e=e.next;return t},function(r,i){var s,o=r[e]-1;if(r[e]>1){s=r[o][t](function(e){return new n(e)});for(o=r[e]-2;o>=0;o--)s=s.zip(r[o],function(e,t){return new n(t,e)});return s[t](function(e){return i.apply(null,e.toArray())})}return r[e]==1?r[0][t](i):Rx.Observable.empty()}}(),Rx.Observable.prototype.withPrevious=function(e){var t=this,n=arguments;return Rx.Observable.createWithDisposable(function(r){return n.length===1&&r.onNext({current:e,previous:undefined}),t.subscribe(function(t){r.onNext({current:t,previous:e}),e=t},function(e){r.onError(e)},function(){r.onCompleted()})})},Rx.Observable.prototype.toMap=function(e,t){var n=this;return Rx.Observable.createWithDisposable(function(r){var i={};return n.subscribe(function(n){var r=e(n);t&&(n=t(n)),i[r]=n},function(e){r.onError(e)},function(){r.onNext(i),r.onCompleted()})})},Rx.Observable.fastCreateWithDisposable=function(e){var t=new Rx.Observable;return t._subscribe=e,t},Rx.Observable.prototype.time=function(e){var t="-untilFirstOnNext",n="timeEnd",r="-fromFirstOnNextUntilCompletedOrError",i=this;return Rx.Observable.fastCreateWithDisposable(function(s){var o=!1,u=util.log;return u.time(e),u.time(e+t),i.subscribe(function(i){o||(u[n](e+t),u.time(e+r),o=!0),s.onNext(i)},function(i){u[n](e+t),u[n](e+r),u[n](e),s.onError(i)},function(){u[n](e+t),u[n](e+r),u[n](e),s.onCompleted()})})},Rx.Observable.prototype.buffer=function(e){var t="onCompleted",n=this;return Rx.Observable.createWithDisposable(function(r){var i,s,o,u=[];return n.subscribe(function(n){u.push(n),o===undefined&&(o=setTimeout(function(){o=undefined,r.onNext(u),u=[],i?r.onError(i):s&&r[t]()},e))},function(e){o===undefined?r.onError(e):i=e},function(){o===undefined?r[t]():s=!0})})},Rx.Observable.prototype.last=function(){var e=this;return Rx.Observable.fastCreateWithDisposable(function(t){var n,r=!1;return e.subscribe(function(e){n=e,r=!0},function(e){r&&t.onNext(n),t.onError(e)},function(){r&&t.onNext(n),t.onCompleted()})})},Rx.Observable.fromArrayFast=function(e){return Rx.Observable.fastCreateWithDisposable(function(t){var n,r;for(n=0,r=e.length;n<r;n++)t.onNext(e[n]);t.onCompleted()})},Rx.Observable.prototype.toArrayFast=function(){var e=this;return Rx.Observable.fastCreateWithDisposable(function(t){var n=[];return e.subscribe(function(e){n.push(e)},function(e){t.onError(e)},function(){t.onNext(n),t.onCompleted()})})},Rx.Observable.prototype.finalValueFast=function(){var e=this;return Rx.Observable.fastCreateWithDisposable(function(t){var n,r=!1;return e.subscribe(function(e){r=!0,n=e},function(e){t.onError(e)},function(){r&&t.onNext(n),t.onCompleted()})})},Rx.Observable.prototype.reduce=function(e){var t,n,r="finalValue";return arguments.length===2&&(n=!0,t=arguments[1]),n?this.scan(t,e).startWith(t)[r]():this.scan(e)[r]()},Rx.Observable.prototype.or=function(e){return this.selectMany(function(t){return t?Rx.Observable.returnValue(t):e})},Rx.Observable.or=function(){var e=Array.prototype.slice.call(arguments),t=e[0],n=1;for(n;n<e.length;n+=1)t=t.or(e[n]);return t},function(e){var t="_hasValue",n="onNext",r="_value",i="_subscribe",s="prototype",o="Subject",u="ReplayLastSubject",a=function(u){return this[t]&&u[n](this[r]),e[o][s][i].call(this,u)};e[u]=function(n){e[o].call(this),this[r]=n,this[t]=arguments.length>0,this[i]=a},e[u][s]=Object.create(e[o][s]),e[u][s].constructor=e[u],e[u][s][n]=function(i){if(!this[t]||i!==this[r])this[r]=i,this[t]=!0,e[o][s][n].call(this,i)},e.Observable[s].replayLast=function(){var t=new e[u];return this.subscribe(t),t}}(Rx),Rx.Observable.prototype.retryWhile=function(e,t){var n=this;return Rx.Observable.create(function(r){var i,s=0,o=function(){i=n.subscribe(function(e){r.onNext(e)},function(n){s<t&&e(n)?(s++,o()):r.onError(n)},function(){r.onCompleted()})};return o(),function(){i.dispose()}})},function(e){e.Observable.prototype.takeUntilSettled=function(e){var t=this;if(typeof e!="number")throw Error("Rx.Observable#takeUntilSettled() expects a number");return Rx.Observable.createWithDisposable(function(n){function i(e){clearTimeout(r),e?n.onError(e):n.onCompleted()}function s(t){clearTimeout(r),n.onNext(t),r=setTimeout(i,e)}var r;return t.subscribe(s,i,i)})}}(Rx),function(e){function s(r,i,s){return e[t].createWithDisposable(function(e){return r.subscribe(function(t){e.onNext(t),e[n]()},e.onError.bind(e),function(){i?(e.onNext(s),e[n]()):e.onError(Error("Sequence contains no elements."))})})}var t="Observable",n="onCompleted",r="firstOrDefault",i=e[t].prototype;i.first=function(e,t){return e?this.where(e,t).first():s(this,!1)},i[r]=function(e,t){return e?this.where(e)[r](null,t):s(this,!0,t)}}(Rx),util.defineProperty=function(e,t,n,r){return r=r||{enumerable:!0,configurable:!0},r.value=n,Object.defineProperty(e,t,r),n},view.DialogWidget=view.AbstractUiWidget.extend({init:function init(e){init.base.call(this,undefined,e),this._buttonViews=[],this.buttonPointerEnter=new Rx.Subject,this.buttonPointerDown=new Rx.Subject,this._isPointerConstrained=!1,this._reset()},updateButtonState:function(e,t){var n=this._buttonViews;n[e]&&n[e].update({state:"default"}),n[t]&&n[t].update({state:"focused"})},get _view2ButtonContainer(){var e=application.Binding.get("CONTAINER_FACTORY")({id:"HACKY-button-vw-container",layoutDirection:"vertical",padding:{top:25,left:150}});return e.element.parent=this._getWidget("app-dialog-buttons"),e.show(),util.defineProperty(this,"_view2ButtonContainer",e)},renderModel:function(){var e,t,n,r,i="_getWidget",s="textContent",o=this._model,u=o.buttons,a=this[i]("app-dialog-message-text"),f=this[i]("app-dialog-code"),l=this._view2ButtonContainer,c=this._buttonViews,h=this.buttonPointerEnter,p=this.buttonPointerDown,d=o.dialogClass,v=this._getRootWidget();this._reset(),a[s]=o.message,f[s]=o.code||"";if(u&&u.length){t=u.items,r=t.length;for(n=0;n<r;n++)e=new view2.DialogButton,e.update({text:t[n].label}),c.push(e),e.show(),l.addChild(e),e.pointerEnter=h.onNext.bind(h,n),e.pointerDown=p.onNext.bind(p,n);this.updateButtonState(-1,0),d&&v&&(v.mutation=d)}},setConstrainPointer:function(e){var t,n="_isPointerConstrained",r="constrainPointer";this[n]!==e&&(this[n]=e,t=application.Binding.get("EVENT_DISPATCHER"),e?t[r](this._buttonViews):t[r](null))},_reset:function(){var e,t=this._getWidget("app-dialog-message-text"),n=this._buttonViews,r=n.length;if(!t)throw Error("No widget appMessageText");t.textContent="";while(r--)e=n[r],this._view2ButtonContainer.removeChild(e),e.pointerEnter=e.pointerDown=null;n.length=0,this.setConstrainPointer(!1)}}),function(){var e=application.Binding,t=e.Type,n=t.CLASS}(),application.started=new Rx.ReplaySubject,util.ExecutionDeferrer=new(util.Timeout.extend({init:function init(){init.base.call(this,this._doTasks,this._DELAY,this)},LOW:0,MEDIUM:50,HIGH:100,_DELAY:10,add:function(e,t,n){var r="_tasks",i=[e,t,n||0];this[r]?this[r].push(i):this[r]=[i],this.active||this.run()},remove:function(e,t){var n,r,i,s=this._tasks;for(n=0,r=s.length;n<r;n++){i=s[n];if(e===i[0]&&(!t||t===i[1])){s.splice(n,1);return}}},_doTasks:function(){var e,t,n,r,i,s=this._tasks;if(s===undefined){util.log.error("Gibbon Bug? util.ExecutionDeferrer this._tasks === undefined, _doTasks called twice?");return}delete this._tasks,s.sort(this._sort);for(e=0,t=s.length;e<t;e++){n=s[e],r=n[0],i=n[1];try{i?r.call(i):r()}catch(o){}}},_sort:function(e,t){return e[2]-t[2]}})),util.clearMap=function(e){var t;for(t in e)delete e[t]},util.Observable=util.Class.create({init:function(e){e&&e.deferNotify&&(this._deferNotify=e.deferNotify)},_deferNotify:!1,_observersCount:0,get hasObservers(){return this._observersCount>0},hasObserver:function(e){var t,n=this._observers;return Boolean(n&&(t=e.uuid)&&t in n)},subscribe:function(e,t){var n,r="_observers",i=this[r]||(this[r]={}),s=e.uuid,o=!(s&&s in i);return o&&(s||(s=util.ensureUuid(e)),n=typeof e=="function",i[s]=n||!t?e:[e,t],this._observersCount++),o},unsubscribe:function(e){var t,n="_observersCount",r=e.uuid;if(r&&this[n]){t=this._observers;if(r in t)return delete t[r],this[n]--,!0}return!1},unsubscribeAll:function(){var e=this._observers;e&&(util.clearMap(e),this._observersCount=0)},notify:function(){var e="_observersCount",t="_notifying",n="_notifyArgs";if(!this[e])return;this._deferNotify?this[t]||(this[t]=!0,this[n]=arguments,util.ExecutionDeferrer.add(function(){var r=this[n];delete this[n],delete this[t],this[e]&&this._doNotify.apply(this,r)},this)):this._doNotify.apply(this,arguments)},_doNotify:function(){var e,t,n=this._observers;for(e in n)t=n[e],typeof t=="function"?t.apply(t,arguments):t instanceof Array?t[1].apply(t[0],arguments):t.update.apply(t,arguments)}}),util.MultiLock=util.Observable.extend({_lockCnt:0,lock:function(e){var t,n=e.uuid,r=this._locked||(this._locked={});n&&n in r||(n||(n=util.ensureUuid(e)),r[n]=!0,t=this._lockCnt++,t||this.notify(!0))},unlock:function(e){var t,n=e.uuid,r=this._lockCnt;n&&r&&(t=this._locked,t&&n in t&&(delete t[n],r=--this._lockCnt,r||this.notify(!1)))}}),application.AppLock=new util.MultiLock,devicebridge.hasNrdp=Boolean(window.nrdp),util.CurrentUrlParams.get("isPs3")?(devicebridge.isPs3=!0,devicebridge.isPs3Faked=!0):Object.defineProperty(devicebridge,"isPs3",{get:function(){return devicebridge.Adapter.device.ESNPrefix==="NFPS3-001-"}}),function(){var e,t,n,r,i="CustomKeys",s="key.enter",o="key.back",u="key.context_sensitive_1",a="key.context_sensitive_2",f="key.track_next",l="key.track_prev",c="key.l1",h="key.l2",p="key.r1",d="key.r2",v="key.rewind",m="key.fastfwd",g="key.debug_menu",y="key.top_menu";if(window.nrdpPartner&&nrdpPartner.Keys)t=nrdpPartner.Keys,n=nrdpPartner[i]||{},r={"key.cross":s,"key.a":s,"key.circle":o,"key.b":o,"key.square":u,"key.top_menu":u,"key.triangle":a,"key.options":a,"key.return":o,"key.next":f,"key.prev":l,"key.x":u,"key.y":a,"key.lshoulder":c,"key.ltrigger":h,"key.rshoulder":p,"key.rtrigger":d,"key.left_scan":v,"key.right_scan":m,"key.r3":g,"key.rthumb":g,"key.select":g};else{e=!window.nrdp,t={13:s,27:o,35:"key.options",37:"key.left",38:"key.up",39:"key.right",40:"key.down",46:"key.info",48:"key.0",49:"key.1",50:"key.2",51:"key.3",52:"key.4",53:"key.5",54:"key.6",55:"key.7",56:"key.8",57:"key.9",97:"key.step_prev",98:"key.pause",99:"key.step_next",100:v,101:"key.play",102:m,103:l,104:"key.stop",105:f,106:"key.clear",109:"key.time",110:"key.search",111:"key.angle",118:y,119:"key.popup_menu",120:"key.display",121:"key.subtitle",122:"key.audio",123:"key.exit",187:"key.power",219:"key.red",220:"key.green",221:"key.blue",222:"key.yellow"},e&&(t[192]="key.tilde");if(e||devicebridge.isPs3)t[36]="key.start",t[45]=o,t[46]=y,t[112]=c,t[113]=p,t[114]=h,t[115]=d,t[116]="key.l3",t[117]="key.r3",t[145]="key.select"}t[8]||(t[8]="key.backspace"),t[32]||(t[32]="key.space"),t[9]||(t[9]="key.tab"),util.Keys=t,util[i]=n,util.SemanticKeyNames=r,Object.defineProperty(util.Keys,"getKeyName",{value:function(e){var i=n[e]||t[e];return r[i]&&(i=r[i]),i}})}(),function(e){var t,n,r,i="keyup",s="keydown",o="keypress",u=!1,a="length",f="Subject",l="defineProperty",c=!0,h="addEventListener",p="onNext",d="repeat",v="type",m=[i,s,o],g=[{registrar:gibbon,eventName:"mouse"}],y=["mouseup","mousedown","mouseover","mousemove"],b=u,w=0,E=u;for(r=0;r<m[a];r+=1)e[m[r]]=new Rx[f];for(r=0;r<g[a];r+=1)n=g[r],Object[l](e,n.eventName,{writeable:c,configurable:c,get:function(t){var r=new Rx[f],i=t.eventName;return Object[l](e,i,{value:r}),n.registrar&&t.registrar[h](i,function(t,n){e[t][p](n)}.bind(null,i)),r}.bind(null,n),set:NOOP});model.AppConfig.loaded.subscribe(function(t){b=t.reliableKeyRepeat,b||e[i].subscribe(function(){w=0,E=u})},NOOP),gibbon[h]("key",function(t){var n=t.data,r={keyCode:n.code,which:n.code,preventDefault:NOOP,nativeInfo:n,repeat:n[d],count:n.count,key:util.Keys.getKeyName(n.code),code:n.code,text:n.text,modifiers:n.modifiers,type:n[v]};n[v]==="press"?(r[v]=s,b||(n[d]&&!E&&(w++,w===3&&(E=c)),r.nativeInfo[d]=E),e[s][p](r)):(r[v]=i,e[i][p](r),r[v]=o,e[o][p](r))}),t=new Rx[f];for(r=0;r<y[a];r+=1)e[y[r]]=t}(application),util.IdleTimeout=util.Timeout.extend({init:function init(e,t,n,r,i){this._onIdle=e,this._onWake=t,this._onWakeEvent=util.proxy(this._onWakeEvent,this),this._wakeTime=util.Date.now(),r&&(this._idleScope=r),i&&i instanceof Array&&i.length>0&&(this._wakeEvents=i),this._eventSubscriptions=[],init.base.call(this,this._onDelay,n,this)},_wakeEvents:["mouse","keydown"],_onDelay:function(){var e,t=this._wakeTime+this._delayMs-util.Date.now();t>0?this.run(t):(e=this._onIdle,e&&e.call(this._idleScope||this),this._isIdle=!0)},_onWakeEvent:function(){var e=this._onWake;this._wakeTime=util.Date.now(),this._isIdle&&(e&&e.call(this._idleScope||this),this._isIdle=!1)},_addEventSubscriptions:function(){var e,t,n=this._wakeEvents,r=this._eventSubscriptions;if(r.length)return;for(e=0,t=n.length;e<t;e++)r.push(application[n[e]].subscribe(this._onWakeEvent))},_removeEventSubscriptions:function(){var e,t=this._eventSubscriptions,n=t.length;if(!n)return;for(e=0;e<n;e++)t[e].dispose();t.length=0},run:function run(){var e=run.base.apply(this,arguments);return this._addEventSubscriptions(),e},clear:function clear(){var e=clear.base.apply(this,arguments);return this._removeEventSubscriptions(),e}}),application.IdleTimeout=util.IdleTimeout.extend({init:function init(e,t,n,r,i){init.base.call(this,e,t,n,r,i),application.AppLock.subscribe(this,this._lockChanged)},_lockChanged:function(e){e?this.clear():this.run()}}),function(e){var t=null,n="object";e.pureMixin=function(e,r){var i,s,o,u,a=Object.keys(r),f=netflix.pureMixin,l={};for(u=a.length-1;u>=0;u--)i=a[u],s=r[i],o=e[i],o!==undefined&&s!==undefined&&o!==t&&s!==t&&typeof o===n&&typeof s===n&&(r[i]=f(o,s)),r[i]={value:r[i]};return Object.create(e,r)},e.deepMixin=function(r,i){var s,o,u;if(r===undefined||r===t)return i;for(s in i)o=r[s],u=i[s],typeof o===n&&u!==undefined&&u!==t&&typeof u===n?e.deepMixin(o,u):r[s]=u;return r}}(netflix),netflix.notification={notifications:new Rx.Subject},function(){var e="_eventsQueuedBeforeEnabled",t="sessionName",n="sessionId",r="sessionState",i="_isEventEnabledByEventNameByCategory",s="category",o="_getEventSpecification",u="maxBufferSize",a="length",f="maxFlushDelay",l="specification",c="enabled",h="sessionStarted",p="sequence",d="onNext",v="suppressPercentage",m="sessionEnded",g="_timestampOffset",y="_queuedRequests",b="unsentRequests",w="isArray",E=!1,S="retryCount",x="Observable",T="_arrayIndexWhere",N="_enabledChanges",C="object",k="queuedRequests",L="events",A="metadata",O="eventsWithActiveSessions",M=!0,_="sessionsList",D="_writePromotedProperties",P="_retryFailedRequests",H="type",B="_timeStampGenerator",j="ClientNotifications",F="removeQueuedRequest",I="selectMany",q="Subject",R="event",U="time",z="outgoingRequests",W="push",X="timeStampOffset",V="_queue",$="_flushes",J="start",K="nextGuid",Q="sessions",G="subscribe",Y="notification",Z="_getEventKey",et="defineProperty",tt="_addTimeAndIds",nt="both",rt="disabledChance",it="_createRequest",st="onNotifyStart",ot={enumerable:E},ut=function(){},at=util.isObjectOrArray;netflix[Y][j]=function(t){var n,s,o,a,h,v,m,w,E,T,C,k;t=t||{},n=this,s=t.requestSender||ut,o=t.timeStampGenerator||function(){return 0},a=t.guidGenerator||ut,h=t.log||ut,v=t[u],m=t[f],w=t[l],E=t[r],T=t.retryFailedRequests,C=t[A]||{},k=isNaN(t[X])?0:t[X],this.setTimeStampOffset(k),this.log=h,this[A]=C,this[l]=w,this[P]=Boolean(T),this[r]=E||{sessions:{},sessionsList:[]},this[L]=this._createEvents(),this[p]=1,this[g]=0,this[B]=o,this[f]=m,this[u]=v,this[y]=[],this[V]=[],this[K]=a,this[O]=this._createEventsWithActiveSessions(),this[$]=new Rx[q],this[z]=this._createRequests(),this[b]=new Rx[q],this[c]=undefined,this[N]=new Rx[q],this[i]={},this[e]=[],this.requests=this[z].merge(this[b][I](function(e){return n[c]?Rx[x].returnValue(e):n[N].where(function(e){return e===M}).select(function(){return e}).take(1)}))[I](function(e){var t;return n[y][W](e),e[U]=e[U]||n.timeStamp(),e[S]=e[S]||0,t=n.getRequestSendDelayMs(e),t&&n.log("Delaying request with timestamp "+e[U]+" by "+t+"ms..."),Rx[x].timer(t).take(1)[I](function(){return s(e).doAction(function(){n[F](e)},function(){n[F](e),n[P]&&(++e[S],n.log("Request failed, retrying..."),n[b][d](e))}).catchException(function(){return Rx[x].returnValue(e)})})}).publish().connect()},netflix[Y][j].prototype={setTimeStampOffset:function(e){this[g]=e},getTimeStampOffset:function(){return this[g]},timeStamp:function(){return this[B]()+this[g]},getRequestSendDelayMs:function(e){var t=e[S]||0;return 100*(t&&Math.pow(2,t))},removeQueuedRequest:function(e){var t=this[y],n=t.indexOf(e);n>-1&&t.splice(n,1)},suspend:function(){var t,n=this,i={metadata:this[A],maxBufferSize:this[u],maxFlushDelay:this[f],eventsQueuedBeforeEnabled:this[e],sequence:undefined,enabled:this[c],sessionState:this[r],queuedRequests:this[y].slice(0)};return this[u]=Number.MAX_VALUE,this[r][_].concat(this[e]).filter(function(e){var t=n[o](e);return t&&t.cancelOnSuspend}).forEach(function(e){n.notifyEnd(e,{data:{reason:"canceled"}})}),t=this.createRequestFromUnsentEvents(),t&&i[k][W](t),i[k].forEach(function(e){delete e[S]}),i[p]=this[p],i},restore:function(t){this[u]=t[u]||this[u],this[f]=t[f]||this[f],this[e]=t.eventsQueuedBeforeEnabled||this[e],this[p]=t[p]||this[p],netflix.deepMixin(this[A],t[A]||{}),this[r]=t[r]||this[r],t[c]===E&&this[J](t[c]),this.addToUnsentRequests(t[k]||[])},addToUnsentRequests:function(e){var t;if(Array[w](e)){this.log("Adding "+e[a]+" unsent requests.");for(t=0;t<e[a];++t)this[b][d](e[t])}},notify:function(e,t,n){return n=n||{},n[H]=R,n[s]=e,n.name=t,this[c]!==E&&this[L][d](n),n},start:function(t){var n,r=this[e],i=r[a];if(t===undefined)return;this[c]=t;if(t===M)for(n=0;n<i;n++)this[L][d](r[n]);r[a]=0,this[N][d](t)},getSession:function(n,i){var o,u,f,l,h=n+"."+i;if(this[c])return this[r][Q][h];u=this[e],o=u[a];for(l=o-1;l>=0;--l){f=u[l];if(f[s]===n&&f[t]===i)return f}},_getEventKey:function(e){return e[s]+"."+e[t]},notifyStart:function(e,i,o){var u,a,f,l;o=o||{},u=o[n],o[H]=h,o[s]=e,o.name=i+".started",o[t]=i;if(u!==undefined){a=this[Z](o),f=this[r][Q][a];if(f!==undefined)if(Array[w](f)){l=this[T](f,function(e){return e[n]===u});if(l!==-1)return f[l]}else if(f[n]===o[n])return f}return this[c]!==E&&this[L][d](o),o},notifyEnd:function(e,r,i){var o=e,u=r;return o[s]!==undefined?(e=o[s],r=o[t],u=u||{},u[n]=o[n],i=u):i=i||{},i[H]=m,i[s]=e,i.name=r+".ended",i[t]=r,this[c]!==E&&this[L][d](i),i},areEventsQueued:function(){return this[V][a]>0},flush:function(){this[$][d]()},_arrayIndexWhere:function(e,t){var n;for(n=e[a]-1;n>=0;n--)if(t(e[n]))return n;return-1},_getEventSessionKey:function(e){var r=e.sessionKey;return r===undefined&&(r=[e[s],e[t],e[n]],e.sessionKey=r),r},_isEventEnabled:function(e,n){var r,o,u=this[i][e[s]]||{};return this[i][e[s]]=u,typeof u[e[t]]!="undefined"?u[e[t]]:(r=Number(n[rt]),r=isNaN(r)?0:r,o=Math.floor(Math.random()*100)>=r,u[e[t]]=o,o||this.log("Disabling "+e[s]+"."+e[t]+" (disabledChance: "+(n[rt]||0)+")"),o)},_getSuppressPercentage:function(e){var t=Number(e[v]);return isNaN(t)?0:t},_getEventSpecification:function(e){var n=this[l],r=undefined,i=e[l];if(i&&typeof i===C)return i;if(!n||typeof n!==C)i={};else{r=n[e[s]]||{},i=r[e[t]]||r[e.name];if(!i||typeof i!==C)i={},r&&typeof r===C&&(r[e.name]=i)}return i[v]=this._getSuppressPercentage(i),e[l]=i,Object[et](e,l,ot),i},_addTimeAndIds:function(e){return e[U]===undefined&&(e[U]=this.timeStamp()),e.id===undefined&&(e.id=this[K]()),e[H]===h&&e[n]===undefined&&(e[n]=this[K]()),e},_createEvents:function(){var t=this,n=new Rx[q],r=n[d];return n[d]=function(i){t[tt](i),t[c]===undefined?t[e][W](i):t[c]===M&&r.call(n,i)},n},_writePromotedPropertyValueToPath:function(e,t,n){var r,i,s;for(r=0;r<t[a]-1;r++){i=t[r],s=e[i];if(s===null||typeof s!==C)s={},e[i]=s;e=s}e[t[t[a]-1]]=n},_writePromotedPropertiesFromSession:function(e,n,r){var i,o,u,a,f,l,c,h=n.data;if(h===undefined)return;for(i in e){o=e[i],o===M&&(o=i);if(at(o)&&!Array[w](o)){u=o,a=u[r[s]],f=at(a)&&a[r[t]],l=at(a)&&a.default!==undefined?a.default:u.default,l=l===undefined?E:l,c=a===undefined||at(a)&&f===undefined;if(a===E||f===E||c&&l===E)continue;if(f===M||a===M||c&&l===M)o=i;o=c?l:f!==undefined?f:a}Array[w](o)?this._writePromotedPropertyValueToPath(r,o,h[i]):r[o]=h[i]}},_writePromotedProperties:function(e,t,n){var r,i,s,u;for(r=0;r<e[a];r++)i=e[r],s=this[o](i),s&&(u=s[t],u!==undefined&&this._writePromotedPropertiesFromSession(u,i,n))},_createEventsWithActiveSessions:function(){var e=this;return Rx[x].createWithDisposable(function(i){var u=function(f){var l=e[r],c=l[Q],v,g,y,b,E,S=l[_],x,N,C,k,L,A,O,M,P,B;if(f[H]!==R){C=e[o](f),N=e[Z](f),v=c[N],Array[w](v)?g=v[v[a]-1]:g=v;if(f[H]===h){if(g!==undefined){if(g[n]===f[n])return g;if(!C||!C.overlapping)return e.log("Implicitly ending "+f[s]+"."+f[t]),u(e[tt]({type:m,category:f[s],name:f[t]+".ended",sessionName:f[t],sessionId:v[n],time:f[U]})),u(f);Array[w](v)||(v=[v],c[N]=v),v[W](f),S[W](f)}else c[N]=f,S[W](f);C&&(C.send===J||C.send===nt)&&((M=e[st])&&M(f),(M=C[st])&&M(f))}else if(f[H]===m){if(v===undefined)return;f[n]!==undefined?Array[w](v)?(O=e[T](v,function(e){return e[n]===f[n]}),O!==-1&&(k=v[O],v.splice(O,1),v[a]===0&&(c[N]=undefined))):v[n]===f[n]&&(k=v,c[N]=undefined):Array[w](v)?(k=v.pop(),v[a]===0&&(c[N]=undefined)):(k=v,c[N]=undefined);if(k===undefined)return;f[n]=k[n],x=S[a],S[x-1].id===k.id?S[a]=x-1:(O=e[T](S,function(e){return e.id===k.id}),O!==-1&&S.splice(O,1)),f.duration===undefined&&(f.duration=f[U]-k[U]),C&&(C.send==="end"||C.send===nt)&&((P=e.onNotifyEnd)&&P(k,f),(P=C.onNotifyEnd)?P(k,f):C.send==="end"&&(f.data===undefined&&(f.data={}),f.data=netflix.deepMixin(f.data,k.data)))}}else e.onNotify&&e.onNotify(f);if(f[H]===R||C!==undefined&&(C.send===nt||f[H]===h&&C.send===J||f[H]===m&&C.send==="end"&&k!==undefined)){f[p]=e[p],e[p]++,A=[];for(B=0;B<S[a];B++)b=S[B],E=e[o](b),E&&E.send!==undefined&&A[W](e._getEventSessionKey(b));f.activeSessions=A,e[D](S,"eventProperties",f),f[r]=l,Object[et](f,r,ot),i[d](f)}};return e[L][G](u,function(e){i.onError(e)},function(){i.onCompleted()})})},createRequestFromUnsentEvents:function(){if(this.areEventsQueued())return this[it](this[V])},clearDisabledEvents:function(){var e,t,n,r=this[i];this.log("Clearing disabled state for all event types");for(t in r){e=r[t]||{};for(n in e)delete e[n]}},_canSendEvent:function(e){var t=this[o](e);return this._isEventEnabled(e,t)&&(t[v]===0||Math.floor(Math.random()*100)>=t[v])},_createRequest:function(e){var t,n=this,i={};return n[D](this[r][_],"requestProperties",i),i[L]=e.filter(n._canSendEvent.bind(n)),(t=n.onRequest)&&t(i),i},_createRequests:function(){var e=this;return Rx[x].create(function(t){var n,r=e[V],i=function(){var e;r[a]>0&&(n=clearTimeout(n),e=r.slice(0),r[a]=0,t[d](e))},s=function(){l!==undefined&&l.dispose(),o!==undefined&&o.dispose(),n&&(n=clearTimeout(n))},o=e[$][G](function(){i()},function(e){s!==undefined&&s(),t.onError(e)},ut),l=e[O][G](function(t){r[a]===1&&(n=setTimeout(i,e[f])),r[W](t),e[u]<=r[a]&&i()},function(e){s(),t.onError(e)},function(){i(),s(),t.onCompleted()});return s}).select(function(t){return e[it](t)})}}}(),function(){var e="end",t=!0,n="data",r="both",i="error",s="deepError";netflix.notification.specification={uiIntent:{startPlay:{send:e},rateTitle:{send:e},addToPlaylist:{send:e},removeFromPlaylist:{send:e},startnonmember:{send:e},authenticate:{send:e},fatalError:{send:e},showLegalTerms:{send:e},closeLegalTerms:{send:e},subscription:{send:e},login:{send:e},startSignup:{send:e},finishSignup:{send:e},unsupportedCountryInput:{send:e},forgotPassword:{send:e},payment:{send:e},register:{send:e},submitUnsupportedCountryEmail:{send:e},showPrivacyPolicy:{send:e},closePrivacyPolicy:{send:e},resetPassword:{send:e},emailTou:{send:e},acceptTou:{send:e},updatePayment:{send:e},backToLanding:{send:e},upgradeStreams:{send:e}},falkor:{remoteGetRequest:{send:e,overlapping:t,cancelOnSuspend:t},remoteCallRequest:{send:e,overlapping:t,cancelOnSuspend:t}},uiView:{focus:{send:e,overlapping:t},command:{send:e,cancelOnSuspend:t}},uiQOE:{deepLinkTarget:{eventProperties:{destinationView:{uiQOE:{uiStartup:[n,"destinationView"]}},searchTerm:{uiQOE:{uiStartup:[n,"searchTerm"]}}}},appSession:{send:r},userSession:{send:r},uiStartupErrorPromotion:{eventProperties:{display:{uiQOE:{uiStartup:[n,"display"]}},trigger:{uiQOE:{uiStartup:[n,"trigger"]}},activeABTests:{uiQOE:{uiStartup:[n,"activeABTests"]}},deepError:{uiQOE:{uiBrowseStartup:[n,i,s],uiStartup:[n,i,s]}}}},uiBrowseStartup:{send:e},uiStartup:{send:e},uiDataRequest:{cancelOnSuspend:t,overlapping:t,send:e},locale:{requestProperties:{value:"locale"}},appName:{requestProperties:{value:"appName"}},device:{requestProperties:{value:"device"}},version:{requestProperties:{value:"version"}},browserLocation:{requestProperties:{requestUrl:"requestUrl",referrerUrl:"referrerUrl"}},authorization:{requestProperties:{netflixId:"netflixId"},eventProperties:{mode:"mode"}},jfk:{eventProperties:{value:"jfk"}},uiModalView:{eventProperties:{value:"modalView"}}},tvui:{redirect:{send:r},videoList:{send:e,overlapping:t,cancelOnSuspend:t},startupProfile:{send:e,overlapping:t,cancelOnSuspend:t},startupReport:{send:r}},search:{search:{send:r},term:{send:"start"},page:{},explore:{send:e}}}}(),util.TimeService={now:function(){var e=model.AppConfig,t=e&&e.timeOffset||0;return util.Date.now()+t}},typeof JSON.decycle!="function"&&(JSON.decycle=function(e){"use strict";var t=[],n=[];return function r(e,i){var s,o,u;if(typeof e!="object"||e===null||e instanceof Boolean||e instanceof Date||e instanceof Number||e instanceof RegExp||e instanceof String)return e;for(s=0;s<t.length;s+=1)if(t[s]===e)return{$ref:n[s]};t.push(e),n.push(i);if(Object.prototype.toString.apply(e)==="[object Array]"){u=[];for(s=0;s<e.length;s+=1)u[s]=r(e[s],i+"["+s+"]")}else{u={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&(u[o]=r(e[o],i+"["+JSON.stringify(o)+"]"))}return u}(e,"$")}),typeof JSON.retrocycle!="function"&&(JSON.retrocycle=function retrocycle($){"use strict";var px=/^\$(?:\[(?:\d+|\"(?:[^\\\"\u0000-\u001f]|\\([\\\"\/bfnrt]|u[0-9a-zA-Z]{4}))*\")\])*$/;return function rez(value){var i,item,name,path;if(value&&typeof value=="object")if(Object.prototype.toString.apply(value)==="[object Array]")for(i=0;i<value.length;i+=1)item=value[i],item&&typeof item=="object"&&(path=item.$ref,typeof path=="string"&&px.test(path)?value[i]=eval(path):rez(item));else for(name in value)typeof value[name]=="object"&&(item=value[name],item&&(path=item.$ref,typeof path=="string"&&px.test(path)?value[name]=eval(path):rez(item)))}($),$}),util.storage={getJSON:function(e,t,n){var r,i=e.getItem(t);if(i!=null)try{return r=JSON.parse(i),JSON.retrocycle(r)}catch(s){}return n},setJSON:function(e,t,n){var r=JSON.decycle(n);return this.setItem(e,t,JSON.stringify(r))},setItem:function(e,t,n){try{e.getItem(t)!==n&&e.setItem(t,n)}catch(r){return r}},getItems:function(e,t){var n,r,i,s,o={};for(n=0,r=t.length;n<r;n++)i=t[n],s=e.getItem(i),s!=null&&(o[i]=s);return o},setItems:function(e,t){var n;for(n in t)this.setItem(e,n,t[n])},prune:function(e,t){var n,r,i,s=[];for(n=0,r=e.length;n<r&&!!t;n++)i=e.key(n),t.indexOf(i)===-1&&s.push(i);for(n=0,r=s.length;n<r;n++)e.removeItem(s[n])}},devicebridge.Adapter={},model.CurrentUser={loaded:new Rx.ReplaySubject,setModel:function(e){var t;e&&!e._error?(util.extend(this,e),t=this.loaded,t.onNext(this),t.onCompleted()):this.error()},error:function(e){this.loaded.onError(new util.Error("CurrentUser model empty",config.debugCodes.authentication.currentUser,e))}},model.userAndConfigLoaded=new Rx.ReplaySubject,function(e){var t=function(){model.CurrentUser.loaded.zip(model.AppConfig.loaded,function(e,t){return{CurrentUser:e,AppConfig:t}}).subscribe(model.userAndConfigLoaded)};t(),e.userAndConfigLoadedInit=t}(model),util.performPolyFills=function(e,t){var n,r,i,s,o,u,a="notPresent",f=function(t,n){n.__get__||n.__set__?Object.defineProperty(e,t,{get:n.__get__||undefined,set:n.__set__||undefined,configurable:!0}):e[t]=n};for(n in t){i=t[n],r=typeof e[n]!="undefined",!r&&i[a]!==undefined&&f(n,i[a]),i.replace!==undefined&&f(n,i.replace),s=i.selectAvailable;if(s)for(o=0,u=s.length;o<u;o++)if(s[o]!==undefined){f(n,s[o]);break}i.action&&i.action(r,e)}},window.nrdp&&(devicebridge.adapterLoaded=new Rx.ReplaySubject,devicebridge.nrdpInited.subscribeIgnoreErrors(function(){var e,t,n,r,i,s,o=!0,u="device",a="platform",f="performPolyFills",l="garbageCollect",c="_uiVersion",h="AudioProfiles",p="enableAudioCodecSwitch",d="CurrentUrlParams",v="log",m="resetSessionID",g="onCompleted",y="sessionIDChanged",b="registration",w="factoryReset",E="UILanguages",S="adapterLoaded",x=devicebridge.Adapter;nrdp._nbpdAsync=o,x[u]=nrdp[u],t=x[u],n=x[u].SDKVersion.components;if(n&&n[a]&&n[a].platformType){i=n[a];for(s in i)r?(r+=" : ",r+=i[s]):r=i[s]}else r=n.sdk;x.hasNrdp=o,x.useBCP47=o,x.supportedOutsideUSAndCanada=o,x.platformVersion=r,util[f](x,{getMonotonicTime:{replace:nrdp.mono?function(){return nrdp.mono()}:function(){return Date.now()}},errorPageUrl:{replace:{__get__:function(){return"http://localcontrol.netflix.com/js/error.js"}}},bootURL:{replace:{__get__:function(){return nrdp.bootURL}}},garbageCollect:{selectAvailable:[nrdp.wii&&nrdp.wii[l],nrdp.gibbon&&nrdp.gibbon.collectGarbage,nrdp[l],nrdp.ps3&&nrdp.ps3[l],NOOP]}}),util[f](t,{_origSetUIVersion:{replace:t.setUIVersion},setUIVersion:{replace:function(e){this[c]=e,this._origSetUIVersion(e)}},getUIVersion:{replace:function(){return this[c]}},videoOutput:{}}),util[f](t.capability,{unavailableAudioProfiles:{notPresent:{__get__:function(){var e=devicebridge.isPs3||devicebridge.isPs4||devicebridge.isXbox360,t=model&&model[h]&&model[h].isChannelCountSupported(6);return e&&!t?["dummy-5.1-dummy"]:[]}}},supportOnTheFlyAudioCodecSwitch:{notPresent:!1,action:function(e,t){e||model.userAndConfigLoaded.take(1).subscribe(function(e){var n,r=p;util[d].has(r)?n=util[d].get(r)==="true":n=e.AppConfig[p],t.supportOnTheFlyAudioCodecSwitch=n},NOOP)}}}),x.started=nrdp.started||(new Date).getTime(),nrdp[v]&&(x[v]=nrdp[v],e=nrdp[v][m].bind(nrdp[v]),x[v][m]=function(){return Rx.Observable.create(function(t){var n=function(){r(),t.onNext(nrdp[v].sessionid),t[g]()},r=function(){nrdp[v].removeEventListener(y,n)};return nrdp[v].addEventListener(y,n),e(),r})}),x[b]={get registered(){return nrdp[b]&&nrdp[b].registered},deactivate:function(e){nrdp[u][w]?nrdp[u][w](e):nrdp[b].deactivateAll(e)}},nrdp[b]&&Object.defineProperties(x[b],{UILanguages:{get:function(){return nrdp[b][E]},set:function(e){nrdp[b][E]=e}}}),devicebridge[S].onNext(devicebridge.Adapter),devicebridge[S][g]()},function(e){devicebridge.adapterLoaded.onError(new util.Error("devicebridge.Adapter failed to load",null,e))})),config["3d"]={supportedProfiles:{"playready-h264shpl30-dash":!0,"playready-h264shpl31-dash":!0,"playready-h264shpl40-dash":!0},"3d_enabled":{get enabled(){return devicebridge.Adapter.supports3D}}},config.ultraHD={supportedProfiles:{"hevc-main-L50-dash-cenc":!0,"hevc-main10-L50-dash-cenc":!0,"hevc-main-L50-L51-dash-cenc-tl":!0,"hevc-main10-L50-L51-dash-cenc-tl":!0},ultra_hd_enabled:{get enabled(){return devicebridge.Adapter.supportsUltraHD}}},window.nrdp&&!1&&(devicebridge.mediaAdapterLoaded=new Rx.ReplaySubject,devicebridge.adapterLoaded.subscribe(function(){function g(e){var t=config[e].supportedProfiles,n=function(e){return e in t},r=util.CurrentUrlParams.get("force"+e)==="true",i=r||m[p].videoProfiles.some(n);return i}var e="Adapter",t="device",n="media",r="performPolyFills",i="BROWSE_PLAYBACK",s="BROWSE",o=!1,u="addEventListener",a="capabilitychange",f="throttled",l="_syncData",c="errorCodes",h="selectTracks",p="capability",d="mediaAdapterLoaded",v=devicebridge[e],m=v[t];v[n]=typeof nrdp[n]=="undefined"?{}:nrdp[n],util[r](v,{convertPlaybackTypeToOriginator:{notPresent:function(e){return e===v[n][i]?s:"USER"}},convertOriginatorToPlaybackType:{notPresent:function(e){return e===s?v[n][i]:v[n].STANDARD_PLAYBACK}},DEFAULT_TRACK_ID:{notPresent:"FAKEDEFAULT"},nrdpDefaultTracksValidForKids:{notPresent:o},updateBitRateConversion:{notPresent:1024},supports3D:{action:function(e,n){function r(){n.supports3D=g("3d")}nrdp[t][u](a,r),r()}},supportsUltraHD:{action:function(e,n){function r(){var e=22,t=-1,r=m.activeVideoOutput,i=r&&r[0],s=i&&i.hdcpVersion||t,o=s===t||s>=e,u=g("ultraHD")&&o;n.supportsUltraHD=u}nrdp[t][u](a,r),r()}}}),util[r](v[n],{swim:{notPresent:NOOP,action:function(e){v.supportSwim=e}},openAndPlay:{notPresent:function(e){nrdp[n].open(e.movieId,e.trackerId,e.params,e.playbackType,e.videoType)},action:function(t){devicebridge[e].supportOpenAndPlay=t}},cache:{notPresent:{setMaxSize:NOOP,setMaxByteSize:NOOP,schedule:NOOP,pause:NOOP,resume:NOOP,flush:NOOP},action:function(e,t){t.cache.enabled=e,t.cache.enabledDuringPlayback=o,t.cache.enabledForDirectorsCommentary=o}},authparams:{notPresent:{}},throttled:{notPresent:{__get__:function(){return nrdp[l][n][f]},__set__:function(e){nrdp._setProperty(n,f,e)}}},errorCodes:{notPresent:{__get__:function(){if(nrdp.log[c])return nrdp.log[c];if(nrdp[l][n]&&nrdp[l][n][c])return nrdp[l][n][c]}}},setAudioSubtitleTracks:{notPresent:function(e,t){var r,i,s=v[n];typeof s[h]=="function"?(r=t?t.id:"",i=e?e.id:"",s[h](i,r)):(e&&(s.currentAudioTrack=""+e.index),t&&(s.currentSubtitleTrack=""+t.index))}},setVideoWindow:{action:function(e,n){var r=nrdp[t][p];n.supportsVideoScaling=e&&r.support2DVideoResize&&r.support2DVideoResizeDuringPlayback}}}),devicebridge[d].onNext(devicebridge[e][n]),devicebridge[d].onCompleted()},function(e){devicebridge.mediaAdapterLoaded.onError(new util.Error("devicebridge.Adapter.media failed to load",null,e))}),model&&model.CurrentUser&&Rx.Observable.zip([devicebridge.mediaAdapterLoaded,model.CurrentUser.loaded],NOOP).subscribe(function(){var e=devicebridge.Adapter.media;e&&e.cache&&!model.CurrentUser.can_stream_now&&(e.cache.enabled=!1)},NOOP),nrdp.video&&nrdp.video._priv.init&&(nrdp.video._priv.init=NOOP)),window.nrdp&&!1&&devicebridge.mediaAdapterLoaded.subscribe(function(){var e=!0,t=devicebridge.Adapter;t.media.cache.enabledDuringPlayback=e,t.media.cache.disableNonDrmManifests=e,t.media.cache.enabledForDirectorsCommentary=e,util.performPolyFills(t,{DEFAULT_TRACK_ID:{replace:""},updateBitRateConversion:{replace:1},nrdpDefaultTracksValidForKids:{replace:e}})},function(e){devicebridge.mediaAdapterLoaded.onError(new util.Error("devicebridge.Adapter.media failed to load",null,e))}),util.relativePath=function(e,t){var n,r,i,s="split",o="UrlParams";e=e[s]("?"),r=e.length>1?e[1]:"",e=e[0],e=e[s]("/"),t=t[s]("?"),i=t.length>1?t[1]:"",t=t[0],t=t[s]("/"),e.pop();while(n=t.shift())n===".."&&e.pop()||n!=="."&&e.push(n);return e=new util[o](e.join("/")),e.addAll((new util[o](r)).getMap()),e.addAll((new util[o](i)).getMap()),e+""},util.getAbsoluteUrl=function(e,t,n,r){var i,s,o=!0,u=arguments.callee,a=config.urlProtocol+"://",f=o;return e[0]==="/"?i=o:u._HOST.test(e)||(i=o,r&&(e=util.relativePath(r,e))),i?(e=t+e,s=o,n=!1):s=!u._PROTO.test(e),s&&(e=a+e,f=!1),n?e=e.replace(u._HOST,(f?a:"$1")+t+"$2"):f&&(e=e.replace(u._PROTO,a)),e},util.getAbsoluteUrl._PROTO=/^.*?:\/\//,util.getAbsoluteUrl._HOST=/(^.*?:\/\/)(?:.*?\..*?)(\/|$)/,devicebridge.inferBootUrl=function(){return function(){var e,t,n=config.isDebugBuild&&sessionStorage.getItem("uiBootUrl");if(!n){n=util.getAbsoluteUrl(config.uiBootUrl);if(e=location.search)n+=(n.indexOf("?")===-1?"?":"&")+e.substring(1);n=new util.UrlParams(n),n.add("v","2.0"),devicebridge.Adapter.hasNrdp&&(t=devicebridge.Adapter.device,n.add("e",t.ESN),n.add("device_type",t.ESNPrefix),n.add("certification_version",t.certificationVersion)),n=n+""}return n}},window.nrdp||(devicebridge.Adapter={hasNrdp:!1,supportedOutsideUSAndCanada:!0,started:(new Date).getTime(),device:{capability:{},get language(){return"en-US"},SDKVersion:{},get platformVersion(){return"none"},setUIVersion:function(e){this._uiVersion=e},getUIVersion:function(){return this._uiVersion},videoOptions:{}},registration:{registered:!0,deactivate:function(e){e()}},video:{},media:{addEventListener:NOOP,removeEventListener:NOOP,transitionPlaybackType:NOOP,setVideoWindow:NOOP,bringToFront:NOOP,sendToBack:NOOP,initializeMediaControl:NOOP,swim:NOOP,getBufferRange:NOOP,cache:{setMaxSize:NOOP,setMaxByteSize:NOOP,schedule:NOOP,pause:NOOP,resume:NOOP,flush:NOOP,enabled:!1}},getVideoUri:NOOP},devicebridge.Adapter.__defineGetter__("bootURL",devicebridge.inferBootUrl()),devicebridge.adapterLoaded=new Rx.ReplaySubject,devicebridge.adapterLoaded.onNext(devicebridge.Adapter),devicebridge.adapterLoaded.onCompleted(),devicebridge.mediaAdapterLoaded=new Rx.ReplaySubject,devicebridge.mediaAdapterLoaded.onNext(devicebridge.Adapter.media),devicebridge.mediaAdapterLoaded.onCompleted()),model.uiExperience={activeTests:[],loaded:new Rx.ReplaySubject,isLoaded:!1,setModel:function(e){this._setModelOrError(e)},error:function(e){this._setModelOrError(null,e)},isInTest:function(e,t){var n,r,i,s=this.activeTests,o=!1;for(i=0,r=s.length;i<r;i++){n=s[i];if(n.testId==e){t!==undefined?o=n.cellId==t:o=!0;break}}return o},_setModelOrError:function(e,t){var n,r,i="uiName",s="uiExperience",o=this.loaded;e?e.abFallback?n="AB fallback occurred":(e[i]=config[i],util.storage.setJSON(localStorage,s,e)):n="Model empty",n&&(r=util.storage.getJSON(localStorage,s),r&&r[i]===config[i]&&(e=r,e.kids=util.CurrentUrlParams.getBoolean("kids")?!0:!1)),e?(util.extend(this,e),this.isLoaded=!0,o.onNext(this),o.onCompleted()):o.onError(new util.Error("uiExperience model empty",config.debugCodes.startup[s],t))}},devicebridge.adapterLoaded.subscribe(function(){function i(e){util.log.info("nrdp.device.setUIVersion: "+e),devicebridge.Adapter.device.setUIVersion(e)}var e="UI-20150514112537-gibbon-onyx-lruderrorpage",t=model.uiExperience,n=util.CurrentUrlParams.getBoolean("kids"),r="-kids";n?i(e+r):i(e),t.loaded.subscribe(function(){var n,s,o=e,u=t&&t.activeTests,a=u.length,f=[];t.kids&&(o+=r);for(n=0;n<a;n++)s=u[n],f.push(s.testId+"="+s.cellId);f.length&&(o+="-"+f.join(",")),i(o)},NOOP)},NOOP),logging=typeof logging=="undefined"?{}:logging,util.makeMap=function(){var e=0,t=arguments.length,n={};for(;e<t;e+=2)n[arguments[e]]=e+1<t?arguments[e+1]:null;return n},function(e){function t(e,n,r){var i,s,o,u,a,f,l=Array.isArray(e),c=Array.isArray(n);r=r===undefined?!1:r,i=l?e:Object.keys(e),s=i.length;while(s--)o=i[s],u=l?o:e[o],a=c?n.indexOf(u)>=0:u===n,f=r&&typeof u=="object",a?l?e.splice(s,1):delete e[o]:f&&t(u,n,!0);return e}e.pruneMapValues=t}(typeof window!="undefined"?util:exports),util.proxy=function(e,t){return t||(t=this),function(){return e.apply(t,arguments)}},util.loadScript=function(e,t){return Rx.Observable.create(function(n){var r,i=!0,s=function(t){i&&(t=new util.Error("util.loadScript failed requesting '"+e+"'",null,t),t.url=e,n.onError(t))},o=new util.Timeout(function(){var e;gibbon.stopLoad(r),e=Error(),e.type="timeout",s(e)},t||1e4);return o.run(),r=gibbon.loadScript({url:e,async:!0},function(t){o.clear();if(!i)return;t.reason==nrdp.gibbon.SUCCESS&&t.statusCode>=200&&t.statusCode<300?(util.log.info("Script Loaded "+e),n.onNext(t)):(util.log.info("Script Load Failed "+e),n.onError(t)),n.onCompleted()}),function(){i=!1}})},application.environmentLoaded=function(){var e,t="prod",n=util.CurrentUrlParams,r=n.get("nbpdHost")||"http://localcontrol.netflix.com/",i=n.get("env")||t,s=Rx.Observable.returnValue(UNIT);return i!==t&&"$TVUI_PROD_BUILD$"!==t&&(e="../../../../js/common/config/config.environment."+i+".js",s=util.loadScript(e)),s.replay().refCount()}(),application.environmentLoaded.subscribeIgnoreErrors(function(){},function(){}),config.customerEvents={enabled:util.CurrentUrlParams.get("ceBsEnabled")==="true",beaconHost:util.CurrentUrlParams.get("ceBeaconHost"),apiPath:"/events",beaconPath:"/users/customerevents",requestMethod:"POST",errorConfig:{maxRetry:0,updateApiEndpoint:!1,refreshAuth:!1}},Rx.Observable.zip([model.AppConfig.loaded,application.environmentLoaded],NOOP).subscribe(function(){var e,t=model.AppConfig;t.fromUser&&(e=config.customerEvents,e.beaconHost=config.environment.customer_events_host,e.enabled=e.enabled||t.customerEventsEnabled)},NOOP),webapi={},webapi.DcrRequest=function(e){var t,n,r,i="POST",s="method",o="unsignedUrl",u=new this._Params(e.url),a=e.data,f=e.params||"",l=e.type,c=l===i,h=new util.UrlParams(f),p=this._METHODS;p[l]||(e.type=p.GET),e.withCredentials=!0;if(a)for(t in a)u.has(t)||u.add(t,a[t]);n=u+""+"&"+f,!c&&n.length>this._GET_LIMIT&&(c=!0,e.type=i,!u.has(s)&&!h.has(s)&&u.add(s,"GET")),r=u.baseUrl,e.url=r,e[o]=n,this.request=e,this.baseUrl=e.url,this.parameters=u.getParams()+"&"+f,this[o]=n},webapi.DcrRequest.prototype={sign:function(){var e="_newHost",t=this.request,n=util.TimeService.now()+"r"+Math.random()*1e3+"e"+(devicebridge.Adapter.device.ESN||"NA");return t.data=this.parameters+"&uuid="+n,this[e]&&(t.url=util.getAbsoluteUrl(t.url,this[e],!0),delete this[e]),t},setHost:function(e){this._newHost=e},_Params:util.UrlParams,_METHODS:util.makeEnum("GET","POST"),_GET_LIMIT:config.urlGetLimit},util.localization.setFontFamily=function(e,t){var n,r=this.findClosestCulture(e);r&&(n=nrdpPartner.Fonts[r.fontGroup],t.fontFamily=(n?n+",":"")+"arial")},config.languages={uiText:{uiPrefix:"lruderrorpage",urlTemplate:"../../../../js/common/config/text/config.text.${language}.js",loaded:!1,timeout:1e4,modelKey:"member"}},function(){var e,t,n="WGL",r="en",i="es",s="fr",o="pt",u="sr-Cyrl",a="sr-Latn",f="zh-Hans",l="zh-Hant",c="localization",h=[{language:{name:"bg",language:"bg",fontGroup:n}},{language:{name:"bn",language:"bn",fontGroup:n}},{language:{name:"cs",language:"cs",fontGroup:n}},{language:{name:"da",language:"da",fontGroup:n}},{language:{name:"de",language:"de",fontGroup:n}},{language:{name:"el",language:"el",fontGroup:n}},{language:{name:"en-AU",language:r,fontGroup:n}},{language:{name:"en-NZ",language:r,fontGroup:n}},{language:{name:"en-GB",language:r,fontGroup:n}},{language:{name:"en-US",language:r,fontGroup:n}},{language:{name:r,language:r,fontGroup:n}},{language:{name:"es-ES",language:i,fontGroup:n}},{language:{name:i,language:i,fontGroup:n}},{language:{name:"et",language:"et",fontGroup:n}},{language:{name:"fi",language:"fi",fontGroup:n}},{language:{name:"fr-CA",language:s,fontGroup:n}},{language:{name:s,language:s,fontGroup:n}},{language:{name:"gu",language:"gu",fontGroup:n}},{language:{name:"hi",language:"hi",fontGroup:n}},{language:{name:"hr",language:"hr",fontGroup:n}},{language:{name:"hu",language:"hu",fontGroup:n}},{language:{name:"hy",language:"hy",fontGroup:n}},{language:{name:"id",language:"id",fontGroup:n}},{language:{name:"is",language:"is",fontGroup:n}},{language:{name:"it",language:"it",fontGroup:n}},{language:{name:"ja",language:"ja",fontGroup:"Jpan"}},{language:{name:"ka",language:"ka",fontGroup:n}},{language:{name:"kk",language:"kk",fontGroup:n}},{language:{name:"kn",language:"kn",fontGroup:n}},{language:{name:"ko",language:"ko",fontGroup:"Kore"}},{language:{name:"lt",language:"lt",fontGroup:n}},{language:{name:"lv",language:"lv",fontGroup:n}},{language:{name:"ml",language:"ml",fontGroup:n}},{language:{name:"mn",language:"mn",fontGroup:n}},{language:{name:"mr",language:"mr",fontGroup:n}},{language:{name:"ms",language:"ms",fontGroup:n}},{language:{name:"mt",language:"mt",fontGroup:n}},{language:{name:"nb",language:"nb",fontGroup:n}},{language:{name:"ne",language:"ne",fontGroup:n}},{language:{name:"nl",language:"nl",fontGroup:n}},{language:{name:"no",language:"no",fontGroup:n}},{language:{name:"or",language:"or",fontGroup:n}},{language:{name:"pa",language:"pa",fontGroup:n}},{language:{name:"pl",language:"pl",fontGroup:n}},{language:{name:"pt-BR",language:o,fontGroup:n}},{language:{name:"pt-PT",language:o,fontGroup:n}},{language:{name:o,language:o,fontGroup:n}},{language:{name:"ro",language:"ro",fontGroup:n}},{language:{name:"ru",language:"ru",fontGroup:n}},{language:{name:"sk",language:"sk",fontGroup:n}},{language:{name:"sl",language:"sl",fontGroup:n}},{language:{name:"sq",language:"sq",fontGroup:n}},{language:{name:"sr",language:"sr",fontGroup:n}},{language:{name:u,language:u,fontGroup:n}},{language:{name:a,language:a,fontGroup:n}},{language:{name:"sv",language:"sv",fontGroup:n}},{language:{name:"ta",language:"ta",fontGroup:n}},{language:{name:"te",language:"te",fontGroup:n}},{language:{name:"tl",language:"tl",fontGroup:n}},{language:{name:"th",language:"th",fontGroup:n}},{language:{name:"tr",language:"tr",fontGroup:n}},{language:{name:"uk",language:"uk",fontGroup:n}},{language:{name:"vi",language:"vi",fontGroup:n}},{language:{name:f,language:f,fontGroup:"Hans"}},{language:{name:l,language:l,fontGroup:"Hant"}}],p=h.length,d=0;config.languages.available=h;for(;d<p;d++)e=h[d].language,t=e.name,util[c].addCulture(t,e);util[c].cultures["default"]=util[c].cultures[r]}(),model.languages={preferred:["en"],loaded:new Rx.ReplaySubject,isLoaded:!1,setModel:function(e){var t,n="languages",r="documentElement",i=util.CurrentUrlParams,s=i.has(n)?i.get(n).split(","):[];e=e&&e[config[n].uiText.modelKey],e&&e.length?(e=s.concat(e),this.preferred=e,this.isLoaded=!0,document[r]&&document[r].style&&util.localization.setFontFamily(e,document[r].style),t=this.loaded,t.onNext(this),t.onCompleted()):this.error()},error:function(e){this.loaded.onError(new util.Error("Languages model empty",config.debugCodes.startup.languages,e))}},devicebridge.adapterLoaded.subscribe(function(){var e=model.languages.preferred;model.languages.isLoaded||e.unshift(devicebridge.Adapter.device.language)},NOOP),model.geolocation={policy:null,country:null,loaded:new Rx.ReplaySubject,setModel:function(e){var t,n=e&&e.policy,r=e&&e.country;n&&r?(this.policy=n,this.country=r,t=this.loaded,t.onNext(this),t.onCompleted()):this.error()},error:function(e){this.loaded.onError(new util.Error("Geolocation model empty",config.debugCodes.startup.geolocation,e))}},config.webapi={session:Object.defineProperties({host:config.environment.webapiHost,rewriteHost:config.environment.webapiHostRewrite,dataType:"json",dataVNext:{v:"next"},authMaxRetry:1,logging:{application_name:config.uiAppName,application_v:config.uiVersion}},{data:{get:function(){var e={v:"2.0",output:"json",engine:"gibbon",haj:!1};return function(){return config.environment.webapiGlobalRouting&&(e.routing="reject"),e}}(),enumerable:!0,configurable:!0}}),requestLoader:{abortDelay:10,queueTime:1250,maxQueued:40,minSpacing:0,maxRetry:2,retryDelay:1e3,maxConcurrent:20,excludeAuthRefresh:["/oauth/request_token","/oauth/login","/oauth/access_token","/social/connection"],excludeFromRetry:["/users/presentationtracking","/users/customerevents","/nm/tracking","/account/refresh","/ecapi/offers","/ecapi/getvisitorid"],excludeStartupRequest:"isStartup=true",statusCodes:{401:{maxRetry:1,refreshAuth:!0},403:{},410:{updateApiEndpoint:!0},500:{},503:{}}}},application.environmentLoaded.subscribe(function(){var e=config.webapi.session,t=config.environment,n=e.data;e.host=t.webapiHost,e.rewriteHost=t.webapiHostRewrite,Object.defineProperty(e,"data",{value:n,enumerable:!0})},NOOP),model.languages.loaded.subscribe(function(e){config.webapi.session.data.languages=e.preferred.join(",")},NOOP),model.geolocation.loaded.subscribe(function(e){config.webapi.session.data.country=e.country},NOOP),model.uiExperience.loaded.subscribe(function(e){e.kids&&(config.webapi.session.data.kids=!0)},NOOP),function(e){var t,n,r="device_type",i=e.data;t?i[r]=t:devicebridge.isWiiFaked?i[r]="NFWII-005-":devicebridge.isPs3Faked?i[r]="NFPS3-001-":devicebridge.isPs4Faked?i[r]="NFPS4-001-":devicebridge.isWiiUFaked?i[r]="NFWIIU-01-":window.nrdp&&devicebridge.adapterLoaded.subscribe(function(t){var s=t.device,o=e.logging;i[r]=s.ESNPrefix,i.certification_version=s.certificationVersion,i.uiVersion=s.getUIVersion(),o.esn=n||s.ESN},NOOP),n&&(i.esn=n)}(config.webapi.session),config.devicebridge={activationKeyMap:{NetflixId:config.environment.cookieNetflixId,SecureNetflixId:config.environment.cookieNetflixIdSecure},pingDuration:6e5,maxRetryAttempts:3,nrdpApplicationMap:{streaming:"streaming_nrdp_qoe_params",networking:"networking_nrdp_qoe_params",iid:"rigel_sdk",wii:"wii"}},application.environmentLoaded.subscribe(function(){var e=config.devicebridge.activationKeyMap,t=config.environment;e.NetflixId=t.cookieNetflixId,e.SecureNetflixId=t.cookieNetflixIdSecure},NOOP),util.mathBound=function(e,t,n){return e<t?t:e>n?n:e},util.Observable.mixin({toRxObs:function(){var e=this;return Rx.Observable.create(function(t){var n=function(e){t.onNext(e)};return e.subscribe(n),function(){e.unsubscribe(n)}})}}),util.KeyedObservable=util.Class.create({_Observable:util.Observable,_observablesCount:0,retainObservables:!1,get hasObservers(){return this._observablesCount>0},hasObserversForKey:function(e){var t;return this.hasObservers?(t=this._getObservable(e),t&&t.hasObservers):!1},hasObserver:function(e,t){var n;return this.hasObservers?(n=this._getObservable(e),n&&n.hasObserver(t)):!1},subscribe:function(e,t,n){this._getObservable(e,!0).subscribe(t,n)},getRxObs:function(e){return this._getObservable(e,!0).toRxObs()},unsubscribe:function(e,t){var n="hasObservers",r=this._getObservable(e);r&&r[n]&&(r.unsubscribe(t),r[n]||this._removeObservable(e))},unsubscribeAll:function(e){var t=this._getObservable(e);t&&t.hasObservers&&(t.unsubscribeAll(),this._removeObservable(e))},unsubscribeAllKeys:function(){var e,t=this._observables,n=!this.retainObservables;for(e in t)t[e].unsubscribeAll(),n&&delete t[e];n||(this._observablesCount=0)},notify:function(e){var t;if(!this.hasObservers)return;t=this._getObservable(e),t&&t.notify.apply(t,Array.slice(arguments,1))},_removeObservable:function(e){var t=this._observables;t&&e in t&&(this.retainObservables||(delete t[e],--this._observablesCount))},_getObservable:function(e,t){var n="_observables",r=this[n],i=r&&r[e];return t&&!i&&(r||(r=this[n]={}),i=r[e]=new this._Observable,this._observablesCount+=1),i}}),util.Http=function(e,t){var n="GET",r=!0,i="error",s="success",o="json",u=null,a="dataFilter",f="object",l="data",c=!1,h="withCredentials",p="contentType",d="setRequestHeader",v="dataType",m="beforeSend",g="timeout",y={url:t,type:n,contentType:"application/x-www-form-urlencoded",processData:r,async:r,timeout:15e3},b={html:"text/html",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"},w="nocontent",E=i,S="notmodified",x=s,T="parsererror",N=/\?/,C=/(\?|&)_=.*?(&|$)/,k=/%20/g,L=function(e,t,n,r){e[i]&&e[i].call(e.context||e,t,n,r)},A=function(e,t,n){var r=e.getResponseHeader("content-type")||"",i=e.responseText;if(t===o||!t&&r.indexOf(o)>=0)i=i?JSON.parse(i):u;return n&&n[a]&&(i=n[a](i,t)),i},O=function(e,t){return t=typeof t=="function"?t():t,encodeURIComponent(e)+"="+encodeURIComponent(t)},M=function(e,t,n){if(t instanceof Array)t.forEach(function(t,r){M(e+"["+(typeof t===f||t instanceof Array?r:"")+"]",t,n)});else if(t!=u&&typeof t===f){var r;for(r in t)M(e+"["+r+"]",t[r],n)}else n(e,t)};return{legacyRequest:function(t){var r,i,o,u,a,f,k=util.extend({},y,t),O=t&&t.context||k,M=k.type.toUpperCase(),_=k.requestHeaders,D=k[s]?function(){k[s].call(O,o,i,f)}:NOOP;k[l]&&k.processData&&typeof k[l]!="string"&&(k[l]=this.param(k[l])),k.cache===c&&M===n&&(u=util.Date.now(),a=k.url.replace(C,"$1_="+u+"$2"),k.url=a+(a===k.url?(N.test(k.url)?"&":"?")+"_="+u:""));if(k[l])switch(M){case n:case"HEAD":k.url+=(N.test(k.url)?"&":"?")+k[l]}f=e(),f.open(M,k.url,k.async),f[h]=!!k[h],(k[l]||t&&t[p])&&f[d]("Content-Type",k[p]);if(f.supportsUserSpecifiedHeaders&&_)for(r in _)f[d](r,_[r]);return f[d]("Accept",k[v]&&b[k[v]]?b[k[v]]+", */*":b._default),k[m]&&k[m].call(O,f,k)===c?(f.abort(),c):(f.onLoad=function(){var e;if(!f.requestDone)return;f.hasNoContent?i=w:f.isSuccessful?i=x:i=E;if(i===x)try{o=A(f,k[v],k)}catch(t){i=T,e=t}i===w||i===x||i===S?D():L(k,f,i,e)},f.onAbort=function(e){if(!e)return;L(k,f,g)},f.onComplete=function(){k.complete&&k.complete.call(O,f,i)},k.async&&(f[g]=k[g]),f.send(k[l]),f)},param:function(e){var t,n=[],r=function(e,t){n.push(O(e,t))};if(e instanceof Array)e.forEach(function(e){r(e.name,e.value)});else for(t in e)M(t,e[t],r);return n.join("&").replace(k,"+")},request:function(e){var t=this;return Rx.Observable.create(function(n){var o,a=util.extend({},e),f=r,l=c;return a[s]=function(e,t,i){f&&(l=r,n.onNext({data:e,status:t,dhr:i}),n.onCompleted())},a[i]=function(e,t,i){f&&(l=r,n.onError({status:t,message:i,dhr:e}))},o=t.legacyRequest(a),t=u,function(){f=c,l||o.abort(),o=a=u}})}}},util.ADataHttpRequest=util.Class.create({requestDone:!1,responseType:"",supportsUserSpecifiedHeaders:!1,withCredentials:!1,method:"GET",onLoad:NOOP,onAbort:NOOP,onComplete:NOOP,abort:function(e){var t="uiDataRequestSession",n=this[t];try{this._onRequestEnd(),this._abortRequest(),this.onAbort(e),this.onComplete(),n!==undefined&&(this[t]=undefined,application.notifications.notifyEnd(n,{data:{reason:"canceled"}}))}catch(r){throw r}finally{this._detachHandlers()}},get isSuccessful(){var e=this.status;return e>=200&&e<300||e===304||e===1223},get hasNoContent(){var e=this.status;return e===202||e===204},get isNotModified(){return this.status===304},send:function(e){var t,n="notifications",r="timeout",i=this.request;i&&application[n]&&(this.uiDataRequestSession=application[n].notifyStart("uiQOE","uiDataRequest",{data:{url:i.url}})),isFinite(this[r])&&this[r]>0&&(t=this,this._timeOutId=setTimeout(function(){t.abort(!0),t=null},this[r])),this._doSend(e)},_getHeaderValue:function(e,t){var n,r,i=Array.isArray(t)?t.length:0;for(n=0;n<i;++n){r=t[n];if(typeof r=="string"&&r.indexOf(e+": ")===0)return r.substring(r.indexOf(" ")+1)}return undefined},_handleOnLoad:function(e){var t,n,r,i="uiDataRequestSession",s="isSuccessful",o="_getHeaderValue",u=this[i],a=e||{},f=a.headers||[];if(this.requestDone)return;try{this._onRequestEnd(),this._updateRequestState(e),this.onLoad(),this.onComplete(),t={reason:this[s]?"success":"failed",response:{dnsTime:a.dnsTime,serverExecutionTime:this[o]("X-Netflix.execution-time",f),contentLength:this[o]("Content-Length",f),mimeType:this[o]("Content-Type",f)}},this[s]||(n=a.statusCode,n?r=n<500?"http4xx":"http5xx":r="networkFailure",t.error={deepError:{errorCode:n},rootCause:r}),u!==undefined&&(this[i]=undefined,application.notifications.notifyEnd(u,{data:t}))}catch(l){throw l}finally{this._detachHandlers()}},_onRequestEnd:function(){this.requestDone=!0,clearTimeout(this._timeOutId)},_detachHandlers:function(){this.onLoad=this.onAbort=this.onComplete=NOOP}}),util.DataHttpRequest=util.ADataHttpRequest.extend({supportsUserSpecifiedHeaders:!0,get timeout(){return this.request.timeout},set timeout(e){this.request.timeout=e},init:function init(e){init.base.call(this),this._gibbon=e||this._defaultGibbon(),this.request={headers:{}}},getAllResponseHeaders:function(){var e=this.responseHeaders;return e?e.join("\n"):""},getResponseHeader:function(e){var t,n,r,i,s="_parsedHeaders",o="toUpperCase",u=this.responseHeaders,a=this[s];if(!u)return undefined;if(!this[s]){this[s]=a={},t=u.length;while(t--)n=u[t].split(":"),r=n[0]||"",i=n[1]||"",a[r[o]()]=i}return this[s][(e||"")[o]()]},open:function(e,t,n){var r=this.request;r.requestMethod=this.method=e,r.url=t,r.async=!1!==n},setRequestHeader:function(e,t){this.request.headers[e]=t},_abortRequest:function(){this._gibbon.stopLoad(this._requestId)},_doSend:function(e){var t=this,n=t.request;switch(this.method.toUpperCase()){case"POST":case"PUT":case"DELETE":n.body=e}t._requestId=t._gibbon.load(n,function(e){t._handleOnLoad(e)})},_defaultGibbon:function(){return nrdp.gibbon},_updateRequestState:function(e){e=e||{},this.status=e.statusCode,this.responseText=e.data,this.statusReason=e.reason,this.responseHeaders=e.headers}}),util.http=util.Http(function(){return new util.DataHttpRequest},util.location),function(e){function f(e,r){return r=r&&(r[t]||r),l(e,r)&&r[e]._error!==n}function l(e,n){return n=n&&(n[t]||n),n!=r&&e!=r&&n[e]!=r}function c(e){var t,r,a;if(e&&e[i]){if(e[i].expired)return n;if(e[i][s]&&e[i][s][o]>0){t=e[i][s][o];for(a=0;a<t;a++){r=e[i][s][a];if(r&&r.expired)return n}}}return u}function h(e,n){return e.reduce(function(e,t){return f(t,e)?e[t]:undefined},n&&(n[t]||n))}function p(e,n){return e.reduce(function(e,t){return l(t,e)?e[t]:undefined},n&&(n[t]||n))}function d(e,t){var n,r,i;return e=e.slice(0),n=e.pop(),r=h(e,t),i=Array.isArray,i(n)?n.every(function(e){return f(e,r)}):f(n,r)}function v(e){var r,i,s,a=u;if(e){r=e[t],i=e.paths;if(r&&i){s=i[o],a=n;while(a&&--s>=0)a=d(i[s],r)}}return a}function m(e,t){var r,i,s,f=e[o];if(e[o]!==t[o])return u;for(r=0;r<f;r++)return i=e[r],s=t[r],typeof i===a&&typeof s===a&&i!==s?u:typeof i!=typeof s||i.from===s.from&&i.to===s.to?u:u;return n}var t="value",n=!0,r=null,i="error",s="innerErrors",o="length",u=!1,a="string";e.psbv={find:h,findWithError:p,has:f,hasWithError:l,hasExpiredError:c,isValid:v,validate:d,comparePaths:m}}(util),webapi.RequestLoader={_CONFIG:config.webapi.requestLoader,_http:util.http,_extend:util.extend,_requestId:1,_urlToIds:{},_idToRequest:{},_loadCnt:0,_xhrs:{},_retryCnts:{},_aborts:[],_queue:[],_queueSlots:[],mapCacheExpired:new Rx.ReplayLastSubject,load:function(e){var t=e.requestId||(e.requestId=this._requestId++),n=e.unsignedUrl,r=this._urlToIds,i=r[n];return this._idToRequest[t]=e,i?i.push(t):(r[n]=[t],this._queue.push(n)),this._check(),t},abort:function(e){var t,n,r,i,s,o,u,a=this._idToRequest,f=a[e];if(!f)return;t=f.unsignedUrl,t in this._xhrs?(this._aborts.push(e),n=this._abortWait,!n.active&&n.run()):(r=this._urlToIds,i=r[t],s=i.length,s===1?(delete r[t],o=this._queue,u=o.indexOf(t),u!==-1&&o.splice(u,1)):(u=i.indexOf(e),u!==-1&&i.splice(u,1)),delete a[e])},_check:function(){var e,t,n,r,i,s,o,u,a,f="length",l="_checkWait",c="minSpacing",h="_queueSlots",config=this._CONFIG,p=this._queue,d=p[f],v=Math.min(p[f],config.maxConcurrent-this._loadCnt);if(v<1){d>0&&!this[l].active&&this[l].run(config[c]);return}e=util.Date.now(),t=util.mathBound(config.maxQueued-this._freeSlots(e),0,v),n=this[l];if(t){if(r=config[c]){i=this._lastTime;if(i&&i+r>=e){n.active||n.run(r);return}t>1&&(t=1,s=!0)}n.clear(),o=p.splice(0,t),u=this[h];for(a=0;a<t;a++)u.push(e),this._loadByUrl(o[a]);this._lastTime=e,s&&n.run(r),p[f]>0&&n.run(r)}else n.run(this[h][0]+config.queueTime-e)},_loadByUrl:function(e){var t,n="_idToRequest",r="updateActivationTokens",i=this;this._loadCnt++,t=this[n][this._urlToIds[e][0]].sign(),this._xhrs[e]=this._http.legacyRequest(this._extend({},t,{success:function(s,o,u){var a,f,l,c,h,p,d,v,m=util.psbv.hasExpiredError(s);if(!s&&o!=="nocontent"||!t.isApiNext&&s&&s.error||m)return a=s&&s.status,u||(u={}),a&&(f=a.status_code)&&(u.status=f),i._onError(e,u,m?"expiredError":"error",a?a.message:null);if(s&&s.errorMessage)return i._clear(e,!0,u,o,s);l=i._urlToIds[e],c=i[n],v=[];for(h=0,p=l.length;h<p;h++)(d=c[l[h]].request.success)&&v.push(d);i._clear(e),i._loadCnt--;for(h=0,p=v.length;h<p;h++)v[h](s,o,u);devicebridge[r]&&devicebridge[r]("webapi.RequestLoader",!0)},error:function(t,n,r){i._onError(e,t||{},n,r)}}))},_doAborts:function(){var e,t,n,r,i,s,o,u,a=this._aborts,f=this._idToRequest,l=this._urlToIds;for(e=0,t=a.length;e<t;e++){n=a[e];if(i=f[n]){r=i.unsignedUrl;if(s=l[r])s.length===1?(o=this._queue,u=o.indexOf(r),u!==-1&&o.splice(u,1),this._xhrs[r].abort(),this._clear(r),this._loadCnt--):(u=s.indexOf(n))!==-1&&s.splice(u,1);delete f[n]}}this._aborts=[]},_onError:function(e,t,n,r,i){var s,o,u="responseText",a="error",f="RequestLoader",l="Failed to JSON.parse dhr.responseText for API routing",c="host",h="_clear",p=!0,d="EventContext",v=n==="timeout"?504:t.status,m=this._CONFIG,g=this._idToRequest[this._urlToIds[e]],y=g&&g.request,b=t[u],w=y&&y.errorConfig||m.statusCodes[v]||{};util.log[a]({name:f,desc:n,code:v,url:e,responseText:b}),n==="expiredError"&&this.mapCacheExpired.onNext(n);if(w.updateApiEndpoint){b=t[u];if(b){try{s=JSON.parse(b)}catch(E){if(nrdp.utf8toa)try{s=JSON.parse(nrdp.utf8toa(b))}catch(E){util.log[a]({name:f,desc:l,exception:E})}else util.log[a]({name:f,desc:l,exception:E})}s&&s[c]?(util.log[a]({name:f,desc:"Received 410 response. Changing host from "+config.webapi.session[c]+" to "+s[c]+".",code:v,url:e}),config.environment.webapiHost=config.webapi.session[c]=s[c],g.setHost(s[c])):util.log[a]({name:f,desc:"Received 410 response but did not get a host"}),this._retry(e,m,w)||this[h](e,p,t,n,r)}return}if(v===401&&devicebridge&&devicebridge[d]&&devicebridge[d].inPlayback){this[h](e,p,t,n,r);return}if(i==null){this._loadCnt--;if(w.refreshAuth&&!this._excludeFromRefresh(e)){o=this,webapi.ApiSession.refresh(function(){});return}}(i===!1||!this._retry(e,m,w))&&this[h](e,p,t,n,r)},_retry:function(e,config,t){var n,r,i="_retryCnts",s="retryDelay",o=t.maxRetry;return o==null&&(o=config.maxRetry),this._excludeFromRetry(e)?!1:(n=this[i][e]||0,o>n?(this[i][e]=++n,r=t[s],r==null&&(r=config[s]),delete this._xhrs[e],(this._retries||(this._retries=[])).push(e),this._retriesWait.run(r||0),!0):!1)},_doRetries:function(){var e,t,n=this._retries;for(e=0,t=n.length;e<t;e++)this._loadByUrl(n[e]);delete this._retries},_clear:function(e,t,n,r,i){var s,o,u,a,f,l,c=this._urlToIds,h=c[e];if(h){delete c[e],delete this._xhrs[e],delete this._retryCnts[e],s=this._idToRequest;for(o=0,u=h.length;o<u;o++)a=h[o],f=s[a],delete s[a],t&&(l=f.request.error)&&l(n,r,i)}},_freeSlots:function(e){var t,n=this._queueSlots,r=this._CONFIG.queueTime,i=n.length,s=0;for(t=0;t<i;t++){if(n[t]+r>e)break;s++}return s&&n.splice(0,s),n.length},_excludeFromRefresh:function(e){var t,n,r="EventContext",i=!0,s=this._CONFIG.excludeAuthRefresh;if(devicebridge&&devicebridge[r]&&devicebridge[r].inPlayback)return i;if(e.indexOf(this._CONFIG.excludeStartupRequest)!==-1)return i;for(t=0,n=s.length;t<n;t++)if(e.indexOf(s[t])!==-1)return i;return!1},_excludeFromRetry:function(e){var t,n,r=this._CONFIG.excludeFromRetry;for(t=0,n=r.length;t<n;t++)if(e.indexOf(r[t])!==-1)return!0;return!1}},function(e){e._checkWait=new util.Timeout(e._check,null,e),e._retriesWait=new util.Timeout(e._doRetries,null,e),e._abortWait=new util.Timeout(e._doAborts,e._CONFIG.abortDelay,e)}(webapi.RequestLoader),webapi.filters={},webapi.filters._filter=function(e,t,n){var r="status";return n&&!n.error&&!e(t,n)&&(n.error=!0,n[r]||(n[r]={}),n[r].message||(n[r].message="ERROR: webapi.filters: Filter failed to validate response data for: "+t)),n},function(){var e=function(e,t){for(var n=0,r=e.length;n<r;n++)if(!(e[n]in t))return!1;return!0};webapi.filters.requiredKeys=function(t){return this._filter.bind(null,e,t)}}(),config.storage={session:{always:["startupProfiler","uiBootUrl","parentalControlSuccess","bowserNativeAppUpgradeChecked","tastesurveyseen","loggingState"],startup:["loginCount","DebugInfo","appRefresh","ssoActivateCount"]},local:{always:["kongMigDone","tastesurveycompleted","pricechangecompleted","deviceUsed","darwinSeen","4by3MigDelayed","4by3Migrated","UserProfilesHasSeenPromo"],startup:["appconfig","BowserKidsGateAttempts","KidsGateAttempts","uiRedirect","uiExperience"]}},util.Cookies={EXPIRE_NEVER:"Sat, 01 Feb 2025 08:00:00 GMT",EXPIRE_PAST:"Thu, 01 Feb 1990 08:00:00 GMT",_parser:new util.NameValuePairParser("=","; "),get:function(e,t){return this._parser.get(document.cookie,e,t)},set:function(e,t,n,r,i,s){var o=new util.NameValuePair("=","; ");o.add(e,t),n&&o.add("Expires",n instanceof Date?n.toGMTString():n),o.add("Domain",i||".netflix.com"),o.add("Path",s||"/"),o=o+"",r&&(o+="; Secure"),document.cookie=o},remove:function(e,t,n,r){this.set(e,"",this.EXPIRE_PAST,t,n,r)},removeAll:function(e,t,n){var r,i=this._parser.getMap(document.cookie),s=this.EXPIRE_PAST,o="";for(r in i)this.set(r,o,s,e,t,n)}},application.deactivate=function(e){return Rx.Observable.createWithDisposable(function(t){var n,r,i,s;return util.log.error({name:"application.deactivate",source:e}),n=util.storage,r=config.storage,webapi.ApiSession.deauthenticate(),util.Cookies.removeAll(),i=n.getItems(sessionStorage,r.session.always),s=n.getItems(localStorage,r.local.always),sessionStorage.clear(),localStorage.clear(),devicebridge.adapterLoaded.delay(0).subscribe(function(){devicebridge.Adapter.registration.deactivate(function(){n.setItems(sessionStorage,i),n.setItems(localStorage,s),t.onNext(),t.onCompleted()})},function(e){t.onError(e)})})},function(){var e="MessageBus",t="EVENTS",n="CONTROLLER_DISCONNECTED",r="CONTROLLER_CONNECTED",i="USER_ERROR_MESSAGE",s="BEFORE_CHANGE_LOCATION";util[e]=new util.KeyedObservable,util[e][t]={},util[e][t][n]=n,util[e][t][r]=r,util[e][t][i]=i,util[e][t][s]=s}(),util.changeLocation=function(e,t){var n,r="notifications",i=util.MessageBus,s=!config.isDebugBuild||!util.CurrentUrlParams.has("disableChangeLocation");return util.log.error({area:"util.changeLocation",url:e,enabled:s}),application&&application[r]&&application[r].notify("tvui","redirect",{data:{url:e,delay:t||0}}),i.notify(i.EVENTS.BEFORE_CHANGE_LOCATION),s&&(n=function(){util.location.href=e},t?setTimeout(n,t):n()),s},application.reactivate=function(e){application.deactivate(e).subscribe(function(){util.changeLocation(devicebridge.Adapter.bootURL)})},application.MessagePriority={NONE:10,LOW:25,MODERATE:50,HIGH:75,CRITICAL:100,ULTIMATE:125},model.MenuModel=util.Class.create({get changes(){var e=!0,t=new Rx.Subject;return this._hasChangesObservable=e,Object.defineProperty(this,"changes",{value:t,enumerable:e,configurable:e}),t},init:function(e,t){this.id=e,this.items=[],t&&this.add(t)},get length(){return this.items.length},add:function(e,t){var n="concat",r=this.items;e instanceof Array||(e=[e]),e.length&&(this.items=t===0?e[n](r):t!==undefined?r.slice(0,t)[n](e,r.slice(t)):r[n](e),this._hasChangesObservable&&this.changes.onNext({items:e,index:t}))},remove:function(e){var t,n=this.items,r=n.length;r&&e<r&&(t=n.splice(e,1),this._hasChangesObservable&&this.changes.onNext({items:t,index:e}))},get:function(e){return this.items[e]},indexOf:function(e){return this.items.indexOf(e)}}),model.MenuItemModel=util.Class.create({init:function(e,t){this.label=e,t&&util.extend(this,t)},confirm:NOOP,focus:NOOP,blur:NOOP,enterInto:NOOP}),config.textTemplate={cacheSize:30},config.__defineGetter__("text",function(){return util.localization.localize("ui-strings")}),application.reactivateDialog=function(e,t){var n="ReactivateDialog",r="reactivate";util.log.error({name:"application.reactivateDialog",source:t,desc:e}),application.uiTextLoaded.subscribe(function(){var i=util.MessageBus,s=config.text,o=new model.MenuModel(n);o.add(new model.MenuItemModel(s.responses[r],{confirm:function(){application[r](t)}})),i.notify(i.EVENTS.USER_ERROR_MESSAGE,{source:t||n,message:e||s[r].getNewCredentialsError,options:{buttons:o,priority:application.MessagePriority.HIGH}})},NOOP)},webapi.ApiSession={_CONFIG:config.webapi.session,_Loader:webapi.RequestLoader,_Request:webapi.DcrRequest,authenticated:new Rx.ReplaySubject,isAuthenticated:!1,get userId(){return this._userId},refresh:function(){application.reactivateDialog(null,"ApiSession.refresh")},deauthenticate:function(){util.log.error({name:"ApiSession",desc:"deauthenticate()"}),delete this._userId,this._isAuthenticated=!1},resource:function(e,t){var n,r,i,s=this,o=e.url,u=this._userId,a=!t;if(this.isAuthenticated)a&&(!o||o[0]==="/")&&(o="/users/"+u+o);else if(a)return i=e.error,i&&i({exception:"Resource requires authenticated user. User must log in"}),0;return n=this._CONFIG,r=this._extend({},n.data,e.isApiNext?n.dataVNext:null,n.logging,e.data),u&&(r.user_id=u),e.data=r,e.url=util.getAbsoluteUrl(o,e.host||n.host,!e.host&&n.rewriteHost),this._Loader.load(new this._Request(e))},getResource:function(e,t){var n=this;return new Rx.Observable.create(function(r){var i=Object.create(e),s=!1;return i.success=function(e,t,n){s||(r.onNext({data:e,textStatus:t,xhr:n}),r.onCompleted())},i.error=function(e,t,n){s||r.onError(n)},n.resource(i,t),function(){s=!0}})},abort:function(e){return this._Loader.abort(e)},_extend:util.extend},webapi.ApiSession.initSession=function(e){var t="isAuthenticated",n="authenticated",r=function(r){e[t]=!1,e[n].onError(new util.Error("User ID missing",null,r))};model.CurrentUser.loaded.subscribe(function(i){var s,o=i&&i.user_id;o?(e._userId=o,e[t]=!0,s=e[n],s.onNext(),s.onCompleted()):r()},r)},webapi.ApiSession.initSession(webapi.ApiSession),model.AppConfig.loaded.subscribe(function(){var e,t=webapi.ApiSession,n=config.customerEvents,r=n.enabled&&n.beaconHost,i=n.requestMethod,s=n.errorConfig;r?e=function(e,o,u){t.resource({url:n.beaconPath,host:r,type:i,data:{data:JSON.stringify(e)},success:o,error:u,errorConfig:s},!0)}:e=function(e,r,o){t.resource({url:n.apiPath,data:{method:i,data:JSON.stringify(e)},success:r,error:o,errorConfig:s})},logging.CustomerEventsRequest=e},NOOP),logging.CustomerEvents={_START_TIME:util.Date.now(),_EVENT_QUEUE_MAX_LENGTH:3,_eventQueue:[],_eventFnQueue:[],_timeout:null,types:{APP_START:"HTML TV UI application start",APP_REFRESH:"HTML TV UI Application Refresh",PLAY:"HTML TV UI play",HOTKEY:"HTML TV UI hotkey",INPUT_TYPE:"HTML TV UI input type",SURVEY_COMPLETED:"Completed Taste Survey (PS3)",RIGEL_SILENT_UPDATE_ERROR:"Rigel Silent Update returned error or timed out",SEARCH_INTERACTION:"HTML TV UI Search Interaction",SOLOMO_FRIEND_IMPRESSIONS:394,SOCIAL_CONNECT_PROMPT:"SocialConnectPrompt",SOCIAL_CONNECT:"SocialConnect",RECOMMEND_ACTION:"Recommend Action",NOTIFICATION_CLICK_EVENT:"NotficationClickEvent",RECOMMEND_PANEL_IMPRESSION:"Recommend Panel Impression",RECOMMEND_BUTTON_IMPRESSION:"Recommend Button Impression",PAYMENT_HOLD_MESSAGE:"HTML TV UI Payment Hold Message",WIIU_PLAYBACK_OUTPUT_TARGET:"Wii U Playback Output Target",WII_ODP_IMPRESSION:"ODP Wii Impression",FORMER_MEMBER_OPEN_SITE:"HTML TV UI PS3 Former Member Open Site",FORMER_MEMBER_CONTROL:"HTML TV UI PS3 Former Member Control",FORMER_MEMBER_OPEN_SITE_OPEN_OVERLAY:"HTML TV UI PS3 Former Open Site Open Overlay",FORMER_MEMBER_OPEN_SITE_OVERLAY_BUTTON:"HTML TV UI PS3 Former Open Site Click Rejoin Button",AUDIO_SUBTITLES_SELECTION:"Audio / Subtitle Interaction (PS3 PlayMode Lite Test)",PLAYBACK_EXIT:"HTML TV UI Playback Exit",USER_PROFILES_GATE_SHOWN:"HTML TV UI User Profiles Gate Shown",USER_PROFILES_SWITCH:"HTML TV UI User Profiles Switched",USER_PROFILES_CREATED:"HTML TV UI User Profiles Created",MDP_MENU_INTERACTION:"MDP Menu Interaction"},logPlaybackExit:function(e){this.log(this.types.PLAYBACK_EXIT,{Reason:e?e:"unknown"})},logHotkey:function(e,t,n){if(!(e&&t&&n)){util.log.info("CustomerEvents.logHotkey: Failed because of empty value: "+e+", "+t+", "+n);return}this.log(this.types.HOTKEY,{Action:e,Key:t,KeyCode:n})},logRx:function(e,t,n){return Rx.Observable.create(function(r){var i=function(){r.onNext(),r.onCompleted()};return logging.CustomerEvents.log(e,t,{onSuccess:i,onError:i},n),NOOP})},log:function(e,t,n,r){var i,s,o,u,a,f="playSourceType",l=null,c=state.Context,h=devicebridge.Adapter.device,p=devicebridge.Adapter.log,d=this._eventQueue,v=this._eventFnQueue,m=this._timeout,g=typeof e=="number",y=util.CurrentUrlParams,b=y.get(f),w=["Recommend Action","NotficationClickEvent","Recommend Panel Impression","Recommend Button Impression"],E=c.trackId,S=typeof window!="undefined"?window.nrdp&&nrdp.log:!1,x=this._nccpPlayEventProps;w.indexOf(e)!=-1&&(E=""+E),i=util.pruneMapValues({EventName:g?l:e,EventId:g?e:l,Esn:h&&h.ESN,EventTime:util.TimeService.now(),TrackId:E,data:util.extend({Elapsed:util.Date.now()-this._START_TIME,UIBuild:h&&h.getUIVersion(),UIContext:c.uiContext,UIContextPath:c.uiContextPath},c.uiContextData,t)},[l,undefined,""]),s=S&&i.EventName===this.types.PLAY,s?(o={},u=i.data,Object.keys(x).forEach(function(e){o[x[e]]=u[e]}),b&&(o.source_type=b,y.remove(f)),a=JSON.stringify(o),nrdp.log.info(a,l,"uiplaycontext"),n&&this._onPostResponse("onSuccess",[n])):(util.log.info("CustomerEvents.log: "+util.describeObject(i)),d.push(i),n&&v.push(n),d.length>=this._EVENT_QUEUE_MAX_LENGTH||r?this._postEvents():m.active||m.run())},_nccpPlayEventProps:util.makeMap("ApiRequestId","request_id","XID","xid","ListIndex","row","MovieIndex","rank","UIContextPath","location","mdxesn","mdxesn","origin","origin","isMdxPlay","isMdxPlay","isDevice3dEnabled","isDevice3dEnabled","isUser3dEnabled","isUser3dEnabled","fastStartData","fastStartData","hero_onclick","hero_onclick"),_onTimeout:function(){this._postEvents()},_onPostResponse:function(e,t){var n,r,i,s;for(n=0,r=t.length;n<r;n++)i=t[n],i&&(s=i[e])&&s()},_postEvents:function(){var e="_postFunction",t="_onPostResponse",n=this[e],r=this._eventQueue,i=r.splice(0),s=this._eventFnQueue.splice(0);this._timeout.clear();if(!i.length)return;n=n||(this[e]=logging.CustomerEventsRequest),n(i,this[t].bind(this,"onSuccess",s),this[t].bind(this,"onError",s))}},logging.CustomerEvents._timeout=new util.Timeout(logging.CustomerEvents._onTimeout,2e3,logging.CustomerEvents),util.RedirectRequiredError=util.Error.extend({type:"RedirectRequired",init:function init(e,t,n,r){init.base.call(this,t,n,r),this.location=e}}),util.Error.findError=function(e,t){var n,r,i,s="innerError";if(!e)return undefined;if(t(e))return e;if(e[s])return this.findError(e[s],t);if(i=e.innerErrors)for(n=i.length-1;n>=0;n--){r=this.findError(i[n],t);if(r!==undefined)return r}return undefined},application.logHistory=[],application.reqHistory=[],function(){function ht(){var e=f;return e}function pt(){var e=f;return e}function dt(){var e=f;return e}function vt(){return!!util[V].get("apmAutomationLogging")}function mt(){}function gt(){}function yt(){}function bt(){var e=devicebridge[h].getMonotonicTime;return e?e()-devicebridge[h].started:util.Date.now()}function wt(e){var t,n,r,i=pt();try{t=util[A](e),vt()&&application.logHistory.push(t),i&&(n=e&&e.events&&e.events.length||0,gt("Sending request with "+n+l+e.time+" to logging server.")),dt()&&mt("Request payload:\n"+util[A](e,4))}catch(u){return st[o](e)}return r=util.http.request({url:config.environment.clientLoggingServer,data:t,contentType:"application/json",type:"POST"})[R](function(){return e}),i&&(r=r[d](gt[v](s,B+n+l+e.time+" succeeded."),yt[v](s,B+n+l+e.time+" failed:"))),r}function Et(){var e=util.Date.now(),t=32768,n=Math.floor(Math.random()*t);return e*1e4+n%1e4+""}function St(){return Ct("retryFailedConsolidatedLoggingRequests")==="true"}function xt(){return Number(Ct("consolidatedLoggingTimeStampOffset"))||0}function Tt(e){var t=20,n=5*ft,r=St(),i=xt(),s=new netflix[G].ClientNotifications({requestSender:wt,timeStampGenerator:bt,timestampOffset:i,guidGenerator:Et,maxBufferSize:t,maxFlushDelay:n,specification:e,sessionState:undefined,retryFailedRequests:r,log:gt});return i!==0&&gt("Setting timestamp offset to "+i+"ms"),s.onNotifyStart=s.onNotify=function(e){var t=state.Context,n=devicebridge[h].video;e.uptime===undefined&&(e.uptime=e.time),e[tt]===undefined&&(e[tt]={characterId:t.characterId,videoId:t.videoId,trackid:t.trackid,row:t.listIndex,rank:t.movieIndex,requestId:t.apiRequestId,xid:n&&n.xid})},s[N]=function(e,t){s.onNotify(t)},s}function Nt(){var e=util[V],t=e.get("target"),n=application[a]&&t?new util.UrlParams(t):e;return Nt=function(){return n},n}function Ct(e){var t=Nt();return t.get(e)}function kt(e,t){var n,r,i,u=(application[a]?"":"current user, ")+"app config, consolidated logging and application";return gt("Waiting for "+u+" to load."),n=application[a]?st[o](s):model.CurrentUser.loaded[d](gt[v](s,"Finished loading current user."),yt[v](s,"Failed to load current user:"))[m](function(){return model.AppConfig.loaded[d](gt[v](s,"Finished loading app config."),yt[v](s,"Failed to load app config:"))}),r=e[d](gt[v](s,"Finished initializing consolidated logging."),yt[v](s,"Failed to initialize consolidated logging:")),i=application.started[d](gt[v](s,"Finished application startup."),yt[v](s,"Failed application startup:")),st.zip([n,r,i],function(e){return gt("Successfully loaded "+u+"."),{adapter:t,appConfig:e}})}function Lt(e){e[u][w][N]=function(){application[i][k][M]=bt()},e[u][I][N]=function(e,t){var n=application[i][k][M],r=typeof n=="number",s=r?bt()-n:0,o=t.duration-s;t[K]=t[K]||{},t[K].timeToBrowseInteractive=o},e[u][c][N]=function(e,t){var n=t[K];n&&n[P]!==undefined&&(n.userSessionDuration=n[P]-e.time)}}function At(){var e=netflix[G].specification;return Lt(e),At=function(){return e},e}function Ot(){return application[a]?s:application.Binding.get(U)}function Mt(){return application[a]?f:application.Binding.has(U)}function _t(){return application[a]?st[o](f):st[o](f).concat(application.AppLock.toRxObs())}function Dt(){var e,t,n,r=util.MessageBus,i=r.EVENTS.Player,s=st[o](f);return Mt()?(n=st.create(function(e){var t=e[F][v](e,b),n=e[F][v](e,f);return r[S](i[J],t),r[S](i[z],n),function(){r[nt](i[J],t),r[nt](i[z],n)}}),n.startWith(f)[y]()[R](function(n){return n?(e=e||Ot(),t=t||e.isPaused.values,t):s})[Y]()[y]()):st[o](b)}function Pt(){return util.storage.getJSON(sessionStorage,q)}function Ht(e,t,n){return parseInt(Ct(e)||t[e]||n)}function Bt(e){return Ht("clientLoggingAllocationPercentage",e,0)}function jt(e){return Ht("clientLoggingMaxFlushDelay",e,5*ft)}function Ft(e){return Ht("clientLoggingMaxBufferSize",e,20)}function It(e){return Ht("userSessionTimeoutDuration",e,30*ft)}function qt(e){var t=Dt(),n=_t();return st.combineLatest([t,n],function(e,t){return!t||e})[y]()[R](function(t){return t?sn(e):ot})[Y]()}function Rt(e){return e.log.resetSessionID()[m](function(){return application.keydown.take(1)})}function Ut(e,t,n,r,o){function a(){var n=e[k][g]=bt();return application[i].notifyEnd(u,c,{sessionId:t.log[$],data:{endReason:"timeout",lastUserActivityTime:n-o}}),Rt(t)[R](function(){return n})}return n[d](gt[v](s,"Starting user session with timeout duration (ms) "+o))[m](function(){return r.take(1)[m](a)})}function zt(e){var t=Math.floor(Math.random()*100);return t<e||application[a]}function Wt(){return lt[Ct("playSourceType")]}function Xt(){var e=nrdp[j][W]&&nrdp[j][W][0];return ct[e&&e[et]]}function Vt(){return nrdp[j][et]}function $t(){function n(e,t){var n=1e-5;return Math.abs(t-e)<=n}var e,t;e=Vt(),t=e.width/e.height;switch(b){case n(t,16/9):return"16x9";case n(t,4/3):return"4x3";default:return undefined}}function Jt(){var e;return model[O].isLoaded?(e=model[O].activeTests,e.reduce(function(e,t){return e[t.testId]=t.cellId,e},{})):undefined}function Kt(e){var t,n={trigger:Wt(),display:{connector:Xt(),resolution:Vt(),aspectRatio:$t()},activeABTests:Jt()};for(t in e)n[t]=e[t];return n}function Qt(e,t){var n=application[i][k][g]=bt();gt("Starting new user session at "+n+", last one ended at "+t),application[i].clearDisabledEvents(),application[i][p](u,c,{sessionId:devicebridge[h].log[$],data:{idleTime:n-t,trigger:"inputEvent"}}),setTimeout(function(){e[F]()},0)}function Gt(e,t,n,r){var i=It(n),o=new Rx.Subject,u=qt(i),a=Ut(e,t,o,u,i);a[S](Qt[v](s,o),NOOP),r?o[F]():Rt(t)[S](Qt[v](s,o,e[k][g]||0))}function Yt(e,t){var n,r,i,s;t=t||{},n=t.appConfig||{},r=n[E]||{},i=n.overrideConsolidatedLoggingSpecification||{},s=model[O][E]||{},util.extendDeep(e,r,s,i)}function Zt(e,t){function r(e,t){return Boolean(e===D&&t&&n.test(t.url))}function i(e,t){return Boolean(e===D&&t&&t.url===nrdp[Q][_])}function o(e){return!e||typeof e!="object"?0:(e.dnsTime||0)+(e.connectTime||0)+(e.transactionTime||0)}function u(e,t){return Boolean(e===L&&t&&t.type===Z&&t.name==="ObjectSyncStart")}function a(e,t){return Boolean(e===L&&t&&t.type===Z&&t.name==="ObjectSyncComplete")}function f(e){return e==="nrdjs.forward-init"}function l(e){var t=s;return e.reduce(function(e,n){var l=n[0],c=n[1],h=n[4];switch(b){case r(l,h):e.uiBootRequestEnd=c,e.uiBootRequestDuration=o(h);break;case i(l,h):e.uiRequestEnd=c,e.uiRequestDuration=o(h);break;case u(l,h):t=c;break;case a(l,h)&&t!==s:e.nrdpInitEnd=c,e[T]=e[T]||0,e[T]+=c-t,t=s;break;case f(l,h):e.totalNrdpLoadDuration=c}return e},{})}var n=/uiboot|appboot/i;if(!Array.isArray(t)){yt("Consolidated Logging - Failed to load NRDP instrumentation stash, got:",t);return}e.notify("tvui","nrdpStartupTiming",{data:l(t)})}function en(e){var t=Zt[v](s,e);nrdp.instrumentation.popStash(t)}function tn(e,t){var n,r,i,s=t.adapter,o=t.appConfig||{},a=o.failed===b,l=It(o),h=Bt(o);gt("Current location: "+util[_].href),gt("Setting client logging user session timeout duration (ms): "+l),zt(h)&&e.enabled===undefined&&(r=jt(o),i=Ft(o),gt("Setting client logging config variables;"+C+r+x+i),e[it]=r,e[rt]=i,gt("Enabling client logging."),e.start(b));if(!e.enabled){gt("Disabling client logging."),e&&e.start&&e.start(f);return}gt("Client logging enabled;"+C+e[it]+x+e[rt]),a||(n=Boolean(e.getSession(u,c)),Gt(e,s,o,n),e.getSession(u,w)&&e.notifyEnd(u,w,{data:Kt({success:b})})),en(e)}function nn(e){var t=e&&e.errorStack;return e instanceof util.Error&&t&&t.filter(function(e){return e instanceof util.RedirectRequiredError}).length>0||util.Error.findError(e,function(e){return!application[a]&&e.pql&&e.pql.length===1&&e.pql[0]==="user"&&e.unauthorized||e[K]&&(e[K][X]===302||e[K][X]===401)})}function rn(e,t,n){var r,i=n.errorStack;if(nn(n)){gt("Not ending uiStartup because we are redirecting.");return}i&&(r=i.map(function(e){return{debug:{message:e.message}}})),e[p](u,"uiStartupErrorPromotion",{data:Kt({deepError:r})}),tn(e,{adapter:t,appConfig:{failed:b,clientLoggingAllocationPercentage:100}})}function sn(e){return st.create(function(t){var n=new util.IdleTimeout(function(){gt("Idle timeout fired."),t[F](),t.onCompleted()},NOOP,e);return n.run(),function(){gt("Idle timeout cleared."),n.clear()}})}function on(){var e=nrdp[Q].load[v](nrdp[Q]);nrdp[Q].load=function(t,n){var r=t.url,i=function(e){if(r.indexOf("paladin.teststudio.netflix.com")===-1){var t=[r,e[X]];application.reqHistory.push(t)}n&&n(e)};e(t,i)}}function un(e){var t=e&&e.SDKVersion&&e.SDKVersion.components;if(t)return{app:e.softwareVersion,ui:e.getUIVersion(),nrdsdk:t&&t.sdk,nrdapp:t&&t.nrdapp,nrdlib:t&&t.nrdlib,nrdjs:window.nrdp&&window.nrdp.nrdjs,mdxlib:t&&t.mdxlib,mdxjs:window.mdx&&window.mdx.version}}function an(e){return{esn:e.ESN,type:e.ESNPrefix,model:e.deviceModel}}function fn(){return{requestUrl:util[_].href}}function ln(e,t){e.onRequest=function(e){e.requestUrl=util[_].href,e.locale=t.language,e.version=un(t),e[j]=an(t),e.browser=fn(t),e.appName="htmltvui"}}function cn(e){var t=e.suspend();gt("Shutting down, storing logging state to session storage."),ht()&&mt(H+util[A](t)),localStorage.removeItem(ut),util.storage.setJSON(sessionStorage,q,t)}function hn(e){var t=devicebridge[h][j],n=Pt(),r=devicebridge[h].log.appid,i=!localStorage.getItem(ut);localStorage.setItem(ut,b),gt("Initializing logging. Current appSessionId is "+r),vt()&&on(),ln(e,t);if(n){gt("Restoring logging state.");if(ht())try{mt(H+util[A](n))}catch(a){util.log.warn("Failed to log logging state, which means one of the events is going to blow everything up...")}e.restore(n)}else gt("Firing startup events."),e[p](u,"appSession",{sessionId:r,data:{lastShutdownGraceful:i},time:0}),e[p](u,c,{sessionId:devicebridge[h].log[$],data:{trigger:"appStart"},time:0}),e[p](u,w,{sessionId:r+2,time:0}),e[p](u,I,{sessionId:r+3,time:0});return nrdp.addEventListener("shutdown",cn[v](s,e)),st[o](b)}var e,t,n,r,i="notifications",s=null,o="returnValue",u="uiQOE",a="isNonMember",f=!1,l=" events and timestamp ",c="userSession",h="Adapter",p="notifyStart",d="doAction",v="bind",m="selectMany",g="lastUserSessionEndTime",y="distinctUntilChanged",b=!0,w="uiStartup",E="consolidatedLoggingSpecification",S="subscribe",x=" maxBufferSize (items): ",T="nrdpInitDuration",N="onNotifyEnd",C=" maxFlushDelay (ms): ",k="metadata",L="gibbon.jsc.callback",A="stringify",O="uiExperience",M="lastUiStartupEndTime",_="location",D="gibbon.request",P="lastUserActivityTime",H="Logging state:\n",B="Request with ",j="device",F="onNext",I="uiBrowseStartup",q="loggingState",R="select",U="PLAYER_CARD",z="PLAYBACK_INACTIVE",W="activeVideoOutput",X="statusCode",V="CurrentUrlParams",$="sessionid",J="PLAYBACK_ACTIVE",K="data",Q="gibbon",G="notification",Y="switchLatest",Z="Event",et="videoOutput",tt="dataContext",nt="unsubscribe",rt="maxBufferSize",it="maxFlushDelay",st=Rx.Observable,ot=st.empty(),ut="cllsf",at=1e3,ft=60*at,lt={"undefined":undefined,1:"remoteButton",2:"dedicatedOnScreenIcon",3:"itemInApplicationList",4:"searchResult",5:"searchContinuation",6:"webBrowser",7:"liveFolder","8 ":"externalApp","9 ":"bannerAd",10:"externalControlProtocol",11:"metaDiscovery",12:"dial",13:"voiceControl",14:"visualGesture",15:"touchGesture",16:"virtualRemote",99:"testing"},ct={"undefined":undefined,0:"internal",1:"miracast",2:"displayport",3:"dvi",4:"hdmi",5:"otherDigital",6:"composite",7:"component",8:"vga",9:"scart",10:"otherAnalog"};e=At(),t=application[i]=Tt(e),n=new Rx.Subject,r=kt(n,devicebridge[h])[d](Yt[v](s,e))[R](tn[v](s,t)),application[i].startupCompleted=r[d](NOOP,rn[v](s,t,devicebridge[h])).onErrorResumeNext(st[o](b)).replayLast(),devicebridge.nrdpInited[m](function(){return devicebridge[h].log!==undefined?st[o](b):(t&&t.start&&t.start(f),ot)})[m](hn[v](s,t))[S](n)}(),util.LanguageMatcher={_W3C_LANG_DELIMITER:"-",matches:function(e,t){var n,r,i,s="toUpperCase",o="_W3C_LANG_DELIMITER";return!e||!t?!1:(e=e[s](),t=t[s](),e===t?!0:(n=e.split(this[o]),r=t.split(this[o]),i=n[1],n[0]===r[0]||i&&i===r[1]))}},function(){util.tryToInvokeDelegateMethod=function(e,t,n,r){if(e&&e[t])return e[t].apply(n,r)},util.tryToGetDelegateProperty=function(e,t){if(e&&e[t])return e[t]}}(),view2.EventDispatcher=util.Class.create({_viewsCurrentlyEntered:[],_pointerIsShowing:!1,_isModalPointerSimulated:!1,init:function(){var e="_forwardPointerEvent",t="bind",n="_isViewInExclusiveRange",r="_forwardPointerLeave",i="_forwardPointerVisibility",s="_newViewAdded",o="_forwardPointerDragDuringMove",u=util.localization.cultureChanged,a=util.CurrentUrlParams,f=a.get("spoofVoice");this._isVoiceSpoofed=f,this[e]=this[e][t](this),this[n]=this[n][t](this),this[r]=this[r][t](this),this[i]=this[i][t](this),this[s]=this[s][t](this),this[o]=this[o][t](this),view2.viewFromUuid.added.subscribe(this[s],NOOP,NOOP)},destroy:function(){this._voiceGrammarDisposable.dispose(),this._listeningStartDisposable.dispose()},get currentScene(){return this._currentScene},set currentScene(){},cancelVoiceListening:function(){},startVoiceListening:function(){},_notifySceneVoiceListeningDidEnd:function(){var e,t=this._currentScene,n="voiceListeningDidEnd",r=this._forwardVoiceEvent;t&&(r(t,n,e),t.forEachDescendant(function(t){r(t,n,e)}))},scheduleCancelVoiceListening:function(e){var t="_schedCancelVoiceListenTimeout",n="cancelVoiceListening";e!==undefined&&e!==null&&(clearTimeout(this[t]),e>0?this[t]=setTimeout(this[n].bind(this),e):this[n]())},currentSceneDidChange:function(){(view2.EventDispatcher.preferredVoiceLocale||this._isVoiceSpoofed)&&this._composeGrammar()},constrainPointer:function(e){var t=this._viewsCurrentlyEntered;e&&t&&t.filter(function(t){return e.indexOf(t)>-1?!1:!0}).forEach(this._forwardPointerLeave),this._exclusiveViews=e},clearTrackingOfViews:function(){delete this._viewsCurrentlyEntered,delete this._exclusiveViews},simulatePointerShow:function(){var e="_pointerIsShowing";this[e]||(this[e]=!0,this._forwardPointerEventToAllViews("pointerShow",undefined))},simulatePointerHide:function(){var e="_pointerIsShowing";this[e]&&(this[e]=!1,this._forwardPointerEventToAllViews("pointerHide",undefined))},simulateVoiceCommand:function(e){this._didReceiveVoiceCommand({matches:e})},simulateVoiceListeningStart:function(){this._didStartListeningForVoice()},_forwardVoiceCommandToScene:function(e){var t="_forwardVoiceEvent",n="voice",r=this._currentCommands,i=e&&e.command,s=r&&r[i],o=s&&s.responder,u=application.Binding.get("APP_ROOT_VIEW");o?this[t](o,n,e,o):u&&this[t](u,n,e)},_forwardVoiceEvent:function(e,t,n,r){var i,s,o="nextResponder",u=this._currentScene,a=u&&u.parent,f=view2.EventDispatcher,l=f._delegatedEventNames[t],c=f._eventBubbles[t];while(!s&&e&&!e.destroyed)i=e[t],r&&(n=n||{},n.target=r),s=i?i.call(e,n):!1,util.tryToInvokeDelegateMethod(e.delegate,l,e.delegate,[e,n,!!s]),e=!s&&c&&e[o]?e[o]():undefined,e===a&&(e=undefined)},_forwardPointerLeave:function(e){this._forwardPointerEvent(e,"pointerLeave",undefined)},_forwardPointerEventToAllViews:function(e,t){view2.viewFromUuid.forEachView(function(n){this._forwardPointerEvent(n,e,t)},this)},_isViewInExclusiveRange:function(e){var t=this._exclusiveViews||[],n=t.length===0,r={};t.forEach(function(e){r[e.uuid]=e});while(e&&!n)n=!!r[e.uuid],e=e.parent;return n},_forwardPointerVisibility:function(e){var t=this._pointerIsShowing?"pointerShow":"pointerHide";this._forwardPointerEvent(e,t,undefined)},_filterForConstraint:function(e){var t=this._exclusiveViews,n=t&&t.length>0,r=e.filter;return n&&r?e.filter(this._isViewInExclusiveRange):e},_filterSingleViewForConstraint:function(e){var t=this._exclusiveViews,n=t&&t.length>0;return n&&!this._isViewInExclusiveRange(e)?undefined:e},_resolveEnteredViews:function(e,t){var n;return e?n=t.filter(function(t){return e.indexOf(t)===-1}):n=t,this._filterForConstraint(n)},_resolveExitedViews:function(e,t){var n=function(e){return t.indexOf(e)===-1},r=e?e.filter(n):[];return r},_makePointerEventData:function(){throw"_makePointerEventData not implemented."},_forwardPointerEvent:function(e,t,n,r){var i,s,o,u="_pointerIsDownOnView",a="_makePointerEventData",f="pointerUp",l="nextResponder",c=e,h=this[u],p=view2.EventDispatcher,d=p._delegatedEventNames[t],v=p._eventBubbles[t];while(!o&&c&&!c.destroyed)i=c[t],o=!1,s=this[a](c,n),r&&s&&(s.target=r),i&&(o=i.call(c,s)),o&&t==="pointerDown"?this[u]=c:t===f&&c===h&&(h=this[u]=null),util.tryToInvokeDelegateMethod(c.delegate,d,c.delegate,[c,s||this[a](c,n,r),!!o]),c=!o&&v&&c[l]?c[l]():undefined;t===f&&h&&h[f]&&this._forwardPointerEvent(h,t,n,r)},_forwardPointerDragDuringMove:function(e){var t=this._pointerIsDownOnView,n=this._isViewInExclusiveRange(t);n&&this._forwardPointerEvent(t,"pointerDrag",e)},_notifyEnteredAndExitedViews:function(e,t){var n="_viewsUnderPointer",r="_viewsCurrentlyEntered",i=this._forwardPointerEvent;this[n]=e,this._resolveEnteredViews(this[r],this[n]).forEach(function(e){i(e,"pointerEnter",t)}),this._resolveExitedViews(this[r],this[n]).forEach(function(e){i(e,"pointerLeave",t)}),this[r]=this[n]},_didReceiveVoiceCommand:function(e){var t,n="listeningDelay",r="_isListeningForVoice",i="command",s="confidence",o="target",u="continuesListening",a="_voiceCommandProcessed",f=e.matches,l=application.Binding.get("VOICE_CONFIG"),c=l&&l[n],h=application.Binding.get("VOICE_COMMAND_LIST_VIEW"),p=f&&f[0],d=this[r],v=p&&p[i],m=this._currentCommands,g=this._currentScene,y=m&&m[v],b=y&&y.responder,w=!1;l&&(t=d?l.listeningCommandConfidenceThreshold:l.concatenatedCommandConfidenceThreshold),p[s]>=t&&(p[o]=y&&y.responder,this._commandSession=application.notifications.notifyStart("uiView",i,{data:{name:p[i],confidence:p[s],inputMethod:"voice",inputValue:y.words[0],isHotKey:!1,sceneId:g&&g.id,targetId:p[o]&&p[o].id}}),y&&(y[n]!==undefined&&(c=y[n]),y[u]!==undefined&&(w=y[u],this[r]=w)),h&&y&&y.voiceBarPriority!==undefined&&!y.immediate?h.update({selectedCommand:v,selectionCompletedCallback:this[a].bind(this,p,c,w)}):this[a](p,c,w))},_voiceCommandProcessed:function(e,t,n){var r="notifications",i="_commandSession",s=application[r].notifyStart("uiIntent",e.command);this[i]&&(application[r].notifyEnd(this[i]),this[i]=null),this._forwardVoiceCommandToScene(e),n&&this.startVoiceListening(),this.scheduleCancelVoiceListening(t),application[r].notifyEnd(s)},_didStartListeningForVoice:function(){var e,t,n="notifyStart",r="notifications",i="voiceBarShow",s="voiceListeningDidStart",o=this._forwardVoiceEvent,u=application.Binding.get("VOICE_COMMAND_LIST_VIEW"),a=application.Binding.get("VOICE_CONFIG"),f=a&&a.listeningDelay,l=this._currentScene;this._isListeningForVoice=!0,u&&(t=application[r][n]("uiView","command",{data:{name:i,inputMethod:"voice",inputValue:this.voiceListeningPrompt,isHotKey:!1,sceneId:l&&l.id}}),this._voiceBarSession=application[r][n]("uiIntent",i),application[r].notifyEnd(t),o(u,s,e)),this._notifySceneVoiceListeningDidStart(),this.scheduleCancelVoiceListening(f)},_notifySceneVoiceListeningDidStart:function(){var e,t=this._currentScene,n="voiceListeningDidStart",r=this._forwardVoiceEvent;t&&(r(t,n,e),t.forEachDescendant(function(t){r(t,n,e)}))},_forwardVoiceListening:function(e){var t=this._isListeningForVoice?"voiceListeningDidStart":"voiceListeningDidEnd";this._forwardVoiceEvent(e,t,undefined)},_composeGrammar:function(){var e="length",t="words",n=!0,r="_mapCommandPriorities",i="_currentCommands",s=this._currentScene,o=function(n){var r=n[t][e]>0&&n[t].indexOf(undefined)===-1;return r||util.log.error("Voice command "+n.command+" has an undefined word"),r},u=function(r){var i=r.command,s=p[i],o,u,a;d[i]=r;if(s){delete p[i],o=s[t],u=r[t];if(o[e]!==u[e])v=n;else for(a=0;a<o[e];a++)o[a]!==u[a]&&(v=n)}else v=n},a=s&&s.aggregateVoiceCommands.filter(o)||[],f=application.Binding.get("APP_ROOT_VIEW"),l=f&&f.voiceCommands.filter(o)||[],c=this[r](a),h=l&&this[r](l),p=this[i]||{},d={},v=!1;h&&h.forEach(function(e,t){c[t]||(c[t]=e,a=a.concat(e))}),a.forEach(u),v||(v=!!Object.keys(p)[e]),this[i]=d,v&&(this._refreshGrammar(a),this._refreshVoicebar(c))},_mapCommandPriorities:function(e){var t="voiceBarPriority",n=[],r=this._cleanVoiceCommand;return e.forEach(function(e){e[t]!=undefined&&(n[e[t]]||(n[e[t]]=[]),n[e[t]].push(e))}),n},_refreshVoicebar:function(e){var t=application.Binding.get("VOICE_COMMAND_LIST_VIEW"),n=this._currentScene;n&&n.disallowsVoiceBar&&(e=[]),t&&t.update({groups:e})},_refreshGrammar:function(e){var t,n="_voiceEnabled",r=this[n];this._isVoiceSpoofed||(t=e.map(this._cleanVoiceCommand),nrdp.input.voice.setGrammar(t),e&&e.length>0&&!r?(nrdp.input.voice.enable(),this[n]=!0):e&&e.length===0&&(nrdp.input.voice.disable(),this[n]=!1))},_cleanVoiceCommand:function(e){return{command:e.command,words:e.words}},_forwardKeyEvent:function(e,t,n){var r,i,s="nextResponder",o=view2.EventDispatcher,u=o._delegatedEventNames[t],a=o._eventBubbles[t];while(!i&&e&&!e.destroyed)r=e[t],i=r?r.call(e,n):!1,util.tryToInvokeDelegateMethod(e.delegate,u,e.delegate,[e,n,!!i]),e=!i&&a&&e[s]?e[s]():undefined},_newViewAdded:function(e){this._forwardPointerVisibility(e)}}),Object.defineProperties(view2.EventDispatcher,{_eventBubbles:{value:{keyCharacter:!0,keyUp:!0,keyDown:!0,voice:!0,voiceListeningDidStart:!1,voiceListeningDidEnd:!1,pointerDown:!0,pointerUp:!0,pointerEnter:!1,pointerLeave:!1,pointerMove:!1,pointerDrag:!1,pointerShow:!1,pointerHide:!1}},_delegatedEventNames:{value:{keyCharacter:"delegatedKeyCharacter",keyDown:"delegatedKeyDown",keyUp:"delegatedKeyUp",voice:"delegatedVoice",voiceListeningDidStart:"delegatedVoiceListeningDidStart",voiceListeningDidEnd:"delegatedVoiceListeningDidEnd",pointerDown:"delegatedPointerDown",pointerUp:"delegatedPointerUp",pointerEnter:"delegatedPointerEnter",pointerLeave:"delegatedPointerLeave",pointerMove:"delegatedPointerMove",pointerDrag:"delegatedPointerDrag",pointerShow:"delegatedPointerShow",pointerHide:"delegatedPointerHide"}},preferredVoiceLocale:{get:function(){var e,t,n,r,i="toUpperCase",s=nrdp.input!==undefined&&nrdp.input.voice!==undefined&&nrdp.input.voice.capabilities.supportedLocales;return s&&(e=application.Binding.get("VOICE_CONFIG"),t=e&&e.fuzzyLocaleMatching,n=util.localization.culture.name,s=s.every(function(e){var s=!0;return n[i]()===e[i]()?(r=e,s=!1):!r&&t&&util.LanguageMatcher.matches(n,e)&&(r=e),s})),r}}}),state.raiseEvent=function(e){var t="activeState",n=state[t];if(n)return typeof e=="string"&&(e={name:e}),e[t]=n,e.bubbling=!1,n.handleEvent(e,Array.slice(arguments,1))},state.raiseEvent.subscribe=function(e){state.activeState=e,e.isRoot&&(state.rootState=e)},util.KeyIdentifierToCode={Up:38,Down:40,Left:37,Right:39,Enter:13},util.dom={},function(e){var t="DOMContentLoaded",n=new Rx.ReplaySubject,r=function(){n.onNext(),n.onCompleted()},i=this;i.readyState==="complete"?r():document.addEventListener(t,function(){document.removeEventListener(t,arguments.callee,!1),r()},!1),e.domLoaded=n}(util),util.KeyHistory=function(){var e="key.left",t="key.right",n="key.up",r="key.down",i=null,s=!1,o="_isRapid",u="previous",a="current",f="key",l="time",c="held",h="_determinatePressHoldTime",p="_determinatePressTimeout",d="_isStuck",v=util.makeEnum(e,t),m=util.makeEnum(n,r);return{_offAxisKeys:util.makeMap(e,m,t,m,n,v,r,v),current:{key:i,time:0,held:s},previous:{key:i,time:0,held:s},isRapid:function(){var e,t,n=this[o];return n===i&&(e=this[u],t=this[a],n=t[f]===e[f]&&t[l]-e[l]<this._rapidKeyDelay,this[o]=n),n},isDeterminatePress:function(){var e=util.Date.now(),t=this[a],n=t[c]&&e-t[l]>this[h];return n},onPressBecomesDeterminate:function(e){var t,n=util.Date.now(),r=this[a];r[c]&&!this[p]&&(t=this[h]-(n-r[l]),t>0?(this[p]=new util.Timeout(function(){e(),this[p]=i},t,this),this[p].run()):e())},get isHeld(){var e=this[u],t=this[a];return t[f]!=="click"&&t[c]&&e[c]&&e[f]===t[f]},isHeldOrRapid:function(){return this.isHeld||this.isRapid()},isRapidOffAxis:function(){var e=this[u],t=this[a],n=t[l]-e[l]<this._rapidOffAxisThreshold,r=this._offAxisKeys[e[f]];return r&&n&&t[f]in r},isStuckKey:function(){var e,t,n=this[d];return n===i&&(e=this[u],t=this[a],n=t[f]===e[f]&&t[l]-e[l]<this._stuckKeyDelay,this[d]=n),n},isHeldOrStuck:function(){return this.isHeld||this.isStuckKey()},update:function(e){var t=this[a],n=this[u];n[f]=t[f],n[l]=t[l],n[c]=t[c],t[f]=e,t[l]=util.Date.now(),t[c]=!0,this[o]=i,this[d]=i},cancelHeld:function(e){e===this[a][f]&&(this[a][c]=s,this[p]&&(this[p].clear(),this[p]=i))},_rapidKeyDelay:config.rapidKeyDelay,_determinatePressHoldTime:config.determinatePressHoldTime,_rapidOffAxisThreshold:config.rapidOffAxisThreshold,_stuckKeyDelay:config.stuckKeyDelay}}(),util.domLoaded.subscribe(function(){var e=util.KeyIdentifierToCode;application.keyup.subscribe(function(t){var n,r=t.which;r===0&&(r=e[t.keyIdentifier]),n=util.Keys.getKeyName(r),n&&(util.KeyHistory.cancelHeld(n),t.preventDefault())})},NOOP),util.MessageBus.EVENTS.SCREENSAVER_CHANGE="SCREENSAVER_CHANGE",function(){var e,t="subscribe",n="keydownNormalized",r=util.KeyHistory,i=util.MessageBus,s=state.raiseEvent,o=!1,u=!0,a={"key.left":u,"key.right":u,"key.up":u,"key.down":u,"key.backspace":u,"key.fastfwd":u,"key.rewind":u,"key.l1":u,"key.l2":u,"key.r1":u,"key.r2":u},f={};model.AppConfig.loaded[t](function(t){var n=t.ignoreQuickSuccessionKeys,r=n?n.length:0;while(r)f[n[--r]]=u;e=util.CurrentUrlParams.has("simulateModalPointer")?application.Binding.get("EVENT_DISPATCHER"):null},NOOP),i[t](i.EVENTS.SCREENSAVER_CHANGE,function(e){o=e}),application[n]=new Rx.Subject,application.keydown[t](function(t){var i,u,l=t.code,c=t.key;if(f[c])return;c&&r.update(c),i=o||r.isRapidOffAxis()||c&&!a[c]&&r.isHeldOrStuck();if(i)return;e&&c!=="key.back"&&e.simulatePointerHide();if(c){u=s(c,c,l,{isRepeat:t.repeat,name:c,code:l});if(u)return}application[n].onNext(t)},NOOP)}(),view2.EventDispatcher.mixin({_keyCharacterBlacklist:/[\u0000-\u001F|\u007F]/,init:function init(){var e="_pointerChanged",t="_keyChanged",n="subscribe";init.base.call(this),this[e]=this[e].bind(this),this[t]=this[t].bind(this),this._keyDownDisposable=application.keydownNormalized[n](this[t]),this._keyUpDisposable=application.keyup[n](this[t]),this._pointerDisposable=application.mouse[n](this[e])},destroy:function destroy(){destroy.base.call(this),this._keyDownDisposable.dispose(),this._keyUpDisposable.dispose(),this._pointerDisposable.dispose()},_resolveTopView:function(e){var t,n,r,i=view2.viewFromUuid,s=e.length,o=0;while(!r&&o<s)t=e[o],t&&(n=e[o].dataViewUuid,r=this._filterSingleViewForConstraint(i.get(n))),r&&(r.pointerPassThru||r.destroyed)&&(r=undefined),o++;return r},_doesWidgetBackView:function(e){return e&&e.dataViewUuid},_widgetFromMouseEventItem:function(e){return e.widget},_viewFromWidget:function(e){return view2.viewFromUuid.get(e&&e.dataViewUuid)},_findWidgetDescriptorForView:function(e,t){var n,r=t&&t.data,i=r&&r.widgets,s=i&&i.length,o=0,u=o<s;if(e&&i)while(u&&n===undefined)u=o<s,u&&(n=i[o],n&&n.widget&&n.widget.dataViewUuid!==e.uuid&&(n=undefined,o+=1));return n},_makePointerEventData:function(e,t){var n,r,i=null,s=t&&t.data,o=s&&s.global;return s&&(r=this._findWidgetDescriptorForView(e,t),n={button:s.button,buttonStates:s.buttons,x:r?r.x:i,y:r?r.y:i,globalX:o?o.x:i,globalY:o?o.y:i}),n},_untilBlocked:function(e){var t,n,r;if(e)for(t=0,n=e.length;t<n;t++)r=e[t],r&&r.blockPointerMove&&(e.length=t+1);return e},_pointerChanged:function(e){var t,n,r,i="mouseChangeVisible",s="mouseChangeHidden",o="_pointerIsShowing",u="_forwardPointerEventToAllViews",a="_resolveTopView",f="_forwardPointerEvent",l=e&&e.data,c=l&&l.widgets&&l.widgets.map(this._widgetFromMouseEventItem)||[],h=l&&l.type,p=this.constructor._pointerEventNames;h==="mouseChange"?t=l.visible?p[i]:p[s]:t=p[h],!this[o]&&t&&(this[o]=!0,this[u](p[i],undefined));switch(t){case p.mousePress:r=this[a](c),this[f](r,t,e,r);break;case p.mouseRelease:r=this[a](c),this[f](r,t,e,r);break;case p.mouseMove:n=this._untilBlocked(c.filter(this._doesWidgetBackView).map(this._viewFromWidget)),this._filterForConstraint(n).forEach(function(n){this[f](n,t,e)},this),this._notifyEnteredAndExitedViews(n,e),this._forwardPointerDragDuringMove(e);break;case p[s]:this[o]=!1,this[u](t,undefined);break;default:}},_keyChanged:function(e){var t,n,r,i="_forwardKeyEvent";e&&(t=e.text,n=view2.Responder.firstResponder,r=this.constructor._keyEventNames[e.type],n&&r&&(e.target=n,this[i](n,r,e),r==="keyDown"&&t&&!this._keyCharacterBlacklist.test(t)&&this[i](n,"keyCharacter",e)))}}),Object.defineProperties(view2.EventDispatcher,{_keyEventNames:{value:{keydown:"keyDown",keyup:"keyUp"}},_pointerEventNames:{value:{mousePress:"pointerDown",mouseRelease:"pointerUp",mouseMove:"pointerMove",mouseChangeVisible:"pointerShow",mouseChangeHidden:"pointerHide"}}}),function(e){var t="EVENT_DISPATCHER";e[t]={value:function(){return new view2.EventDispatcher}},application.started.take(1).subscribe(function(){application.Binding.get(t)},function(){application.Binding.get(t)})}(config.binding,application.Binding.Type),view2.controls=typeof view2.controls=="undefined"?{}:view2.controls,view2.controls.ButtonRenderer=view2.ARenderer.extend({get template(){return{id:"Button",visible:!1,children:[{id:"ButtonText"}]}},render:function render(){var e=render.base.call(this);return this._el=e,this._postRender(e),e},_postRender:function(e){this._buttonEl=e,this._labelEl=e.children[0],this._iconEl=this._labelEl,this.childContainer=e},destroy:function(){delete this._el,delete this._buttonEl,delete this._labelEl,delete this._iconEl},background:{set:function(e){e&&(this._buttonEl.background=e)},reset:function(){this._buttonEl.background={}}},cache:{set:function(e){this._buttonEl.cache=e},reset:function(){this._buttonEl.cache=!1}},drawOrder:{set:function(e){typeof e=="number"&&(this._buttonEl.drawOrder=e)},reset:function(){this._buttonEl.drawOrder=0}},frame:{set:function(e){e&&e.spacing&&(this.element.spacing=e.spacing)},reset:function(){delete this.element.spacing}},contentLayout:{set:function(e){var t="frame",n="align",r="horizontal",i="padding",s="left",o="right",u="width",a="background",f="_labelEl",l="height",c=e[t],h=e.text,p=e.icon,d=h&&h[n]&&h[n][r],v=p&&p.image&&p.image[n]&&p.image[n][r],m=e[i],g=m&&m[s]||0,y=m&&m[o]||0,b=m&&m.top||0,w=m&&m.bottom||0,E=p&&p[u]||0,S=p&&p[i],x=S&&S[s]||0,T=S&&S[o]||0,N={},C=c&&c.margin,k=C&&C[s]||0,L=C&&C[o]||0,A=C&&C.top||0,O=C&&C.bottom||0,M=k+L+g+y;this[t]&&this[t].set&&this[t].set.call(this,e[t]),this[a]&&this[a].set&&this[a].set.call(this,e[a]);if(d!=v||m)c[u]&&(this[f][u]=c[u]-M),c.minWidth&&(this[f].minSize={width:c.minWidth-M}),c.maxWidth&&(this[f].maxSize={width:c.maxWidth-M});c[l]&&(this[f][l]=c[l]-A-O-b-w),b&&(this[f].y=b),g&&(this[f].x=g),p&&d==v&&(x&&(N[o]=E+x,this._iconEl[a][n][r]=o),T&&(N[s]=E+T,this._iconEl[a][n][r]=s),this[f][i]=N),d&&v&&d==v&&(this._buttonEl.layout={align:{horizontal:d,vertical:"center"}})},reset:function(){this._buttonEl.layout={},this._labelEl.padding={}}},icon:{set:function(e){e&&e.image&&(this._iconEl.background=e.image)},reset:function(){this._iconEl.background={}}},text:{set:function(e){this._labelEl.textContent=e},reset:function(){this._labelEl.textContent=""}},textFormat:{set:function(e){var t="lineHeight",n="truncation",r="richText",i="shadow",s=this._labelEl.text;if(e.size||e.size===0)s.size=e.size;if(e[t]||e[t]===0)s[t]=e[t];e.color&&(s.color=e.color),e.align&&(s.align=e.align),e[n]&&(s[n]=e[n]),e.wrap&&(s.wrap=e.wrap),e[r]&&(s[r]=e[r]),s.bold=!!e.bold,e[i]&&(s[i]=e[i]),this._labelEl.text=s},reset:function(){var e=this._labelEl.text;delete e.align,this._labelEl.text=e}}}),view2.controls.PaddedButtonRenderer=view2.controls.ButtonRenderer.extend({get template(){return{id:"Button",visible:!1,children:[{id:"ButtonContent",children:[{id:"ButtonText"}]}]}},render:function render(){var e="_buttonEl",t=render.base.call(this);return this._el=t,this[e]=t.children[0],this._labelEl=this[e].children[0],this._iconEl=this._labelEl,this.childContainer=this[e],t},frame:{set:function(e){var t="_buttonEl",n="height",r="spacing",i=e.margin,s=i&&i.left||0,o=i&&i.right||0,u=i&&i.top||0,a=i&&i.bottom||0;e.width&&(this[t].width=e.width-s-o),e[n]&&(this[t][n]=e[n]-u-a),e[r]&&(this.element[r]=e[r]),this[t].x=s,this[t].y=u},reset:function(){var e="_buttonEl";this[e].width=0,this[e].height=0,this[e].x=0,this[e].y=0,this.element.spacing=0}}}),view2.controls.ThreeTileButtonRenderer=view2.controls.ButtonRenderer.extend({get template(){return{id:"Button",visible:!1,children:[{id:"ButtonStart"},{id:"ButtonCenter",children:[{id:"ButtonLabel"}]},{id:"ButtonEnd"}]}},_postRender:function(e){var t="children";this._buttonEl=e,this._leftEl=e[t][0],this._centerEl=e[t][1],this._rightEl=e[t][2],this._labelEl=this._centerEl[t][0],this._iconEl=this._labelEl},destroy:function destroy(){destroy.base.call(this),delete this._leftEl,delete this._centerEl,delete this._rightEl,delete this._labelEl,delete this._iconEl},frame:{set:function(e){var t="height",n="spacing",r=this._el;e.width?r.width=e.width:r.layout={directional:"horizontal",align:{horizontal:"left",vertical:"center"}},e[t]&&(r[t]=e[t],this._leftEl[t]=e[t],this._rightEl[t]=e[t],this._centerEl[t]=e[t]),e[n]&&(r[n]=e[n])},reset:function(){var e="height",t=this._el;t.width=0,t[e]=0,t.layout=undefined,this._leftEl[e]=0,this._rightEl[e]=0,this._centerEl[e]=0,t.spacing=0}},contentLayout:{set:function(e){var t,n,r,i,s,o,u="frame",a="layout",f="background",l="padding",c="left",h="right",p="align",d="horizontal",v="width",m="minWidth",g="_centerEl",y="maxWidth",b="center",w="_labelEl",E="height",S=e[u],x=e[a],T=e.text,N=e.icon,C=e[f],k=e[l],L=k&&k[c]||0,A=k&&k[h]||0,O=k&&k.top||0,M=k&&k.bottom||0,_=k&&k[c]||0,D=k&&k[h]||0,P=T&&T[p]&&T[p][d],H=N&&N.image[p]&&N.image[p][d],B=N&&N[v]||0,j=N&&N[l],F=j&&j[c]||0,I=j&&j[h]||0,q=C&&C[c]&&C[c][v]||0,R=C&&C[h]&&C[h][v]||0,U={};j={},t=S&&S.margin,n=t&&t[c]||0,r=t&&t[h]||0,i=t&&t.top||0,s=t&&t.bottom||0,o=q+R+n+r,this[u]&&this[u].set&&this[u].set.call(this,e[u]),this[f]&&this[f].set&&this[f].set.call(this,e[f]),S[m]&&(this[g].minSize={width:S[m]-o}),S[y]&&(this[g].maxSize={width:S[y]-o}),!S[v]&&!S[m]&&!S[y]||k&&!S[v]?(this[g][a]={directional:d,align:{horizontal:c,vertical:b}},k&&(this[g][l]=k)):k&&S[v]&&(O&&(this[w].y=O),L&&(this[w].x=L));if(P!=H||k)S[v]&&(this[w][v]=S[v]-o-L-A),S[m]&&(this[w].minSize={width:S[m]-o}),S[y]&&(this[w].maxSize={width:S[y]-o});S[E]&&(this[w][E]=S[E]-i-s-O-M),N&&P==H&&(F&&(U[h]=B+F,this._iconEl[f][p][d]=h),I&&(U[c]=B+I,this._iconEl[f][p][d]=c),this[w][l]=U),P&&H&&P==H&&(this[g][a]={align:{horizontal:P,vertical:b}})},reset:function(){var e="_labelEl";this._buttonEl.layout={},this[e].padding={},this[e].x=this[e].y=0,this._centerEl.padding={}}},background:{set:function(e){var t="width",n="right",r="background",i="_rightEl",s="_centerEl",o="_buttonEl",u=e&&e.left&&e.left[t],a=e&&e[n]&&e[n][t],f=u&&a;e.left&&(this._leftEl[r]=e.left,u&&(this._leftEl[t]=u)),e[n]&&(this[i][r]=e[n],a&&(this[i][t]=a)),e.center&&(this[s][r]=e.center,f&&this[o][t]&&(this[s][t]=this[o][t]-u-a,this[s].x=u,this[i].x=this[o][t]-a)),e.color&&(this[o][r].color=e.color)},reset:function(){var e="background";this._leftEl[e]={},this._centerEl[e]={},this._rightEl[e]={}}}}),view2.controls.PaddedThreeTileButtonRenderer=view2.controls.ThreeTileButtonRenderer.extend({get template(){return{id:"Button",visible:!1,children:[{id:"ButtonCont",children:[{id:"ButtonStart"},{id:"ButtonCenter",children:[{id:"ButtonLabel"}]},{id:"ButtonEnd"}]}]}},_postRender:function(e){var t="children",n="_centerEl",r=e[t][0];this._buttonEl=r,this._leftEl=r[t][0],this[n]=r[t][1],this._rightEl=r[t][2],this._labelEl=this[n][t][0],this._iconEl=this._labelEl,this.childContainer=this[n]},destroy:function destroy(){destroy.base.call(this),delete this._buttonContEl},frame:{set:function(e){var t,n="left",r="width",i="_buttonEl",s="horizontal",o="center",u="height",a=this._el,f=e.margin,l=f&&f[n]||0,c=f&&f.right||0,h=f&&f.top||0,p=f&&f.bottom||0;e[r]?(a[r]=e[r],this[i][r]=e[r]-l-c):(a.layout={directional:s,align:{horizontal:n,vertical:o}},this[i].layout={directional:s,align:{horizontal:n,vertical:o}}),e[u]&&(t=e[u]-h-p,a[u]=e[u],this._leftEl[u]=t,this._rightEl[u]=t,this._centerEl[u]=t,this[i][u]=t),this[i].x=l,this[i].y=h},reset:function(){var e="height",t=this._el;t.width=0,t[e]=0,t.layout=undefined,this._buttonEl.width=0,this._buttonEl[e]=0,this._leftEl[e]=0,this._rightEl[e]=0,this._centerEl[e]=0}}}),view2.controls.TwoLabelsButtonRenderer=view2.controls.ButtonRenderer.extend({get template(){var e="horizontal",t="center";return{id:"Button",visible:!1,layout:{direction:e,align:{vertical:t}},children:[{id:"ButtonContent",layout:{direction:e,align:{vertical:t}},children:[{id:"ButtonLabelLeft",align:{horizontal:"left",vertical:t},text:{align:{vertical:t}},padding:{left:10}},{id:"ButtonLabelRight",align:{horizontal:"right",vertical:t},text:{align:{vertical:t}}}]}]}},render:function render(){var e="_buttonEl",t="children",n="_labelLeftEl",r=render.base.call(this);return this._el=r,this[e]=r[t][0],this[n]=this[e][t][0],this._labelRightEl=this[e][t][1],this._iconEl=this[n],this.childContainer=this[e],r},text:{set:NOOP,reset:NOOP},textLeft:{set:function(e){this._labelLeftEl.textContent=e},reset:function(){this._labelLeftEl.textContent=""}},textRight:{set:function(e){this._labelRightEl.textContent=e},reset:function(){this._labelRightEl.textContent=""}},padding:{set:function(e){var t="leftPadding",n="rightPadding";e[t]&&(this._labelLeftEl.x=e[t]),e[n]&&(this._labelRightEl.x=e[n])},reset:function(){this._labelLeftEl.x=0,this._labelRightEl.x=0}},_textFormatHelper:function(e,t){var n="lineHeight",r="truncation",i="richText",s="shadow",o="padding";if(t.size||t.size===0)e.size=t.size;if(t[n]||t[n]===0)e[n]=t[n];return t.color&&(e.color=t.color),t.align&&(e.align=t.align),t[r]&&(e[r]=t[r]),t.wrap&&(e.wrap=t.wrap),t[i]&&(e[i]=t[i]),e.bold=!!t.bold,t[s]&&(e[s]=t[s]),t[o]&&(e[o]=t[o]),e},textFormat:{set:function(e){var t="_labelLeftEl",n="_labelRightEl",r="_textFormatHelper",i="align",s="padding",o="visible",u="width",a=this[t].text,f=this[n].text,l=e&&e.textFormatLeft,c=e&&e.textFormatRight;l&&(this[t].text=this[r](a,l),this[t][i]=l[i],l[s]&&(this[t][s]=l[s])),c&&(this[n].text=this[r](f,c),this[n][i]=c[i]),c&&c[o]?this[n][o]=!0:this[n][o]=!1,c&&c[u]&&(this[n][u]=c[u]),l&&l[u]&&(this[t][u]=l[u])},reset:function(){var e="_labelLeftEl",t="_labelRightEl",n=this[e].text,r=this[t].text;delete n.align,delete r.align,this[e].text=n,this[t].text=r}},frame:{set:function(e){var t="_buttonEl",n="height",r="spacing",i=e.margin,s=i&&i.left||0,o=i&&i.right||0,u=i&&i.top||0,a=i&&i.bottom||0;e.width&&(this[t].width=e.width-s-o),e[n]&&(this[t][n]=e[n]-u-a),e[r]&&(this.element[r]=e[r]),this[t].x=s,this[t].y=u},reset:function(){var e="_buttonEl";this[e].width=0,this[e].height=0,this[e].x=0,this[e].y=0,this.element.spacing=0}}}),view2.controls.TiledTwoLabelsButtonRenderer=view2.controls.TwoLabelsButtonRenderer.extend({get template(){var e="horizontal",t="center";return{id:"Button",visible:!1,layout:{direction:e,align:{vertical:t}},children:[{id:"ButtonContent",layout:{direction:e,align:{vertical:t}},children:[{id:"ButtonStart",layout:{direction:e,align:{vertical:t}}},{id:"ButtonCenter",layout:{direction:e,align:{vertical:t}},children:[{id:"ButtonLabelLeft",align:{horizontal:"left",vertical:t},text:{align:{vertical:t}}},{id:"ButtonLabelRight",align:{horizontal:"right",vertical:t},text:{align:{vertical:t}}}]},{id:"ButtonEnd",layout:{direction:e,align:{vertical:t}}}]}]}},render:function render(){var e="children",t="_centerEl",n="_labelLeftEl",r=render.base.call(this),i=r[e][0];return this._el=r,this._buttonEl=i,this._leftEl=i[e][0],this[t]=i[e][1],this._rightEl=i[e][2],this[n]=this[t][e][0],this._labelRightEl=this[t][e][1],this._iconEl=this[n],this.childContainer=this[t],r},text:{set:NOOP,reset:NOOP},textLeft:{set:function(e){this._labelLeftEl.textContent=e},reset:function(){this._labelLeftEl.textContent=""}},textRight:{set:function(e){this._labelRightEl.textContent=e},reset:function(){this._labelRightEl.textContent=""}},padding:{set:function(e){var t="leftPadding",n="rightPadding";e[t]&&(this._labelLeftEl.padding=e[t]),e[n]&&(this._labelRightEl.padding=e[n])},reset:function(){this._labelLeftEl.padding={}}},_textFormatHelper:function(e,t){var n="lineHeight",r="truncation",i="richText",s="shadow";if(t.size||t.size===0)e.size=t.size;if(t[n]||t[n]===0)e[n]=t[n];return t.color&&(e.color=t.color),t.align&&(e.align=t.align),t[r]&&(e[r]=t[r]),t.wrap&&(e.wrap=t.wrap),t[i]&&(e[i]=t[i]),e.bold=!!t.bold,t[s]&&(e[s]=t[s]),e},textFormat:{set:function(e){var t="_labelLeftEl",n="_labelRightEl",r="_textFormatHelper",i="visible",s="width",o=this[t].text,u=this[n].text,a=e&&e.textFormatLeft,f=e&&e.textFormatRight;a&&(this[t].text=this[r](o,a)),f&&(this[n].text=this[r](u,f)),f&&f[i]?this[n][i]=!0:this[n][i]=!1,f&&f[s]&&(this[n][s]=f[s]),a&&a[s]&&(this[t][s]=a[s])},reset:function(){var e="_labelLeftEl",t=this[e].text;delete t.align,this[e].text=t,this._labelRightEl.text=t}},frame:{set:function(e){var t,n="width",r="_buttonEl",i="height",s=this._el,o=e.margin,u=o&&o.left||0,a=o&&o.right||0,f=o&&o.top||0,l=o&&o.bottom||0;e[n]?(s[n]=e[n],this[r][n]=e[n]-u-a):s.layout={directional:"horizontal",align:{horizontal:"left",vertical:"center"}},e[i]&&(t=e[i]-f-l,s[i]=e[i],this._leftEl[i]=t,this._rightEl[i]=t,this._centerEl[i]=t,this[r][i]=t),this[r].x=u,this[r].y=f},reset:function(){var e="height",t=this._el;t.width=0,t[e]=0,t.layout=undefined,this._buttonEl.width=0,this._buttonEl[e]=0,this._leftEl[e]=0,this._rightEl[e]=0,this._centerEl[e]=0}},background:{set:function(e){var t="width",n="right",r="background",i="_rightEl",s="_centerEl",o="_buttonEl",u=e&&e.left&&e.left[t],a=e&&e[n]&&e[n][t],f=u&&a;e.left&&(this._leftEl[r]=e.left,u&&(this._leftEl[t]=u)),e[n]&&(this[i][r]=e[n],a&&(this[i][t]=a)),e.center&&(this[s][r]=e.center,f&&this[o][t]&&(this[s][t]=this[o][t]-u-a,this[s].x=u,this[i].x=this[o][t]-a)),e.color},reset:function(){var e="background";this._leftEl[e]={},this._centerEl[e]={},this._rightEl[e]={}}}}),util.ObservableValue=util.Class.create({_value:undefined,_watchDisposable:undefined,get value(){return this._value},set value(e){var t="_differences",n=this._value;e!==n&&(this._value=e,this._values&&this._values.onNext(e),this[t]&&this[t].onNext({current:e,previous:n}))},get values(){var e=new Rx.BehaviorSubject(this._value);return Object.defineProperty(this,"values",{value:e,enumerable:!0,configurable:!0}),this._values=e,e},get changes(){var e=this.values.skip(1);return Object.defineProperty(this,"changes",{value:e,enumerable:!0,configurable:!0}),this._changes=e,e},get differences(){var e=new Rx.Subject;return Object.defineProperty(this,"differences",{value:e,enumerable:!0,configurable:!0}),this._differences=e,e},init:function(e){this._value=e},set:function(e){this.value=e},destroy:function(){var e,t,n=["values","differences"],r=n.length;this.unwatch();for(t=0;t<r;t++)this.hasOwnProperty(n[t])&&(e=n[t],this[e].onCompleted(),delete this[e],delete this["_"+e]);this._value=undefined},link:function(e){return this.watch(e)},unlink:function(){return this.unwatch()},watch:function(e){var t="_watchDisposable",n=this,r=this[t];r&&r.dispose(),this[t]=e.values.subscribe(function(e){n.value=e},NOOP,NOOP)},unwatch:function(){var e=this._watchDisposable;e&&(e.dispose(),this.value=undefined)}}),view2.controls.Button=view2.AView.extend({id:"Button",DEFAULT_STATE:"default",PRESSED_STATE:"pressed",HIGHLIGHTED_STATE:"highlighted",DISABLED_STATE:"disabled",SELECTED_STATE:"selected",_hovered:!1,_selected:!1,_pressed:!1,init:function init(e){var t="loggingContext",n="state",r="DEFAULT_STATE",i=e&&e.config,s={};i&&(i.id&&(this.id=i.id),i[t]&&(this._focusLoggingContext=i[t].focus,this._commandLoggingContext=i[t].command)),this._cfg=i,this[n]=new util.ObservableValue(this[r]),s[this[r]]=s[this.HIGHLIGHTED_STATE]=s[this.PRESSED_STATE]=s[this.DISABLED_STATE]=s[this.SELECTED_STATE]=!1,this._actionForState={},this._backgroundForState={},this._iconForState={},this._textFormat={},this._textForState={},this._textResolverForState={},this._marginForState={},this._paddingForState={},this._opacityForState={},this._sizeForState={},this._flexWidthForState={},this._flexHeightForState={},this._spacingForState={},this._positionForState={},this._sizeStrategyForState={},this._positionStrategyForState={},this._hasState=s,!e&&!i?(e={rendererFactory:function(e){return new view2.controls.ButtonRenderer(e)}},init.base.call(this,e)):(e.rendererFactory=this._getRendererFactory(i),init.base.call(this,e),this._processConfig(i),i&&(i[n]&&(this[n].value=i[n]),i.updateOnInit!==!1&&this.update({__proto__:this._currentUpdateModel})))},size:function size(e,t){this._sizeForState[this.DEFAULT_STATE]={width:e,height:t},size.base.call(this,e,t)},flexWidth:function flexWidth(e,t){this._flexWidthForState[this.DEFAULT_STATE]={min:e,max:t},flexWidth.base.call(this,e,t)},flexHeight:function flexHeight(e,t){this._flexHeightForState[this.DEFAULT_STATE]={min:e,max:t},flexHeight.base.call(this,e,t)},position:function position(e,t,n){this._positionForState[this.DEFAULT_STATE]={x:e,y:t,drawOrder:n},position.base.call(this,e,t,n)},dim:function dim(e,t,n){this._opacityForState[this.DEFAULT_STATE]=e,dim.base.call(this,e,t,n)},reset:function reset(){reset.base.call(this),this._currentUpdateModel=undefined,this.update({state:this.DEFAULT_STATE})},update:function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y="state",b="loggingContext",w="_processButtonStates",E="call",S="prototype",x="AView",T=e&&e.id,N=e&&e[y]||this[y].value||this.DEFAULT_STATE,C=e&&e.secondarySelectedState,k=e&&e.config,L=this._cfg,A=L&&L.cache;T&&(this.id=T),k&&(this._processConfig(k),k[b]&&(this._focusLoggingContext=k[b].focus,this._commandLoggingContext=k[b].command)),N===this.SELECTED_STATE&&(this._selected=!0,!C&&this.focused&&(C=this.HIGHLIGHTED_STATE)),this[y].value=N,e=e||{},e[y]=N,this._currentUpdateModel=g=e,t=this[w](N,this._backgroundForState,C),n=this[w](N,this._iconForState,C),r=this[w](N,this._sizeForState,C),i=this[w](N,this._sizeStrategyForState,C),s=this[w](N,this._flexWidthForState,C),o=this[w](N,this._flexHeightForState,C),a=this[w](N,this._positionStrategyForState,C),f=this[w](N,this._positionForState,C),m=this[w](N,this._textResolverForState,C),l=m?m(g):this[w](N,this._textForState,C),u=this[w](N,this._textFormat,C),c=this[w](N,this._marginForState,C),h=this[w](N,this._paddingForState,C),p=this[w](N,this._opacityForState,C),d=this[w](N,this._spacingForState,C),i&&(r=i(r)),r&&view2[x][S].size[E](this,r.width,r.height),s&&view2[x][S].flexWidth[E](this,s.min,s.max),o&&view2[x][S].flexHeight[E](this,o.min,o.max),f&&(a&&(f=a(f)),view2[x][S].position[E](this,f.x,f.y,f.drawOrder)),v={icon:n,cache:A,contentLayout:{frame:{width:this.width,height:this.height,minWidth:this.minWidth,maxWidth:this.maxWidth,margin:c,x:this.x,y:this.y,spacing:d},text:u,icon:n,background:t,padding:h},textFormat:u},l!==undefined&&(L&&L.hasTwoLabels?(l.left!==undefined&&(v.textLeft=l.left),l.right!==undefined&&(v.textRight=l.right)):v.text=l),view2[x][S].dim[E](this,p),this._renderer.set(v).commit()},_getRendererFactory:function(e){var t,n,r="hasOwnProperty",i="TwoLabelsButtonRenderer",s=e.background,o=e.hasTwoLabels,u=view2.controls,a=!s||!(s[r]("left")&&s[r]("center")&&s[r]("right"));return o?(n=u[i],a?n=u[i]:n=u.TiledTwoLabelsButtonRenderer):(t=e[r]("margin"),a?n=t?u.PaddedButtonRenderer:u.ButtonRenderer:n=t?u.PaddedThreeTileButtonRenderer:u.ThreeTileButtonRenderer),function(e){return new n(e)}},_setStates:function(e){var t;for(t in e)this._assignStateProperties(e[t],t)},_processConfig:function(e){var t,n="_assignStateProperties",r="states",i="disabledEvents";if(e){this[n](e,this.DEFAULT_STATE);if(e[r])for(t in e[r])this[n](e[r][t],t);e[i]&&(this._disabledEvents=e[i])}},_assignStateProperties:function(e,t){var n,r,i,s="_textFormat",o="_backgroundForState",u="_iconForState",a="_marginForState",f="_paddingForState",l="_sizeForState",c="_flexWidthForState",h="_flexHeightForState",p="_positionForState",d=util.extendDeep;this._hasState[t]=!0;for(n in e)r=e[n],i={},n=="action"?this._actionForState[t]=r:n=="text"?this._textForState[t]=r:n=="textResolver"?this._textResolverForState[t]=r:n=="textFormat"?(d(i,this[s][t],r),this[s][t]=i):n=="background"?(d(i,this[o][t],r),this[o][t]=i):n=="icon"?(d(i,this[u][t],r),this[u][t]=i):n=="margin"?(d(i,this[a][t],r),this[a][t]=i):n=="padding"?(d(i,this[f][t],r),this[f][t]=i):n=="opacity"?this._opacityForState[t]=r:n=="spacing"?this._spacingForState[t]=r:n=="size"?(d(i,this[l][t],r),this[l][t]=i):n=="flexWidth"?(d(i,this[c][t],r),this[c][t]=i):n=="flexHeight"?(d(i,this[h][t],r),this[h][t]=i):n=="position"?(d(i,this[p][t],r),this[p][t]=i):n=="positionStrategy"?this._positionStrategyForState[t]=r:n=="sizeStrategy"&&(this._sizeStrategyForState[t]=r)},_processButtonStates:function(e,t,n){var r="DEFAULT_STATE",i=t[this[r]],s=t[e],o=typeof n=="string"?t[n]:{};return e==this[r]?e=s:typeof i=="object"?(e={},util.extendDeep(e,i,o,s)):e=s||i,e},_tryUpdate:function(e,t){this._hasState[e]&&this.state.value!==this.DISABLED_STATE&&this.update({__proto__:this._currentUpdateModel,state:e,secondarySelectedState:t})},_isPrimaryInput:function(e){var t=!1;return e&&(e.key==="key.enter"||e.button!==undefined)&&(t=!0),t},canFocus:function canFocus(){return canFocus.base.call(this)&&this.state.value!==this.DISABLED_STATE},focus:function focus(){var e=focus.base.call(this),t=[this.HIGHLIGHTED_STATE],n=this._focusLoggingContext,r=this._cfg;return e&&(r&&r.becomeFirstResponderOnFocus&&this.becomeFirstResponder(),this._selected&&t.unshift(this.SELECTED_STATE),this._tryUpdate.apply(this,t),n&&(this._focusSession=application.notifications.notifyStart("uiView","focus",{data:n}))),e},canBlur:function canBlur(){return canBlur.base.call(this)&&this.state.value!==this.DISABLED_STATE},blur:function blur(){var e=blur.base.call(this),t=[this.DEFAULT_STATE],n=this._focusLoggingContext;return e&&(this._selected&&t.unshift(this.SELECTED_STATE),this._tryUpdate.apply(this,t),n&&application.notifications.notifyEnd(this._focusSession,{data:n})),e},canBecomeFirstResponder:function canBecomeFirstResponder(){return canBecomeFirstResponder.base.call(this)&&this.state.value!==this.DISABLED_STATE},pointerEnter:function(){if(this._isEventDisabled("pointerEnter"))return;this._hovered=!0,this._selected||this._tryUpdate(this.HIGHLIGHTED_STATE)},pointerLeave:function(){if(this._isEventDisabled("pointerLeave"))return;this._hovered=this._pressed=!1,this._tryUpdate(this._selected?this.SELECTED_STATE:this.DEFAULT_STATE)},pointerDown:function(e){if(this._isEventDisabled("pointerDown"))return;this._onPress(e)},pointerUp:function(e){var t;if(this._isEventDisabled("pointerUp"))return;t=this._onRelease(e),t&&this.becomeFirstResponder()},keyDown:function(e){this._onPress(e)},_onPress:function(e){var t,n,r,i,s,o="_commandLoggingContext",u="keyCode";if(this._isPrimaryInput(e)){this._pressed=!0;if(this[o]){if(e.key!==undefined){t="key",n="",i=e.modifiers;for(s in i)n+=i[s]+"+";n+=e.key||u+e[u],r=e.key!="key.enter"}else t="pointer",n="click",r=!1;application.notifications.notifyStart("uiView","command",{data:{name:this[o].name,inputMethod:t,inputValue:n,isHotKey:r}})}this._tryUpdate(this.PRESSED_STATE)}},keyUp:function(e){return this._onRelease(e)},_onRelease:function(e){var t,n="DEFAULT_STATE",r=!1,i="_selected",s="SELECTED_STATE",o=this._actionForState[this[n]],u=this._isPrimaryInput(e),a=r;return this._pressed&&u&&this.state.value!==this.DISABLED_STATE&&(this[i]=this._hasState[this[s]]?!this[i]:r,this._pressed=r,this[i]?t=this[s]:this._hovered||this.focused?t=this.HIGHLIGHTED_STATE:t=this[n],this._tryUpdate(t),o&&(a=!!o(this[i])),this._commandLoggingContext&&application.notifications.notifyEnd("uiView","command")),a},_isEventDisabled:function(e){var t="_disabledEvents";return this[t]&&this[t][e]===!0}}),config.stories={},function(config){var e="kids",t="uiExperience",n="defineProperty",r="src",i="center",s="legend",o="stretch",u="labels",a=!1,f=!0,l="raiseEvent",c=473,h=204,p=10,d=32,v="http://cdn-0.nflximg.com/us/ffe/htmltvui/darwin/legend/pointer-legend.webp",m="http://cdn-0.nflximg.com/us/ffe/htmltvui/darwin/legend/kids-pointer-legend.webp",g={left:{x:44,y:66},center:{x:54,y:66},right:{x:140,y:66}},y=devicebridge.isPs3||devicebridge.isXbox360||devicebridge.isPs4,b={color:{a:255,r:26,g:26,b:26}},w=function(){return{left:{get src(){var i=model[t][e]?m:v;return Object[n](this,r,{value:i}),i},x:44,y:0,width:10,height:42},center:{get src(){var i=model[t][e]?m:v;return Object[n](this,r,{value:i}),i},x:54,y:0,width:10,height:42,align:{horizontal:"tile",vertical:i}},right:{get src(){var i=model[t][e]?m:v;return Object[n](this,r,{value:i}),i},x:140,y:0,width:10,height:42}}};config[s]={width:c,height:h,x:1280-c,y:720-h,drawOrder:100,iconIndexes:{menu:2,search:1,back:2},profile:{avatarSize:d,avatarContainer:{width:44,height:44,spacing:p},container:{horizontalAlign1:o,verticalAlign1:o,width:d,height:d,y:4,x:0},tint:{width:d,height:d,backgroundColor:{r:0,g:0,b:0,a:77}}},actions:y?["back","menu","search"]:null,actionTemplateFactory:function(e){var t="legend-"+e,n=config.text[s][u][e],r=this.iconIndexes[e];return this.createIconFcn(t,n,r)},createIconFcn:function(e,t,n){return{id:e,height:42,visible:a,spacing:p,padding:{left:19},background:{src:"http://cdn-0.nflximg.com/us/ffe/htmltvui/darwin/hint-icons.webp",height:14,y:n*14,align:{vertical:i}},textContent:t,text:{size:16,lineHeight:16,bold:f,color:{r:230,g:230,b:230,a:255},align:{vertical:i}}}},pointer:{spacing:10,width:250,height:43,back:{width:56,height:43,updateOnInit:a,size:{width:56,height:43},action:function(){return state[l]("key.back",{pointerLegend:f})},background:{get src(){var i=model[t][e]?m:v;return Object[n](this,r,{value:i}),i},get mirror(){var e,t=nrdp.gibbon.defaultLocale,n=nrdp.gibbon.localeInfo;return n&&(e=n(t)),e&&e.direction==="rtl"?f:a},x:154,y:0,width:56,height:45,align:{horizontal:i,vertical:i}},states:{pressed:{background:{x:154,y:64}},highlighted:{background:{x:154,y:64}}}},menu:{updateOnInit:a,size:{height:42},spacing:10,flexWidth:{min:100,max:150},icon:{image:{get src(){var i=model[t][e]?m:v;return Object[n](this,r,{value:i}),i},x:2,y:10,width:28,height:22,align:{vertical:i}},width:28,height:22,padding:{right:2}},textResolver:function(){return config.text[s][u].menu},action:function(){return state[l]("extensibilitymenu.enter")},textFormat:{size:16,bold:f,color:{r:230,g:230,b:230,a:255},align:{vertical:i}},background:w(),states:{highlighted:{background:g,textFormat:b,icon:{image:{x:2,y:78}}},pressed:{background:g,textFormat:b,icon:{image:{x:2,y:78}}}}},search:{updateOnInit:a,size:{height:42},flexWidth:{min:100,max:170},spacing:10,action:function(){return state[l]("search.enter")},textResolver:function(){return config.text[s][u].search},textFormat:{size:16,lineHeight:16,bold:f,color:{r:230,g:230,b:230,a:255},align:{horizontal:i,vertical:i}},background:w(),padding:10,states:{highlighted:{background:g,textFormat:b},pressed:{background:g,textFormat:b}}}}}}(config),function(config){var e="center",t="http://cdn-0.nflximg.com/us/ffe/htmltvui/darwin/legend/ce-legend-ab.png",n=32,r=23,i=23,s=5,o={r:115,g:115,b:115,a:255},u={r:235,g:235,b:235,a:255},a=30-s,f=config.ceLegend=Object.create(config.legend);f.actions=["back","menu"],f.actionTemplateFactory=function(f){var l=config.text.legend.labels.ce,c="legend-"+f,h=l[f],p=l[f+"IconText"],d=o,v=24;return model.uiExperience.kids&&(d=u,v=0),{id:c,visible:!1,height:n,spacing:10,layout:{direction:"horizontal"},children:[{id:c+"-icon-leftcap",height:n,width:i,background:{src:t,height:r,x:0,y:v,align:{vertical:e}}},{id:c+"-icon-middle",height:n,textContent:p,background:{src:t,height:r,width:1,x:i+1,y:v,align:{horizontal:"tile",vertical:e}},text:{size:14,lineHeight:14,bold:!0,color:d,align:{vertical:e},shadow:{offset:{x:0,y:-1},color:{r:55,g:55,b:55,a:255}}}},{id:c+"-icon-rightcap",height:n,width:s,background:{src:t,height:r,x:a,y:v,align:{vertical:e}}},{id:c+"-text",textContent:h,height:n,padding:{left:9},text:{size:16,lineHeight:16,bold:!0,color:{r:230,g:230,b:230,a:255},align:{vertical:e}}}]}}}(config),view2.legend={},util.CurrentUrlParams.get("isPs4")?(devicebridge.isPs4=!0,devicebridge.isPs4Faked=!0):Object.defineProperty(devicebridge,"isPs4",{get:function(){return devicebridge.Adapter.device.ESNPrefix==="NFPS4-001-"}}),util.CurrentUrlParams.get("isXbox360")?(devicebridge.isXbox360=!0,devicebridge.isXbox360Faked=!0):Object.defineProperty(devicebridge,"isXbox360",{get:function(){return devicebridge.Adapter.device.ESNPrefix==="NFX360-01-"}}),view2.legend.Legend=view2.AView.extend({id:"Legend",ACTIONS:{NONE:0,SEARCH:1,BACK:2,MENU:4,PROFILE:8},init:function init(e){var t="transitionManager",n="_transitionManager",r=e.config;this._childPointerViewFactory=e.childPointerViewFactory,this._profileAvatarFactory=e.profileAvatarFactory,e[t]&&(this[n]=e[t],this[n].register("legend",this)),this._cfg=r,this.width=r.width,this.height=r.height,init.base.call(this,e),this.position(r.x,r.y,r.drawOrder)},update:function(e){var t,n="_lastActionFlags",r="_profileIcon",i="_profileContainer",s="avatarContainer",o="show",u=this.ACTIONS,a=this._cfg.actions,f=e.actionFlags,l=this[n],c=e.profileAvatars,h=this[r],p=f===undefined,d=f&u.PROFILE||p&&l&u.PROFILE,v=devicebridge.isPs3||devicebridge.isXbox360||devicebridge.isPs4,m=this[i],g=this._cfg.profile;f!==undefined&&(this[n]=f),v||this._updatePointerLegend(e,f),c&&(h||(m||(m=new view2.Container({config:g[s]}),this[i]=m,m.update({spacing:g[s].spacing}),this.addChild(this[i])),h=this._profileAvatarFactory(),h.position(g.container.x,g.container.y),h[o](),this[r]=h,m.addChild(this[r])),h.update({avatars:c})),m&&(d?m[o]():m.hide()),p||(f===u.NONE?this.hide():a?(t={},a.forEach(function(e){t[e]=f&u[e.toUpperCase()]}),this._renderer.set(t).commit(),this[o]()):h&&d?this[o]():this._pointerContainer&&this[o]())},pointerPassThru:!0,pointerShow:function(){var e=this._pointerContainer;this._pointerOnScreen=!0,e&&e.show()},pointerHide:function(){var e=this._pointerContainer;this._pointerOnScreen=!1,e&&e.hide()},_updatePointerLegend:function(e,t){var n="_pointerContainer",r="_pointerBack",i="_pointerMenu",s="_pointerSearch",o="_createPointerButton",u=this.ACTIONS,a=this._cfg.pointer,f=this[n],l=this[r],c=this[i],h=this[s],p=this._childPointerViewFactory;if(!p)return;f||(f=new view2.Container({config:a,spacing:a.spacing})),c||(c=this[o]({type:"menu"},f),this[i]=c),t&u.MENU?c.show():c.hide(),h||(h=this[o]({type:"search"},f),this[s]=h),t&u.SEARCH?h.show():h.hide(),l||(l=c=this[o]({type:"back"},f),this[r]=l),t&u.BACK?l.show():l.hide(),this[n]||(this[n]=f,this.addChild(f),f.update({layoutDirection:"horizontal",layoutAlign:"right"}),this._pointerOnScreen&&f.show())},_createPointerButton:function(e,t){var n=this._childPointerViewFactory,r=n&&n.create({type:e.type});return r&&t&&(r.update({drawOrder:config.gibbon.MAX_DRAW_ORDER}),t.addChild(r)),r}}),view2.legend.ProfileAvatar=view2.Container.extend({id:"ProfileAvatar",init:function init(e){var t=e.config,n=t.container,r=new view2.Container({config:t.tint});this._cfg=t,init.base.call(this,{config:n}),this.update(n),r.update(t.tint),r.show(),this.addChild(r)},update:function update(e){var t=e&&e.avatars,n=Object.create(e);n.src1=t&&t[this._cfg.avatarSize]||"",update.base.call(this,n)}}),view2.legend.LegendRenderer=view2.ARenderer.extend({init:function init(e){return e&&(this._isCustomerService=e.isCustomerService),this._legendCfg=application.Binding.get("LEGEND_CONFIG"),init.base.apply(this,arguments)},get template(){var e,t=this._legendCfg,n=[],r=t.actions;return r&&r.forEach(function(r){e=t.actionTemplateFactory(r),n.push(e)}),{id:"legend",width:this.width,height:this.height,visible:!1,background:{get src(){var e=model.uiExperience.kids?"http://cdn-0.nflximg.com/us/ffe/htmltvui/darwin/kids/kids-hint-key-vignette-02.webp":"http://cdn-0.nflximg.com/us/ffe/htmltvui/darwin/hint-key-vignette.webp";return this._isCustomerService&&(e=""),Object.defineProperty(this,"src",{value:e}),e}},layout:{direction:"horizontal",align:{horizontal:"right",vertical:"center"}},padding:{top:124,right:49},children:n}},render:function render(){var e,t=render.base.call(this),n=this._legendCfg.actions;return n&&(e={},n.forEach(function(n,r){e[n]=t.children[r]}),this._toggleElements=e),t}}),function(e){var t="legend",n="Button",r="controls",i=null,s="pointer",o="LEGEND_VIEW",u="LEGEND_CONFIG",a="LEGEND_PROFILE_AVATAR_FACTORY",f="CHILDREN_POINTER_VIEW_FACTORY",l="APP_ROOT_TRANSITION_MANAGER",c="POINTER_BACK",h="POINTER_MENU",p="POINTER_SEARCH";e[u]={value:function(){var e=!(devicebridge.isPs3||devicebridge.isXbox360||devicebridge.isPs4),n=!0;return e&&!n?config.ceLegend:config[t]}},e[o]={dependsOn:[u,a,f,l],value:function(e){return new view2[t].Legend({rendererFactory:function(e){return new view2[t].LegendRenderer(e)},profileAvatarFactory:e[a],childPointerViewFactory:e[f](),config:e[u],transitionManager:e[l]})}},e[a]={dependsOn:[u],value:function(e){return function(){return new view2[t].ProfileAvatar({config:e[u].profile})}}},e[f]={dependsOn:[c,h,p],value:function(e){var t=new view2.ViewFactory({back:e[c],menu:e[h],search:e[p]});return function(){return t}}},e[c]={value:function(){return view2[r][n].bind(i,{config:config[t][s].back})}},e[h]={value:function(){return view2[r][n].bind(i,{config:config[t][s].menu})}},e[p]={value:function(){return view2[r][n].bind(i,{config:config[t][s].search})}}}(config.binding),controller=typeof controller=="undefined"?{}:controller,state.handleEvent=function(e,t){var n,r,i=this.actions,s=i&&(n=i[e.name])&&n.apply(this,t);if(s)return s;e.bubbling||(e.bubbling=!0);if(!e.cancelBubble)return r=this.parentState,r&&r.handleEvent(e,t)},state.handlesEvent=function(e){var t=this.actions,n=typeof e=="string"?e:e.name;return t&&t[n]?!0:!1},controller.ABaseUiCard=view2.Responder.extend({_hasFocus:!1,_onStack:!1,view:function(){var e=this._view;return e||(this._view=this._initView(),e=this._view),e.viewController=this,e},toString:function(){return this.id},handleEvent:state.handleEvent,handlesEvent:state.handlesEvent,canEnter:function(){return!0},logUiModalView:function(e){var t="uiModalView",n="notifications",r="uiQOE",i=this[t];if(e&&i==e[t])return;i&&(application[n].notify(r,"uiModalViewChanged",{data:{value:i}}),application[n].notifyStart(r,t,{data:{value:i}}))},onEnter:function(e,t,n){this._hasFocus=!0,this._onStack=!0,this.view().focus(),this.logUiModalView(n)},onExit:function(e){delete this._hasFocus,e&&delete this._onStack,this._onExit(e)},nextResponder:function(){var e=this.view();return e&&e.parent},_onExit:function(e){var t=this._view;t&&(e?t.hide():t.blur())}}),application.auth={},function(e,t){var n,r="mono",i="notifications",s="tvui",o="NRDP_INIT_END",u="NRDP_INIT_START",a="UI_TAIL",f="NRDJS_TAIL",l="startTime",c="endTime",h="data",p="sessionName",d="startupProfile",v="notifyStart",m=util.CurrentUrlParams.get("captureHost"),g={},y=[],b={time:NOOP,timeEnd:NOOP,report:NOOP,create:NOOP,createRequest:NOOP};t&&(b={EMPTY:{start:NOOP,end:NOOP},time:function(e,t){var n=g[e];n||(n=b.create(e),g[e]=n,n.start(t))},timeEnd:function(e,t){var n=g[e];n&&n.end(t)},report:function(e){var h=!config.isDebugBuild&&!nrdp.debug,p=b._record,d=nrdp[r](),v=t.HEAD,w=devicebridge.Adapter.device,E=nrdp.started,S={event:"ui-startup-time",version:"3.0",nrdjs:nrdp.nrdjs||"",elapsed:d-v,esnPrefix:w.ESNPrefix,sdkVersion:w.SDKVersion.components.nrdapp,success:e,profiles:null};application[i].notify(s,"startupReport",{data:{nrdpInitEnd:t[o]-E,nrdpInitDuration:t[o]-t[u],uiInterpretEnd:t[a]-E,uiInterpretDuration:t[a]-t.UI_HEAD,nrdjsInterpretEnd:t[f]-E,nrdjsInterpretDuration:t[f]-v}}),p(t[u],t[o],"nrdp.init()"),p(t.UI_HEAD,t[a],"ui interpret"),p(v,t[f],"nrdjs interpret"),h&&p(E,d,"tti"),S.profiles=[w.getUIVersion()].concat(y.sort(function(e,t){var n=0;return e[l]<t[l]?n=-1:e[l]>t[l]?n=1:e[c]<t[c]?n=1:e[c]>t[c]&&(n=-1),n})),h&&(util.log.error(S),m&&util.http.legacyRequest({url:m,data:JSON.stringify(S),contentType:"application/json",type:"POST",success:NOOP,error:NOOP})),n=S,g={},y=[]},automation:{get data(){var e,t=["loadServerRequest","loadUiText","startBrowse","startApp"];return n&&(e=n.profiles.slice(1).reduce(function(e,n){var r=n[h].message;return t.indexOf(r)>-1&&(e[r]={elapsed:n[c]-n[l]}),e},{elapsed:n.elapsed}),t.forEach(function(e){e||util.log.warn("util.startupProfiler.automation.data missing: "+e)})),e}},_record:function(e,t,n){y.push({type:"TimeStamp",startTime:e,endTime:t,data:{message:n}})},create:function(e){var t,n,o;return{start:function(u){var a,f;u=u||{},a=util.extend({message:e},u[h]),f=u[p]||d,!t&&!n&&(t=nrdp[r](),f!=="videoList"&&(o=application[i][v](s,f,{data:a})))},end:function(s){s=s||{},t&&!n&&(n=nrdp[r](),b._record(t,n,e),o&&application[i].notifyEnd(o,{data:s[h]}))}}},createRequest:function(e,t){var n,o,u,a=util.uuid();return{start:function(f){var l;f=f||{},l=f[p]||d,!n&&!o&&(n=nrdp[r](),u=application[i][v](s,l,{data:util.extend({url:e,requestMethod:t,requestId:a},f[h])}))},end:function(s){s=s||{},n&&!o&&u&&(o=nrdp[r](),y.push({type:"ResourceSendRequest",startTime:n,endTime:o,data:{requestId:a,url:e,requestMethod:t}}),application[i].notifyEnd(u,{data:s[h]}))}}}}),e.startupProfiler=b}(util,this.StartupTiming),util.encryption={},canary=0xdeadbeefcafe,j_lm=(canary&16777215)==15715070,function(){var e="prototype";j_lm&&navigator.appName=="Microsoft Internet Explorer"?(BigInteger[e].am=am2,dbits=30):j_lm&&navigator.appName!="Netscape"?(BigInteger[e].am=am1,dbits=26):(BigInteger[e].am=am3,dbits=28),BigInteger[e].DB=dbits,BigInteger[e].DM=(1<<dbits)-1,BigInteger[e].DV=1<<dbits}(),BI_FP=52,BigInteger.prototype.FV=Math.pow(2,BI_FP),BigInteger.prototype.F1=BI_FP-dbits,BigInteger.prototype.F2=2*dbits-BI_FP,BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=[],rr="0".charCodeAt(0);for(vv=0;vv<=9;++vv)BI_RC[rr++]=vv;rr="a".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;rr="A".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;Classic.prototype.convert=cConvert,Classic.prototype.revert=cRevert,Classic.prototype.reduce=cReduce,Classic.prototype.mulTo=cMulTo,Classic.prototype.sqrTo=cSqrTo,Montgomery.prototype.convert=montConvert,Montgomery.prototype.revert=montRevert,Montgomery.prototype.reduce=montReduce,Montgomery.prototype.mulTo=montMulTo,Montgomery.prototype.sqrTo=montSqrTo,function(){var e="prototype";BigInteger[e].copyTo=bnpCopyTo,BigInteger[e].fromInt=bnpFromInt,BigInteger[e].fromString=bnpFromString,BigInteger[e].clamp=bnpClamp,BigInteger[e].dlShiftTo=bnpDLShiftTo,BigInteger[e].drShiftTo=bnpDRShiftTo,BigInteger[e].lShiftTo=bnpLShiftTo,BigInteger[e].rShiftTo=bnpRShiftTo,BigInteger[e].subTo=bnpSubTo,BigInteger[e].multiplyTo=bnpMultiplyTo,BigInteger[e].squareTo=bnpSquareTo,BigInteger[e].divRemTo=bnpDivRemTo,BigInteger[e].invDigit=bnpInvDigit,BigInteger[e].isEven=bnpIsEven,BigInteger[e].exp=bnpExp,BigInteger[e].toString=bnToString,BigInteger[e].negate=bnNegate,BigInteger[e].abs=bnAbs,BigInteger[e].compareTo=bnCompareTo,BigInteger[e].bitLength=bnBitLength,BigInteger[e].mod=bnMod,BigInteger[e].modPowInt=bnModPowInt,BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1)}(),util.encryption.Base64=util.Class.create({_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",b64map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64pad2:"=",hex2b64:function(e){var t,n,r="length",i="substring",s="charAt",o="b64map",u="";for(t=0;t+3<=e[r];t+=3)n=parseInt(e[i](t,t+3),16),u+=this[o][s](n>>6)+this[o][s](n&63);t+1==e[r]?(n=parseInt(e[i](t,t+1),16),u+=this[o][s](n<<2)):t+2==e[r]&&(n=parseInt(e[i](t,t+2),16),u+=this[o][s](n>>2)+this[o][s]((n&3)<<4));while((u[r]&3)>0)u+=this.b64pad2;return u},b64tohex:function(e){var t,n,r="",i=0;for(t=0;t<e.length;++t){if(e.charAt(t)==this.b64pad2)break;v=this.b64map.indexOf(e.charAt(t));if(v<0)continue;i==0?(r+=int2char(v>>2),n=v&3,i=1):i==1?(r+=int2char(n<<2|v>>4),n=v&15,i=2):i==2?(r+=int2char(n),r+=int2char(v>>2),n=v&3,i=3):(r+=int2char(n<<2|v>>4),r+=int2char(v&15),i=0)}return i==1&&(r+=int2char(n<<2)),r},b64toBA:function(e){var t,n=this.b64tohex(e),r=[];for(t=0;2*t<n.length;++t)r[t]=parseInt(n.substring(2*t,2*t+2),16);return r},encode:function(e){var t,n,r,i,s,o,u,a="charCodeAt",f="charAt",l="_keyStr",c="",h=0;e=this._utf8_encode(e);while(h<e.length)t=e[a](h++),n=e[a](h++),r=e[a](h++),i=t>>2,s=(t&3)<<4|n>>4,o=(n&15)<<2|r>>6,u=r&63,isNaN(n)?o=u=64:isNaN(r)&&(u=64),c=c+this[l][f](i)+this[l][f](s)+this[l][f](o)+this[l][f](u);return c},decode:function(e){var t,n,r,i,s,o,u,a="indexOf",f="_keyStr",l="charAt",c="fromCharCode",h="",p=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(p<e.length)i=this[f][a](e[l](p++)),s=this[f][a](e[l](p++)),o=this[f][a](e[l](p++)),u=this[f][a](e[l](p++)),t=i<<2|s>>4,n=(s&15)<<4|o>>2,r=(o&3)<<6|u,h+=String[c](t),o!=64&&(h+=String[c](n)),u!=64&&(h+=String[c](r));return h=Base64._utf8_decode(h),h},_utf8_encode:function(e){var t,n,r,i="fromCharCode";e=e.replace(/\r\n/g,"\n"),t="";for(n=0;n<e.length;n++)r=e.charCodeAt(n),r<128?t+=String[i](r):r>127&&r<2048?(t+=String[i](r>>6|192),t+=String[i](r&63|128)):(t+=String[i](r>>12|224),t+=String[i](r>>6&63|128),t+=String[i](r&63|128));return t},_utf8_decode:function(e){var t="charCodeAt",n="fromCharCode",r="",i=0,s=c1=c2=0;while(i<e.length)s=e[t](i),s<128?(r+=String[n](s),i++):s>191&&s<224?(c2=e[t](i+1),r+=String[n]((s&31)<<6|c2&63),i+=2):(c2=e[t](i+1),c3=e[t](i+2),r+=String[n]((s&15)<<12|(c2&63)<<6|c3&63),i+=3);return r}}),application.auth.getExternalUserToken=function(){var e="onCompleted",t="getExternalSsoServices",n="getExternalUserToken";return Rx.Observable.create(function(r){function o(t,n){var i=(new util.encryption.Base64).encode(n);s&&(r.onNext(i),r[e]())}function u(e){s&&r.onError(e)}function a(){s&&r[e]()}var i,s=!0;return typeof nrdpPartner=="object"&&nrdpPartner.Sso&&nrdpPartner.Sso[t]?(i=nrdpPartner.Sso[t](),i&&i.length>0&&i[0]==="XboxSAML"&&nrdpPartner.Sso[n]?nrdpPartner.Sso[n](i[0],{onSuccess:o,onFailure:u,noUser:a,onComplete:a}):a()):a(),function(){s=!1}})},netflix.falcor={},function(e){function i(){var e=Array[t].slice.call(arguments,1);return this.extend({init:function n(){var r=Array[t].slice.call(arguments,0);n.base.apply(this,e.concat(r))}})}function s(e){var t,i,s,u,a,f=new this(r),l="function";for(t in e)e[n]&&(i=e[n](t),s=e.__lookupSetter__(t)),i||s?(i&&f.__defineGetter__(t,i),s&&f.__defineSetter__(t,s)):(u=e[t],a=f[t],typeof u===l&&typeof a===l&&u!==a&&(u.base=a),f[t]=u);return o(f)}function o(e){var n=function(){var e=this.init;e&&arguments[0]!==r&&e.apply(this,arguments)};return e&&(n[t]=e),n.constructor=n,n.extend=s,n.bind=i,n}var t="prototype",n="__lookupGetter__",r={};Function[t].base=function(){},e.Class={create:o}}(netflix),function(e){var t="PathBoundError";e[t]=function(e,t,n,r,i){this.path=e,this.message=t,this.data=n,this.unauthorized=r,this.expired=i,this._error=!0,this.size=1},e[t].prototype=Error()}(netflix.falcor),function(e){var t="length",n={equals:function(e,n){var r;e instanceof Array||(e=[e]),n instanceof Array||(n=[n]);if(e[t]!==n[t])return!1;for(r=e[t]-1;r>=0;r--)if(e[r]!=n[r])return!1;return!0}};e.Path=n}(netflix.falcor),function(e){var t="create",n="path",r="Observable",i="value",s=null,o="explode",u="PathEvaluator",a="slice",f="length",l="onNext",c="onCompleted",h="fromArrayFast",p="prototype",d="_propagate",v=!0,m="from",g="segmentsEqual",y=!1,b="comparePaths",w="comparisonIndices",E="copied",S="number",x=netflix.falcor.Path,T=function(){},N=netflix.Class[t]({init:function(e){this.root=this,e!==undefined&&(this[n]=e)},path:[],bind:function(e){return Object[t](this,{path:{value:this[n].concat(e)}})},_emptyPath:Rx[r].returnValue([]),_equalityComparer:function(e,t){return e===t||JSON.stringify(e)===JSON.stringify(t)},cache:function(t){return new e.CachedPathEvaluator(this,t)},getValue:function(e){return this.get(e).select(function(e){return e[i]}).finalValueFast()},_propagate:function(t){var h=this;return Rx[r].fastCreateWithDisposable(function(r){return t.subscribe(function(t){var c=t.evaluatedPath,h;c!==undefined?(h=t[i],h instanceof Array||(h===s&&(h=undefined),e[u][o]([t[n].concat(c[a](t.absolutePath[f]))],function(e){r[l]({path:e[a](),value:h})}))):r[l](t)},function(e){r.onError(e)},function(){r[c]()})})},get:function(e){return e instanceof Rx[r]||(e=Rx[r][h](Array[p][a].call(arguments))),this[d](this.getData(e))},del:function(e){return e instanceof Rx[r]||(e=Rx[r][h](Array[p][a].call(arguments))),this[d](this.deleteData(e))},set:function(e){return e instanceof Rx[r]||(e=Rx[r][h](Array[p][a].call(arguments))),this[d](this.setData(e))},call:function(e,t,n,r){return this[d](this.callData(e,t,n,r).where(function(e){return!e.invalidated}))}});N[o]=function(e,t){var r,o,u,a,l,c,h,p,d,g,y,b=e[f],w=0,E=[],S=[],x=[],T=[];for(w=0;w<b;w++){p=0,r=e[w],r[n]!==undefined?(l=r[n],o=r[i]):(l=r,o=undefined),l instanceof Array||(l=[l]);if(l[f]===0){t(l,o,0);continue}E[f]=l[f],S[f]=l[f],x[f]=l[f];for(c=0,h=l[f]-1;c<=h;c++)u=l[c],S[c]=0,x[c]=s,T[c]=u instanceof Array?u[f]-1:0;do{while(v){c=p;while(c<=h){u=l[c],u instanceof Array&&(u=u[S[c]]),g=u.to;if(g!==undefined){d=u[m]||0;if(parseInt(d,10)!==d||parseInt(g,10)!==g||isNaN(g)||isNaN(d)||g<d)throw"Invalid range in path.  { from: "+d+", to: "+g+" }";x[c]==s&&(x[c]=d),E[c]=x[c]}else E[c]=u;c++}y=t(E,o,p);if(y===-1){p=-1;break}y!==undefined?p=y:p=h,u=l[p],u instanceof Array&&(u=u[S[p]]),x[p]!=s?(x[p]++,x[p]>u.to&&(x[p]=s,S[p]++)):S[p]++;if(S[p]>T[p]){S[p]=T[p];break}}while(p>=0){c=S[p],u=l[p],a=u instanceof Array?u[S[p]]:u;if(c!==T[p]||x[p]!=s&&x[p]!==a.to)break;S[p]=0,u=l[p],a=u instanceof Array?u[S[p]]:u,x[p]=a.to!=s?a[m]||0:s,p--}p>=0&&(u=l[p],a=u instanceof Array?u[S[p]]:u,a.to!=s&&(x[p]=x[p]==s?a[m]||0:x[p]),x[p]!=s&&a.to!==x[p]?x[p]++:(x[p]=s,S[p]++))}while(p>=0)}},N.explodeAsObservable=function(e){return Rx[r][t](function(t){return N[o](e,function(e){t[l](e[a]())}),t[c](),T})},N[g]=function(e,t){var n,r=N[g];if(e==t)return v;if(e.to!=s&&e.to===t.to&&(e[m]||0)===(t[m]||0))return v;if(e instanceof Array&&t instanceof Array&&e[f]===t[f]){for(n=e[f]-1;n>=0&&r(e[n],t[n]);n--);if(n<0)return v}return y},N[b]=function(e,t){var n,r,i,s,o,u,a,l,c,h,p,d,v,g,y,b=e[f],E=t[f],S=b-E,x=e[w];if(S!==0)return S;x=e[w];for(g=0;g<b;g++){v=x[g],n=e[v],u=t[v],n instanceof Array&&(i=n[f]),u instanceof Array&&(l=u[f]),i===1&&!l&&(n=n[0]),l===1&&!i&&(u=u[0]);if(l&&i){d=i-l;if(d!==0)return d;for(y=0;y<i;y++){s=n[y],c=u[y],s.to&&(s=s[m]||0),c.to&&(c=c[m]||0),o=parseFloat(s,10),h=parseFloat(c,10);if(!isNaN(o)&&!isNaN(h)&&o!==h){p=o-h;if(p!==0)return p}else{if(s>c)return 1;if(s<c)return-1}}return 0}n.to&&(n=n[m]||0),u.to&&(u=u[m]||0),r=parseFloat(n,10),a=parseFloat(u,10);if(!isNaN(r)&&!isNaN(a)&&r!==a)return r-a;if(n>u)return 1;if(u>n)return-1}return b>E?1:E>b?-1:0},N.collapse=function(e){var t,n,r,i,o,u,l,c,h,p,d,x,T,C,k,L,A,O=e[f],M=v,_=y,D=[];if(e[f]<2)return;for(t=0;t<O;t++){o=e[t],n=o[f],C=D[n];if(C===undefined){C=[],k=[];for(L=0;L<n;L++)typeof o[L]=="string"?C.push(L):k.push(L);C.push.apply(C,k),D[n]=C}o[w]=C}e.sort(N[b]);while(M){M=y,T=0,t=0,A=1,x=-1;while(A<O){p=undefined,o=e[t],u=e[A],p=100;if(o[f]===u[f]&&o[f]>1){p=0;for(i=o[f]-1;i>=0&&p<=1;i--)r=o[i],l=u[i],N[g](r,l)||(p++,x=i)}p===1?(o[E]||(C=o[w],o=o[a](),o[w]=C,o[E]=v,e[t]=o),d=o[x],d instanceof Array?d[E]||(d=d[a](),d[E]=v,o[x]=d):(d=[d],d[E]=v,o[x]=d),c=d[d[f]-1],h=u[x],c.to!=s&&typeof h===S&&c.to===h-1?c[E]?c.to++:(c={from:c[m],to:c.to+1,copied:v},d[d[f]-1]=c):typeof c===S&&c===h-1?d[d[f]-1]={from:c,to:h}:d.push(u[x]),M=v,_=v,A++):p===0?(M=v,_=v,A++):(_=y,x=-1,t=A,A++,e[T]=o,T++)}_===y?e[T]=u:M&&(e[T]=o),T++,O=T}e[f]=O},N.updateRelativeCache=function(e,t){var n,r,o,u,a,l,c,h,p,d,v,g,y,b,w,E,S,x,T,N=Array.isArray,C=e.paths,k=C[f],L=[];for(r=0;r<k;r++){o=C[r],L[f]=1,L[0]={context:e[i],cacheContext:t};for(g=0,n=o[f];g<n&&(T=L[0])!==undefined;g++){L[f]--,y=o[g],u=T.context,l=T.cacheContext,x=y.to;if(x!==undefined){S=y[m]||0;for(E=x;E>=S;E--){d=u[E],v=l[E];if(d===undefined)continue;if(v===undefined){l[E]=d;continue}L[L[f]]={context:d,cacheContext:v}}}else if(N(y))for(w=y[f]-1;w>=0;w--){b=y[w],x=b.to;if(x!==undefined){S=b[m]||0;for(E=x;E>=S;E--){d=u[E],v=l[E];if(d===undefined)continue;if(v===undefined){l[E]=d;continue}L[L[f]]={context:d,cacheContext:v}}}else{h=u[b],p=l[b];if(h===undefined)continue;if(p===undefined){l[b]=h;continue}L[L[f]]={context:h,cacheContext:p}}}else{a=u,c=l;if(a===undefined||a===s)break;u=a[y],l=c[y];if(u===undefined)break;if(l===undefined){c[y]=u;break}L[L[f]]={context:u,cacheContext:l}}}}},e[u]=N}(netflix.falcor),netflix.falcor.Sentinel=function(e){this.value=e,this._sentinel=!0,this.size=typeof e=="string"?e.length:1},function(e){var t="call",n="context",r="selectManyArrays",i="_onGetting",s="path",o="concat",u="length",a="evaluatedPath",f="absolutePath",l="slice",c="pathOffset",h="value",p="previousContexts",d="offset",v=null,m="_error",g="_sentinel",y="from",b="Observable",w="_deletePQL",E="_onDeleting",S="onNext",x="_onSetting",T="push",N="newValue",C="selectMany",k=netflix.falcor.PathEvaluator.extend({init:function L(e,r,i){L.base[t](this,i),this[n]=e,this.root=this},getData:function(e){var t=this;return e[r](function(e){return t._getPQL(e)})},_objectTypeString:"object",_getPQL:function(e){var r,b,w,E,S,x,T,N,C,k=this[n],L=Array(1),A=0,O=[],M=1,_,D,P,H,B,j,F,I,q,R,U=this._objectTypeString,z=this[i],W,X,V,$,J;e instanceof Array?(r=this[s],b=r[o](e),T=r[u],N=[]):(b=e[a])!==undefined?(C=e[f],b=C[o](b[l](C[u])),T=e[c],N=e[s][l]()):(r=e[s],b=e[f],T=this[s][u]+r[u],N=r[l]()),O[0]={evaluatedPath:b,value:k,previousContexts:[],offset:-1,pathOffset:T,path:N,absolutePath:[]};while(M>0){M--,_=O[M],b=_[a],w=b[u]-1,E=_[h],S=_[p],x=_[d],T=_[c],N=_[s],C=_[f];if(x<w){if(E===v||typeof E!==U){z!==undefined&&z[t](this,C,S,E),L[A]=_,A++;continue}if(E instanceof Array){z!==undefined&&z[t](this,C,S,E),R={value:E,evaluatedPath:b},V=N[u],W=Array(V);while(V--)W[V]=N[V];R[s]=W,V=C[u],W=Array(V);while(V--)W[V]=C[V];R[f]=W,L[A]=R,A++,C[u]=0,S[u]=1,S[0]=k,q=E,E=k,T=q[u],j=b[u],$=j-(x+1),X=T+$,W=Array(X);for(V=0;V<T;V++)W[V]=q[V];for(J=x+1;J<j;J++)W[V]=b[J],V++;b=W,w=X-1,x=-1}else{if(E[m]){z!==undefined&&z[t](this,C,S,E),L[A]=_,A++;continue}if(E[g]){z!==undefined&&z[t](this,C,S,E),_[h]=E,L[A]=_,A++;continue}S[S[u]]=E}}x+=1;for(;x<=w;x++){P=b[x];if(P instanceof Array){if(x<T)for(H=P[u]-1;H>=0;H--){I=P[H];if(I.to!==undefined){B=I[y]||0,j=I.to;for(F=j;F>=B;F--){R={evaluatedPath:b,value:E[F],offset:x,pathOffset:T},V=S[u],W=Array(V);while(V--)W[V]=S[V];R[p]=W,V=N[u],W=Array(V);while(V--)W[V]=N[V];R[s]=W,V=C[u],W=Array(V+1),W[V]=F;while(V--)W[V]=C[V];R[f]=W,O[M]=R,M++}}else{R={evaluatedPath:b,value:E[I],offset:x,pathOffset:T},V=S[u],W=Array(V);while(V--)W[V]=S[V];R[p]=W,V=N[u],W=Array(V);while(V--)W[V]=N[V];R[s]=W,V=C[u],W=Array(V+1),W[V]=I;while(V--)W[V]=C[V];R[f]=W,O[M]=R,M++}}else{T+=1;for(H=P[u]-1;H>=0;H--){I=P[H];if(I.to!==undefined){B=I[y]||0,j=I.to;for(F=j;F>=B;F--){R={evaluatedPath:b,value:E[F],offset:x,pathOffset:T},V=S[u],W=Array(V);while(V--)W[V]=S[V];R[p]=W,V=N[u],W=Array(V+1),W[V]=F;while(V--)W[V]=N[V];R[s]=W,V=C[u],W=Array(V+1),W[V]=F;while(V--)W[V]=C[V];R[f]=W,O[M]=R,M++}}else{R={evaluatedPath:b,value:E[I],offset:x,pathOffset:T},V=S[u],W=Array(V);while(V--)W[V]=S[V];R[p]=W,V=N[u],W=Array(V+1),W[V]=I;while(V--)W[V]=N[V];R[s]=W,V=C[u],W=Array(V+1),W[V]=I;while(V--)W[V]=C[V];R[f]=W,O[M]=R,M++}}}x=undefined;break}if(P.to!==undefined){if(x<T){B=P[y]||0,j=P.to;for(F=j;F>=B;F--){R={evaluatedPath:b,value:E[F],offset:x,pathOffset:T},V=S[u],W=Array(V);while(V--)W[V]=S[V];R[p]=W,V=N[u],W=Array(V);while(V--)W[V]=N[V];R[s]=W,V=C[u],W=Array(V+1),W[V]=F;while(V--)W[V]=C[V];R[f]=W,O[M]=R,M++}}else{T+=1,B=P[y]||0,j=P.to;for(F=j;F>=B;F--){R={evaluatedPath:b,value:E[F],offset:x,pathOffset:T},V=S[u],W=Array(V);while(V--)W[V]=S[V];R[p]=W,V=N[u],W=Array(V+1),W[V]=F;while(V--)W[V]=N[V];R[s]=W,V=C[u],W=Array(V+1),W[V]=F;while(V--)W[V]=C[V];R[f]=W,O[M]=R,M++}}x=undefined;break}I=P,E=E[I],x>=T&&(N[N[u]]=I,T+=1),C[C[u]]=I;if(x<w){if(E===v||typeof E!==U){z!==undefined&&z[t](this,C,S,E),_[h]=E,_[a]=b,_[c]=T,L[A]=_,A++,x=undefined;break}if(E instanceof Array){z!==undefined&&z[t](this,C,S,E),R={value:E,evaluatedPath:b},V=N[u],W=Array(V);while(V--)W[V]=N[V];R[s]=W,V=C[u],W=Array(V);while(V--)W[V]=C[V];R[f]=W,L[A]=R,A++,C[u]=0,S[u]=1,q=E,E=k,T=q[u],j=b[u],$=j-(x+1),X=T+$,W=Array(X);for(V=0;V<T;V++)W[V]=q[V];for(J=x+1;J<j;J++)W[V]=b[J],V++;b=W,w=X-1,x=-1}else{if(E[m]){z!==undefined&&z[t](this,C,S,E),_[h]=E,_[a]=b,_[c]=T,L[A]=_,A++,x=undefined;break}if(E[g]){z!==undefined&&z[t](this,C,S,E),_[h]=E,_[a]=b,_[c]=T,L[A]=_,A++,x=undefined;break}S[S[u]]=E}}}x!==undefined&&(z!==undefined&&z[t](this,C,S,E),_[a]=undefined,_[h]=E,L[A]=_,A++)}return L},deleteData:function(e){var t=this;return Rx[b].fastCreateWithDisposable(function(r){var i=t[s],a=i[u];return e.subscribe(function(e){return t[w](i[o](e),t[n],[],-1,a,[],[],r)},function(e){r.onError(e)},function(){r.onCompleted()})})},_deletePQL:function(t,r,a,f,c,p,d,b){var N=this,C,k=e.Sentinel,L=t[u]-1,A,O,M,_,D,P,H,B;if(f===L){this[E]&&this[E](d,a,r),delete a[a[u]-1][p[f]],b[S]({path:p,value:undefined,absolutePath:d});return}if(r===undefined||r===v){this[x]!==undefined&&this[x](d,a,new k(r)),b[S]({path:p,value:r,absolutePath:d,evaluatedPath:t});return}if(r[g]){r[s]=d,this[i]!==undefined&&this[i](d,a,r),b[S]({path:p,value:r[h],absolutePath:d,evaluatedPath:t});return}if(r[m]){r[s]=d,this[i]!==undefined&&this[i](d,a,r),b[S]({path:p,value:r,absolutePath:d,evaluatedPath:t});return}r instanceof Array?(C=r[s],C===undefined&&(C=d[l](),r[s]=C),this[i]!==undefined&&this[i](d,a,r),b[S]({path:p[l](),value:r,absolutePath:C,evaluatedPath:t}),d[u]=0,a[u]=1,a[0]=this[n],B=r,r=N[n],c=B[u],t=B[o](t[l](f+1)),L=t[u]-1,f=-1):a[T](r),f+=1;for(;f<=L;f++){A=t[f];if(A instanceof Array){for(M=0,O=A[u];M<O;M++){H=A[M];if(H.to!==undefined){_=H[y]||0,D=H.to;for(P=_;P<=D;P++)N[w](t,r[P],a[l](),f,c,p[o](P),d[o](P),b)}else N[w](t,r[H],a[l](),f,c,p[o](H),d[o](H),b)}return}if(A.to!==undefined){_=A[y]||0,D=A.to;for(P=_;P<=D;P++)N[w](t,r[P],a[l](),f,c,p[o](P),d[o](P),b);return}H=A,r=r[H],f>=c&&p[T](H),d[T](H);if(f===L)break;if(r===undefined||r===v){this[x]!==undefined&&this[x](d,a,new k(r)),b[S]({path:p,value:r,absolutePath:d,evaluatedPath:t});return}if(r[g]){r[s]=d,this[i]!==undefined&&this[i](d,a,r),b[S]({path:p,value:r[h],absolutePath:d,evaluatedPath:t});return}if(r[m]){r[s]=d,this[i]!==undefined&&this[i](d,a,r),b[S]({path:p,value:r,absolutePath:d,evaluatedPath:t});return}r instanceof Array?(C=r[s],C===undefined&&(C=d[l](),r[s]=C),this[i]!==undefined&&this[i](d,a,r),b[S]({path:p[l](),value:r,absolutePath:C,evaluatedPath:t}),d[u]=0,a[u]=1,a[0]=this[n],B=r,r=N[n],c=B[u],t=B[o](t[l](f+1)),L=t[u]-1,f=-1):a[T](r)}this[E]&&this[E](d,a,r),delete a[a[u]-1][H],b[S]({path:p,value:undefined,absolutePath:d})},setData:function(e){var t=this;return e[r](function(e){return t._setPBV(e)})},_setPBV:function(e){var r,b=this[s],E,S,C,k,L,A,O,M,_=this._onClearing,D=this[x],P,H,B,H,P,j=[],F=0,I,q,R,U,z,W,X,V,$,J,K;E=e[f],S=e[h];if(e.invalidated)return this[w](b[o](E||e[s]),this[n],[],-1,b[u],[],[],{onNext:function(){}}),j[0]=e,j;E===undefined&&(E=b[o](e[s]),e=undefined),C=this[n],k=[],L=-1,A=b[u],O=[],M=[];if(e!==undefined&&(M=e[f])!==undefined){U=M[u],k[u]=U,U--;for(B=0;B<U;B++){$=M[B],K=C,k[B]=K,C=C[$];if(C===undefined||C===v)C={},K[$]=C;else if(C[g]||C[m])k[u]=B+1,_!==undefined&&_[t](this,k,C),C={},K[$]=C}$=M[U],K=C,k[U]=K,D!==undefined?D[t](this,M,k,S,K[$]):K[$]=S,j[F]=e,F+=1}else{r=this[i],H=[{evaluatedPath:E,newValue:S,value:C,previousContexts:k,offset:L,pathOffset:A,path:O,absolutePath:M}];while(H[u]>0){P=H.pop(),E=P[a],q=E[u]-1,S=P[N],I=this[n],C=P[h],k=P[p],L=P[d],A=P[c],O=P[s],M=P[f];if(L===q){this[x]?this[x](M,k,S,C):k[k[u]-1][E[L]]=S,P[p]=undefined,P[d]=undefined,P[h]=S,P[N]=undefined,P[c]=undefined,P[a]=undefined,j[F]=P,F+=1;break}C===undefined||C===v?(K=k[k[u]-1],C={},K[M[M[u]-1]]=C,k[T](C),L+=1):C[g]||C[m]?(_!==undefined&&_[t](this,k,C),K=k[k[u]-1],C={},K[M[M[u]-1]]=C,k[T](C),L+=1):C instanceof Array?(r!==undefined&&r[t](this,M,k,C),e=undefined,j[F]={path:O[l](),value:C,absolutePath:M[l](),evaluatedPath:E},F+=1,M[u]=0,k[u]=1,k[0]=I,J=C,C=I,A=J[u],E=J[o](E[l](L+1)),q=E[u]-1,L=0):(k[T](C),L+=1);for(;L<=q;L++){R=E[L];if(R instanceof Array){if(L<A)for(z=R[u]-1;z>=0;z--){$=R[z];if($.to!==undefined){W=$[y]||0,X=$.to;for(V=X;V>=W;V--)H[T]({value:undefined,evaluatedPath:E,newValue:S,value:C[V],previousContexts:k[l](),offset:L,pathOffset:A,path:O[l](),absolutePath:M[o](V)})}else H[T]({value:undefined,evaluatedPath:E,newValue:S,value:C[$],previousContexts:k[l](),offset:L,pathOffset:A,path:O[l](),absolutePath:M[o]($)})}else{A+=1;for(z=R[u]-1;z>=0;z--){$=R[z];if($.to!==undefined){W=$[y]||0,X=$.to;for(V=X;V>=W;V--)H[T]({value:undefined,evaluatedPath:E,newValue:S,value:C[V],previousContexts:k[l](),offset:L,pathOffset:A,path:O[o](V),absolutePath:M[o](V)})}else H[T]({value:undefined,evaluatedPath:E,newValue:S,value:C[$],previousContexts:k[l](),offset:L,pathOffset:A,path:O[o]($),absolutePath:M[o]($)})}}L=undefined;break}if(R.to!==undefined){if(L<A){W=R[y]||0,X=R.to;for(V=X;V>=W;V--)H[T]({value:undefined,evaluatedPath:E,newValue:S,value:C[V],previousContexts:k[l](),offset:L,pathOffset:A,path:O[l](),absolutePath:M[o](V)})}else{A+=1,W=R[y]||0,X=R.to;for(V=X;V>=W;V--)H[T]({value:undefined,evaluatedPath:E,newValue:S,value:C[V],previousContexts:k[l](),offset:L,pathOffset:A,path:O[o](V),absolutePath:M[o](V)})}L=undefined;break}$=R,K=C,C=C[$],L>=A&&(O[T]($),A+=1),M[T]($);if(L===q)break;C===undefined||C===v?(C={},K[$]=C,k[T](C)):C[g]||C[m]?(_!==undefined&&_[t](this,k,C),C={},K[$]=C,k[T](C)):C instanceof Array?(e=undefined,j[F]={path:O[l](),value:C,absolutePath:M[l](),evaluatedPath:E},F+=1,M[u]=0,k[u]=1,k[0]=I,J=C,C=I,A=J[u],E=J[o](E[l](L+1)),q=E[u]-1,L=-1):k[T](C)}L!==undefined&&(D?D[t](this,M,k,S,C):K[$]=S,e!==undefined?(j[F]=e,F+=1):(P[p]=undefined,P[d]=undefined,P[h]=S,P[N]=undefined,P[c]=undefined,P[a]=undefined,j[F]=P,F+=1))}}return j},callData:function(e,n,r){return this.getData(this.getData(Rx[b].returnValue(e))[C](function(e){return e.apply(v,n)[C](function(e){return Rx[b].fromArray(r).select(function(t){return e[s][o](t)})})})[o](Rx[b].fromArray(Array.prototype[l][t](arguments,3))))}});k.makeArrayAnObject=function(e){var t,n,r={};for(t=0,n=e[u];t<n;t++)r[t]=e[t];return r[u]=n,r},e.JSONGPathEvaluator=k}(netflix.falcor),function(e){var t="PathEvaluator",n="_address",r="_requestQueue",i="_params",s="error",o="select",u="_getPaths",a="createPSBVFromMessage",f="create",l="Observable",c="subscribe",h="length",p="concat",d="absolutePath",v="push",m="path",g="JSONGPathEvaluator",y="value",b="fromArrayFast",w="onNext",E="onCompleted",S="&path=",x="stringify",T="createWithDisposable",N="PathBoundError",C="console",k="innerErrors",L="setData",A="explodeAsObservable",O="unauthorized",M="notifications",_="notifyStart",D="falkor",P=!1,H="falcor.RemotePathEvaluator",B=e[t].extend({init:function j(e,t,s,o){e instanceof B?j.base.call(this,t):(j.base.call(this,o),this[n]=t,this[r]=e,this[i]=s||{},this.root=this)},createPSBVFromMessage:function(e){var t=e[s];return e},getRelativeObject:function(e,t){return this[u](e,t)[o](this[a])},callRelativeObject:function(e,t,n,r,i){return this._callPaths(e,t,n,r,i)[o](this[a])},getObject:function(){var e=Array.prototype.slice.call(arguments);return this[u](e)},getData:function(n){var r=this;return Rx[l][f](function(i){var s=function(){o!==undefined&&(o.dispose(),o=undefined)},o=n.toArrayFast()[c](function(n){var s,a,S=[],x=n[h];while(x--)a=n[x],a[h]===undefined?(s=a.evaluatedPath,s!==undefined?s=a[d][p](s.slice(a[d][h])):s=a[d],S[v](s||r[m][p](a[m]))):S[v](r[m][p](a));e[t].collapse(S),S[h]>0?o=r[u](S)[c](function(t){o=(new e[g](t[y])).bind(r[m]).getData(Rx[l][b](n))[c](i)},function(r){e[t].explode(n,function(e){var t=e.slice();i[w]({path:t,value:Object[f](r,{path:{value:{path:t}}})})}),i[E]()}):i[E]()},function(e){i.onError(e)});return s})},callData:function(t,n,r,i){var s=this;return this.callRelativeObject(t,n,r,i,{}).selectMany(function(t){var n=s[m][h],r=t.invalidated,i=(new e[g](t[y])).bind(s[m]).getData(Rx[l][b](t.paths).doAction(function(e){e.splice(0,n)}));return r!==undefined&&(i=Rx[l][b](r)[o](function(e){return{path:e,invalidated:!0}})[p](i)),i})},_getPaths:function(u,a){var p,d,m,b,B=this,j=this[i],F=B[n]||"",I="";if(a!==undefined){j=Object[f](j);for(b in a)j[b]=a[b]}if(u[h]===0)return Rx[l].empty();for(m in j)I+="&"+m+"="+encodeURIComponent(j[m]);for(p=u[h]-1;p>=0;p--)d=u[p],I+=S+encodeURIComponent(JSON[x](d));return I="method=get"+I,Rx[l][T](function(n){var i,a=function(r){var a=r[s],f,l,p,d,m,b,E=[];if(a!==undefined){f=e[N],netflix[C][s]&&netflix[C][s]({area:H,error:a,url:F});if(r[y]===null||r[y]===undefined)r[y]={};l=new e[g](r[y]),p=[a];while(p[h]>0){d=p.pop(),m=d[k];if(m!==undefined)for(b=m[h]-1;b>=0;b--)p[v](m[b]);else d.pql!==undefined?l[L](e[t][A]([d.pql])[o](function(t){var n={path:t,value:new e[N](t,d.message,d.data,d[O],d.expired)};return E[v](n),n}))[c]():l[L](e[t][A](u)[o](function(t){return{path:t,value:new e[N](t)}}))[c]()}}P&&application&&application[M]&&application[M].notifyEnd(i,{data:{paths:u,errors:E}}),n[w](r)};return P&&application&&application[M]&&(i=application[M][_](D,"remoteGetRequest",{data:{}})),B[r].load(F,I,"GET")[c](a,function(e){a({paths:u,error:e}),n[E]()},function(){n[E]()})})},_callPaths:function(u,a,f,p,d){var m,b,B,j,F,I=this,q=this[i],R=I[n]||"",U="";if(d!==undefined){q=JSON.parse(JSON[x](q));for(j in d)q[j]=d[j]}for(B in q)U+="&"+B+"="+encodeURIComponent(q[B]);for(m=0;m<a[h];m++)U+="&param="+encodeURIComponent(JSON[x](a[m]));for(b=0;b<f[h];b++)U+="&pathSuffix="+encodeURIComponent(JSON[x](f[b]));for(F=0;F<p[h];F++)U+=S+encodeURIComponent(JSON[x](p[F]));return U="method=call&callPath="+JSON[x](u)+U,Rx[l][T](function(n){var i,l=function(r){var l=r[s],p=r.paths,d,m,b,E,S,x,T=[];if(l!==undefined){d=e[N],netflix[C][s]&&netflix[C][s]({area:H,error:l,url:R});if(r[y]===null||r[y]===undefined)r[y]={};m=new e[g](r[y]),b=[l];while(b[h]>0){E=b.pop(),S=E[k];if(S!==undefined)for(x=S[h]-1;x>=0;x--)b[v](S[x]);else E.pql!==undefined?m[L](e[t][A]([E.pql]).doAction(function(e){p[v](e)})[o](function(t){var n={path:t,value:new e[N](t,E.message,E.data,E[O],E.expired)};return T[v](n),n}))[c]():m[L](e[t][A](p)[o](function(t){return{path:t,value:new e[N](t)}}))[c]()}}P&&application&&application[M]&&application[M].notifyEnd(i,{data:{callPath:u,arguments:a,pathSuffixes:f,errors:T}}),n[w](r)};return P&&application&&application[M]&&(i=application[M][_](D,"remoteCallRequest",{data:{}})),I[r].load(R,U,"POST")[c](l,function(e){l({paths:p,error:e}),n[E]()},function(){n[E]()})})}});e.RemotePathEvaluator=B}(netflix.falcor),function(e){var t=!1,n=null,r=!0,i="collections",s="_maxSize",o="_collecting",u="_head",a="_tail",f="_nextKey",l="_instanceCounter",c="_prevKey",h="_nextPrevPropertyDescriptor",p="_nextPrevPropertyDescriptorValues",d="size",v="context",m="_deleteNode",g="length",y="_removeFromLRU",b="_objectTypeString",w="_moveToBackOfLRU",E="object",S="selectMany",x="Observable",T=netflix.falcor.JSONGPathEvaluator.extend({_instanceCounter:0,_nextPrevPropertyDescriptorValues:{enumerable:t,value:n,configurable:r,writable:r},init:function N(e,r,d){N.base.call(this,e,d),this[i]=new Rx.Subject,this[s]=r,this[o]=t,this[u]=n,this[a]=n,this[f]="__next"+this[l],this[c]="__prev"+this[l],this[l]++,this[h]={},this[h][this[f]]=this[p],this[h][this[c]]=this[p]},_collect:function(){var e,n=this[s]*.75;try{do e=this._popFromHead(),e!==undefined&&this[m](e);while(e!==undefined&&this[v][d]>n)}finally{this[o]=t}this[i].onNext()},_popFromHead:function(){var e=this[f],t=this[c],r=this[u],i;return r===n?n:r===this[a]?(this[u]=this[a]=n,r[e]=undefined,r[t]=undefined,r):(i=r,this[u]=r=r[e],r[t]=n,i[e]=undefined,i[t]=undefined,i)},_deleteNode:function(e){var t=this[f],r,i=e.path,s=i[g],o,l=this[v],c,h=e[d]||1;e[t]!==undefined&&this[y](e);if(l[d]!==undefined){l[d]-=h;if(l[d]===0)Object.keys(l).forEach(function(e){delete l[e]}),this[u]=n,this[a]=n;else{for(r=0;r<s-1;r++){o=i[r],c=l[o];if(c[d]!==undefined){c[d]-=h;if(c[d]===0){delete l[o];return}}l=c}delete l[i[s-1]]}}},_moveToBackOfLRU:function(e){var t=this[f],r=this[c];e[t]!==undefined?this[y](e):Object.defineProperties(e,this[h]),this[a]===n?(this[a]=e,this[u]=e,e[t]=n,e[r]=n):(this[a][t]=e,e[r]=this[a],e[t]=n,this[a]=e)},_removeFromLRU:function(e){var t=this[f],n=this[c],r=this[u],i=this[a];e[n]&&(e[n][t]=e[t]),e[t]&&(e[t][n]=e[n]),e===r&&(this[u]=e[t]),e===i&&(this[a]=e[n]),e[n]=undefined,e[t]=undefined},getLRUList:function(){var e=[],t=this[f],n=this[u];while(n)e.push(n),n=n[t];return e},_onGetting:function(t,r,i){if(i===n||typeof i!==this[b])i=new e.Sentinel(i),r[r[g]-1][t[t[g]-1]]=i;i[this[f]]===undefined?this._onSetting(t,r,i,undefined):this[w](i)},_onDeleting:function(e,t,r){var i,s=this[f],o;i=[r];do{r=i.pop();if(r!==n&&typeof r===E)if(r[s]!==undefined)this[m](r);else for(o in r)i.push(r[o])}while(i[g]>0)},_onSetting:function(t,i,u,a){var f=this,l,c,h,p,v=0,m=0;a!==n&&typeof a===E&&(v=a[d]||1,this[y](a)),u===n||typeof u!==E?u=new e.Sentinel(u):u instanceof Array&&u[d]===undefined&&(u[d]=u[g]),u.path===undefined&&(u.path=t.slice()),i[i[g]-1][t[t[g]-1]]=u,this[w](u),p=u[d]||1,m=p-v;if(m!==0){for(c=0,l=i[g];c<l;c++)h=i[c],h[d]===undefined?h[d]=p:h[d]+=m;this[s]!==undefined&&i[0][d]>this[s]&&!this[o]&&(this[o]=r,window.setTimeout(function(){f._collect()},0))}},_onClearing:function(e,t){var r,i,s,o,u;if(t!==n&&typeof t===this[b]){this[y](t),r=t[d]||1;for(s=0,i=e[g];s<i;s++)o=e[s],u=o.valueSize,u!==undefined&&(o.valueSize-=r)}},callData:function(e,t,r){return this.getData(this.getData(Rx[x].returnValue(e))[S](function(e){return e.apply(n,t)[S](function(e){return Rx[x].fromArray(r).select(function(t){return e.path.concat(t)})})}).concat(Rx[x].fromArray(Array.prototype.slice.call(arguments,3))))},getSize:function(){return this[v][d]||0}});e.SizedJSONGPathEvaluator=T}(netflix.falcor),function(e){var t="source",n="cache",r="setData",i="create",s="Observable",o="value",u="onNext",a=e.PathEvaluator.extend({init:function f(e,r,i){f.base.call(this,i),this[t]=e,this[n]=r},bind:function(e){return new a(this[t].bind(e),this[n].bind(e),this.path.concat(e))},_noop:function(){},getObject:function(){var e=this,r=Array.prototype.slice.call(arguments),i=r.map(function(t){return e.path.concat(t)});return e[n].setObject(e[t].getObject(r))},setData:function(e){var i=this,s=Array.prototype.slice(arguments);return i[n][r](i[t][r](e))},getData:function(a){var f=this,l;return Rx[s][i](function(l){var c=[],h,p=function(){h!==undefined&&(h.dispose(),h=undefined)};return h=f[n].getData(a).subscribe(function(e){var t=e[o];t===undefined?c.push(e):t!==null&&t._sentinel&&t[o]===undefined?(e=Object[i](e),e[o]=undefined,l[u](e)):e.evaluatedPath!==undefined?e[o]instanceof Array?l[u](e):c.push(e):l[u](e)},function(e){l.onError(e)},function(){h=f[n][r](f[t].getData(Rx[s].fromArrayFast(c)).select(function(t){var n=t[o];return n===undefined&&(t=Object[i](t),t[o]=new e.Sentinel),t})).select(function(e){return e[o]!=null&&e[o]._sentinel&&(e=Object[i](e),e[o]=e[o][o]),e}).subscribe(l)}),p})},callData:function(e,i,s,o){return this[n][r](this[t].callData(e,i,s,o))}});e.CachedPathEvaluator=a}(netflix.falcor),netflix.DoubleLinkedList=netflix.Class.create({init:function(){this._head=undefined,this._tail=undefined,this._listId=netflix.DoubleLinkedList.listCount++},addToHead:function(e){var t=this._head,n=this._tail,r=e.listId===this._listId?e:{obj:e,listId:this._listId};return r.next=t,r.prev=undefined,t&&(t.prev=r),n||(this._tail=r),this._head=r,r},addToTail:function(e){var t=this._head,n=this._tail,r=e.listId===this._listId?e:{obj:e,listId:this._listId};return r.prev=n,r.next=undefined,n&&(n.next=r),t||(this._head=r),this._tail=r,r},popFromHead:function(){var e,t=this._head;return t?t===this._tail?(this._head=this._tail=undefined,t.obj):(e=t,this._head=t=t.next,t.prev=undefined,e.obj):undefined},popFromTail:function(){var e,t=this._tail;return t?t===this._head?(this._tail=this._head=undefined,t.obj):(e=t,this._tail=t=t.prev,t.next=undefined,e.obj):undefined},remove:function(e){var t="prev",n="next",r=this._head,i=this._tail;return e===undefined||e.listId!==this._listId?!1:(e[t]&&(e[t][n]=e[n]),e[n]&&(e[n][t]=e[t]),e===r&&(this._head=e[n]),e===i&&(this._tail=e[t]),!0)},get head(){return this._head},get tail(){return this._tail},toJSON:function(){var e=this._head,t=[];while(e)t.push(e.obj),e=e.next;return t},toString:function(){return JSON.stringify(this.toJSON())}}),netflix.DoubleLinkedList.listCount=0,netflix.falcor.RelativeCache=netflix.Class.create({init:function(e,t){this._maxSize=t,this._root=e===undefined?{}:e,this._lruList=new netflix.DoubleLinkedList,this._lruPaths={},this.collections=new Rx.Subject},get lru(){var e=[],t=this._lruList._head;while(t!==undefined)e.push(t.obj),t=t.next;return e},get size(){return this._root.size},get root(){return this._root},del:function(){var e,t,n,r,i,s,o,u,a,f,l="length",c=arguments[l],h=arguments,p=0,d=[];d[-1]=this._root;for(e=0;e<c;e++)t=arguments[e],n=JSON.stringify(t),a=this._lruPaths[n],a!==undefined&&(this._lruList.remove(a),delete this._lruPaths[n]);netflix.falcor.PathEvaluator.explode(h,function(e,t,n){r=d[n-1],i=r[e[n]],d[n]=i;for(p=n+1;p<e[l]&&i!==undefined;p++)r=i,i=r[e[p]],d[p]=i;if(p!==e[l])return p-1;if(i===undefined)return undefined;u=i.size||1,f=!1;for(p=e[l]-1;p>=-1;p--)i=d[p],o=(i.size||1)-u,i.size=o,f||(i._locks?f=!0:o===0&&(s=d[p-1],p>=0&&delete s[e[p]]))})},touch:function(e){var t="_lruList",n=JSON.stringify(e),r=this._lruPaths[n];r!==undefined?(this[t].remove(r),this[t].addToTail(r)):this._lruPaths[n]=this[t].addToTail(e)},_onMaxSizeExceeded:function(){var e="popFromHead",t="_onMaxSizeExceeded(): del()",n=this._lruList[e](),r=this._root,i=.75*this._maxSize;if(n!==undefined){delete this._lruPaths[JSON.stringify(n)],netflix.console.log(t,n),this.del(n);while(n!==undefined&&r.size>i)n=this._lruList[e](),n!==undefined&&(delete this._lruPaths[JSON.stringify(n)],netflix.console.log(t,n),this.del(n))}},updateCache:function(e,t,n){var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L="length",A="size",O="_parent",M="_maxSize",_="_isCollecting",D=this,P=Array.isArray,H=e[L],B=[],j=[];n=n!==undefined?n:this._root;for(s=0;s<H;s++){o=e[s],C=0,B[0]={context:t,cacheContext:n},N=1;for(g=0,u=o[L],a=u-1;g<u&&N>0;g++){C=N,k=j,j=B,B=k,N=0;while(C>0){T=j[C-1],C--,y=o[g],f=T.context,c=T.cacheContext,x=y.to;if(x!==undefined){S=y.from||0;for(E=x;E>=S;E--){v=f[E],m=c[E];if(v===undefined)continue;if(m===undefined){i=v[A]||1,c[E]=v,m=c;while(m!==undefined)r=m[A]||0,m[A]=i+r,m=m[O];continue}if(s===a){i=(v[A]||1)-(m[A]||1),c[E]=v,m=c;while(m!==undefined)r=m[A]||0,m[A]=i+r,m=m[O];continue}m[O]=c,B[N]={context:v,cacheContext:m},N++}}else if(P(y))for(w=y[L]-1;w>=0;w--){b=y[w],x=b.to;if(x!==undefined){S=b.from||0;for(E=x;E>=S;E--){v=f[E],m=c[E];if(v===undefined)continue;if(m===undefined){i=v[A]||1,c[E]=v,m=c;while(m!==undefined)r=m[A]||0,m[A]=i+r,m=m[O];continue}if(s===a){i=(v[A]||1)-(m[A]||1),c[E]=v,m=c;while(m!==undefined)r=m[A]||0,m[A]=i+r,m=m[O];continue}m[O]=c,B[N]={context:v,cacheContext:m},N++}}else{p=f[b],d=c[b];if(p===undefined)continue;if(d===undefined){i=p[A]||1,c[b]=p,d=c;while(d!==undefined)r=d[A]||0,d[A]=i+r,d=d[O];continue}if(s===a){i=(p[A]||1)-(d[A]||1),c[b]=p,d=c;while(d!==undefined)r=d[A]||0,d[A]=i+r,d=d[O];continue}d[O]=c,B[N]={context:p,cacheContext:d},N++}}else{l=f,h=c,f=l[y],c=h[y];if(f===undefined)break;if(c===undefined){i=f[A]||1,h[y]=f,d=h;while(d!==undefined)r=d[A]||0,d[A]=i+r,d=d[O];continue}if(s===a){i=(f[A]||1)-(c[A]||1),h[y]=f,d=h;while(d!==undefined)r=d[A]||0,d[A]=i+r,d=d[O];continue}c[O]=h,B[N]={context:f,cacheContext:c},N++}}}D[M]!==undefined&&D._root[A]>D[M]&&(netflix.console.log("RelativeCache size: "+D._root[A]+" of "+D[M]),this[_]||(this[_]=!0,setTimeout(function(){try{D._onMaxSizeExceeded.call(D),D.collections.onNext()}finally{D[_]=!1}},0)))}}}),function(e){var t="create",n="_cache",r="pathEvaluator",i="reversePathMap",s="pathPrefix",o="length",u="basePath",a="apply",f="pathPrefixOffset",l="concat",c="slice",h="touch",p="jsonPaths",d="_getPath",v="_root",m="observer",g="source",y="_pathTranslationOptions",b="path",w="prototype",E="_bufferedPaths",S="_bufferedQuery",x="Observable",T="subscribe",N="_bufferDelay",C="_optimizedPropertyDescriptor",k="_locks",L="PathEvaluator",A="_parent",O="_optimizePaths",M=!0,_="translatedPaths",D="fastCreateWithDisposable",P="OPTIMIZE_PATHS",H="COLLAPSE_PATHS",B="updateCache",j=Object[t](new Rx.Observer,{onNext:{value:function(e){var t=e.paths,g=e.invalidated,y=this[r][n],b=this[r],w=this[i],E=this[s],S,x,T,N,C=e.value,k=this[u][o],L=Array(1),A;g!==undefined&&b.delCache[a](b,g);for(x=0,N=t[o];x<N;x++)L[0]=t[x],b._updateTranslatedPaths(L,C,w);if(E!==undefined){A=this[f],T=t[o];while(T--)S=E[l](t[T][c](A)),y[h](S),k>0&&(S=S[c](k)),t[T]=S}else{t=this[p],N=t[o];for(T=0;T<N;T++)S=t[T],y[h](S)}e.paths=t,e.value=b[d](this[u],y[v]),this[m].onNext(e)}},onError:{value:function(e){var t=this[p],s=this[p][o],u=this[r][n],a;for(a=0;a<s;a++)u[h](t[a]);this[i]!==undefined&&this[r]._unlock(this[i]),this[m].onError(e)}},onCompleted:{value:function(){this[m].onCompleted()}}}),F=netflix.Class[t]({init:function(e,t,r){this[g]=e,this[n]=t,this[v]=this,this[y]=r||0},path:[],bind:function(e){var n=Object[t](this);return n[b]=this[b][l](e),n[v]=this,n},_bufferedGet:function(){var e=this,n=Array[w][c].call(arguments);return e[E]!==undefined?e[E].push[a](e[E],n):(e[E]=n,e[S]=Rx[x][t](function(t){var n,r=setTimeout(function(){var r=e[E];e[E]=undefined,e[S]=undefined,n=Object.getPrototypeOf(e).get[a](e,r)[T](t)},e[N]);return function(){r!==undefined&&clearTimeout(r),n!==undefined&&n.dispose()}}).publish().refCount()),e[S]},buffer:function(e){var n=Object[t](this);return n.get=this._bufferedGet,n[N]=e,n},get cache(){var e=this[v][n].root,t,r=this[b],i=r[o];for(t=0;t<i&&e!==undefined;t++)e=e[r[t]];return e},delCache:function(){var e,t=this[b],r=arguments[o],i=this[v][n];for(e=0,e=r-1;e>=0;e--)i.del(t[l](arguments[e]))},_getPath:function(e,t){var n,r,i=e[o];for(n=0;n<i&&t!==undefined&&t;n++)r=e[n],r instanceof Array&&(r=r[0]),r.to!==undefined&&(r=r.from||0),t=t[r];return t},getPath:function(e){var t=this[b],r=t[o]>0?this[d](t,this[v][n].root):this[v][n].root;return this[d](e,r)},_opts:{pathFormat:"hierarchical"},getOptimized:function(){var e=Object[t](this,this[C]);return e.get[a](e,arguments)},_unlock:function(e){var t,n,r,i;if(Array.isArray(e)){r=e[o];for(n=0;n<r;n++)i=e[n],i[k]&&i[k]--}else for(t in e)this._unlock(e[t])},_optimizePaths:function(t,r,i){var s=this,u=s[n],a=s[v][n],f=a.root,l,p,m,g,y=t[o],w,E,S,x,T={},N,C,O,M,_,D=[],P,H,B,j=[],F,I,q,R=Array(1),U,z;D[-1]=f;for(p=0;p<y;p++){m=t[p],g=m[o];if(s[d](m,f)!==undefined){u[h](m);if(i)continue}R[0]=m,e[L].explode(R,function(e,t,n){M=D[n-1];for(l=n;M!==undefined&&l<g;l++){w=e[l],M=M[w],D[l]=M;if(l===g-1||M===undefined||r&&(z=(U=m[l])instanceof Array||U.to!==undefined)){(z||M===undefined)&&l--,_=D[l];for(F=l;_!==undefined&&(P=_[b])===undefined&&F>=n;F--)_=_[A];if(P!==undefined){i||(S=P[o],E=m[c](0,l+1)),H=Array(g-(F+1)+P[o]),C=T;for(I=0,q=P[o];I<q-1;I++)N=P[I],H[I]=N,x=C,C=x[N],C===undefined&&(C={},x[N]=C);N=P[I],H[I]=N,x=C,C=x[N],O=D[F],O[k]=(O[k]||0)+1,C instanceof Array?C[C[o]]=O:(C=[O],x[N]=C),B=I+1,F++}else H=[],F=0,B=H[o];for(;F<=l;F++)H[B]=e[F],B++;for(;F<g;F++)H[B]=m[F],B++;return j[j[o]]=H,l}M[A]=D[l-1]}})}return{reversePathMap:T,translatedPaths:j,pathPrefixOffset:S,pathPrefix:E}},call:function(e,n,o,a){var c=this,h=[],d=this[b],v,y,w,E;return h.push(this[b][l](e)),w=this[O](h,M,!1),y=w[i],v=w[_],Rx[x][D](function(e){return E=Object[t](j),E[r]=c,E[i]=y,E[p]=h,E[m]=e,E[u]=d,E[s]=w[s],E[f]=w[f],c[g].callRelativeObject(v[0],n||[],o||[],a||[],c._opts)[T](E)})},get:function(){var n=this,s=Object[t](n._opts),a=this[b],f,h,d,v=arguments,E=arguments[o],S,N;if(a[o]>0){v=Array(E);for(d=0;d<E;d++)v[d]=a[l](arguments[d])}return f=this[O](v,(this[y]&F[P])!==F[P],M),S=f[i],h=f[_],(n[y]&F[H])===F[H]?e[L].collapse(h):(n[y]&F[P])===F[P]&&(s.collapsePaths=M),h[o]===0?Rx[x].fastReturnValue({paths:Array[w][c].call(arguments),value:n.cache}):Rx[x][D](function(e){return N=Object[t](j),N[r]=n,N[i]=S,N[p]=v,N[m]=e,N[u]=a,n[g].getRelativeObject(h,s)[T](N)})},_updateTranslatedPaths:function(e,t,r){var i=this[n],s,u,a,f=Array.isArray,l,h=e[o],p,d,v,m,g,y,b,w,E,S,x,T,N,C,L,O,M,_,D,P=[],H,j=[],F,I;for(l=0;l<h;l++){p=e[l],F=0,P[0]={context:t,reversePathMapContext:r},H=1;for(T=0,d=p[o],v=d-1;T<d&&H>0;T++){F=H,I=j,j=P,P=I,H=0;while(F>0){D=j[F-1],F--,N=p[T],m=D.context,y=D.reversePathMapContext,_=N.to;if(_!==undefined){M=N.from||0;for(O=_;O>=M;O--){S=m[O],x=y[O];if(x===undefined||S===undefined){i[B]([p],t);continue}if(x instanceof Array){u=x[o],a=[p[c](T)];while(u--)s=x[u],s[k]&&s[k]--,i[B](a,S,s);continue}x[A]=y,P[H]={context:S,reversePathMapContext:x},H++}}else if(f(N))for(L=N[o]-1;L>=0;L--){C=N[L],_=C.to;if(_!==undefined){M=C.from||0;for(O=_;O>=M;O--){S=m[O],x=y[O];if(x===undefined||S===undefined){i[B]([p],t);continue}if(x instanceof Array){u=x[o],a=[p[c](T+1)];while(u--)s=x[u],s[k]&&s[k]--,i[B](a,S,s);continue}x[A]=y,P[H]={context:S,reversePathMapContext:x},H++}}else{w=m[C],E=y[C];if(w===undefined||E===undefined){i[B]([p],t);continue}if(E instanceof Array){u=E[o],a=[p[c](T+1)];while(u--)s=E[u],s[k]&&s[k]--,i[B](a,w,s);continue}E[A]=y,P[H]={context:w,reversePathMapContext:E},H++}}else{g=m,b=y,m=g[N],y=b[N];if(y===undefined||m===undefined){i[B]([p],t);continue}if(y instanceof Array){u=y[o],a=[p[c](T+1)];while(u--)s=y[u],s[k]&&s[k]--,i[B](a,m,s);continue}y[A]=b,P[H]={context:m,reversePathMapContext:y},H++}}}}}});F[P]=1,F[H]=2,F[w][C]={_pathTranslationOptions:{value:F[P]|F[H]}},e.RelativePathEvaluator=F}(netflix.falcor),webapi.ApiSessionRequestQueue={load:function(e,t,n){return Rx.Observable.create(function(r){var i=!0,s={isApiNext:!0,url:e,type:n||"GET",params:t,success:function(e){i&&(r.onNext(e),r.onCompleted())},error:function(e,t,n){i&&(n||(n=Error()),n.textStatus=t,r.onError(n))}},o=webapi.ApiSession.resource(s,!0);return function(){i=!1,webapi.ApiSession.abort(o)}})}},function(e){var t="API_REMOTE_PATH_EVALUATOR_FACTORY",n="BROWSE_RELATIVE_CACHE",r="CurrentUrlParams",i="RelativeCache",s="falcor",o="SizedJSONGPathEvaluator",u="RelativePathEvaluator",a="ROOT_PATH_EVALUATOR_FACTORY",f=t,l="API_CACHE_PATH_EVALUATOR",c="API_REQUEST_QUEUE",h="SEARCH_ROOT_PATH_EVALUATOR_FACTORY",p="API_SEARCH_CACHE_PATH_EVALUATOR",d="BROWSE_ROOT_PATH_EVALUATOR_FACTORY",v="BROWSE_ROOT_PATH_EVALUATOR",m=n,g=util[r],y=parseInt(g.get("treeCacheSize"),10)||5e6,b=.75,w=3,E=1e5;e[m]={value:function(){return new netflix[s][i]({},y)}},e[a]={dependsOn:[f,l],value:function(e){var t,n,i,s=e[f];return util[r].has("cacheoff")?i=function(e){return s(e)}:(t=e[l],n=s().cache(t),i=function(e){var r;return e?r=s(e).cache(t):r=n,r}),i}},e[f]={dependsOn:[c],value:function(e){var t=config.environment,n="/tvui/"+t.pathEvaluator+"/lruderrorpage/pathEvaluator",r=t.pathEvaluatorRevision;return function(t){return t=t||{},t.withSize=!0,r&&(t.revision=r),new netflix[s].RemotePathEvaluator(e[c],n,t)}}},e[l]={value:function(){return new netflix[s][o]({},y,b)}},e[v]={dependsOn:[d],value:function(e){var t;return function(){return t||(t=e[d]()),t}}},e[d]={dependsOn:[f,m],value:function(e){return function(r){return new netflix[s][u](e[t](r),e[n])}}},e[c]={value:function(){return webapi.ApiSessionRequestQueue}},e[p]={value:function(){return new netflix[s][o]({},E,b)}},e[h]={dependsOn:[f,p],value:function(e){return function(n){var r=e[t](n),o=g.get("pathTranslation")||w;return new netflix[s][u](r,new netflix[s][i]({},E),o)}}}}(config.binding),function(e){var t="API_REMOTE_PATH_EVALUATOR_FACTORY",n="SSO_PATH_EVALUATOR_FACTORY",r=t;e[n]={dependsOn:[r],value:function(e){return function(n){return new netflix.falcor.RelativePathEvaluator(e[t](n),new netflix.falcor.RelativeCache({}))}}}}(config.binding),application.auth.ssoDeactivate=function(){var e,t="Observable",n="getExternalSsoServices",r="getExternalUserToken",i="ssoDeactivate",s="startupProfiler",o="onCompleted",u=Rx[t].returnValue(UNIT);if(typeof nrdpPartner=="object"&&nrdpPartner.Sso&&nrdpPartner.Sso[n]){e=nrdpPartner.Sso[n]();if(e.length>0&&e[0]==="XboxSAML"&&nrdpPartner.Sso[r])return Rx[t].createWithDisposable(function(e){var n=[i],u=function(){util[s].timeEnd(i),util.storage.setItem(sessionStorage,"ssoAlreadyActivated",!1),e.onNext(),e[o]()},a=function(){util[s].timeEnd(i),e.onNext(),e[o]()};return Rx[t].zip([devicebridge.nrdpInited],NOOP).then(function(){return application.auth[r]()}).then(function(e){var t,r,o=application.Binding.get("SSO_PATH_EVALUATOR_FACTORY"),u=n;return util[s].time(i),t=util.extend({},webapi.getConfigRequestData(),{}),r=o(t),r.call(u,[e],[],[])}).subscribe(function(){},a,u)})}return u},controller.CustomerServiceCard=controller.ABaseUiCard.extend({id:"CustomerServiceCard",uiContext:"CustomerServiceCard",uiModalView:"customerService",init:function init(e){this._view=e.viewFactory(),init.base.call(this,e)},_initView:function(){return this._view},destroy:function destroy(){var e=this.view();e.hide(),setTimeout(function(){e.destroy()},100),destroy.base.call(this)},actions:{"key.back":function(){return state.raiseEvent("state.exit")},"key.left":function(){var e,t=nrdp.gibbon.defaultLocale,n=nrdp.gibbon.localeInfo;return n&&(e=n(t)),e&&e.direction==="rtl"?!0:state.raiseEvent("state.exit")},"key.right":function(){var e,t=nrdp.gibbon.defaultLocale,n=nrdp.gibbon.localeInfo;return n&&(e=n(t)),e&&e.direction==="rtl"?state.raiseEvent("state.exit"):!0}},onEnter:function onEnter(e,t,n){var r,i=null,s=!0,o=util.MessageBus,u=nrdp&&nrdp.log,a=u&&u.flush,f=u&&u.appid;onEnter.base.call(this,e,t,n),e?(r={name:"CustomerServiceScreen",desc:"displayed",appid:f},u?u.error(JSON.stringify(r),i,i,i,s,application.isErrorPage?s:!1):util.log.error(r),a&&a(),o.notify(o.EVENTS.CUSTOMER_SERVICE_ACTIVE,s),this.view().generateMenuItems(t)):this.view().setPinnedError(t)},onExit:function onExit(e,t,n){var r=util.MessageBus;onExit.base.call(this,e,t,n),e&&r.notify(r.EVENTS.CUSTOMER_SERVICE_ACTIVE,!1)}}),view2.customerservice={},config.gibbon={MAX_DRAW_ORDER:100},controller.AUiCard=controller.ABaseUiCard.extend({_showing:!1,show:function(){this._showing=!0,this.view().show()},hide:function(){delete this._showing,this._onExit(!0)},_onExit:function(e){var t=this._view;t&&(e&&!this._showing?t.hide():t.blur())}}),controller.DialogCardV2=controller.AUiCard.extend({active:!1,id:"DialogCard",uiContext:"DialogCard",uiModalView:"dialogCard",notificationTypes:{SHOW:"DIALOG_SHOW",HIDE:"DIALOG_HIDE"},init:function init(e){var t="uiModalView",n=e.options,r=n&&n.voiceEnabled,i=n&&n[t];i&&(this[t]=i),this._viewFactory=r?e.voiceFactory:e.viewFactory,init.base.call(this,e),this.observable=new util.KeyedObservable,this._options=n},_initView:function(){return this._viewFactory(this._options)},actions:{"dialog.select":function(){return this.view().buttonSelected()}},setModel:function(e){this._model=e,this.view().setModel(e)},destroy:function destroy(){var e=this.view();this.active=!1,destroy.base.call(this),e&&(e.hide(),e.baseParent=undefined)},onClobbered:function(){var e,t=this._model;t&&(e=t.onClobbered,e&&e(),this.active=!1)},canResignFirstResponder:function canResignFirstResponder(e){return this.active?e instanceof controller.DialogCardV2||e instanceof controller.CustomerServiceCard:canResignFirstResponder.base.call(this,e)},onEnter:function onEnter(e,t){var n,r="observable";e&&(this.active=!0,this._oldFirstResponder=view2.Responder.firstResponder,util.MessageBus.notify(this.notificationTypes.SHOW,{id:this.id,title:this._title,model:this._model})),onEnter.base.call(this,e,t),this[r]&&this[r].notify("enter",e),n=application.Binding.get("EVENT_DISPATCHER"),n&&n.constrainPointer([this.view()])},onExit:function onExit(e,t){var n="_oldFirstResponder",r="observable",i=this.view(),s=application.Binding.get("EVENT_DISPATCHER");s&&s.constrainPointer(null),onExit.base.call(this,e,t),e&&(this.active=!1,this[n]&&(this[n].becomeFirstResponder(),delete this[n]),util.MessageBus.notify(this.notificationTypes.HIDE,{id:this.id})),i&&(i.blur(),i.hide()),e&&setTimeout(function(){i&&i.destroy()},10),this[r]&&this[r].notify("exit",e)}}),controller.ErrorDialogCard=controller.AUiCard.extend({id:"ErrorDialogCard",uiContext:"ErrorDialogCard",uiModalView:"logout",init:function init(e){var t="uiModelView",n=e.options;this._viewFactory=e.viewFactory,n&&n[t]&&(this[t]=n[t]),init.base.call(this,e),this._options=e.options},_initView:function(){return this._viewFactory(this._options)},setModel:function(e){this._model=e,this.view().setModel(e)},destroy:function destroy(){var e=this.view();e.hide(),destroy.base.call(this)},onEnter:function onEnter(e,t){var n=this.view();onEnter.base.call(this,e,t),eventDispatcher=application.Binding.get("EVENT_DISPATCHER"),eventDispatcher&&eventDispatcher.constrainPointer([this.view()])},onExit:function onExit(e,t){var n=this.view();onExit.base.call(this,e,t),eventDispatcher=application.Binding.get("EVENT_DISPATCHER"),eventDispatcher&&eventDispatcher.constrainPointer(),n&&(n.blur(),n.hide(),e&&n.destroy())}}),view2.dialog={},view2.dialog.DialogView=view2.AView.extend({id:"dialog-view",uiModalView:"dialog-view",_isDimmed:!0,_resetButtons:!0,nonAppRootView:!0,init:function init(e){var t,n,r,i,s="buttonCollectionFactory",o="_buttonCollectionFactory",u="_collectionRangeFactory",a="update",f="textContainer",l="addChildren",c=e[s],h=gibbon.getElementById("dialog-base"),p=e.config,d=e.options;this[o]=e[s],this[u]=e.rangeFactory,this._cfg=p,this.width=p.width,this.height=p.height,this._collectionViews=[],d&&d.id&&(this.id=d.id,this._options=d),init.base.call(this,e),this[a](p),this.position(0,0,config.gibbon.MAX_DRAW_ORDER),this[a]({id:this.id,backgroundColor:"#000000",horizontalAlign:"center"}),n=new view2.Container({config:p[f]}),n[a](p[f]),n.show(),c=this[o](),range=this[u](),c.useRange(range),c[a](p.cv),t=new view2.Text,t[a](p.title),t.show(),r=new view2.Text,r[a](p.subTitle),n[l](t,r),i=new view2.Text({config:p.code}),i[a](p.code),i.position(p.code.x,p.code.y),i.show(),this[l](n,c,i),this._title=t,this._subtitle=r,this._textContainer=n,this._cv=c,this._code=i,this.element.parent||(this.element.parent=h)},destroy:function destroy(){var e="_textContainer",t=this._cv,n=this[e],r=this._title,i=this._subtitle,s=this._code;this.hide(),t&&(t.blur(),t.hide(),t.reset()),this.removeChildren(this[e],this._cv,this._code),destroy.base.call(this),this._title=this._cv=this._subtitle=this[e]=this._code=null},buttonSelected:function(e){var t,n=this._buttons,r=n&&n[e];return r&&r.confirm&&(r.dontDismissOnConfirm||(t=state.raiseEvent("state.exit")),r.confirm()),t},setModel:function(e){var t,n,r,i,s,o="_resetButtons",u="update",a="confirm",f="activeState",l=e&&e.buttons&&e.buttons.items,c=[],h=l?l.length:0,p=this._cfg,d=this._subtitle,v=e&&e.code,m=e&&e.messageLabel,g=e&&e.message,y=e&&e.skipResetButtons;y&&(this[o]=!1),g?this._title[u]({text:g}):this._title[u]({text:""}),m?(d[u]({text:m}),d.show()):(d[u]({text:""}),d.hide()),v?this._code[u]({text:v}):this._code[u]({text:""});if(this[o]){s=this._cv,s.reset(),range=this._collectionRangeFactory(),s.useRange(range),this.focused&&s.focus(),e&&e.isDimmed||this._isDimmed?this.dim(p.opacity):this.dim(1),this._buttons=l;function b(e){return function(){(!e.dontDismissOnConfirm||!e[a])&&(state[f]instanceof controller.DialogCardV2||state[f]instanceof controller.ErrorDialogCard)&&state.raiseEvent("state.exit"),e[a]&&e[a]()}}for(t=0;t<h;t++)n=l[t],n&&c.push({config:{text:n.label,action:b(n)}});this[u]({dataSource:c}),r=p.button.size.width*h+(h-1)*p.cv.layout.spacing,i=Math.abs((p.width-r)/2),s.position(i,p.cv.y)}},update:function update(e){e.dataSource?this._cv.update(e.dataSource).subscribe(NOOP,function(e){util.log.error("An error has occurred",e)},NOOP):update.base.call(this,e)},reset:function reset(){var e=this._cv;reset.base.call(this),e&&e.reset()},focus:function focus(){var e=focus.base.call(this),t=this._cv;return e&&t&&t.focus(),e},blur:function blur(){var e=blur.base.call(this),t=this._cv;return e&&t&&t.blur(),e},pointerShow:function(){var e=this._cv;return this.focused&&e&&e.focus(),!0},pointerHide:function(){var e=this._cv;return this.focused&&e&&e.focus(),!0}}),view2.dialog.DialogRenderer=view2.ARenderer.extend({get template(){return{width:1280,height:720,x:0,y:0,drawOrder:config.gibbon.MAX_DRAW_ORDER,visible:!1,background:{color:"#000000"}}},render:function render(){var e=render.base.call(this);return gibbon.scene.widgets.appendChild(e),e},destroy:function destroy(){this.element.parent=undefined,destroy.base.call(this)}}),function(e){var t,n=util.SemanticKeyNames,r=[e.Keys,e.CustomKeys].reduce(function(e,t){var n,r,i;for(n in t)r=t[n],i=e[r],i?i.push(n):e[r]=[n];return e},{});for(t in n)r[t]!==undefined&&(r[n[t]]=r[t]);e.KeyCodes=r}(util),util.throttle=function(e,t,n,r){var i,s=arguments.length===4;return n=n||null,function(){var o,u=nrdp.mono(),a=!!i&&u-i<t;return a?o=s?r:null:(i=u,o=e.apply(n,arguments)),o}},function(e){var t=null,n="_tickTimeout",r="active",i="_expectedTickEnter",s=util.Date.now;e.SmoothInterval=util.Class.create({_expectedTickEnter:undefined,_lastTickEnter:undefined,_tickTimeout:t,active:!1,_callback:t,_delayMs:t,_scope:t,init:function(e,t,r){this._callback=e,this._delayMs=t,this._scope=r,this[n]=new util.Timeout(this._runDone,t,this)},run:function(){this[r]||(this[r]=!0,this[n].run())},clear:function(){this[r]&&(this[r]=!1,this[n].clear(),this[i]=this._lastTickEnter=undefined)},_runDone:function(){var e,t,r,o,u=this[i],a=this._delayMs,f=s();this._callback.call(this._scope,f),e=s(),t=u===undefined?0:f-u,r=e-f,o=a-r-t,o<0&&(o=a),this[i]=e+o,this[n].run(o)}})}(util),util.KeyRepeater=util.Class.create({isActive:!1,isRepeating:!1,isWaiting:!1,init:function(e){var t,n,r,i,s="_onTermination",o=config.isPaladinEnabled,u=o?!1:e.repeat,a=o?!1:e.throttle,f=e.callbacks,l=util.KeyCodes,c=util.Timeout,h={};for(t in f){n=l[t];if(n){i=n.length;while(i--)r=n[i],h[r]=f[t]}}this._keyHandlers=h,this._scope=e.scope||this,u?(this._onEnterRepeat=e.onEnterRepeat||NOOP,this._onExitRepeat=e.onExitRepeat||NOOP,this[s]=this[s].bind(this),this._waitTimeout=new c(this._onWaitTimeout,e.initialWait,this),this._runawayTimeout=new c(this._onRunawayTimeout,e.runawayWait||1e3,this),this._repeatInterval=new util.SmoothInterval(this._invokeKeyHandler,e.repeat,this)):this.run=this._runImmediate,a&&(this.run=util.throttle(this.run,a,this,!0))},run:function(e){var t=!0,n="hasKeyRepeated",r="isActive",i="_hasWaitExpired",s="_runawayTimeout",o=t,u=e.key,a=e.code;return this[n]=e.isRepeat!==!1||e.repeat===t,this[r]&&this._keyCode!==a&&this.clear(),this[r]&&this[n]&&this[i]?(this._onWaitTimeout(),this[i]=!1):!this[r]&&this._keyHandlers[a]&&(this[r]=this.isWaiting=t,this._keyCode=a,this._key=u,o=this._invokeKeyHandler(),this._setTerminationHandler(),this._waitTimeout.run()),this[s]&&this[s].run(),o},clear:function(){var e="isRepeating",t="_runawayTimeout";this.isWaiting?this._waitTimeout.clear():this[e]&&(this._onExitRepeat.call(this._scope,this._key,this._keyCode),this._repeatInterval.clear()),this[t]&&this[t].clear(),this.isActive&&this._removeTerminationHandler(),this._key=this._keyCode=null,this.isActive=this.isWaiting=this[e]=this.hasKeyRepeated=this._hasWaitExpired=!1},_invokeKeyHandler:function(){var e=this._keyCode;return e?this._keyHandlers[e].call(this._scope,this._key,e):!1},_runImmediate:function(e){return this._key=e.key,this._keyCode=e.code,this._invokeKeyHandler()},_onWaitTimeout:function(){var e=!1;return this._hasWaitExpired=!0,this.hasKeyRepeated&&(this.isWaiting=!1,this.isRepeating=!0,this._onEnterRepeat.call(this._scope,this._key,this._keyCode),e=this._invokeKeyHandler(),this._repeatInterval.run()),e},_onRunawayTimeout:function(){this.clear()},_onTermination:function(e){this.isActive&&this._keyHandlers[e.keyCode]&&this.clear()},_setTerminationHandler:function(){this._keyUpSubscription=application.keyup.subscribe(this._onTermination)},_removeTerminationHandler:function(){var e="_keyUpSubscription";this[e]&&this[e].dispose()}}),view2.controls.CollectionRenderer=view2.ContainerRenderer.extend({get template(){return{id:"collection",visible:!1,clip:!1,width:0,height:0}}}),view2.controls.layout={},util.math={clamp:function(e,t,n){return e<t?t:e>n?n:e},nearestEven:function(e){var t=e|0;return e&&e%2&&e===t?t-1:t+t%2},wrapBumper:function(e,t,n){return e<t?n:e>n?t:e},wrap:function(e,t,n){var r=n-t+1;return e=(e-t)%r,e<0?n+1+e:t+e},segment:function(e,t,n){var r=Math.floor(e/t),i=r*t;return{index:r,from:i,to:Math.min(i+t,n)-1}}},view2.controls.layout.Stack=util.Class.create({_queue:null,_views:null,_uuidToIndex:null,_count:null,_originFirstIndex:"first-index",_originRangeIndex:"range-index",init:function(e){this._defaults(),this.axis=e.axis,this.spacing=e.spacing||0,this.origin=e.origin||this._originRangeIndex,this.wrapping=e.wrapping},useRange:function(e){this.range=e,e&&e.hasValidIndex()&&this._queue.length&&this.processQueue()},useIndexObservable:NOOP,nearest:function(e,t){var n,r,i,s=this.axis,o=this._views,u=this.range,a=u&&u.current,f=this.wrapping,l=function(e){return f?util.math.wrap(e,0,a.length-1):e};if(a&&a.length){t=t.replace(/key\./,""),i=this._uuidToIndex[e.uuid],n=a.indexOf(i);if(i>-1)if(s==="x"&&t==="right"||s==="y"&&t==="down")r=o[a[l(n+1)]];else if(s==="x"&&t==="left"||s==="y"&&t==="up")r=o[a[l(n-1)]]}return r||null},get bottomView(){var e=this.axis,t=this.range,n=t&&t.current,r=null;return e==="y"&&(r=this._views[n[n.length-1]]),r},get topView(){var e=this.axis,t=this.range,n=t&&t.current,r=null;return e==="y"&&(r=this._views[n[0]]),r},get rightMostView(){var e=this.axis,t=this.range,n=t&&t.current,r=null;return e==="x"&&(r=this._views[n[n.length-1]]),r},get leftMostView(){var e=this.axis,t=this.range,n=t&&t.current,r=null;return e==="x"&&(r=this._views[n[0]]),r},reset:function(){this._defaults()},_defaults:function(){this._views={},this._uuidToIndex={},this._queue=[],this.range=null,this._count=0},position:function(e,t){var n=this._queue;n[n.length]=[e,t],this.range&&this.range.hasValidIndex()&&this.processQueue()},reposition:function(e){var t,n,r,i,s=this.range,o=this._views,u=this._queue,a=u.length;e===undefined&&(e=this.range.index);if(s&&s.hasValidIndex()){r=s.current,t=r.length,i=r.indexOf(e);if(i>=0){e=r[++i];while(i<t)n=o[e],this.unposition(e,n),u[a++]=[e,n],e=r[++i];this.processQueue()}}},unposition:function(e,t){var n=this._queue,r=n.length,i=this._views;if(i[e])this._count--,delete i[e],delete this._uuidToIndex[t.uuid];else while(r>0)--r,n[r][0]===e&&n[r][1]===t&&n.splice(r,1)},processQueue:function(){var e,t,n,r,i,s,o,u,a=this._queue,f=a.length,l=this._views,c=this._uuidToIndex,h=this._count,p=this.spacing,d=this.range,v=d.index,m=d.current,g=m[0],y=this.axis==="x",b=y?"x":"y",w=y?"width":"height",E=this.origin,S=E===this._originRangeIndex,x=E===this._originFirstIndex;while(f>0){u=a[--f],s=u[0],o=u[1],e=m.indexOf(s);if(e<0)continue;t=m[e-1],n=m[e+1];if(h===0&&(S&&s===v||x&&s===g))i=0;else if(l[t])r=l[t],i=r[b]+r[w]+p;else{if(!l[n])continue;r=l[n],i=r[b]-o[w]-p}l[s]=o,c[o.uuid]=s,h++,y?o.position(i,o.y):o.position(o.x,i),a.splice(f,1),f=a.length}this._count=h}}),view2.controls.layout.Engine=util.Class.create({views:null,init:function(e){this._defaults(),this.axis=e.axis},useRange:function(e){this.range=e},useIndexObservable:NOOP,nearest:function(e,t){var n,r,i,s=/key\./,o=this.axis,u=this.views,a=this.range,f=a&&a.current;if(f&&f.length){t=s.test(t)?t.replace(s,""):t;for(i in u)if(e===u[i]){i=parseInt(i,10),n=f.indexOf(i);if(i>-1){if(o==="x"&&t==="right"||o==="y"&&t==="down")r=u[n+1];else if(o==="x"&&t==="left"||o==="y"&&t==="up")r=u[n-1];break}}}return r||null},get bottomView(){var e,t=this.axis,n=this.range,r=n&&n.current;return t==="y"&&(e=this._views[r[r.length-1]]),e},get topView(){var e,t=this.axis,n=this.range,r=n&&n.current;return t==="y"&&(e=this._views[r[0]]),e},get rightMostView(){var e,t=this.axis,n=this.range,r=n&&n.current;return t==="x"&&(e=this._views[r[r.length-1]]),e},get leftMostView(){var e,t=this.axis,n=this.range,r=n&&n.current;return t==="x"&&(e=this._views[r[0]]),e},reset:function(){this._defaults()},_defaults:function(){this.views={},this.range=null},position:function(e,t){this.views[e]=t},reposition:function(){util.log.warn("layout.Engine#reposition() is unsupported")},unposition:function(e){delete this.views[e]}}),view2.controls.layout.Grid=util.Class.create({queue:null,views:null,sets:null,uuidToWrapper:null,_count:null,_crosshair:null,_originFirstIndex:"first-index",_originRangeIndex:"range-index",init:function(e){var t="horizontal",n="vertical",r="extendDeep",i=!1,s="width",o="height",u="previous",a="next",f=e.axis==="x",l=f?t:n;this._defaults(),this.box=e.box,this.axis=e.axis,this.spacing=util[r]({horizontal:0,vertical:0},e.spacing),this.origin=e.origin||this._originRangeIndex,this.crosshair={x:0,y:0},this.behavior=util[r]({moveSet:"sameIndex",wrap:{left:i,right:i,up:i,down:i}},e.behavior),this.primaryParams={direction:l,dimension:f?s:o,axis:e.axis,wrapping:f?{next:"right",previous:"left"}:{next:"down",previous:"up"},moves:f?{left:u,right:a}:{up:u,down:a}},this.secondaryParams={direction:f?n:t,dimension:f?o:s,axis:f?"y":"x",moves:f?{up:u,down:a}:{left:u,right:a}}},useRange:function(e){this.range=e,e&&e.hasValidIndex()&&this.queue.length&&this.processQueue()},useIndexObservable:function(e){var t=this.behavior.moveSet;e&&t==="virtualCrosshair"&&(this._indexChangeSubscription=e.subscribe(this._onIndexChange.bind(this),NOOP,NOOP))},nearest:function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v="length",m=/key\./,g=this.uuidToWrapper,y=this.primaryParams,b=y.moves,w=this.secondaryParams,E=w.moves,S=this.behavior.moveSet,x=this.range,T=x&&x.current,N=e.uuid;if(T&&T[v]){t=m.test(t)?t.replace(m,""):t,o=g[N];if(o){s=b[t];if(s)u=o[s]&&o[s].view;else{p=o.set,i=o.indexOfIndex,s=E[t],p=p[s];if(p){if(S==="virtualCrosshair"){f=p.views;for(d=0;d<f[v];d+=1){a=f[d].view,c={},n=y.axis,r=w.axis,c[n]=this.crosshair[n],c[r]=a[r];if(this._isContainedBy(c,a)){h=a;break}if(c[n]<a[n])break;l=a}return h?h:l}u=p.views[util.math.clamp(i,0,p.views[v]-1)].view}}}}return u||null},bottomView:null,topView:null,rightMostView:null,leftMostView:null,reset:function(){this._defaults()},_defaults:function(){var e="_indexChangeSubscription";this.views={},this.sets={},this.uuidToWrapper={},this.queue=[],this.range=null,this._count=0,this[e]&&this[e].dispose()},position:function(e,t){var n=this.queue;n[n.length]=[e,t],this.range&&this.range.hasValidIndex()&&this.processQueue()},reposition:function(e){var t,n,r,i,s=this.range,o=this.views,u=this.queue,a=u.length;e===undefined&&(e=this.range.index);if(s&&s.hasValidIndex()){r=s.current,t=r.length,i=r.indexOf(e);if(i>=0){e=r[++i];while(i<t)n=o[e],this.unposition(e,n),u[a++]=[e,n],e=r[++i];this.processQueue()}}},unposition:function(e,t){var n,r,i,s="previous",o=this.queue,u=o.length,a=this.views,f=this.uuidToWrapper;if(a[e])r=t.uuid,n=f[r],i=n.set,this._count--,delete a[e],delete f[r],delete i.views[r],Object.keys(i.views).length===0&&(i[s]&&(i[s].next=null),i.next&&(i.next[s]=null),delete this.sets[i.index]);else while(u>0)--u,o[u][0]===e&&o[u][1]===t&&o.splice(u,1)},processQueue:function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m="length",g="_createSet",y=null,b="_createViewWrapper",w="wrapDimension",E=this.queue,S=E[m],x=this.box,T=this.views,N=this.uuidToWrapper,C=this._count,k=this.spacing,L=this.range,A=L.index,O=L.current,M=O[0],_=this.origin,D=_===this._originRangeIndex,P=_===this._originFirstIndex,H=this.primaryParams,B=this.secondaryParams,j=H.direction,F=B.direction,I=H.axis,q=B.axis,R=H.dimension,U=B.dimension,z=H.wrapping,W=this.behavior,X=W.wrap;while(S>0){d=E[--S],c=d[0],h=d[1],i=O.indexOf(c);if(i<0)continue;s=O[i-1],o=O[i+1],u={},p=h.uuid;if(C===0&&(D&&c===A||P&&c===M))v=this[g](0,y,h[U]),a=this[b](i,h,y,v),u={x:0,y:0};else{if(!T[s])continue;f=T[s].view,l=N[f.uuid],v=l.set,e=f[I]+f[R]+k[j],t=f[q],x&&e+h[R]>x[R]?(e=0,t=f[q]+v[w]+k[F],v=this[g](v.index+1,v,h[U]),a=this[b](i,h,y,v)):(v[w]=n=Math.max(v[w],h[U]),a=this[b](i,h,l,v)),v.views[m]>1&&(r=v.views[0],X[z.previous]&&(r.previous=a),X[z.next]&&(a.next=r)),u[I]=e,u[q]=t}T[c]=a,C++,h.position(u.x,u.y),E.splice(S,1),S=E[m]}this._count=C},_createSet:function(e,t,n){var r={views:[],index:e,wrapDimension:n,previous:t,next:null};return t&&(t.next=r),this.sets[e]=r,r},_createViewWrapper:function(e,t,n,r){var i=this.uuidToWrapper,s=t.uuid,o={view:t,index:e,indexOfIndex:r.views.length,previous:n,next:null,set:r};return n&&(n.next=o),r.views[r.views.length]=o,i[s]=o,o},_onIndexChange:function(e){var t,n,r,i="_centerOn",s=this.views,o=s[e.lastIndex],u=s[e.index];u&&(r=u.view,n=o&&o.view,n?u.set===o.set?this[i](r):(t=this.secondaryParams.axis,this.crosshair[t]=r[t],this._isContainedBy(this.crosshair,r)||this[i](r)):this[i](r))},_centerOn:function(e){var t=Math.floor(e.width/2),n=Math.floor(e.height/2);this.crosshair={x:e.x+t,y:e.y+n}},_isContainedBy:function(e,t){return e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height}}),view2.controls.Collection=view2.AView.extend({id:"Collection",indexToUUID:null,uuidToIndex:null,layout:null,init:function init(e){var t,n,r="layout",i=view2.controls[r],s=e[r],o=e.config,u=s.type,a=e.implicitPosition;switch(u){case"engine":t=!0,n=i.Engine;break;case"grid":n=i.Grid;break;default:n=i.Stack}this[r]=new n(e[r]),this.indexToUUID={},this.uuidToIndex={},this._implicitPosition=a===undefined?!0:a,init.base.call(this,{rendererFactory:function(){var e=new view2.controls.CollectionRenderer;return t&&e.set({layoutDirection:s.axis==="x"?"horizontal":"vertical",layoutAlign:s.align||null}).commit(),e}}),o&&o.width&&o.height&&this.size(o.width,o.height)},reset:function reset(){reset.base.call(this),this.layout.reset()},useRange:function(e){this.layout.useRange(e)},atIndex:function(e){return this.children[this.indexToUUID[e]]||null},indexOf:function(e){var t=this.uuidToIndex[e&&e.uuid];return t!==undefined?t:-1},refresh:function(e){this.layout.reposition(e)},addAtIndex:function(e,t){var n="indexToUUID",r=this[n][e]==null&&this.addChild(t);return r&&(this[n][e]=t.uuid,this.uuidToIndex[t.uuid]=e,this._implicitPosition&&this.layout.position(e,t)),r},removeAtIndex:function(e){var t=this.atIndex(e),n=this.removeRelationshipAtIndex(e);return n&&this.removeChild(t),n},removeRelationshipAtIndex:function(e){var t="uuidToIndex",n=this.atIndex(e),r=!1;return n&&(r=this.removeChildRelationship(n),r&&(e=this[t][n.uuid],delete this[t][n.uuid],delete this.indexToUUID[e],this._implicitPosition&&this.layout.unposition(e,n))),r},destroy:function destroy(){this._range&&this._range.reset(),this.reset(),destroy.base.call(this),delete this.range,delete this.indexToUUID,delete this.uuidToIndex}}),view2.controls.FirstIndex=function(){return this._range.current[0]},view2.controls.ScrollableCollection=view2.controls.Collection.extend({id:"ScrollableCollection",focusedChild:null,selectedChild:null,_currentChild:null,_defaultCfg:{layout:{axis:"y",origin:"first-index",spacing:0},animate:{},glide:{},behavior:{becomesFirstResponder:!0,provideBoundDataSource:!1,reuseRemoved:!1,supportsPlaceholder:!1,selectChildOnUpdate:!0},key:{throttle:160}},init:function init(e){var t=null,n="positionStrategy",r="defaultIndexResolver",i=util.ObservableValue,s=new i(t),o=new i(t),u=new i(t),a=new Rx.Subject,f=function(e,t){util.log.error(this.id+" error handling "+e,t)};init.base.call(this,e.config),this._cfg=util.extendDeep({},this._defaultCfg,e.config),this._viewFactory=e.viewFactory,this._pathsProvider=e.pathsProvider,this._positionStrategy=e[n]?e[n]:view2.controls.FirstIndex,this._defaultIndexResolver=e[r]?e[r]:function(){return this._cfg.defaultIndex||0},this._keyRepeater=this._setupKeyRepeater(),this._destroyed=a,this._dataSource=s,this._currentChild=new i(t),this.selectedChild=u,this.focusedChild=o,this.layout.useIndexObservable(o.differences.select(function(e){return{lastIndex:this.indexOf(e.previous),index:this.indexOf(e.current)}}.bind(this))),s.changes.takeUntil(a).subscribe(this._onDataSourceChanges.bind(this),f.bind(this,"dataSource"))},reset:function reset(){reset.base.call(this),this.update(null),this._clearKeyRepeater(),this.layout.useRange(this._range)},destroy:function destroy(){var e=this._destroyed;destroy.base.call(this),this._viewFactory.destroy(),e.onNext(),e.onCompleted()},refresh:function(){util.log.warn(this.id+"#refresh(): unsupported")},becomeFirstResponder:function becomeFirstResponder(){var e=this.selectedChild.value,t=this.focusedChild.value,n=!1;return e&&(this.focusChild(t||e),n=e.isOrContains(view2.Responder.firstResponder)),n||(n=becomeFirstResponder.base.call(this)),n},focus:function focus(){var e=focus.base.call(this);return e&&this._cfg.behavior.becomesFirstResponder&&this.becomeFirstResponder(),e},blur:function blur(){var e=blur.base.call(this);return e&&(this._clearKeyRepeater(),this.focusedChild.value&&this.focusChild(null)),e},hide:function hide(){var e=hide.base.call(this);return e&&this._clearKeyRepeater(),e},useRange:function useRange(e){var t="_range",n="_rangeSubscription";useRange.base.call(this,e),e.hasValidIndex()&&util.log.error(this.id+"#useRange(): range has index"),this[t]&&this[t].reset(),this[n]&&this[n].dispose(),this[t]=e,this[n]=e.changes.takeUntil(this._destroyed).subscribe(this._onRangeChanges.bind(this),NOOP,NOOP)},update:function(e){var t="Observable",n=Rx[t],r=this._dataSource,i=this._range,s=this;return r.value=e,e?n.create(function(n){var o=i.changes.replayLast(),u=s._getDataSequence(e,n),a=s._getSetupSequence(e,n);return s._cfg.behavior.supportsPlaceholder&&(u=Rx[t].returnValue({value:{}}).concat(u)),a.selectMany(u).combineLatest(o,function(e,t){return{model:e,range:t}}).takeUntil(r.changes.merge(s._destroyed)).subscribe(s._onLoadedSequence.bind(s),n.onError.bind(n),n.onCompleted.bind(n)),function(){}}):n.empty()},keyDown:function(e){return this._matchKey.test(e.key)?this._keyRepeater.run(e):!1},pointerDown:function(){this._clearKeyRepeater()},delegatedPointerUp:function(e,t,n){n||this.selectChild(e)},delegatedPointerEnter:function(e,t,n){this._clearKeyRepeater(),n||this.focusChild(e)},canFocusChild:function(e){var t=!1;return e&&(t=this.focusedChild.value===e||e.canFocus()&&e.canBecomeFirstResponder()),t},findFocusableTowards:function(e,t){var n,r=this.layout,i=!1,s=!1,o=e;if(o)do n=r.nearest(o,t),n&&(o&&o===n?i=!0:(o=n,s=this.canFocusChild(n)));while(!i&&n&&!s);return s?n:null},selectChild:function(e){var t=null,n="focusChild",r=this.selectedChild,i=t;e!==t&&(i=e.uuid?e:this._resolveIndexToView(e));if(i===t)this[n](t),r.value=t;else if(i===this.focusedChild.value||this[n](i))r.value=i;return i!==t},focusChild:function(e){var t=null,n=this.focusedChild,r=n.value,i=t;return e!==t&&(i=e.uuid?e:this._resolveIndexToView(e)),i!==r&&(r&&r.blur(),this.canFocusChild(i)?i.focus():i=t),i&&this._setChildAsFirstResponder(i),n.value=i,this._onFocusedChildChanges(i),i!==t},pageBy:function(e){var t,n,r=this._currentChild.value,i=this._range,s=i.current,o=i.index,u=o+e,a=u,f=!1;return s.indexOf(u)<0&&(e>0?a=s[s.length-1]:e<0?a=s[0]:a=o),a!==o&&(t=this.atIndex(a),t!==r&&(n=this.canFocusChild(t)?t:this._findFocusableNear(t),n!==r&&(f=this._positionToChild(n)))),f},_getSetupSequence:function(e,t){var n,r="summary",i="_defaultIndexResolver",s="length",o=e instanceof Array,u=this._range,a=this,f=[r];return o||t.onNext({type:"request",paths:f}),n=o?Rx.Observable.returnValue({index:a[i](e),length:e[s]}):e.get(f).select(function(e){var n,o=e&&e.value,u=o&&o[r];if(!e||e.error)n="Falkor error";else if(!u||u._error)n="Missing summary";if(n)throw{message:n,data:e};return t.onNext({type:"response",paths:e.paths,data:e}),{length:u[s],index:a[i](u)}}),n.doAction(function(e){var t=a._pathsProvider,n={length:e[s]};u.adjust(n),t&&t.adjust(n),u.setIndex(e.index)})},_getDataSequence:function(e,t){return e instanceof Array?this._range.changes.replayLast().select(function(){return e}):this._pathsProvider.changes.replayLast().selectMany(function(n){return t.onNext({type:"request",paths:n}),e.get.apply(e,n).select(function(e){if(!e||e.error)throw{message:"Falkor error",data:e};return t.onNext({type:"response",paths:e.paths,data:e}),e.value})})},_onDataSourceChanges:function(){this._range.reset(),this._positionToChild(null)},_onLoadedSequence:function(e){var t,n,r=this._cfg.behavior.selectChildOnUpdate;e.range&&(this._modifyChildren(e),this._currentChild.value||(t=this.atIndex(e.range.index),n=this.canFocusChild(t)?t:this._findFocusableNear(t),n?this._positionToChild(n,r):util.log.error(this.id+" no selectable view")))},_onRangeChanges:function(e){var t="_pathsProvider";this[t]&&this[t].setIndex(e.index)},_modifyChildren:function(e){var t,n,r,i,s,o,u="delegate",a="update",f="addAtIndex",l="dataContext",c=this._dataSource.value,h=e.range,p=e.model,d=h.removed,v=h.current,m=this._viewFactory,g=this._cfg.behavior,y=g.supportsPlaceholder,b=g.provideBoundDataSource,w=g.reuseRemoved,E={};if(d)for(r=0,s=d.length;r<s;r++)i=d[r],n=this.atIndex(i),n&&(n[u]=undefined,w?(n.hide(),this.removeRelationshipAtIndex(i),n.reset(),m.release(n)):this.removeAtIndex(i)&&n.destroy());if(v)for(r=0,s=v.length;r<s;r++)i=v[r],E.index=i,t=p[i],n=this.atIndex(i),t?(o=b?c.bind([i]):t,n?y&&n[l]!==t&&(n[l]=t,n[a](o,E)):(n=m.create(t),n[u]=this,n[a](o,E),this[f](i,n),n.show())):!n&&y&&(n=m.create(t),n[u]=this,n[a](null,E),this[f](i,n),n.show())},_positionToChild:function(e,t){var n,r,i,s,o=!0,u=!1,a=this.indexOf(e),f=this._range;return e===null?(u=o,this._scroll()):a>-1&&(r=f.index,i=f.setIndex(a),n=r!==i,s=Math.abs(r-i),n&&isNaN(i)!==o&&(u=o,this._scroll(s))),t!==!1&&this.selectChild(e),this._currentChild.value=e,u},_scroll:function(e){var t=null,n="duration",r="timingFunction",i="paging",s=this._range.index,o=this._cfg,u=o.animate,a=o.glide,f=0,l=0,c=t;s!==t&&(f=this._getPositionFor(s),u[n]&&(a[n]&&this._keyRepeater.isRepeating?(l=a[n],c=a[r]):(l=u[n],c=u[r]),e&&e>1&&u[i]&&(l=u[i][n]||l,c=u[i][r]||c))),o.layout.axis==="y"?this.translate(0,f,t,l,c):this.translate(f,0,t,l,c)},_getPositionFor:function(e){var t,n=0,r=this._cfg;return e=this._positionStrategy(e),e!=null&&!isNaN(e)&&(t=this.atIndex(e),t?n=-t[r.layout.axis]:this._currentChild.value&&util.log.warn(this.id+" missing view at index "+e)),n},_setChildAsFirstResponder:function(e){var t=e&&e.canBecomeFirstResponder()&&this.focused&&this._cfg.behavior.becomesFirstResponder;return t?e.becomeFirstResponder():!1},_findFocusableNear:function(e){var t="findFocusableTowards";return this[t](e,"right")||this[t](e,"down")||this[t](e,"left")||this[t](e,"up")||null},_onKeyRepeat:function(e){var t,n,r="key.left",i="key.right",s=nrdp.gibbon.defaultLocale,o=nrdp.gibbon.localeInfo;return o&&(t=o(s)),t&&t.direction==="rtl"&&(e===r?e=i:e===i&&(e=r)),n=this.findFocusableTowards(this.focusedChild.value,e),n&&this._positionToChild(n),!!n},_setupKeyRepeater:function(){var e="duration",t=this._cfg,n=t.key,r=t.animate,i=t.glide,s=this,o=this._onKeyRepeat,u=["key.left","key.right","key.up","key.down"],a={throttle:n.throttle,callbacks:u.reduce(function(e,t){return e[t]=o.bind(s,t),e},{})};return this._matchKey=RegExp("^("+u.join("|")+")$"),r[e]&&i[e]&&(a.repeat=i[e]-50,a.initialWait=500),new util.KeyRepeater(a)},_clearKeyRepeater:function(){this._keyRepeater&&this._keyRepeater.clear()},_onFocusedChildChanges:function(){},_findNearestValidIndex:function(e,t){var n,r,i,s,o=e&&e.length,u=0;for(u;u<o;u++){s=e[u],i=Math.abs(s-t);if(n===undefined||i<n)n=i,r=s}return r},_resolveIndexToView:function(e){var t=this._range,n=t.current,r=t.indexFor(e),i=this.atIndex(r);return i||(r=this._findNearestValidIndex(n,r),i=this.atIndex(r)),i||null}}),view2.ViewFactory=util.Class.create({_ctors:null,_pools:null,init:function(e,t,n){var r,i={};i.fallback=t;for(r in e)i[r]=e[r];this._typeSelector=n,this._ctors=i,this._pools={}},create:function(e){var t,n,r,i="fallback",s=this._typeSelector;return s?t=s(e)||i:t=e&&e.type||i,n=this._pools[t],r=n&&n.length?n.pop():new this._ctors[t],r.dataContext=e,r},release:function(e){var t,n,r="dataContext",i="fallback",s=e[r],o=this._typeSelector;o?t=o(s)||i:t=s&&s.type||i,n=this._pools[t],n||(n=this._pools[t]=[]),e[r]=undefined,n[n.length]=e},reset:function(e){var t,n,r=this._pools,i=e;if(i){t=r[i];while(t&&(n=t.pop()))n.destroy();r[i]=null}else{for(i in r)this.reset(i);this._pools={}}},destroy:function(){this.reset(),this._ctors=this._pools=null}}),util.math.range={pql:function(e,t,n){var r,i,s;Array.isArray(e)&&(n=t,t=e[e.length-1],e=e[0]);if(n){s=n-1;if(e<0||t<0||t>s||e>s)i=util.math.wrap,t=i(t,0,s),e=i(e,0,s);e>t?r=[{from:0,to:t},{from:e,to:s}]:r=[{from:e,to:t}]}else n!==0&&e<=t&&(r=[{from:e,to:t}]);return r||[]},wrap:function(e,t,n,r,i){var s,o=util.math.wrap,u=n-1,a=[],f=0;r&&(e=o(e+r,0,u)),s=o(e,0,u),i||(t=Math.min(t,n));while(f<t&&s!==a[0])a[f++]=s,s=o(s+1,0,u);return a},bound:function(e,t,n,r,i){var s=[],o=0,u=util.math.clamp(e+(r||0),0,n-1),a=u+t;i!==!1&&a>n?(u=Math.max(u-(a-n),0),a=n):a=Math.min(n,a);while(u<a)s[o++]=u++;return s},segmentWrap:function(e,t,n,r,i){var s,o=util.math,u=o.wrap,a=o.segment(e,t,i),f=a.from,l=a.to,c=n*t,h=r*t,p=0,d=[];n>0&&(f-=c,f=f<0?u(f-1,0,i):f),r>0&&(l+=h,l=l<i?l:u(l+1,0,i));if(f>l){for(s=f;s<i;s++)d[p++]=s;s=0}else s=f;for(s;s<=l;s++)d[p++]=s;return d},numberLine:function(e,t,n){var r=e-t,i=e+n,s=[],o=r;while(o<=i)s.push(o++);return s},sortRelativeToIndex:function(e,t){var n=Infinity,r=Math.abs,i=Math.min;return t.sort(function(t,s){var o=r(e-t),u=r(e-s);return n=r(i(n,o,u)),o-n<u-n?-1:1})}},util.range={},util.range.ARange=util.Class.create({index:null,current:null,size:null,offset:0,length:2147483648,get changes(){var e=!0,t=new Rx.Subject;return Object.defineProperty(this,"changes",{value:t,enumerable:e,configurable:e}),this._notifyChanges=e,t},_notifyChanges:!1,init:function(e){e&&this.adjust(e)},adjust:function(e){var t;for(t in e)this[t]=e[t];this.hasValidIndex()&&this.setIndex(this.index)},reset:function(){this.setIndex(null)},destroy:function(){var e="_notifyChanges";this.reset(),this[e]&&(this[e]=!1,delete this.changes)},clone:function(){return new this.constructor({length:this.length,size:this.size,offset:this.offset,index:this.index})},contains:function(e){return this.current?this.current.indexOf(e)>-1:!1},hasValidIndex:function(){return this.index!=null},setIndex:function(e){var t,n,r,i,s="current",o=null,u=this[s],a=o,f=o;e!==o&&(a=this.indexFor(e),isNaN(a)?a=o:(f=this.rangeFor(a),t=f.length,t>0?u?n=t!==u.length||f[0]!==u[0]:n=t>0:f=o));if(a!==this.index||n)i=this.index,r=this[s],this.index=a,this[s]=f,this._notifyChanges&&this.changes.onNext(this._changesFor(a,i,f,r,this._distance));return a},setIndexBy:function(e){var t;return this._distance=e,t=this.setIndex((this.index||0)+e),this._distance=undefined,t},_changesFor:function(e,t,n,r,i){var s,o,u,a,f,l,c,h=null,p="removed",d="length",v={index:e,lastIndex:t,target:this,current:h,added:h,removed:h,distance:i};if(e===h)v[p]=r;else{v.current=n;if(n&&n[d])if(r){s=[],o=[],u=0,a=0;for(c=0,l=n[d];c<l;c++)f=n[c],r.indexOf(f)<0&&(s[u++]=f);for(c=0,l=r[d];c<l;c++)f=r[c],n.indexOf(f)<0&&(o[a++]=f);v.added=u?s:h,v[p]=a?o:h}else v.added=n;else v[p]=r}return v}}),util.range.Bounded=util.range.ARange.extend({indexFor:function(e){return this.length>0?util.math.clamp(e,0,this.length-1):NaN},rangeFor:function(e){return util.math.range.bound(e,this.size,this.length,this.offset)}}),function(){var e=!1,t="left",n="center",r=!0,i="tile",s="right",o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASgAAAAqCAYAAAAAuMamAAAA9ElEQVR42u3XMQ6CMBSAYbgGSwknkduIFyAuLnpLowMnIHEH26RNXJ3K8A1fk6bbG/70NcMwtNEtWqMdoLI1N6lt4jH/PHwAKis9mlOglnQJIVy7rjsB1JRalAO1NKVWBgMcRemSQAECBSBQgEABCBQgUIYCCBSAQAECBSBQgEABCBSAQAECBSBQgEABCBSAQAECBSBQgEABCBSAQAECBSBQgEABCBQgUAIFCBSAQAECBSBQgEAJFCBQAP8FasuBGg0GOIAxB2pLgXqlS9/3D5ECascphHDPgXqnQE3lOwVwIJcUqOQcPcu6B1DJlre6ad/35gsYrUCs+8NRrAAAAABJRU5ErkJggg==",u="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASgAAAAqCAYAAAAAuMamAAAA7UlEQVR42u3XsUlEQRhG0fvwtWAgKNqholXIsqKofS3bgGgiaA9vTOxhJzgnm/QPPu4sx+Nxqe6q++oygNP6rp6r3TrGuK2e3ASYxEX1WJ0th8Phq7pyE2Ayv+sYwzgBMzpfxxjOAExp3bbNFYA5B0pBAQoKQEEBBgrAFw9QUAAKCkBBAQoKQEEBCgrAQAH44gEKCkBBAQoKQEEBKCjAQAH44gEKCkBBASgoQEEBKChAQQEoKAAFBRgoAF88QEEBKChAQQHMOVCf1bVTAJP5WccYu+rNLYDJ7Ndt297/Hw/VTbW4C3Aio/qoXqrXP80yi1sgFyOaAAAAAElFTkSuQmCC",a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASgAAAAqCAYAAAAAuMamAAADB0lEQVR4Xu3duUokURTG8QMiqKGZGAkm+gA+gmAiGmgkODDQMFHDiIKpZgZGQou7KIrivqC4b7jjgluD6KucqVPQTU+VsyRdfaH+wS/ourduZx9Vp07dksfHR/EkPJ8eBYACsyz6qaoiDw8P3z0KAI5Jyv39/adHAcAx73J3d6cA4CK5vb1VAHCR3NzcKAC4SK6vrxUAXCSXl5cKAC6Si4sLBQAXyfn5uQKAi+Ts7EwL4eTkJHQMAHLJ6empRun4+Fjb2tq0r68vNAYAucQCIyrr6+taV1enIqIDAwN+lT44BwAy5OjoSKMwNjamlZWVfjgZ+311dRWaBwAZcnBwoPnW09OjpaWl2XD6Sm1trba0tOjk5GTofADxJPv7+5pPXV1doTD6m7KyMu3u7g6tAyB+ZHd3V/NpY2NDGxoaQkH0Lx0dHaG1AMSL7OzsaL7ZH3V2dmpRUVE2gEZGRvTj4yNraWlJW1tbs+PFxcW6uroaWgtAfMj29rZGJZVKaXl5uR9Aw8PD/mPE3HEriiWTyWxItbe3697eXmgdAPEgW1tbGqW5uTmtqanxA8qaNYPjm5ubWlVV5QdUdXW1/0ZzcA6AeBALhKitra35BTC7YgqOmebm5uxt3vPzc2gcQDyINU8WghXPLSGDx01TU5MfUCUlJZpOp0PjAOJB7GrGJSsrK/6tnQWU3Qq+vb2F5gCIB7FAcIkVxjNF8kQi4X/dITgHQDzI8vKyuqC/v1/r6+t/azOwTlJ7ozk4F0A8yOLiokYlEz7/wzrQX15e/Mu84DoA4kEWFhY0KsEQ+ooVxnt7e/X19VUPDw9DawCID5mfn9eoBMMoV0VFhTY2NvpP956envzu8+D5AOJFrHEyStbX9Cf2NVGrOVlxLHgegPiR2dlZBQAXyczMjAKAi2R6eloBwEUyNTWlAOAisS12AcBFMjExoQDgIhkfH1cAcJGMjo4qALhIbG9wAHCR2Na7AOAiGRoa+vQoADjmXQYHB795FAAc80NSqZRJeNL2WSgAKDDLooSqyi+w9SGOBs3DagAAAABJRU5ErkJggg==",f="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASgAAAAqCAYAAAAAuMamAAAGDElEQVR42u2dzUtcZxTGXfo1fn9vIuJ/ILhykWh0NJqMWjNR21RrmmjTGPtdjI2tkxRmIaagNuKuC7WU4qAUpKXgKgWhU0UpzEIERUvbTTddlNIyPc9wXnm9TIfRXBMhT+DHON47BubCj+ec99z7plRUVKQII8LvQpQQQp4zcNFINBpNgZyG+IUQQs4gQxDUDt6cO3fu47KysvOEEPI8gYtUUDspxlb8YgghZwXjJQqKEEJBEULIWRbUhSTgxSGEPBNBHZFPaWlpQigrQsizEpQtpVpQUlJSJ1xMQJ05N46weNEIoaDckZMRky2l4uLiBsFbVFQEGi28+L1SH0dYlBUhFJTrcoKU6iEmiKiwsPCS0FxQUHBZuaLE3uMYzpFzm1RaDQlExYtICAV1orLuUE6alpqMmPLz81vz8vLahZfkPL+8duBnIMfacNzIyhJVPUVFCAXlSnoyZR1KNiQiEU6LiMcHCeXm5vrlWPfy8vJSIBAYz87OfiUnJ+dloUuOdeK4ysqIComqMUGa4sUkhII6lqAualnXpHJqVTldq66u7l9bW9s8ODiIjo6OfpaVlXVD6BNeE1n1qLC6VFTtKAFNmrJ7VJQUIRTUSQQVK+9Qmml6umLk1NPTMxyJRH6DnMDw8PDnmZmZbwpveDyeAeGmCismKnxG05QPonNIKpakWOoRQkElhWmOa++p0fSckIaCweCj3d3dv4yc4hEOh3dCodD3bW1t95GqVFKd8SRllXsUFCEUVPL9JwjKTk+P5V8iMTmByCYmJr5QSV2PI6nDnpSVonhRCaGgkhJUAwSljfGOysrK3tXV1SfHkRSYmZn5EiWfXe5pT+qStbpnUhQvKiEUVFINcq8KCuXdVQgGaWh2dvar/f39f42ABgcH51JTU8eEAF79fv/s0tLSj+b43t7eP7W1tfescs+PUQSzumelKJZ5hFBQya/g2YLCGAEkg2b4wMDA5Pb29p+WoB5YBNLS0j6Zmpr61kgqFAqtejyeW2icY3UPiQx/V1f2vCzzCKGgnqrEE7F0Y4wAK3UZGRl3a2pqHq6vr//iENRDIyk5d2xzczO22re1tfWriO12vBSlDfN6CooQCurETXIkH8w4YYxAZHNHJPWunDtaVVU1ruWdEZSR1NjCwsITU+bJZwbxWfwNTVGHvSjIkIIihIJKeg7KHjPAsCUa3FiNQ8MbaUgE9VZ6evoHUs59hJLOIamYoObn539QQf2N1CWC6pfP91plns/qQ9VRUIRQUMca1DRT5FYfCmVePxIRUpRIalgEdd8hqQdyTiAcDh9AUBsbGwdy7hDKQ3we5SIFRQgF5cpKnjVJ3ikp6lWRzOuOFHXPkhRW9MYmJye/M03yubm5VQqKEArK1ZuFrXvxME3ehua2jhs4U9SHIqcRSMrn8z1eXFw8MmZQU1PzKUs8QigoV54HZTfK9RlQzXqzMFbzuo4zqDk9Pf0NJIbGOpvkhFBQ511KUfFuGI41y5MRExrjwWDwa0lX76MU1DGDGxwzIISCck1QVh/qsMxLJKZIJPLHysrKT16vd1zl9LamJw5qEkJBuSaouM+E0tU8DG2amSg0y+9CRCjlhPeUdzQ53dHmOG91IYSCclVQzj6Uz1rNw0xUnzbLb2vDHKIawive4/eanPp4szAhFJTrgopT5pkU1aUjB5DUTYhKH1hnuKUPrutN8EwoPm6FEArqZIKy+lBmR5dmq1nuV0khSfVg9EAf+2uAmK6jHLSeqtnKB9YRQkG53Sivt1bzLlvPJ49JChJCSrJRMWEDhasQGh/5SwgF5frGnVaZd7gvnmPrqQ6ISrmm+FVMJjVx0wRCKKhT21nY7CrstSUF8UBAWJVTWbVrWjJ742FDz5Y4205RToRQUE8nqP+RVIO1kWdsvzxrl2FDi7XDcKNjO3Ru3EkIBeVqijKSqrO3QtdEFUtVDrwqpQaKiRAK6rQE5UxSF1Qyh7JKQJ0tJYeYKCdCXjBB7eCH8vLyR6f0nzkFY0vrCPHO5cUi5MUCLlJB7UBQvcZWhBByhuiFoEC38DO/EELIGQAu6o5Goyn/AXheo17R+eJLAAAAAElFTkSuQmCC";config.inAppButtons={width:296,height:42,buttonTypeRegular:{updateOnInit:e,size:{width:296,height:42},padding:{left:20},textFormat:{align:{horizontal:t,vertical:n},size:22,color:{a:255,r:153,g:153,b:153},truncateEnd:r},background:{src:""},states:{highlighted:{textFormat:{color:{a:255,r:26,g:26,b:26}},background:{src:u,x:0,y:0,width:296,height:42,align:{horizontal:n,vertical:n}}}}},buttonTypeRegularMinWidth:{updateOnInit:e,flexWidth:{min:286,max:350},size:{height:42},padding:{left:10},textFormat:{align:{horizontal:t,vertical:n},size:22,color:{a:255,r:92,g:92,b:92},truncateEnd:r},background:{left:{src:o,x:0,y:0,width:10,height:42,align:{horizontal:t,vertical:n}},center:{src:o,x:10,y:0,width:70,height:42,align:{horizontal:i,vertical:n}},right:{src:o,x:286,y:0,width:10,height:42,align:{horizontal:s,vertical:n}}},states:{highlighted:{textFormat:{color:{a:255,r:26,g:26,b:26}},background:{left:{src:u,x:0,y:0,width:10,height:42,align:{horizontal:t,vertical:n}},center:{src:u,x:10,y:0,width:70,height:42,align:{horizontal:i,vertical:n}},right:{src:u,x:286,y:0,width:10,height:42,align:{horizontal:s,vertical:n}}}}}},buttonTypeWithFocus:{updateOnInit:e,size:{width:296,height:42},padding:{left:20},textFormat:{align:{horizontal:t,vertical:n},size:22,color:{a:255,r:92,g:92,b:92},truncateEnd:r},background:{src:o,x:0,y:0,width:296,height:42,align:{horizontal:n,vertical:n}},states:{highlighted:{textFormat:{color:{a:255,r:26,g:26,b:26}},background:{src:u}}}},buttonTypeBack:{updateOnInit:e,size:{width:296,height:72},padding:{left:52,top:8},textFormat:{align:{horizontal:t,vertical:"top"},size:22,bold:r,color:{a:255,r:92,g:92,b:92},truncateEnd:r},background:{src:f,get mirror(){var t,n=nrdp.gibbon.defaultLocale,i=nrdp.gibbon.localeInfo;return i&&(t=i(n)),t&&t.direction==="rtl"?r:e},x:0,y:0,width:296,height:42,align:{horizontal:n,vertical:"top"}},states:{highlighted:{textFormat:{color:{a:255,r:26,g:26,b:26}},background:{src:a}}}}}}(),function(){var e="vertical",t="center",n=!0,r="buttonTypeWithFocus",i="inAppButtons",s="states",o="highlighted";config.dialog={width:1280,height:720,x:0,y:0,drawOrder:config.gibbon.MAX_DRAW_ORDER,id:"dialog-view",layoutDirection:e,backgroundColor:"#000000",horizontalAlign:t,opacity:.9,textContainer:{width:1280,height:370,x:0,y:0,layoutDirection:e,layoutAlign:"bottom",horizontalAlign:t},code:{textSize:18,textColor:{a:255,r:229,g:229,b:229},horizontalAlign:"right",width:400,x:800,y:625,wrap:n},cv:{width:1280,horizontalAlign:t,y:410,layout:{axis:"x",spacing:20,origin:"first-index"},behavior:{reuseRemoved:n},defaultIndex:0,position:{pageLength:3},animate:{duration:200,timingFunction:"ease-out"}},title:{width:800,textSize:36,textColor:{a:255,r:229,g:229,b:229},bold:n,wrap:n,horizontalAlign:t,padding:{left:100,right:100,bottom:0,top:0},richText:n},subTitle:{width:800,textSize:25,textColor:{a:255,r:153,g:153,b:153},wrap:n,horizontalAlign:t,padding:{left:100,right:100,bottom:0,top:5}},button:{__proto__:config[i][r],textFormat:{align:{horizontal:t,vertical:t},size:20,color:{a:255,r:153,g:153,b:153},truncateEnd:n},padding:{left:0},states:{__proto__:config[i][r][s],highlighted:{__proto__:config[i][r][s][o],textFormat:{__proto__:config[i][r][s][o].textFormat,bold:n}}}}}}(),function(e,t){var n="DIALOG_VIEW",r="DIALOG_BUTTONS",i="dialog",s="DIALOG_BUTTON_STANDARD",o=t.SINGLETON,u=t.CLASS;e.DIALOG_CARD={dependsOn:[n],value:function(e){return function(t){return new controller.DialogCardV2({viewFactory:e[n],options:t})}}},e.ERROR_DIALOG_CARD={dependsOn:[n],value:function(e){return function(t){return new controller.ErrorDialogCard({viewFactory:e[n],options:t})}}},e[n]={dependsOn:[r],value:function(e){return function(t){return new view2[i].DialogView({rendererFactory:function(e){return new view2[i].DialogRenderer(e)},buttonCollectionFactory:function(){return new e[r]},rangeFactory:function(){return new util.range.Bounded({size:9,offset:-4})},config:config[i],options:t})}}},e[s]={value:function(){return view2.controls.Button.bind(null,{config:config[i].button})}},e[r]={dependsOn:[s],value:function(e){return view2.controls.ScrollableCollection.bind(null,{config:config[i].cv,get viewFactory(){return new view2.ViewFactory({},e[s])}})}}}(config.binding,application.Binding.Type),application.AppDialog={_priority:-1,showDialog:function(e,t,n){var r,i=this._priority,s=nrdp&&nrdp.log&&nrdp.log.flush;return s&&s(),t===undefined&&(t=0),t>=i&&(r=this._getDialogCard(e),r.active&&r.onClobbered(),r.setModel(e),this._priority=t,r.active?r.show():state.raiseEvent("state.enter",r,{skipExit:n?!1:!0})),r},hide:function(){var e=this._dialogCard;e&&e.onExit()},_getDialogCard:function(e){var t="_dialogCard",n=this[t],r=this;return n||(n=application.Binding.get("DIALOG_CARD")(e),n.observable.subscribe("exit",function(e){e&&(r._priority=-1,r[t]=null,n.destroy())}),this[t]=n),n}},application.exit=function(){window.nrdp&&nrdp.exit()},util.OrderedMap=function(){var e,t,n;this._keys=[],this._values={};for(e=0,t=arguments.length;e<t;e+=2)this._keys.push(n=arguments[e]),this._values[n]=arguments[e+1]},util.OrderedMap.prototype={has:function(e){return e in this._values},getKey:function(e){return this._keys[e]},get size(){return this._keys.length},get keys(){return this._keys.slice(0)},get values(){var e=this._keys,t=this._values,n=e.length,r=[],i=0;for(;i<n;i++)r.push(t[e[i]]);return r},setValues:function(e){var t;for(t in e)e.hasOwnProperty(t)&&this.set(t,e[t])},get:function(e){return this._values[e]},set:function(e,t){var n=this._values;e in n||this._keys.push(e),n[e]=t},remove:function(e){var t,n=this._values;return e in n&&(t=this._keys,t.splice(t.indexOf(e),1),delete n[e]),value}},util.TextTemplate=util.Class.create({init:function(e){this._textTmpl=e},_parsed:!1,process:function(e){var t,n,r,i,s,o,u,a,f,l="format",c="",h=!1;this._parse(),t=this._params,r=this._tokens,n=t.keys,h=e instanceof Array,e=e||{};for(i=0,s=r.length;i<s;i++)u=r[i],o=u.key,a=t.get(o),f=h?e[i]:e[o],f=f==undefined?a.defaultValue||"":f,c+=u.prefix+(a[l]?util.localization[l](f,a[l]):f);return c+this._tail},_parse:function(){var e,t,n,r;if(this._parsed)return;n=this._params=new util.OrderedMap,r=this._tokens=[],t=this._textTmpl,delete this._textTmpl,e=0,t.replace(this._TOKENS_REGEXP,function(i,s,o,u,a,f,l){var c=i.length,h=u;r.push({key:s,prefix:t.slice(e,l)}),n.set(s,{defaultValue:f,format:h}),e=l+c}),this._tail=e<t.length?t.slice(e):"",this._parsed=!0},_TOKENS_REGEXP:/\$\{(\d+|[a-zA-Z][a-zA-Z0-9_-]+)(,([^}|]+))?(\|([^}]+))?\}/g}),util.Cache=util.KeyedObservable.extend({init:function init(e,t){init.base.call(this),this.id=e,this._cache={},this._cachePolicy=t,this._debug&&(this._hits=0,this._misses=0,this._trims=0,this._trimmed=0,this._totalAtTrim=0)},Status:util.makeEnum("ADDED","PROMOTED","REMOVED"),_debug:util.CurrentUrlParams.get("debugCaches")==="true",get maxSize(){return this._cachePolicy.maxSize},set maxSize(e){this._cachePolicy.maxSize=e,this._trim()},get:function(e){var t=this._cache[e],n=this._debug;return t!==undefined?(n&&this._hits++,this._changed(this.Status.PROMOTED,e,t)):n&&this._misses++,t},has:function(e){return e in this._cache},getAll:function(){return this._cache},getKeys:function(){return this._cachePolicy.getKeys()},put:function(e,t){var n=this._cache,r=this.Status,i=e in n?r.PROMOTED:r.ADDED;n[e]=t,this._changed(i,e,t),this._trim()},remove:function(e){var t,n=this._cache;e in n&&(t=n[e],delete n[e],this._changed(this.Status.REMOVED,e,t))},flush:function(){var e,t=this.getKeys();while(e=t[0])this.remove(e)},report:function(){},_trim:function(){var e=this._cachePolicy.trim();e&&(this._removeTrimmed(e),this.report())},_changed:function(e,t,n){var r=this._cachePolicy;switch(e){case"PROMOTED":r.touch(t,n);break;case"REMOVED":r.remove(t);break;case"ADDED":r.add(t,n)}this.hasObserversForKey(e)&&this.notify(e,t,n)},_removeTrimmed:function(e){var t,n,r,i,s,o,u=e&&e.length;if(u){this._debug&&(this._trims++,this._trimmed+=u,this._totalAtTrim+=this._cachePolicy.getKeys().length+u),t=this._cache,r=this.Status.REMOVED,n=this.hasObserversForKey(r);for(i=0;i<u;i++)s=e[i],o=t[s],delete t[s],n&&this.notify(r,s,o)}}}),util.LRUCachePolicy=util.Class.create({init:function(e,t){this._maxSize=e,this._trimPercent=t,this._keys=[]},get maxSize(){return this._maxSize},set maxSize(e){this._maxSize=e},get totalSize(){return this._keys.length},getKeys:function(){return this._keys},add:function(e){this._keys.push(e)},touch:function(e){var t=this._keys;t[t.length-1]!==e&&(t.splice(t.indexOf(e),1),t.push(e))},remove:function(e){var t=this._keys,n=t.indexOf(e);n!==-1&&t.splice(n,1)},trim:function(){var e=this._maxSize,t=this.totalSize-e;if(t>0)return t+=Math.floor(e*this._trimPercent),this.trimBy(t)},trimBy:function(e){var t,n=this._keys;if(e>0)return t=n.length,e>t&&(e=t),n.splice(0,e)}}),util.LRUCache=util.Cache.extend({init:function init(e,t,n){init.base.call(this,"LRUCache."+e,new util.LRUCachePolicy(t!=null?t:10,n||0))},trimBy:function(e){this._removeTrimmed(this._cachePolicy.trimBy(e))}}),function(){var e=new util.LRUCache("TextTemplateCache",config.textTemplate.cacheSize);util.makeTextTemplate=function(t){var n=e.get(t);return n||(n=new util.TextTemplate(t),e.put(t,n)),n}}(),util.textReplace=function(e,t){return util.makeTextTemplate(e).process(t)},util.TextLoadError=util.Error.extend({type:"TextLoadError",init:function init(e,t,n,r){init.base.call(this,t,n,r),this.locale=e}}),application.uiTextLoaded=new Rx.ReplaySubject,application.uiTextLoadInit=function(e,t){var n="startupProfiler",r="loadUiText",i="languages",s="gibbon",o="defaultLocale",u="onCompleted",a="loaded",f=function(){var e,f,l,c,h,p,d,v;util[n].time(r),e=util.localization,f=model[i].preferred,l=e.findClosestCulture(f),c=config[i],h=c.uiText,p=h.uiPrefix,l||(l=e.cultures["default"]),d=l.name,nrdp&&nrdp[s]&&nrdp[s][o]&&(nrdp[s][o]=d);if(e.localize("ui-strings",d)&&!p){t.onNext(),t[u]();return}v=util.textReplace(h.urlTemplate,{language:(p?p+".":"")+d}),util.loadScript(v,h.timeout).subscribe(function(){l[a]=c[a]=!0,e.preferCulture(d),util[n].timeEnd(r),t.onNext()},function(e){t.onError(new util.TextLoadError(d,"UI text language file failed to load",config.debugCodes.startup.uiLanguageText,e))},function(){t[u]()})};model[i][a].amb(application.started).subscribe(f,f)},application.uiTextLoadInit(application,application.uiTextLoaded),util.MessageBus.APPLICATION_EXIT="APPLICATION_EXIT",config.suspend={loaded:new Rx.ReplaySubject(1)},model.AppConfig.loaded.take(1).subscribe(function(e){var t="enabled",n={},r=util.CurrentUrlParams.get("suspendEnabled");r!==undefined&&r==="true"?n[t]=!0:r!==undefined&&r==="false"?n[t]=!1:n[t]=e.appSuspendEnabled,config.suspend.loaded.onNext(n)},NOOP,NOOP),devicebridge.EventContext={},function(e){function b(e){util.log.info("devicebridge/events/suspendChanged: "+e)}var t,n,r,i,s=!1,o="suspend",u=!0,a="addEventListener",f="suspendChanged",l="reason",c="scene",h="gibbon",p="notifyEnd",d="notifications",v="uiIntent",m="notifyStart",g="suspendComplete",y="uiQOE";t=new Rx.Subject,n=s,config[o].loaded.take(1).subscribe(function(e){e.enabled===u&&nrdp[a](f,function(e){var w=t.observers.length,E=e&&e.data,S=s,x=s,T=function(t){var n=E[o]&&(E[l]||o);b("nrdp.gibbon.scene suspendChanged fired: "+JSON.stringify(t)),nrdp[h][c].removeEventListener(f,T),i&&application[d][p](r,i,{data:{suspendEvent:e}}),r=v,i=application[d][m](r,n,{data:{suspendEvent:e}}),t&&t.data&&t.data.suspended&&(b("invoking suspendComplete"),nrdp[g]())},N=function(){var t=E[o]&&(E[l]||o);w--,b("finishSuspend: invoked, observerCount is now "+w),w<=0&&(!devicebridge.isPs4&&S===u?(nrdp[h][c][a](f,T),nrdp[h][c][o]=u):t&&(i&&application[d][p](r,i,{data:{suspendEvent:e}}),r=v,i=application[d][m](r,t,{data:{suspendEvent:e}})))};b("ENABLE_ROKU_SUSPENDMODETEST_HACKS: "+n+", event: "+JSON.stringify(e));if(E){i&&application[d][p](r,i,{data:{suspendEvent:e}});switch(E[l]){case undefined:case"":break;case"background":r=y,i=application[d][m](r,"backgrounding",{data:{suspendEvent:e}}),x=u,devicebridge.isPs4||nrdp[g]();break;case"resumeFromBackground":case"resumeFromSuspend":n||(x=u);break;default:n&&E[l]===o?b("allowing Roku SuspendModeTest hack"):b("unknown event ignored, reason ["+E[l]+"]")}x!==u&&(E[o]===u?(r=y,i=application[d][m](r,"suspending",{data:{suspendEvent:e}}),S=u,b("suspending gibbon graphics")):(r=y,i=application[d][m](r,"resuming",{data:{suspendEvent:e}}),nrdp&&nrdp[h]&&nrdp[h][c]&&nrdp[h][c][o]===u&&(b("resuming gibbon graphics"),nrdp[h][c][o]=s))),nrdp.log.flush(),t.onNext(util.extend({finishCallback:N},e)),w===0&&N()}})},NOOP),e[f]=t}(devicebridge),function(e){var t,n="exitInfo",r="storageKey",i="finishCallback";if(!nrdp)return;t={storageKey:n,flush:function(){var t=e.notifications,n=localStorage.getItem(this[r])||"[]",i=JSON.parse(n);i.forEach(function(e){t.notify(e.category,e.name,e.body)}),t.flush(),localStorage.removeItem(this[r])},append:function(e){var t=this[r],n=localStorage.getItem(this[r])||"[]",i=JSON.parse(n),s=util.extend(e,{time:Date.now()});i.push({category:"uiIntent",name:"exit",body:{data:s}}),localStorage.setItem(t,JSON.stringify(i))}},Rx.Observable.merge([e.started,devicebridge.suspendChanged.doAction(function(e){e[i]&&e[i]()}).where(function(e){var t=e&&e.data;return t&&!t.suspend})]).subscribe(function(){t.flush()},NOOP),e[n]=t}(application),function(){var e="subscribe",t="unsubscribe",n="DIALOG_HIDE",r=!0,i="device",s="capability",o="showDialog",u="MenuItemModel",a=util.MessageBus,f=a.APPLICATION_EXIT,l=function(c){c=c||{},Rx.Observable.zip([config.suspend.loaded,util.domLoaded,application.uiTextLoaded],function(e){return e})[e](function(h){var p,d,v=application.AppDialog,m=application.MessagePriority,g=config.text,y=!1,b=c.dialogOptions,w=c.shouldTrySuspend,E=c.skipExitConfirmation,S=c.exitType,x=function(){y||a[e](f,l),a[t](n,x)};a[t](f,l),p=function(){y=r,S&&application.exitInfo.append({type:"command",parameters:"exit_type="+S}),h.enabled&&w&&nrdp&&nrdp[i]&&nrdp[i][s]&&nrdp[i][s].hasSuspend?(a[e](f,l),nrdp.requestSuspend("background")):(v[o]({message:g.exitingMessage,smokedGlass:r,dialogClass:"app-exit-dialog",skipMdx:r},m.CRITICAL),application.exit())},E?p():(d=new model.MenuModel("appExit"),d.add(new model[u](g.responses.no,{confirm:function(){},id:"no"})),d.add(new model[u](g.responses.yes,{confirm:p,id:"yes"})),b=util.extend({message:g.exitDialog,buttons:d,smokedGlass:r,skipMdx:r},b),a[e](n,x),v[o](b,m.LOW))},NOOP)};a[e](f,l)}(),application.exitTypes={UI_MENU:101,UI_KEY:102,UI_CS_SCREEN:103,UI_ERROR:104,UI_ERROR_BAKED_IN:105},function(util){util.getElementByName=function(e,t){return e?e.getElementById(t):null}}(util),view2.customerservice.CustomerServiceView=view2.AView.extend({id:"CustomerServiceMenuView",uiModalView:"CustomerServiceMenuView",nonAppRootView:!0,init:function init(e){var t,n,r,i="title",s="update",o="position",u="addChildren",a="_onButtonSelected",f=e.collectionFactory(),l=e.config;this._viewCollectionFactory=e.viewCollectionFactory(),this.width=l.width,this.height=l.height,this._collectionViews=[],init.base.call(this,e),this.element.parent||(this.element.parent=gibbon.getElementById("root")),t=new view2.Text({config:l[i]}),t[s](l[i]),t.show(),t[s]({text:config.text.customerService[i]}),t[o](l[i].x,l[i].y),f.useRange(e.rangeFactory()),f[o](l.cv.x,l.cv.y),f.show(),r=this._showLegend(e),r?this[u](t,r,f):this[u](t,f),application.isErrorPage||(n=new view2.Image({config:l.logo}),n[s](l.logo),this._logo=n,this[u](n),n[o](l.logo.x,l.logo.y),n.show()),this._cv=f,this._title=t,this._cfg=l,f.selectedChild.values.where(Boolean).subscribe(this[a].bind(this),NOOP),f.focusedChild.values.where(Boolean).subscribe(this[a].bind(this),NOOP)},_showLegend:function(e){var t=this._legend,n=this._cfg;return!t&&e.legend&&(t=e.legend,t.update({actionFlags:t.ACTIONS.BACK}),t.position(t.x,t.y,config.gibbon.MAX_DRAW_ORDER-1),this._legend=t),t&&t.show(),t},setPinnedError:function(e){this._pinnedError=e},destroy:function destroy(){var e,t,n="_collectionViews",r="_title",i=this[n],s=this._cv,o=this[r];s.blur(),s.hide(),s.reset(),this.removeChildren(this._cv,this[r]),destroy.base.call(this),this._cv=this[r]=this._error=null;for(t in i)e=i[t],e&&(this.removeChild(e),e.destroy(),e=null);this[n]=[]},_onButtonSelected:function(e){var t,n="dataContext",r="_lastView",i="runDiagnostics",s=e?e[n].hint:"",o=e?e[n].data:{},u=e?e[n].type:"",a=e?e[n].id:"",f=e?e[n].hasView:!1,l=this._collectionViews,c=this._viewCollectionFactory,h=this._cfg;this[r]&&this[r].hide();if(!f){this[r]=null;return}t=l[a],t||(t=c.create({type:u}),t&&(this.addChild(t),l[a]=t,t.position(h.view.x,h.view.y))),t&&(a==="menu-network-info"&&t[i]&&t[i](this._pinnedError),t.show()),this[r]=t},_getCurrentView:function(e){return this._collectionViews[e]},getMemberInfo:function(){var e,t="CurrentUser",n="_userModel",r="geolocation",i="localization",s="storage",o=model[t].isAccountOwner;return typeof nrdp!="undefined"&&nrdp.isReady&&(model[t].loaded&&model[t].email?(this[n]={firstName:model[t].first_name,lastName:model[t].last_name,country:model[r]?model[r].country:"",language:util[i]?util[i].culture.name:""},o&&(this[n].email=model[t].email)):(e=nrdp[s].getItem(nrdp[s].NO_DEVICE_ACCOUNT,"last-user"),e!==undefined&&(this[n]=nrdp[s].getItem(e,"cs-user")))),this[n]!=undefined},generateMenuItems:function(e){var t="customerService",n="push",r=!0,i="space",s=[],o=this.getMemberInfo(),u=config[t].networkInfoEnabled,a=config[t].checkNetworkEnabled,f=config[t].exitEnabled,l=config[t].backEnabled,c=this._cfg,h=0,p=c.menu.itemHeight,d=0;e&&(this._pinnedError=e),l?(s[n]({type:"back",hasView:!1,id:"menu-back",index:d}),d++):h+=p,o?(s[n]({type:"memberInfo",hasView:r,id:"menu-member-info",index:d}),d++):h+=p,u?(s[n]({type:"networkInfo",hasView:r,id:"menu-network-info",index:d}),d++):h+=p,s[n]({type:"deviceInfo",hasView:r,index:d}),d++,s[n]({type:i,hasView:!1,id:"menu-space",index:d}),d++,a?(s[n]({type:"checkNetwork",hasView:r,id:"menu-check-network",index:d}),d++):h+=p,f?(s[n]({type:"exit",hasView:r,id:"menu-exit",index:d}),d++):h+=p,s[n]({type:"signOut",hasView:r,id:"menu-sign-out",index:d}),config[t].menu[i].height=config[t].menu[i].originalHeight+h,this._dataSource=s,this.update({dataSource:s})},_onKeyEnter:function(){var e=this;return this._cv.selectedChild.values.where(Boolean).take(1).subscribe(function(t){t&&e._selectMenuItem(t)}),!0},keyDown:function(e){var t=this._cv,n=this;e.key==="key.enter"&&this._onKeyEnter()},update:function update(e){e.dataSource?this._cv.update(e.dataSource).subscribe(NOOP,function(e){util.log.error("An error has occurred",e)},NOOP):update.base.call(this,e)},reset:function reset(){reset.base.call(this),this._cv.reset()},focus:function focus(){var e=focus.base.call(this);return e&&this._cv.focus(),e},blur:function blur(){var e=blur.base.call(this);return e&&this._cv.blur(),e},_exitNetflix:function(){var e,t,n="biepexit";application.isErrorPage&&(e=nrdp.mono()-nrdp.started,t={source:"BIEP",ui:"lruderrorpage",appid:nrdp.log.appid,nrdpSuspendState:nrdp.suspended,timeElapsed:nrdp.mono()-nrdp.started,type:n},nrdp.log.error("BIEP: User pressed exit button from more details page","UI_SCRIPT",n,t,!0,!0)),application.exit()},_signOut:function(){function u(){application.deactivate().then(application.auth.ssoDeactivate()).subscribe(function(){util.changeLocation(devicebridge.Adapter.bootURL)})}var e,t,n="MenuItemModel",r="raiseEvent",i=config.text,s=model[n],o=new model.MenuModel("Customer Service Signout");o.add(new model[n](i.responses.yes,{confirm:u})),o.add(new model[n](i.responses.no,{confirm:function(){state.activeState instanceof controller.ErrorDialogCard&&state[r]("state.exit")}})),t={message:i.customerService.signoutConfirmation,buttons:o,isDimmed:!1,id:"signout-dialog-view",uiModelView:"logout"},e=application.Binding.get("ERROR_DIALOG_CARD")(t),e.setModel(t),state[r]("state.enter",e)},_selectMenuItem:function(e){var t,n,r="runDiagnostics",i=this._cv,s=this;i.selectChild(e),n=e.dataContext.id,n==="menu-check-network"?(t=s._getCurrentView(n),t&&t[r]&&t[r]()):n==="menu-sign-out"?s._signOut():n==="menu-back"?state.raiseEvent("state.exit"):n==="menu-exit"&&s._exitNetflix()},pointerShow:function(){return this._enablePointer=!0,this.focused&&this._cv.focus(),!0},pointerHide:function(){var e=this._cv;return this._enablePointer=!1,this.focused&&e&&(e.focus(),e.selectedChild.values.where(Boolean).take(1).subscribe(function(t){t&&e.selectChild(t)})),!0},pointerUp:function(e){var t=this._cv.focusedChild.value;t&&t.isOrContains(e.target)&&this._selectMenuItem(t)},get automation(){var e="_automation",t="dataContext",n="value",r="selectedChild",i="_cv",s="_dataSource",o="_onKeyRepeat",u="focusedChild",a="selectChild",f=this;return f[e]||(f[e]={id:"customer-service",get current(){return{type:f[i][r][n][t].type,id:f[i][r][n].id,index:f[i][r][n][t].index}},get allItems(){return f[s]},moveNext:function(){f[i][o]("key.down")},movePrevious:function(){f[i][o]("key.up")},enterCurrent:function(){f._selectMenuItem(f[i][u][n])},enterMenuItem:function(e){f[i][a](e),this.enterCurrent()},selectAtIndex:function(e){f[i][a](e)},get buttonCount(){return f[s].length},get currentSideView(){return f._getCurrentView(f[i][u][n][t].id)},get isViewReady(){return f._lastView?f._lastView.ready:!1}}),f[e]}}),view2.customerservice.CustomerServiceMenuSpaceView=view2.Text.extend({id:"cs-space",get ready(){return!0},init:function init(e){var t=e.config;this._cfg=t,this.width=t.width,init.base.call(this,e)},update:function(){var e=this._cfg.textFormat,t=Object.create(e);t.text="",this._renderer.set(t).commit()},canFocus:function(){return!1}}),view2.customerservice.CustomerServiceMemberView=view2.Container.extend({id:"cs-member-info",get ready(){return this._ready},init:function init(e){var t,n,r="update",i="element-first-name",s="fields",o="makeTextTemplate",u="element-email",a="element-country",f=config.text.customerService.member,l=this._getMemberInfo(),c=[],h=e.config;this._userModel=e.userModel,this._pinnedError=e.pinnedError,init.base.call(this,e),this[r]({id:"cs-member-info",layoutDirection:"vertical"}),(l.firstName||l.lastName)&&c.push({name:i,id:i,label:f[s].name,text:util[o](f.nameTmpl).process(l)}),l.email&&c.push({name:u,id:u,label:f[s].email,text:l.email}),l.country&&c.push({name:a,id:a,label:f[s].countryLanguage,text:util[o](f.countryLanguageTmpl).process(l)}),t=c.length;for(n=0;n<t;n++)element=c[n],text=new view2.Text,text[r](h.label),text.show(),text[r]({text:element.label,id:element.name+"-label"}),this.addChild(text),text=new view2.Text,text[r](h.text),text.show(),text[r]({text:element.text,id:element.name+"-text"}),this.addChild(text);application.isRunningAutomation&&this.automation._extractFields(c),this._ready=!0},_getMemberInfo:function(){var e,t,n="CurrentUser",r="geolocation",i="localization",s="storage",o=model[n].isAccountOwner;return typeof nrdp!="undefined"&&nrdp.isReady&&(model[n].loaded&&model[n].email?(e={firstName:model[n].first_name,lastName:model[n].last_name,country:model[r]?model[r].country:"",language:util[i]?util[i].culture.name:""},o&&(e.email=model[n].email)):(t=nrdp[s].getItem(nrdp[s].NO_DEVICE_ACCOUNT,"last-user"),t!==undefined&&(e=nrdp[s].getItem(t,"cs-user")))),e},get automation(){var e="_automation",t="getElementByName",n=this;return n[e]||(n[e]={id:"customer-service-member",view:{},_extractFields:function(r){r.forEach(function(r){var i=r.name,s=i.replace("element-","").replace(/-/g,"_"),o=util[t](n.element,i+"-label").text.contents,u=util[t](n.element,i+"-text").text.contents;n[e].view[s]={label:o,value:u}})}}),n[e]}}),view2.customerservice.CustomerServiceDeviceView=view2.Container.extend({id:"cs-device-info",get ready(){return this._ready},init:function init(e){var t,n,r,i,s,o,u,a,f,l,c="update",h="push",p="esn",d="fields",v="softwareVersion",m="software-version",g="SDKVersion",y="components",b="makeTextTemplate",w="sdk-version",E="platformType",S="platformVersion",x=" - ",T="platformBuildNum",N="platform-version",C="deviceModel",k="element-",L=devicebridge.Adapter.device,A=config.text.customerService.device,O=window.mdx?window.mdx.version:"",M=window.nrdp?nrdp.nrdjs:"",_=e.config,D=[],P=!1;init.base.call(this,e),this[c]({id:"cs-device-info",layoutDirection:"vertical"}),L.ESN&&D[h]({label:A[d][p],text:L.ESN,id:p,name:p}),L[v]&&D[h]({label:A[d][v],text:L[v],id:m,name:m});if(L[g]&&L[g][y]){t=Object.create(L[g][y]),t.mdxjs=O,t.nrdjs=M,D[h]({label:A[d].netflixVersion,text:util[b](A.netflixVersionTmpl).process(t),name:w,id:w}),a=L[g][y].nrdapp;if(a){arrayVersions=a.split(".");if(arrayVersions&&arrayVersions.length){f=parseInt(arrayVersions[0],10),l=parseInt(arrayVersions[1],10);if(f<2014||f===2014&&l<2)P=!0}}if(t.platform&&!P){u=t.platform,u[E]&&(o=u[E]),u[S]&&(o?(o+=x,o+=u[S]):o=u[S]),u[T]&&(o?(o+=x,o+=u[T]):o=u[T]);for(s in u)s!==E&&s!==S&&s!==T&&(o+=x,o+=u[s]);D[h]({label:A[d][S],text:o,name:N,id:N})}else D[h]({label:A[d].sdkVersion,text:util[b](A.sdkVersionTmpl).process(t),name:N,id:N})}L[C]&&D[h]({label:A[d][C],text:L[C],name:"device-model"}),A[d].uiBuild&&D[h]({label:A[d].uiBuild,text:"20150514112537-onyx",name:"ui-build"}),i=D.length;for(s=0;s<i;s++)r=D[s],n=new view2.Text,n[c](_.label),n.show(),n[c]({text:r.label,id:k+r.name+"-label"}),this.addChild(n),n=new view2.Text,n[c](_.text),n.show(),n[c]({text:r.text,id:k+r.name+"-text"}),this.addChild(n);application.isRunningAutomation&&this.automation._extractFields(D),this._ready=!0},get automation(){var e="_automation",t="element-",n="getElementByName",r=this;return r[e]||(r[e]={id:"cs-device-info",view:{},_extractFields:function(i){i.forEach(function(i){var s=i.name,o=s.replace(t,"").replace(/-/g,"_"),u=util[n](r.element,t+s+"-label"),a=util[n](r.element,t+s+"-text");r[e].view[o]={label:u,value:a}})}}),r[e]}}),view2.customerservice.CustomerServiceExitView=view2.AView.extend({id:"cs-exit",get ready(){return this._ready},init:function init(e){init.base.call(this,e),this._ready=!0},update:function(e){e=e||{},this._renderer.set(e),this._renderer.commit()},get automation(){var e="_automation",t="getElementByName",n=this;return n[e]||(n[e]={id:"cs-default-view",get view(){var e={title:util[t](n.element,"cs-default-title").text.contents,subtitle:util[t](n.element,"cs-default-subtitle").text.contents};return e}}),n[e]}}),view2.customerservice.CustomerServiceConnectionView=view2.AView.extend({init:function init(e){init.base.call(this,e)},update:function(e){this._renderer.set(e),this._renderer.commit()}}),view2.customerservice.CustomerServiceConnectionRenderer=view2.ARenderer.extend({_connection:{success:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAjCAYAAADizJiTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODZCQ0I1NUYxN0U1MTFFMjlEQThCQ0NFRDM1MTgyMjkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODZCQ0I1NjAxN0U1MTFFMjlEQThCQ0NFRDM1MTgyMjkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4NkJDQjU1RDE3RTUxMUUyOURBOEJDQ0VEMzUxODIyOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4NkJDQjU1RTE3RTUxMUUyOURBOEJDQ0VEMzUxODIyOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PuItRfQAAAO7SURBVFjD7ZhJTxRBGIbfGhRxQ3BDwKHdxu1g4kFjYryo0bPxZqKixJ24Cy4RBQyKC+ACokaMghKNS9w17isaGEdjjLGFaNSJZ/kD5VukIUPbPcNM9ySaeHjCfN1fdz9UV31V1RBC4F/A8Q2qf8IRf7UorxMHPsJb0oRU/vQYiLiKHg0iKpTUrgZoVT/QXPkNjTmVSOOxRJJgCMdHtOo7uowSKX4JjYLNjKXi8Bf452zFUJ7rSbrZyToWPfINXUIJFL6AdvgrWhjLUCqaEZi1SgxjTi87WceibJGIqAfvfArtUAtaGEsryj9RdkWbbE+jGwhXRQ82IyxKsuAxtAodLYylHXvfoWHcNDGc+X1Jd3OrOhZlS9iiHrb9AbSyj9AZSzt2vUZTuk9MYn4WSSE9XBdlmbFEPWjbPWj7P0BnLO1gvw0MzBLTmT8hrqL73uMP1EO23IHG16kzlnbseIJA/0wxm/mqNceQ9JBX724fLX2LTijJ/JvQ9ryBzljasf1hh+RkMp54iZoAkqIdTIL/8ciil5gSUoz/mEF2+9GBOp93HVpJI3TG0g52CSvJ/iG1VHS1PHm23MWo4lcIkl+brmGa0W+6m2U5ENpQxzdcgVbcAJ2xtINdIpCaEZ2knahn4xX4Cp8jWPQCUsHfv1acwgye621Mdx2yPN92TW4tvIXPoLdfY0X+jdgkrUQ96y/Dx+Ic3PkMMhR2g9bFlVAP6WOS9aw8Ay/P6+ZrQtl4Ff7U9NgkzaJi2UkMLniIYMEjSCs4AFqzD3WS7ba8Bl4e1+2uUay/5EzSLKpaKDHvBiq23WeHt2HrPbQuKG+TTZ5XiuGM9XD5ay/AnzLEmaSVqBowKavrUc1OL+3YfJvdoArZm2/hc7g83scVScsWJf3UDflKa1gPZazk1kWWZF5MK3xhlB/V/9Ri1rf0OGpZmmS0rDxNybTwksyDIlbRBOP1q1bNUNNaThXqWB9lV+GbaOwXQZJ5aCfWPVO7bJKxOMhUsouOoG7dRchILD1BycHhJZmHUJxs7ixlWZbq15yHtGPJMfgjSTIPZpzuQi1lF1agniNZmqFkIJIk82CFG9tlS9n5ZajPPctRbcAy5U+OIMk82OHWvt5a9gDOraqFZN99zYEz01hPWkoyD+Fw8wOElezouQUo4rQ4lb8nkrFWkixTiITbX0rMsmolrjZiPjLCkI9aMh6iZtlkMoAMIgONOOppMZ4fydplEw2xXsbfxHhKxrpnEsa6ICEETzwl3djciX/m++h/URO/Adz9QG5ZFTysAAAAAElFTkSuQmCC",fail:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAjCAYAAADizJiTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODZCQ0I1NUIxN0U1MTFFMjlEQThCQ0NFRDM1MTgyMjkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODZCQ0I1NUMxN0U1MTFFMjlEQThCQ0NFRDM1MTgyMjkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4NkJDQjU1OTE3RTUxMUUyOURBOEJDQ0VEMzUxODIyOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4NkJDQjU1QTE3RTUxMUUyOURBOEJDQ0VEMzUxODIyOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pi0qqpIAAASuSURBVFjD1ZhdaBxVFMdnzkma7kc3O7s7u7M2ycbEWNHiF1il0hcRrA+CCSIURW1DrfXJFx8EP1AQhEKDbYIfbbDfSFUUq4FW6lerVWNYRGp0zUqt+K4+1M3T+L+bM+103JnOzo6iA39298459/7m3nPPPTuabduaI13X/zNycylpnYL+WuaOFCdo86pZvBofJHKusDD66RL3f1Vkw91HnKDqoh8tHv2lzIt1i7fhdw/UDbG6iXYtSMr/8yJXzpZ54UyZZycNKqFtmfhTHKBNyO8sHvsZkJCtdNriCbSnBbgJi3atlZT/SUACcMHxr5d57okM9eFeAurygw0LugRZ4rEzFi9CtlvVIu/A/V5ouQOLds0t5X/C5MpPFte9/rUSVx9N0yBskn6wYUEJMTWKpVbLbbfSbJF3emHRrtUF8hNAImTqfv7zgN26BJtw/KOA8hdFXv+DxX/W1Az4CLH3ohdWQX4IyO8BGeRbLfGpdT10OexXSMxTu6C6LEfqcJ7vngcsBrX99NnFsN0zBR5EXNeCfDAJX4906zfBfgDKSrxHB4WKk1m679sSNxAKtp8+NZuwxksGXQnbWpAt4rY60KXfBvtrOwXVZBnVDOWgygu9tBFL1fgGA/npY5On50q8EGTzESBXdul3oE81m6ugsmvpI8UoiXNzVqGh53tpE0AaALaj6PgFyDXQ1VC/WgVPfEdLT5KY1ROrJD38bIbGvyxyAzvebkfHCly97O+QOVcu1TtO+C5YNbPDzwAWG6hxCgBhNBMBMvIR6p3ZpwCLDdQ4abIdpCN5rpa79PXwuRm6JixkJ0WJG9YaTdDaDwp8FkndDtIugw/C/lbZ4RUo74aETexlnu5kgsdX0KqjJtWPm2SH0XSOdssOt6RGaCZ33NOU/ol6lKayNHC0QLVjBbLb0b4cTUrYpJzZRLumFDcoIZn3vw/IGQwcRQdyNOFNRzMxg9IUII8A8j0M6KdDeZp/t0CLQTaA3d6iNogFlHZkqf/tPNXeyZPtpz0GzRVZv+vBFD0G28YlbEPBtgNKE4B8EzP1Fgbw026DkNP1O2G/Dlo7nqKt8GkE+UwbtO1SsKFPpp1Z6jsMyDfQsZ9eXYJUyfwW6DrJlasfSdM4fBtBvrsuwPZ0coTSfoOefD1Htp9ezp6HXCOAqrbsk6Q+AtiNh3J0zs8f935DqFzvSll6lDJPPWEST/3KQXTq1dTFkM6xWJAZykrOHN6Spof2A9brj3T1+6YU3St+sdSjJWymvRjMdoSQmDW55dmdlNOrx1UbDD0M2L2Adfz35OiPe5I0LqFSkZQVGZTlqFNH3tD2LB3YtwSJ4km/XerJVgUGuY7btAO7GbAAPPcaZnIsSZtdD7kSyog9Ra1Hl0knqrgdeTpDz5W5eW7fAF3VqsBA6vHWBudht6TogQ1Juh/fb5SYHpRwSbYqUNqpR50qPyuwarOMqEFlJgwvpKMWsKb87bhCNCBtadcfO72TetSBzUgYmPKZCVGquWFT8mCmyJC2lpBR61GWwRKyTAn5HVhPemC75YGTouVBkJ3Wo+wShYD0+pPHn+IunL2DdvLeUw/bR+zvR/83L3L/LdC/AHumsnwEuc+JAAAAAElFTkSuQmCC",running:{url:"../img/connecting_spinner.mng",hash:"sha256=7760e680ad6794202a79e19fe31f4d2c275124894c212eda364c41d2818f6e70"}},get template(){var e="center";return{width:700,visible:!1,color:{r:220,g:220,b:220,a:255},layout:{direction:"vertical"},padding:{bottom:10},children:[{layout:{direction:"horizontal"},width:700,height:35,children:[{id:"connection-image",height:35,width:60,background:{src:"",align:{vertical:e}}},{id:"connection-title",height:35,width:600,text:{size:19,color:{a:255,r:153,g:153,b:153},wrap:!0,align:{vertical:e}}}]},{id:"connection-detail",width:700,text:{size:19,color:{a:255,r:153,g:153,b:153},wrap:!0,align:{vertical:e}},padding:{left:60}}]}},render:function render(){var e="getElementById",t=render.base.call(this);return this._connectionDetail=t[e]("connection-detail"),this._connectionImage=t[e]("connection-image"),this._connectionTitle=t[e]("connection-title"),t},title:{set:function(e){this._connectionTitle.textContent=e?e:""},reset:function(){this._connectionTitle.textContent=""}},detail:{set:function(e){this._connectionDetail.textContent=e?e:""},reset:function(){this._connectionDetail.textContent=""}},connection:{set:function(e){var t="success",n="background",r="_connectionImage",i="_connection",s="running";e===t?this[r][n].src=this[i][t]:e==="fail"?this[r][n].src=this[i].fail:e===s?this[r][n].src=this[i][s]:this[r][n].src=""},reset:function(){this._connectionImage.background.src=""}}}),view2.customerservice.CustomerServiceSignOutRenderer=view2.ARenderer.extend({get template(){var e="text",t="isErrorPage",n="signOut",r=!0,i=700,s=500,o=config[e],u=application[t]?config[e].reset.title:config[e][n][n],a=application[t]?config[e].reset.description:config[e][n].introDescription;return{id:"customer-service-signout",width:i,height:s,visible:!1,layout:{direction:"vertical"},children:[{width:700,text:{size:22,color:{a:255,r:153,g:153,b:153},wrap:r,bold:r},textContent:u,padding:{bottom:10}},{width:700,height:1,visible:!1,background:{color:{a:255,r:78,g:78,b:78}}},{width:700,text:{size:20,color:{a:255,r:153,g:153,b:153},wrap:r},textContent:a}]}},render:function render(){var e=render.base.call(this);return e}}),view2.customerservice.CustomerServiceExitRenderer=view2.ARenderer.extend({get template(){var e=!0,t=700,n=500,r=config.text.exitNetflix;return{id:"customer-service-exit",width:t,height:n,visible:!1,layout:{direction:"vertical"},children:[{width:700,text:{size:22,color:{a:255,r:153,g:153,b:153},wrap:e,bold:e},textContent:r.header,padding:{bottom:10}},{width:700,height:1,visible:!1,background:{color:{a:255,r:78,g:78,b:78}}},{width:700,text:{size:20,color:{a:255,r:153,g:153,b:153},wrap:e},textContent:r.description}]}},render:function render(){var e=render.base.call(this);return e}}),devicebridge.network={},devicebridge.network.Diagnostics={getInternetUrlsCount:function(){return this._getInternetDiagnoseUrls().length},getDiagnoseUrlTypes:function(){var e,t=this._getExtraNetflixDiagnoseUrls().length,n=this._getInternetDiagnoseUrls().length,r=[];e=1,t+=e;while(t--)r.push("NETFLIX");while(n--)r.push("INTERNET");return r},diagnose:function(e){var t,n,r,i,s,o="_running",u="removeEventListener",a="network",f="diagnosisStatus",l="diagnosisResult",c="errorgroup",h="ERRORGROUP",p="onNext",d="storage",v="isErrorPage",m="addEventListener",g=this,y=this.getDiagnoseUrlTypes(),b=0;e=e||"Diagnostics",t=this[o];if(!t){function w(e){g[o]=undefined,window.nrdp&&(nrdp[a][u](f,E),nrdp[a][u](l,S)),n.onError(e)}function E(e){if(e[c]===nrdp[a][h].DNS_CHECK)return;if(e[c]===nrdp[a][h].NO_IP_ADDRESS)for(i=b,s=y.length;i<s;i++)e=util.extend({},e),e.urlType=y[i],n[p](e);else e.urlType=y[b],b++,n[p](e)}function S(t){var i,s=JSON.stringify,c=window.nrdp&&nrdp.log,h=c&&c.appid,m=nrdp&&nrdp[d]&&nrdp[d].flush;g[o]=undefined,nrdp[a][u](f,E),nrdp[a][u](l,S),r&&n[p](r),n.onCompleted(),i={name:"NetworkDiagnostics",source:e,ui:"lruderrorpage",desc:t,timeElapsed:nrdp.mono()-nrdp.started,type:"networkerror",appid:h},c?c.error(s(i),null,"diagnostic",null,!0,application[v]?!0:!1):util.log.error(i),application[v]&&m&&nrdp[d].flush()}n=new Rx.Subject,this[o]=t=n.replay(),t.connect(),devicebridge.nrdpInited.subscribeIgnoreErrors(function(){var e;window.nrdp?(nrdp[a][m](f,E),nrdp[a][m](l,S),e=g._getExtraNetflixDiagnoseUrls().concat(g._getInternetDiagnoseUrls()),nrdp[a].diagnose(e)):w()},w)}return t},getInterfaceList:function(){var e=!0,t="ipv6Addresses";return devicebridge.nrdpInited.selectMany(function(){var n,r;if(!window.nrdp)throw"No NRDP";return n=nrdp.device.iflist,n.sort(function(n,i){var s=n.ipAddress?e:n[t]&&n[t].length?e:!1,o=i.ipAddress?e:i[t]&&i[t].length?e:!1;return r||(n.ifname==="lo"?r=n:i.ifname==="lo"&&(r=i)),n=(n.isDefault?2:0)+(s?1:0),i=(i.isDefault?2:0)+(o?1:0),i-n}),r&&n.splice(n.indexOf(r),1),Rx.Observable.fromArray(n)})},getDNSServers:function(){return devicebridge.nrdpInited.selectMany(function(){if(!window.nrdp)throw"No NRDP";return Rx.Observable.fromArray(nrdp.device.dnslist)})},NO_INTERNET:"no-internet",NO_NETFLIX:"no-netflix",NO_PROBLEM:"no-problem",getReadableDiagnosisResults:function(e){var t,n,r,i,s,o="nw-",u="errorgroup",a="errorcode",f=[],l=0,c=0;for(t=0,n=e.length;t<n;t++)r=e[t],r.success||(r.urlType==="NETFLIX"?l++:c++,f.push(r));return l+c===n?(s=this.NO_INTERNET,i=o+f[0][u]+"-"+f[0][a]):l?(s=this.NO_NETFLIX,i=o+f[0][u]+"-"+f[0][a]):(s=this.NO_PROBLEM,f[0]?i=o+f[0][u]+"-"+f[0][a]:i=config.debugCodes.startup.noConnectNoDiagnosis),{code:i,error:s}},_getInternetDiagnoseUrls:function(){return util.storage.getJSON(localStorage,"diagInternetUrls",["http://www.google.com","http://www.yahoo.com"])},_getExtraNetflixDiagnoseUrls:function(){return util.storage.getJSON(localStorage,"diagNflxUrls",["https://secure.netflix.com","https://api-global.netflix.com"])}},view2.customerservice.CustomerServiceNetworkView=view2.Container.extend({id:"cs-network-info",get ready(){return this._ready},init:function init(e){var t,n,r,i="update",s=this._cfg=e.config;init.base.call(this,e),this._ready=!1,this[i]({id:"cs-network-info",layoutDirection:"vertical"}),t=new view2.Text,t[i](s.pinnedError),this._error=t,n=new view2.Text({config:s.divider}),n[i](s.divider),this.addChild(t,n),this._divider=n,r=this,application.isErrorPage&&devicebridge.network.Diagnostics.diagnose("BIEP").toArray().zip(Rx.Observable.returnValue().delay(100),function(e){return e}).subscribe(r.checkDiagnosticsResults.bind(this),NOOP)},checkDiagnosticsResults:function(e){var t,n,r=config.text.networkDiagnostics.error,i=devicebridge.network.Diagnostics,s=devicebridge.isPs3,o=devicebridge.isPs4,u=i.getReadableDiagnosisResults(e);u.error===i.NO_INTERNET?s||o?t=r.noInternetPs3:t=r.noInternet:s||o?t=r.noNetflixPs3:t=r.noNetflix,n=util.makeTextTemplate(t).process([u.code]),n&&(this._error.show(),this._error.update({text:n}))},_resetContainer:function(){var e,t,n=this._items,r=n&&n.length;for(e=0;e<r;e++)t=n[e],t&&(this.removeChild(t),t.destroy(),t=null);this._items=[]},runDiagnostics:function(e){var t="_running",n=!0,r="_ready",i=!1,s="Diagnostics",o="isRunningAutomation",u="automation",a=this;if(this[t])return;this[t]=n,this._resetContainer(),e&&e.message&&(this._error.show(),this._error.update({text:e.message})),this[r]=i,devicebridge.network[s].getInterfaceList().toArray().zip(devicebridge.network[s].getDNSServers().toArray(),function(e,s){var f,l;application.isErrorPage||a._renderEnv();for(f=0,l=Math.min(e.length,3);f<l;f++)a._renderInterface(e[f]);a._renderDNSServers(s),application[o]&&a[u]._addNetworkResults(e.slice(0,Math.min(e.length,3)),s),a[t]=i,a[r]=n}).subscribe(NOOP,NOOP,function(){a[t]=i,a[r]=n,application[o]&&a[u]._completeDiagnosticResult()})},_renderInterface:function(e){var t,n,r,i,s,o,u,a="text",f="length",l="ipv6Addresses",c="Text",h="update",p="show",d="element-",v="ifname",m="addChild",g="push",y="_items",b="process",w=config[a].customerService.network,E=util.makeTextTemplate,S=this._cfg,x=0,T=0;e.physicalLayerType==="wired"?r=w.fields.wired:r=w.fields.wireless,s=e.ipAddress;if(s&&s[f]===0&&e[l]){T=e[l][f],s=null;for(x=0;x<T;x++)o=e[l][x],u=o.find("fe80"),o&&(u>0||u===-1)&&(s?s+=", ":s="",s+=o)}i=new view2[c],i[h](S.label),i[p](),i[h]({text:r,id:d+e[v]+"-label"}),this[m](i),this[y][g](i),n={connected:w.connected[s!==undefined&&s[f]>0&&e.linkConnected===1]},e.ssid?(n.ssid=e.ssid,t=E(w.connectedWifiTmpl)):t=E(w.connectedTmpl),i=new view2[c],i[h](S[a]),i[p](),i[h]({text:E(w.name)[b]([e[v]]),id:d+e[v]+"-name"}),this[m](i),this[y][g](i),i=new view2[c],i[h](S[a]),i[p](),i[h]({text:E(w.ipAddressTmpl)[b]([s]),id:d+e[v]+"-ip"}),this[m](i),this[y][g](i),i=new view2[c],i[h](S[a]),i[p](),i[h]({text:t[b](n),id:d+e[v]+"-connected"}),this[m](i),this[y][g](i),e.isDefault&&(i=new view2[c],i[h](S[a]),i[p](),i[h]({text:w["default"],id:d+e[v]+"-default"}),this[m](i),this[y][g](i))},_renderEnv:function(){var e,t,n="update",r=this._cfg,i=util.CurrentUrlParams.get("env"),s=config.text.customerService.network.fields.environment;i&&s&&(e=new view2.Text,e[n](r.label),e.show(),e[n]({text:s,id:"element-env-label"}),this.addChild(e),this._items.push(e),t=new view2.Text,t[n](r.text),t.show(),t[n]({text:i,id:"element-env-text"}),this.addChild(t),this._items.push(t))},_renderDNSServers:function(e){var t,n,r="update",i=this._cfg,s=e.length;if(s>0){n=new view2.Text,n[r](i.label),n.show(),n[r]({text:config.text.customerService.network.fields.dnsServers,id:"element-dns-label"}),this.addChild(n),this._items.push(n);for(t=0;t<s;t++)n=new view2.Text,n[r](i.text),n.show(),n[r]({text:e[t],id:"element-dns-text-"+t}),this.addChild(n),this._items.push(n)}},get automation(){var e="_automation",t="_diagnosticResultsSub",n="_results",r="interfaces",i="contents",s="text",o="getElementByName",u="element",a="element-",f="ifname",l="automation",c=this;return c[e]||(c[e]={id:"cs-network-info",_diagnosticResultsSub:new Rx.AsyncSubject,_results:{dns:{servers:[]},interfaces:[],env:{value:util.CurrentUrlParams.get("env")}},get networkResults(){return this[t]},get networkResultsSync(){return this[n]},_addNetworkResults:function(e,t){this[n].dns.servers=t,this[n][r]=e},_makeDnsViewObject:function(){var e,t={label:util[o](c[u],"element-dns-label")[s][i],items:[]};for(e=0;e<this[n].dns.servers.length;e++)t.items.push(util[o](c[u],"element-dns-text-"+e)[s][i]);return t},_makeIfaceViewObject:function(e){var t={label:util[o](c[u],a+e[f]+"-label")[s][i],name:util[o](c[u],a+e[f]+"-name")[s][i],ip:util[o](c[u],a+e[f]+"-ip")[s][i],connected:util[o](c[u],a+e[f]+"-connected")[s][i]},n=util[o](c[u],a+e[f]+"-default");return n&&(t.default=n[s][i]),t},_makeEnvViewObject:function(){var e;return{}},_completeDiagnosticResult:function(){this[n][r]=this[n][r].map(function(e){return e.view=c[l]._makeIfaceViewObject(e),e}),this[n].dns.view=c[l]._makeDnsViewObject(),this[t].onNext(this[n]),this[t].onCompleted()}}),c[e]}}),view2.customerservice.CustomerServiceCheckNetworkView=view2.Container.extend({_running:!1,id:"cs-check-network",get ready(){return this._ready},init:function init(e){var t,n,r="checkYourNetwork",i="update",s="infoContainer",o="_infoContainer",u=config.text[r],a=e.config;this._connectionFactory=e.connectionFactory,this._cfg=a,this_children=[],init.base.call(this,e),this[i]({id:"cs-check-network",layoutDirection:"vertical"}),t=new view2.Text,t[i](a.title),t.show(),t[i]({text:u[r],id:"element-title"}),this.addChild(t),this._title=t,n=new view2.Container({config:a[s]}),n[i](a[s]),n.show(),this[o]=n,this.addChild(this[o]),n.position(a[s].x,a[s].y),this._ready=!0},_resetContainer:function(){var e,t,n="_textStatus",r="removeChild",i=this._infoContainer,s=this._children,o=this[n],u=s&&s.length;if(u>0)for(e=0;e<u;e++)t=s[e],t&&(t.hide(),i[r](t),t.parent=null);this._children=[],o&&(i[r](o),this[n]=null)},_onShow:function _onShow(){var e,t=this._cfg,n=this._infoContainer;_onShow.base.call(this),this._running||(this._resetContainer(),e=new view2.Text,e.update(t.subTitle),e.show(),e.update({text:config.text.checkYourNetwork.introDescription,id:"element-subtitle"}),n.addChild(e),this._children.push(e))},destroy:function destroy(){var e="_infoContainer";this._resetContainer(),destroy.base.call(this),this.removeChildren(this[e],this._title),this[e]=this._title=null},_setInitialDiagnosticsView:function(){var e,t,n,r,i,s="checkYourNetwork",o=!0,u="update",a=config.text[s],f=util.makeTextTemplate(a.netflixServer),l=devicebridge.network.Diagnostics,c=l.getDiagnoseUrlTypes(),h=1,p=0,d=this._connectionFactory,v=this._infoContainer,m=!1,g=o,y=[];for(t=0,n=c.length;t<n;t++)g=!1,c[t]==="NETFLIX"?(r=f.process([h]),e=new d,h++,g=o):(r=a.internetConnection,m||(e=new d,g=o),m=o),e&&g&&(e.connectionType=c[t],y.push(e),e.show(),e[u]({title:r}),v.addChild(e),t===0&&e[u]({connection:"running"}));this._children=y,i=new view2.Text,i[u](this._cfg.subTitle),i.show(),i[u]({text:config.text[s].runningCheck,id:"element-status"}),v.addChild(i),this._textStatus=i},runDiagnostics:function(){var e,t,n="Diagnostics",r=!1,i="_running",s="_ready",o=!0,u="isRunningAutomation",a="automation",f="success",l="update",c="errorgroup",h="fail",p=this,d=[],v=devicebridge.network[n],m=nrdp&&nrdp.log,g=m&&m.flush,y=this._infoContainer,b=this._cfg,w=v.getInternetUrlsCount(),E=0,S=1,x=r,T=r,N="",C=this._children;if(this[i])return;this[s]=r,this[i]=o,application[u]&&p[a]._clearDiagnosticResults(),this._resetContainer(),this._setInitialDiagnosticsView(),C=this._children,devicebridge.network[n].diagnose("CustomerService").subscribe(function(n){d.push(n),n.urlType==="NETFLIX"?(e=C[E],n[f]?e[l]({connection:f}):(t="nw-"+n[c]+"-"+n.errorcode,e[l]({connection:h,detail:t})),E++,e=C[E],e&&e[l]({connection:"running"})):(e=C[E],T|=n[f],!n[f]&&e&&(N+=(x?", ":"")+"nw-"+n[c]+"-"+n.errorcode+"-"+S,e[l]({detail:N}),x=o),w--,S++,e&&w===0&&(T?e[l]({connection:f}):e[l]({connection:h}))),application[u]&&p[a]._addDiagnosticResult(n,e)},function(e){p[i]=r,p._onError(e),g&&g(),p[s]=o},function(){p[i]=r,p._onSucess(d),g&&g(),p[s]=o,application[u]&&p[a]._completeDiagnosticResult()})},_onError:function(e){var t,n="update",r="_infoContainer",i=this,s=this._cfg;i._resetContainer(),t=new view2.Text,t[n](s.subTitle),t.show(),t[n]({text:config.text.checkYourNetwork.diagnosisFailure}),i[r].addChild(t),children.push(t),t=new view2.Text,t[n](s.subTitle),t.show(),t[n]({text:e,id:"element-status"}),i[r].addChild(t),children.push(t)},_onSucess:function(e){var t,n=config.text.customerService.diagnostics.results,r=devicebridge.network.Diagnostics,i=this._textStatus,s=r.getReadableDiagnosisResults(e);s.error===r.NO_INTERNET?t=n.noInternet:s.error===r.NO_NETFLIX?t=n.noNetflix:t=n.noProblem,i&&i.update({text:t})},get automation(){var e="_automation",t="AsyncSubject",n="_diagnosticResultsSub",r="_diagnosticResults",i="getElementByName",s="element",o="_renderer",u="success",a=this;return a[e]||(a[e]={id:"customer-service-check-network",_diagnosticResultsSub:new Rx[t],_diagnosticResults:[],get lastDiagnosticResults(){return this[n]},get lastDiagnosticResultsSync(){return this[r]},runDiagnostics:function(){a.runDiagnostics()},_clearDiagnosticResults:function(){this[r]=[],this[n]=new Rx[t]},_makeViewObject:function(e){var t,n=util[i](e[o][s],"connection-image").background.src,r=util[i](e[o][s],"connection-title"),a=util[i](e[o][s],"connection-detail"),f="unknown",l=e[o]._connection;return n===l[u]?f=u:n===l.fail&&(f="fail"),t={view:e,title:r,detail:a,image:{url:n,type:f}},t},_addDiagnosticResult:function(e,t){var n={result:e,view:t};this[r].push(n)},_completeDiagnosticResult:function(){this[r]=this[r].map(function(e){return e.view=a.automation._makeViewObject(e.view),e}),this[n].onNext(this[r]),this[n].onCompleted()},get view(){var e={title:util[i](a[s],"element-title"),subtitle:util[i](a[s],"element-subtitle"),status:util[i](a[s],"element-status")};return e}}),a[e]}}),view2.customerservice.CustomerServiceSignOutView=view2.AView.extend({id:"cs-signout",get ready(){return this._ready},init:function init(e){init.base.call(this,e),this._ready=!0},update:function(e){this._renderer.set(e),this._renderer.commit()},get automation(){var e="_automation",t="getElementByName",n=this;return n[e]||(n[e]={id:"cs-default-view",get view(){var e={title:util[t](n.element,"cs-default-title").text.contents,subtitle:util[t](n.element,"cs-default-subtitle").text.contents};return e}}),n[e]}}),view2.customerservice.CustomerServiceRenderer=view2.ARenderer.extend({get template(){var e=this.width,t=this.height;return{id:"customer-service-view",width:e,height:t,visible:!1,drawOrder:config.gibbon.MAX_DRAW_ORDER-2,background:{color:{r:0,g:0,b:0,a:255}}}},render:function render(){var e=render.base.call(this);return gibbon.scene.widgets.appendChild(e),e},destroy:function destroy(){this.element.parent=undefined,destroy.base.call(this)}}),view2.legend.CustomerServiceLegendRenderer=view2.legend.LegendRenderer.extend({init:function init(){return init.base.apply(this,arguments)},get template(){var e,t=this._legendCfg,n=[],r=t.actions;return r&&r.forEach(function(r){e=t.actionTemplateFactory(r),n.push(e)}),{id:"cs-legend",width:this.width,height:this.height,visible:!1,background:{src:"",mirror:!0},layout:{direction:"horizontal",align:{horizontal:"right",vertical:"center"}},padding:{top:124,right:49},children:n}},render:function render(){var e,t=render.base.call(this),n=this._legendCfg.actions;return n&&(e={},n.forEach(function(n,r){e[n]=t.children[r]}),this._toggleElements=e),t}}),util.CurrentUrlParams.get("isTivo")?(devicebridge.isTivo=!0,devicebridge.isTivoFaked=!0):Object.defineProperty(devicebridge,"isTivo",{get:function(){return devicebridge.Adapter.device.ESNPrefix==="TIVOCHSM01"}}),util.CurrentUrlParams.get("isXbox1")?(devicebridge.isXbox1=!0,devicebridge.isXbox1Faked=!0):Object.defineProperty(devicebridge,"isXbox1",{get:function(){return devicebridge.Adapter.device.ESNPrefix==="NFXONE-02-"}}),Object.defineProperty(devicebridge,"isGameConsole",{get:function(){return devicebridge.isPs3||devicebridge.isPs4||devicebridge.isXbox360||devicebridge.isXbox1}}),function(){var e="customerService",t="key.up",n="key.down",r="key.left",i="key.right",s=!0,o="inAppButtons",u="menu",a="text",f="buttonTypeRegular",l="buttonTypeWithFocus",c=devicebridge.isXbox360||devicebridge.isTivo,h=devicebridge.isXbox360||devicebridge.isTivo,p=devicebridge.isPs3||devicebridge.isPs4,d=devicebridge.isGameConsole,v=0,m=0,g=700,y=560,b=500,w=140;config[e]={width:1280,height:720,keySequence:[t,t,n,n,r,i,r,i,t,t,t,t],get networkInfoEnabled(){return!c},get checkNetworkEnabled(){return!h},get exitEnabled(){return!p},get backEnabled(){return!d},cv:{x:90,y:145,height:580,width:300,behavior:{reuseRemoved:s},layout:{axis:"y",spacing:8,origin:"first-index"},position:{pageLength:9},animate:{duration:200,timingFunction:"ease-out"}},legend:{x:1050,y:650},logo:{width:173,height:112,x:1050,y:0,src:"http://cdn-0.nflximg.com/us/ffe/htmltvui/darwin/logo.webp"},title:{x:105,y:85,width:300,wrap:s,textSize:28,textColor:{a:255,r:153,g:153,b:153}},view:{x:500,y:145,member:{x:b,y:w,width:g,height:y,label:{width:g,textSize:22,textColor:{a:255,r:153,g:153,b:153},bold:s},text:{width:g,wrap:s,padding:{bottom:10},textSize:20,textColor:{a:255,r:153,g:153,b:153},richText:s}},device:{x:b,y:w,width:g,height:y,label:{width:g,textSize:22,textColor:{a:255,r:153,g:153,b:153},bold:s},text:{width:g,wrap:s,padding:{bottom:10},textSize:20,textColor:{a:255,r:153,g:153,b:153}}},network:{x:b,y:w,yError:w-60,width:g,height:y,label:{width:g,textSize:22,textColor:{a:255,r:153,g:153,b:153},bold:s,padding:{top:10}},text:{width:g,wrap:s,textSize:20,textColor:{a:255,r:153,g:153,b:153}},pinnedError:{width:g,textSize:20,textColor:{a:255,r:153,g:153,b:153},wrap:s,richText:s},divider:{width:g,height:1,backgroundColor:{a:255,r:78,g:78,b:78}}},checkNetwork:{x:b,y:w,width:g,height:y,title:{width:g,textSize:22,bold:s,textColor:{a:255,r:153,g:153,b:153},padding:{bottom:10}},infoContainer:{width:g,height:520,y:30,x:0,layoutDirection:"vertical"},subTitle:{textSize:20,textColor:{a:255,r:153,g:153,b:153},wrap:s},label:{width:g,textSize:22,textColor:{a:255,r:153,g:153,b:153},bold:s,padding:{top:10}},text:{width:g,wrap:s,textSize:20,textColor:{a:255,r:153,g:153,b:153}}}},menu:{itemHeight:42,back:{__proto__:config[o].buttonTypeBack,textResolver:function(){return config[a][e][u].back}},memberInfo:{__proto__:config[o][f],textResolver:function(){return config[a][e][u].member}},deviceInfo:{__proto__:config[o][f],textResolver:function(){return config[a][e][u].device}},networkInfo:{__proto__:config[o][f],textResolver:function(){return config[a][e][u].network}},checkNetwork:{__proto__:config[o][l],textResolver:function(){return config[a][e][u].diagnose}},signOut:{__proto__:config[o][l],textResolver:function(){return application.isErrorPage?config[a][e][u].reset:config[a][e][u].signout}},exit:{__proto__:config[o][l],textResolver:function(){return config[a][e][u].exitnetflix}},space:{width:250,height:120,originalHeight:120,textFormat:{align:{horizontal:"left",vertical:"center"},size:24,color:{a:255,r:153,g:153,b:153},truncateEnd:s}}}}}(),function(e,t){var n="CUSTOMER_SERVICE_VIEW",r="CUSTOMER_SERVICE_VIEW_FACTORY",i="CUSTOMER_SERVICE_MEMBER_INFO_VIEW",s="CUSTOMER_SERVICE_DEVICE_INFO_VIEW",o="CUSTOMER_SERVICE_NETWORK_INFO_VIEW",u="CUSTOMER_SERVICE_CHECK_NETWORK_VIEW",a="CUSTOMER_SERVICE_SIGN_OUT_VIEW",f="CUSTOMER_SERVICE_EXIT_VIEW",l="ViewFactory",c="CUSTOMER_SERVICE_MENU",h="CS_LEGEND_VIEW",p="customerservice",d="customerService",v="LEGEND_CONFIG",m="CHILDREN_POINTER_VIEW_FACTORY",g="CUSTOMER_SERVICE_MENU_BACK",y="bind",b="Button",w="controls",E=null,S="menu",x="CUSTOMER_SERVICE_MENU_EXIT",T="CUSTOMER_SERVICE_MENU_MEMBER_INFO",N="CUSTOMER_SERVICE_MENU_DEVICE_INFO",C="CUSTOMER_SERVICE_MENU_NETWORK_INFO",k="CUSTOMER_SERVICE_MENU_CHECK_NETWORK",L="checkNetwork",A="CUSTOMER_SERVICE_MENU_SIGN_OUT",O="signOut",M="CUSTOMER_SERVICE_MENU_SPACE",_="view",D="CUSTOMER_SERVICE_CONNECTION_VIEW",P=t.SINGLETON,H=t.CLASS;e.CUSTOMER_SERVICE_CARD={dependsOn:[n],value:function(e){return new controller.CustomerServiceCard({viewFactory:e[n]})}},e[r]={dependsOn:[i,s,o,u,a,f],value:function(e){return function(){return new view2[l]({memberInfo:e[i],deviceInfo:e[s],networkInfo:e[o],checkNetwork:e[u],signOut:e[a],exit:e[f]})}}},e[n]={dependsOn:[c,r,h],value:function(e){return function(){return new view2[p].CustomerServiceView({legend:e[h],rendererFactory:function(){return new view2[p].CustomerServiceRenderer(config[d])},collectionFactory:function(){return new e[c]},viewCollectionFactory:e[r],rangeFactory:function(){return new util.range.Bounded({size:12,offset:-4})},config:config[d]})}}},e[h]={dependsOn:[v,m],value:function(e){return new view2.legend.Legend({rendererFactory:function(e){return e=e||{},e.isCustomerService=!0,new view2.legend.CustomerServiceLegendRenderer(e)},childPointerViewFactory:e[m](),config:e[v]})}},e[g]={value:function(){return view2[w][b][y](E,{config:config[d][S].back})}},e[x]={value:function(){return view2[w][b][y](E,{config:config[d][S].exit})}},e[T]={value:function(){return view2[w][b][y](E,{config:config[d][S].memberInfo})}},e[N]={value:function(){return view2[w][b][y](E,{config:config[d][S].deviceInfo})}},e[C]={value:function(){return view2[w][b][y](E,{config:config[d][S].networkInfo})}},e[k]={value:function(){return view2[w][b][y](E,{config:config[d][S][L]})}},e[A]={value:function(){return view2[w][b][y](E,{config:config[d][S][O]})}},e[M]={value:function(){return view2[p].CustomerServiceMenuSpaceView[y](E,{config:config[d][S].space})}},e[i]={value:function(){return view2[p].CustomerServiceMemberView[y](E,{config:config[d][_].member})}},e[s]={value:function(){return view2[p].CustomerServiceDeviceView[y](E,{config:config[d][_].device})}},e[o]={value:function(){return view2[p].CustomerServiceNetworkView[y](E,{config:config[d][_].network})}},e[u]={dependsOn:[D],value:function(e){return view2[p].CustomerServiceCheckNetworkView[y](E,{connectionFactory:e[D],config:config[d][_][L]})}},e[a]={value:function(){return view2[p].CustomerServiceSignOutView[y](E,{rendererFactory:function(e){return new view2[p].CustomerServiceSignOutRenderer(e)},config:config[d][_][O]})}},e[f]={value:function(){return view2[p].CustomerServiceExitView[y](E,{rendererFactory:function(e){return new view2[p].CustomerServiceExitRenderer(e)},config:config[d][_].exit})}},e[D]={value:function(){return view2[p].CustomerServiceConnectionView[y](E,{rendererFactory:function(e){return new view2[p].CustomerServiceConnectionRenderer(e)},config:config[d][_][O]})}},e[c]={dependsOn:[g,T,N,C,k,A,M,x],value:function(e){return view2[w].ScrollableCollection[y](E,{config:config[d].cv,defaultIndexResolver:function(){var e=config[d].backEnabled,t=0;return e&&(t=1),t},get viewFactory(){return new view2[l]({back:e[g],memberInfo:e[T],deviceInfo:e[N],networkInfo:e[C],checkNetwork:e[k],signOut:e[A],space:e[M],exit:e[x]},E,function(e){return e&&e.type})}})}}}(config.binding,application.Binding.Type),function(config){var e="iconIndexes",t="legend",n="KeyAssignments",r="createIconFcn",i="center";config[t][e]={kids:3,menu:1,search:2,back:1},config[t].actionTemplateFactory=function(i){var s="legend-"+i,o=config.text[t].labels[i],u=typeof nrdpPartner=="object"&&nrdpPartner&&nrdpPartner[n]&&nrdpPartner[n]["key.cross"]==="key.back",a={menu:2,search:1,back:u?3:2};return devicebridge.isXbox360||devicebridge.isXbox1?iconIndex=this[e][i]:iconIndex=a[i],this[r](s,o,iconIndex)},config[t][r]=function(e,t,n){return devicebridge.isXbox360||devicebridge.isXbox1?{id:e,height:32,visible:!1,spacing:18,padding:{left:30,top:1},background:{src:"../img/hint-icons-xbox.webp",height:22,y:n*22,align:{vertical:i}},textContent:t,text:{size:18,lineHeight:18,color:{r:230,g:230,b:230,a:255},align:{vertical:i}}}:{id:e,height:42,visible:!1,spacing:10,padding:{left:19},background:{src:"../img/hint-icons.webp",height:14,y:n*14,align:{vertical:i}},textContent:t,text:{size:16,lineHeight:16,bold:!0,color:{r:230,g:230,b:230,a:255},align:{vertical:i}}}}}(config),errorpage={},util.CurrentUrlParams.get("isVita")?(devicebridge.isVita=!0,devicebridge.isVitaFaked=!0):devicebridge.isVita=window.navigator?navigator.userAgent.toLowerCase().indexOf("devtype=nfvita")!==-1:!1,util.DebugInfo={_MAX_CODES:5,_MAX_MSGS:1,init:function(){var e,t,n,r,i,s,o="DebugInfo",u=util.storage.getJSON(sessionStorage,o),a=new util.LRUCache(o,this._MAX_CODES);if(u){e=u.messages,t=u.codes,n=u.codesInfo;if(t)for(i=0,s=t.length;i<s;i++)r=t[i],a.put(r,n[r])}e||(e=[]),this.messages=e,this._codesCache=a},get lastMessage(){var e=this.messages;return e[e.length-1]},get codes(){return this._codesCache.getKeys()},get codesInfo(){return this._codesCache.getAll()},getCodesSince:function(e){var t,n,r,i=this._codesCache,s=i.getKeys(),o=i.getAll(),u=[];for(t=0,n=s.length;t<n;t++)r=s[t],o[r]>=e&&u.push(r)},addMessage:function(e){var t,n=this.messages;n.push(e),t=n.length-this._MAX_MSGS,t>0&&n.splice(0,t),this._store()},addCode:function(e){this._codesCache.put(e,util.Date.now()),this._store()},_store:function(){util.storage.setJSON(sessionStorage,"DebugInfo",{codes:this.codes,codesInfo:this.codesInfo,messages:this.messages})}},util.DebugInfo.init(),model.NrdpErrorParameters={_category:"%ERROR_CATEGORY%",_frameUrl:"%ERROR_FRAME_URL%",_description:"%ERROR_DESCRIPTION%",_statusCode:"%ERROR_STATUS_CODE%",_group:"%ERROR_GROUP%",_code:"%ERROR_CODE%",_url:"%ERROR_URL%",_appBootActionId:"%ERROR_ACTIONID%",_appBootText:"%ERROR_TEXT%",_appBootStage:"%ERROR_STAGE%",_mslResponseCode:"%MSL_RESPONSE_CODE%",_mslInternalCode:"%MSL_INTERNAL_CODE%",_mslMessage:"%MSL_MESSAGE%",get associatedDebugCode(){var e,t="debugCodes",n="toLowerCase",r="_appBootActionId",i="_appBootStage",s=config[t].startup,o=config[t].appBoot,u=this._category[n](),a=this._description[n]();if(u==="network")switch(this._statusCode){case"404":e=s.onBoot404;break;case"500":this._code==="20"?e=s.onHashCheckFailJS:e=s.onBoot500}else u==="script"?e=s.onBootBadJS:u==="appboot"&&(this[r]?(e=o.actionId,e+=this[r]):this[i]>0&&(e=o.standard,e+=this[i]));return Object.defineProperty(this,"associatedDebugCode",{value:e,enumerable:!0,configurable:!0}),e},get errorText(){var e="_appBootText";return!this[e]||this[e].indexOf("%")!==-1?undefined:this[e]}},view2.mixin=typeof view2.mixin=="undefined"?{}:view2.mixin,view2.PageableTextRenderer=view2.TextRenderer.extend({get currentPage(){return Math.ceil(this._textFirstLine/this._visibleLines)+1},totalPages:undefined,get _perceivedHeight(){var e=this.element;return e.height-e.padding.top-e.padding.bottom},get _totalLines(){return this.element.renderTextLines},get _textFirstLine(){return this.element.textFirstLine},get _visibleLines(){var e=this.element,t=e.text.lineHeight||e.text.size*1.2;return Math.floor(this._perceivedHeight/t)},get _maxFirstLine(){return Math.max(0,Math.ceil(this._totalLines-this._visibleLines))},get _totalPages(){return Math.ceil(this._totalLines/this._visibleLines)},init:function init(e){init.base.call(this,e),this.totalPages=new Rx.Subject},render:function render(){var e=render.base.call(this),t=this;return e.renderPropertyChange.subscribe(function(){t.totalPages.onNext(t._totalPages)}),e},page:{set:function(e){var t=this._totalPages;e>0&&e<=t&&(this.element.textFirstLine=(e-1)*this._visibleLines)},reset:function(){this.element.textFirstLine=0}}}),view2.PageableText=view2.Text.extend({get totalPages(){return this._renderer.totalPages},_rendererFactory:function(e){return new view2.PageableTextRenderer(e)}}),view2.controls.InputRenderer=view2.ARenderer.extend({_defaultTextColor:{r:0,g:0,b:0,a:0},get template(){return{id:"input",visible:!1,children:[{id:"inner",layout:{direction:"horizontal",align:{horizontal:"right"}},children:[{id:"value"},{id:"spacer",stretch:1}]},{id:"placeholder"}]}},render:function render(){var e="getElementById",t="_placeholder",n=render.base.call(this),r=this.width,i=this.height;return r&&(n.width=r),i&&(n.height=i),this._inner=n[e]("inner"),this._value=n[e]("value"),this[t]=n[e]("placeholder"),this._textStyle=this._value.text,this._placeholderTextStyle=this[t].text,n},destroy:function destroy(){destroy.base.call(this),this._value=this._textStyle=this._placeholder=this._placeholderTextStyle=undefined},id:{set:function(e){this.element.id=e},reset:function(){this.element.id=this._id}},value:{set:function(e){this._textElementSet(this._value,e),this._placeholder.visible=!e},reset:function(){this._textElementReset(this._value),this._placeholder.visible=!0}},placeholder:{set:function(e){this._textElementSet(this._placeholder,e)},reset:function(){this._textElementReset(this._placeholder)}},background:{set:function(e){e&&(this.element.background=e)},reset:function(){this.element.background={}}},drawOrder:{set:function(e){typeof e=="number"&&(this.element.drawOrder=e)},reset:function(){this.element.drawOrder=0}},cursorPosition:{set:function(e){this._value.textCursorPosition=e},reset:function(){this._value.textCursorPosition=null}},contentLayout:{set:function(e){var t="height",n=this._inner,r=this._placeholder,i=e.width,s=e[t],o=e&&e.padding,u=o&&o.left||0,a=o&&o.right||0,f=o&&o.top||0,l=o&&o.bottom||0,c=s-l-f,h=i-a-u,p=u,d=f;n.x=r.x=p,n.y=r.y=d,n[t]=r[t]=c,n.width=r.width=h},reset:function(){var e=this._inner,t=this._placeholder;e.x=t.x=0,e.y=t.y=0,e.height=t.height=null}},textFormat:{set:function(e){this._processTextFormat(this._textStyle,e)},reset:function(){this._value.text=null}},placeholderTextFormat:{set:function(e){this._processTextFormat(this._placeholderTextStyle,e)},reset:function(){this._placeholder.text=null}},_processTextFormat:function(e,t){var n="lineHeight",r="truncation",i="richText",s="cursor",o="shadow";if(t.size||t.size===0)e.size=t.size;if(t[n]||t[n]===0)e[n]=t[n];t.color&&(e.color=t.color),t.align&&(e.align=t.align),t[r]&&(e[r]=t[r]),t.wrap&&(e.wrap=t.wrap),t[i]&&(e[i]=t[i]),t[s]&&(e[s]=t[s]),e.bold=!!t.bold,t[o]&&(e[o]=t[o])}}),view2.controls.Input=view2.AView.extend({DEFAULT_STATE:"default",HIGHLIGHTED_STATE:"highlighted",DISABLED_STATE:"disabled",ERROR_STATE:"error",_rendererFactory:function(e){return new view2.controls.InputRenderer(e)},init:function init(e){var t="DEFAULT_STATE",n="rendererFactory",r=e&&e.config,i=e&&e.model,s={},o=r.id,u=r.loggingContext;e=e||{},this._cfg=r,this._model=i,o&&(this.id=o),u&&(this._focusLoggingContext=u.focus),this.state=new util.ObservableValue(this[t]),s[this[t]]=s[this.HIGHLIGHTED_STATE]=s[this.DISABLED_STATE]=s[this.ERROR_STATE]=!1,this._textFormatForState={},this._placeholderTextFormatForState={},this._placeholderForState={},this._backgroundForState={},this._paddingForState={},this._hasState=s,e[n]||(e[n]=this._rendererFactory.bind(this)),init.base.call(this,e),r&&(this._processConfig(r),r.updateOnInit!==!1&&this.update()),this._bindModel(i)},update:function(e){var t,n,r,i,s,o="value",u="cursorPosition",a="_processInputStates",f="undefined",l=e&&e.state||this.state[o]||this.DEFAULT_STATE,c=e&&e.config,h=e&&e[o],p=e&&e[u],d=this._cfg,v={};c&&this._processConfig(c),this.state[o]=l,t=this[a](l,this._textFormatForState),n=this[a](l,this._placeholderTextFormatForState),r=this[a](l,this._backgroundForState),i=this[a](l,this._placeholderForState),s=this[a](l,this._paddingForState),v={id:d.id,textFormat:t,placeholderTextFormat:n,background:r,contentLayout:{width:this.width,height:this.height,padding:s}},typeof h!==f&&(v[o]=h),typeof p!==f&&(v[u]=p),typeof i!==f&&(v.placeholder=i),this._renderer.set(v).commit()},_setStates:function(e){var t;for(t in e)this._assignStateProperties(e[t],t)},_processConfig:function(e){var t,n="position",r="loggingContext",i="_assignStateProperties",s="states";if(e){e[n]&&this[n](e[n].x,e[n].y),e.size&&this.size(e.size.width,e.size.height),e[r]&&(this._focusLoggingContext=e[r].focus),this[i](e,this.DEFAULT_STATE);if(e[s])for(t in e[s])this[i](e[s][t],t)}},_assignStateProperties:function(e,t){var n,r,i,s="_textFormatForState",o="_placeholderTextFormatForState",u="_backgroundForState",a="_paddingForState",f=util.extendDeep;this._hasState[t]=!0;for(n in e)r=e[n],i={},n=="placeholder"?this._placeholderForState[t]=r:n=="textFormat"?(f(i,this[s][t],r),this[s][t]=i):n=="placeholderTextFormat"?(f(i,this[o][t],r),this[o][t]=i):n=="background"?(f(i,this[u][t],r),this[u][t]=i):n=="padding"&&(f(i,this[a][t],r),this[a][t]=i)},_processInputStates:function(e,t){var n="DEFAULT_STATE",r=t[this[n]],i=t[e];return e==this[n]?e=i:typeof r=="object"?(e={},util.extendDeep(e,r,i)):e=i||r,e},_tryUpdate:function(e){this.state.value!==this.DISABLED_STATE&&this.update({state:e})},_bindModel:function(e){e&&e.displayValue.subscribe(this.update.bind(this))},canFocus:function canFocus(){return canFocus.base.call(this)&&this.state.value!==this.DISABLED_STATE},focus:function focus(){var e="_valueChangedWhileFocused",t=this,n=focus.base.call(this),r=this._focusLoggingContext;return n&&(this._tryUpdate(this.HIGHLIGHTED_STATE),r&&(this[e]=!1,this._valueChangedSubscription=this._model.displayValue.skip(1).take(1).subscribe(function(){t[e]=!0}),this._focusSession=application.notifications.notifyStart("uiView","focus",{data:r}))),n},canBlur:function canBlur(){return canBlur.base.call(this)&&this.state.value!==this.DISABLED_STATE},blur:function blur(){var e="_valueChangedSubscription",t=blur.base.call(this),n=this._focusLoggingContext;return t&&(this._tryUpdate(this.DEFAULT_STATE),n&&(this[e]&&(this[e].dispose(),n.dataEdited=this._valueChangedWhileFocused),application.notifications.notifyEnd(this._focusSession,{data:n}))),t},canBecomeFirstResponder:function canBecomeFirstResponder(){return canBecomeFirstResponder.base.call(this)&&this.state.value!==this.DISABLED_STATE}}),view2.mixin.ElementMixin=Object.create(Object.prototype),function(e){var t="_initEl",n="show",r="boolean",i=!0,s="position",o="update",u="function";e._initContainer=function(e,n,r){return this[t](view2.Container,e,n,r)},e._initText=function(e,n,r){return this[t](view2.Text,e,n,r)},e._initPageableText=function(e,n,r){return this[t](view2.PageableText,e,n,r)},e._initImage=function(e,n,r){return this[t](view2.Image,e,n,r)},e._initInput=function(e,n,r){return this[t](view2.controls.Input,e,n,r)},e[t]=function(e,t,a,f){var config,l;return a=a||this,f=f||{},e&&t&&(f[n]=typeof f[n]===r?f[n]:i,f[s]=typeof f[s]===r?f[s]:i,f.dim=typeof f.dim===r?f.dim:i,f[o]=typeof f[o]===r?f[o]:i,config=Object.create(t.config||{}),l=new e(t),typeof l[n]===u&&f[n]&&l[n](),typeof l[s]===u&&(config.x||config.y)&&f[s]&&l[s](config.x,config.y),typeof l.dim===u&&f.dim&&l.dim(config.dim),typeof l[o]===u&&f[o]&&l[o](config),a.addChild(l)),l}}(view2.mixin.ElementMixin),CurrentUrlParams=util.CurrentUrlParams,function(){var e="viewport",t="innerWidth",n="innerHeight";if((aspectRatio=CurrentUrlParams.get("dar"))!=null)switch(aspectRatio){case"4_3":config[e]={width:640,height:480};break;default:config[e]={width:1280,height:720}}config[e]==null&&(config[e]={width:devicebridge.hasNrdp&&window[t]?window[t]:1280,height:devicebridge.hasNrdp&&window[n]?window[n]:720}),config[e].uiWidth=1280,config[e].uiHeight=720}(),view2.RetryPageView=function(e,t,n){var r="retry",i="_loadingTextEl",s="_config",o="_spinnerEl",u="_animatedImageFactory",a="call",f="base",l="_spinner",c="loadingText",h=t.extend({id:r,width:e.uiWidth,height:e.uiHeight,_ANIMATION_STATE:r,uiModalView:r,get _loadingText(){if(!this[i]){var config=this[s];this[i]=this._initText({config:config.text})}return this[i]},get _spinner(){if(!this[o]){var config=this[s].spinner,e=this[u](config);e.position(config.x,config.y),this[o]=e}return this[o]},init:function p(e){var t=e.config,n=gibbon.getElementById("root");p[f][a](this,e),this[u]=e.animatedImageFactory,this[s]=t,this._deps=e,this.addChild(this[l]),this.update({loadingText:config.text.errorPage.retryingNow,backgroundColor:{r:0,g:0,b:0}}),this._renderer.set(t.root).commit(),this.position(0,0,t.root.drawOrder),!this.element.parent&&n&&(this.element.parent=n)},update:function(e){e=e||{},e[c]&&this._loadingText.update({text:e[c]}),this._renderer.set(e).commit()},focus:function d(){d[f][a](this)},blur:function v(){v[f][a](this)},_onShow:function m(){var e=this._transitionManager;m[f][a](this),this[l].show(),e&&(e.state=this._ANIMATION_STATE)},_onHide:function g(){g[f][a](this),this[l].hide()},destroy:function y(){y[f][a](this),this[s]=this._loadingView=undefined}}).mixin(n);return h}(config.viewport,view2.Container,view2.mixin.ElementMixin),errorpage.RetryPageCard=controller.AUiCard.extend({init:function init(e){init.base.call(this,e),this._viewFactory=e.viewFactory,this._appLoadFailedReceived=!1,init.base.call(this,e),nrdp.boot.addEventListener("appreloadfailed",this.appLoadFailed.bind(this))},_initView:function(){return this._viewFactory()},onEnter:function onEnter(e,t,n){var r="_appLoadFailedReceived";onEnter.base.call(this,e,t,n),util.log.debug("onEnter RetryPageCard this._appLoadFailedReceived "+this[r]),!e&&this[r]&&(this[r]=!1,state.raiseEvent("state.exit")),this._exitDialog=!1},actions:{"key.exit":function(){return util.log.debug("key.exit in RetryPageCard"),this._exitDialog=!0,!1}},appLoadFailed:function(){util.log.debug("Received appLoadFailed this._hasFocus:"+this._hasFocus),this._appLoadFailedReceived=!0,this._exitDialog||state.raiseEvent("state.exit"),this._exitDialog=!1}}),function(e){e.BIEP_CONFIG_LOADING={value:function(){return{root:{id:"loading"},glass:{id:"glass",backgroundColor:{r:0,g:0,b:0,a:178}},storyArt:{id:"story-art",horizontalAlign:"stretch",verticalAlign:"stretch"},text:{id:"loading-text",textSize:36,textColor:{r:178,g:178,b:178},horizontalAlign:"center",width:1280,bold:!0,x:0,y:280},spinner:{id:"spinner",src:{url:"../img/connecting_spinner.mng",hash:"sha256=7760e680ad6794202a79e19fe31f4d2c275124894c212eda364c41d2818f6e70"},width:71,height:71,x:602,y:344,maxDisplayTime:13e4},animation:{storyArt:{cycleDelay:2e3,fadeOutOpacity:.01,duration:500,ease:"ease-in-out"}}}}}}(config.binding),function(e,t){var n="RETRY_PAGE_VIEW",r="BIEP_CONFIG_LOADING",i="ANIMATED_IMAGE_FACTORY",s=t.SINGLETON,o=t.CLASS;e.RETRY_PAGE_CARD={dependsOn:[n],value:function(e){return new errorpage.RetryPageCard({viewFactory:e[n]})}},e[n]={dependsOn:[r,i],value:function(e){return function(){var t=e[r],n=e[i];return new view2.RetryPageView({config:e[r],animatedImageFactory:e[i]})}}}}(config.binding,application.Binding.Type),errorpage.ErrorPageCard=controller.DialogCardV2.extend({init:function init(e){var t,n,r,i,s,o,u="retryingBiep",a="addEventListener",f="transientData",l="biep",c="biepRemainingRetryTime",h="_biepRemainingRetryTime",p="biepRetryTime",d="options",v="appRetryCount",m="_appRetryCount",g="retryTimeStamp",y="_retryTimeStamp",b="mono",w="exponentialBackOffTime",E="_exponentialBackOffTime",S="biepInitialBackoffTime",x="MenuItemModel",T="responses",N="started",C="BIEP",k="lruderrorpage",L="suspended",A="bieptryagain",O="UI_SCRIPT",M=!0,_="biepmoredetails",D="biepexit",P="_dialogModel",H=devicebridge.isPs3,B=devicebridge.isPs4,j=devicebridge.isVita,F=devicebridge.isXbox360,I=window.ErrorParameters,q=config.text,R=this,U=nrdp.storage,z=q.errorPage[u],W=window.nrdp&&nrdp.log,X=nrdp&&nrdp.boot&&nrdp.boot[a],V=U[f]&&U[f][l]?U[f][l]:undefined;V&&V[c]?this[h]=V[c]:this[h]=nrdp.js&&nrdp.js[d][p]?nrdp.js[d][p]:1800,V&&V[v]?this[m]=V[v]:this[m]=0,V&&V[g]&&(this[y]=V[g],s=(nrdp[b]()-this[y])/1e3,this[h]=this[h]-s),V&&V[w]?this[E]=V[w]:this[E]=nrdp.js&&nrdp.js[d][S]?nrdp.js[d][S]:30,this._timeLeftForNextRetry=this[E],this._biepDisplayTimer=setTimeout(function(){R._biepDisplayTimerHandler(R[E])},1e3),init.base.call(this,e),nrdp.boot||nrdp.gibbon.loadScript({url:nrdp.bootURL}),X&&nrdp.boot[a]("appreloadfailed",this.appLoadFailed.bind(this)),nrdp.device[a]("networkchange",this.handleNetworkChange.bind(this)),t=[new model[x](q[T].retry,{dontDismissOnConfirm:!1,confirm:function(){r=nrdp[b]()-nrdp[N],i={source:C,ui:k,appid:W.appid,nrdpSuspendState:nrdp[L],retrycount:R[m],timeElapsed:nrdp[b]()-nrdp[N],remainingRetryTIme:R[h],type:A},U[f]&&U[f][l]&&delete U[f][l],nrdp.log.error("BIEP: User pressed Try again button",O,A,i,M,M),util.changeLocation(devicebridge.Adapter.bootURL)}}),new model[x](q[T].customerService,{dontDismissOnConfirm:M,confirm:function(){var e,t;if(!R._hasFocus){nrdp.log.debug("biepmoredetails ignoring since biep does not have focus");return}e=application.Binding.get("CUSTOMER_SERVICE_CARD"),R._hasDiagnosis&&(t={code:util.DebugInfo.codes[0],message:util.DebugInfo.lastMessage}),R.view().hide(),r=nrdp[b]()-nrdp[N],i={source:C,ui:k,appid:W.appid,nrdpSuspendState:nrdp[L],retrycount:R[m],timeElapsed:nrdp[b]()-nrdp[N],remainingRetryTIme:R[h],type:_},nrdp.log.error("BIEP: User pressed More details button",O,_,i,M,M),state.raiseEvent("state.enter",e,t)}})],H||j||B||t.push(new model[x](q[T].exit,{confirm:function(){r=nrdp[b]()-nrdp[N],i={source:C,ui:k,appid:W.appid,nrdpSuspendState:nrdp[L],retrycount:R[m],timeElapsed:nrdp[b]()-nrdp[N],remainingRetryTIme:R[h],type:D},nrdp.log.error("BIEP: User pressed exit button",O,D,i,M,M),application.exit()}})),this[P]=n={message:z,buttons:new model.MenuModel("id",t)},this[P].retrytime=this[E],o=q.errorPage[u],n.message=this.getErrorMessage(this[E]),this.setModel(this[P])},updateText:function(e){if(!this.view()){nrdp.log.debug("unable to update text - no view. hasFocus:"+this._hasFocus);return}this._hasFocus?this.view()._title.update({text:e}):nrdp.log.debug("BIEP has no focus: unable to update text")},onEnter:function onEnter(e,t,n){var r,i,s="stringify",o="_errorparams",u="NrdpErrorParameters",a="code",f="BIEP",l="message",c="_biepRemainingRetryTime",h="uinetworkerror",p="debug",d="getErrorMessage",v="_exponentialBackOffTime",m="<br/>",g="process",y="makeTextTemplate",b="retryingBiepCode",w="errorPage",E="error",S="UI_SCRIPT",x=null,T=!0,N="updateText",C="_timeLeftForNextRetry",k="networkDiagnostics",L="_biepDisplayTimer",A="_biepDisplayTimerHandler",O=this,M=JSON[s],_=window.nrdp&&nrdp.log,D=devicebridge.isPs3,P=devicebridge.isPs4,H=config.text,B={},j=this[o]?this[o]:model[u];onEnter.base.call(this,e,t,n),B[a]=this.getErrorText(j),r={name:"BIEP Error code",source:f,ui:"lruderrorpage",code:B[a],message:B[l],appid:_.appid,nrdpSuspendState:nrdp.suspended,retrycount:O._appRetryCount,timeElapsed:nrdp.mono()-nrdp.started,remainingRetryTIme:this[c],errorParams:j,type:h},this._exitDialog=!1,e?(nrdp.log[p]("onEnter added=true ErrorParams="+JSON[s](model[u])),B[l]=this[d](this[v]),B[l]+=m+util[y](H[w][b])[g]([B[a]]),r[l]=B[l],_[E](JSON[s](r),S,h,x,T,T),this[N](B[l])):(nrdp.log[p]("BIEP onENTER: added=false ErrorParams="+JSON[s](model[u])),this[C]>0||this[c]>0&&this[v]<=this[c]?this[C]>0?(nrdp.log[p]("BIEP onENTER: added=false timeLeftForNextRetry:"+O[C]),B[l]=this[d](O[C]),B[l]+=m+util[y](H[w][b])[g]([B[a]]),r[l]=B[l],_[E](JSON[s](r),S,h,x,T,T),this[N](B[l]),this[L]=setTimeout(function(){O[A](O[C])},1e3)):(this[C]=this[v],nrdp.log[p]("BIEP onENTER: added=false exponentialBackOffTime:"+O[v]),B[l]=this[d](this[v]),B[l]+=m+util[y](H[w][b])[g]([B[a]]),r[l]=B[l],_[E](JSON[s](r),S,h,x,T,T),this[N](B[l]),this[L]=setTimeout(function(){O[A](O[v])},1e3)):(nrdp.log[p]("Total retry time exceeded. Just show the update the dialog and return"),D||P?i=config.text[k][E].noNetflixPs3:i=config.text[k][E].noNetflix,B[l]=util[y](i)[g]([B[a]]),r[l]=B[l],_[E](JSON[s](r),S,h,x,T,T),devicebridge.network.Diagnostics.diagnose(f).toArray().zip(Rx.Observable.returnValue().delay(1800),function(e){return e}).subscribe(this.checkDiagnosticsResults.bind(this),this.diagnosticsError.bind(this)),this[N](B[l])))},onExit:function onExit(e,t,n){var r="_errorparams",i="transientData",s="_biepDisplayTimer",o="biep",u=this[r]?this[r]:model.NrdpErrorParameters,a=u&&u._category,f=nrdp.storage,l=f[i]||{};a&&(a=a.toLowerCase()),nrdp.log.debug("BIEP onExit "),this[s]&&clearTimeout(this[s]);if(a==="ui"||a==="script")l[o]={},l[o].exponentialBackOffTime=this._exponentialBackOffTime,l[o].retryTimeStamp=this._retryTimeStamp,l[o].biepRemainingRetryTime=this._biepRemainingRetryTime,l[o].appRetryCount=this._appRetryCount,f[i]=l;onExit.base.call(this,e,t,n)},actions:{"key.exit":function(){return util.log.debug("key.exit in ErrorPageCard"),this._exitDialog=!0,!1}},getErrorMessage:function(e){var t,n="network",r="isValidIpAvailable",i="process",s="makeTextTemplate",o=config.text.errorPage,u=nrdp&&nrdp[n]&&nrdp[n][r];return u&&!nrdp[n][r]()?e>1?t=util[s](o.retryingBiep_pluralNoconnection)[i]([e]):t=util[s](o.retryingBiepSingularNoconnection)[i]([e]):e>1?t=util[s](o.retryingBiep_plural)[i]([e]):t=util[s](o.retryingBiepSingular)[i]([e]),t},getErrorText:function(e){var t,n,r,i,s="debugCodes",o="network",u="isValidIpAvailable",a="toLowerCase",f="UNKNOWN_ERROR",l="ERRORGROUP",c="_code",h="_statusCode",p="_appBootActionId",d="_appBootStage",v="_mslInternalCode",m=config[s].startup,g=config[s].appBoot,y=e&&e._category,b=e&&e._description,w=nrdp&&nrdp[o]&&nrdp[o][u];return y&&(y=y[a]()),b&&(b=b[a]()),y===o?(w&&!nrdp[o][u]()?(n=nrdp[o].ERRORCODE[f],r=nrdp[o][l].NO_IP_ADDRESS):!parseInt(e[c],10)&&!0&&(parseInt(e[h],10)||0)>0?(n=e[h],r=nrdp[o][l].HTTP_ERROR):(n=e[c]?e[c]:nrdp[o].ERRORCODE[f],r=e._group?e._group:nrdp[o][l][f]),t="NW-"+r+"-"+n):y==="script"?t=m.onBootBadJS:y==="ui"?t=e[c]:y==="appboot"&&(e[p]?(t=g.actionId,t+=e[p]):e[d]>0&&(t=g.standard,t+=e[d],e[d]>=3&&e[v]&&(i=" ("+e[v]+")",t+=i))),t},_biepDisplayTimerHandler:function(){var e,t="_dialogModel",n="_errorparams",r="_biepRemainingRetryTime",i="_timeLeftForNextRetry",s="networkDiagnostics",o="message",u="makeTextTemplate",a="updateText",f="_exponentialBackOffTime",l="_retryCard",c=this[t]?this[t]:{},h=devicebridge.isPs3,p=devicebridge.isPs4,d=config.text,v=this[n]?this[n]:model.NrdpErrorParameters,m=d.errorPage.retryingBiep;that=this;if(this._exitDialog){nrdp.log.debug("biepDisplayTimerHandler: Looks like exitDialog is on top, do not update screen.");return}this[r]--,this[i]--,nrdp.log.trace("_biepDisplayTimerHandler retrying in "+this[i]+" total remaining time:"+this[r]+" seconds"),c.code=this.getErrorText(v);if(this[r]<=0){nrdp.log.debug("Total retry time exceeded. Just show the update the dialog and return"),h||p?e=config.text[s].error.noNetflixPs3:e=config.text[s].error.noNetflix,c[o]=util[u](e).process([c.code]),this[a](c[o]);return}this[i]>0?(c.retrytime=this[i],c[o]=this.getErrorMessage(c.retrytime),c[o]+="<br/>"+util[u](d.errorPage.retryingBiepCode).process([c.code]),this[a](c[o]),this._biepDisplayTimer=setTimeout(function(){that._biepDisplayTimerHandler(that[i])},1e3)):(this[f]=this[f]*2,this._retryTimeStamp=nrdp.mono(),this[l]||(this[l]=application.Binding.get("RETRY_PAGE_CARD")),this.retryAppLoad(),state.raiseEvent("state.enter",this[l]))},appLoadFailed:function(e){var t="_biepRemainingRetryTime",n=this,r=e.errorparams,i=(nrdp.mono()-this._retryTimeStamp)/1e3;this[t]=this[t]-i,nrdp.log.debug("BIEP appLoadFailed retrycount="+this._appRetryCount+" biepRemainingRetryTime "+this[t]+" retry time duration: "+i),nrdp.log.debug("BIEP: Appboot parameters received:"+JSON.stringify(e)),this._errorparams={_category:r.ERROR_CATEGORY,_frameUrl:r.ERROR_FRAME_URL,_description:r.ERROR_DESCRIPTION,_statusCode:r.ERROR_STATUS_CODE,_group:r.ERROR_GROUP,_code:r.ERROR_CODE,_url:r.ERROR_URL,_appBootActionId:r.ERROR_ACTIONID,_appBootText:r.ERROR_TEXT,_appBootStage:r.ERROR_STAGE,_mslInternalCode:r.MSL_INTERNAL_CODE}},retryAppLoad:function(){var e="_appRetryCount";this[e]++,nrdp.log.debug("BIEP Automatically retrying... appRetryCount:"+this[e]),nrdp.boot.makeAppbootRequest(this[e])},checkDiagnosticsResults:function(e){var t,n={},r=config.text.networkDiagnostics.error,i=devicebridge.network.Diagnostics,s=devicebridge.isPs3,o=devicebridge.isPs4,u=i.getReadableDiagnosisResults(e);u.error===i.NO_INTERNET?s||o?t=r.noInternetPs3:t=r.noInternet:s||o?t=r.noNetflixPs3:t=r.noNetflix,n.rawCode=u.code,n.message=util.makeTextTemplate(t).process([u.code]),this.diagnosticsComplete(n)},handleNetworkChange:function(){var e,t="network",n="isValidIpAvailable",r="debug",i="BIEP Network change",s="biepnetworkchange",o="_exponentialBackOffTime",u="_retryCard",a=window.nrdp&&nrdp.log,f=nrdp&&nrdp[t]&&nrdp[t][n];if(!this.view()){nrdp.log[r]("handleNetworkChange received. unable to update text - no view. hasFocus:"+this._hasFocus);return}if(this._exitDialog){nrdp.log[r]("handleNetworkChange: Looks like exitDialog is on top, do not update screen.");return}e={name:i,appid:a.appid,nrdpSuspendState:nrdp.suspended,retrycount:this._appRetryCount,timeElapsed:nrdp.mono()-nrdp.started,remainingRetryTIme:this._biepRemainingRetryTime,type:s},this._hasFocus?f&&nrdp[t][n]()&&(this[o]=this[o]*2,this._retryTimeStamp=nrdp.mono(),this._timeLeftForNextRetry=0,this[u]||(this[u]=application.Binding.get("RETRY_PAGE_CARD")),this.retryAppLoad(),state.raiseEvent("state.enter",this[u]),a.error(i,"UI_SCRIPT",s,e,!0,!0),nrdp.log[r]("handleNetworkChange detected Network available, retrying now")):nrdp.log[r]("BIEP has no focus: unable to update text")},diagnosticsComplete:function(e){var t=nrdp&&nrdp.log,n=t&&t.flush;e&&(this._hasDiagnosis=!0,util.DebugInfo.addMessage(e.message),util.DebugInfo.addCode(e.rawCode)),n&&(n(),util.log.debug("DiagnosticsComplete - flushing nrdp.log"))},diagnosticsError:function(e){util.log.debug("Diagnostics error: ",e),this.diagnosticsComplete()}}),util.TemplateRegistry={_templates:{},addTemplate:function(e,t){this._templates[e]=t},addTemplates:function(e){var t;for(t in e)this.addTemplate(t,e[t])},removeTemplate:function(e){delete this._templates[e]},getTemplate:function(e){return this._templates[e]},createFromTemplate:function(e){var t=this._templates[e];return t&&gibbon.Widget.create(t)}},view.BorderImageWidgetFactory=function(e,t,n){var r="width",i="height",s="padding",o="horizontal",u="stretch",a=e.src,f=e,l=e,c=t,h=t,p=c.x,d=c.y,v=f.x,m=f.y,g=v+l[r],y=m+l[i],b=Math.min(l[r]-2*p,10),w=Math.min(l[i]-2*d,10),E={};return h&&(h[r]!==undefined&&(E={},E[r]=h[r]+2*p),h[i]!==undefined&&(E||(E={}),E[i]=h[i]+2*d)),t[s]!==undefined&&(t[s].left!==undefined&&(E={x:t[s].left}),t[s].top!==undefined&&(E||(E={}),E.y=t[s].top)),{x:E.x,y:E.y,width:E[r],height:E[i],layout:{direction:"vertical"},children:[{layout:{direction:o},height:d,children:[{width:p,height:d,background:{src:a,width:p,height:d,x:v,y:m}},{stretch:1,height:d,background:{src:a,x:v+p,y:m,width:b,height:d,align:{horizontal:u}}},{width:p,height:d,background:{src:a,x:g-p,y:m,width:p,height:d}}]},{stretch:1,layout:{direction:o},children:[{width:p,background:{src:a,x:v,y:m+d,width:p,height:w,align:{vertical:u}}},{stretch:1,background:{src:a,x:v+p,y:m+d,width:b,height:w,align:{horizontal:u,vertical:u}},children:n||[]},{width:p,background:{src:a,x:g-p,y:m+d,width:p,height:w,align:{vertical:u}}}]},{layout:{direction:o},height:d,children:[{width:p,height:d,background:{src:a,x:v,y:y-d,width:p,height:d}},{stretch:1,height:d,background:{src:a,x:v+p,y:y-d,width:b,height:d,align:{horizontal:u}}},{width:p,height:d,background:{src:a,x:g-p,y:y-d,width:p,height:d}}]}]}},function(){var e="textStyles",t=view.BorderImageWidgetFactory({x:0,y:0,width:730,height:366,src:"../img/720/dialog/DialogPanel_Shadow.png"},{x:15,y:15,padding:{left:290,top:240}},[{width:700,background:{color:{r:42,g:42,b:42}},layout:{direction:"vertical"},children:[{id:"app-dialog-message-text",text:App[e].appDialogMessage,width:700,padding:{left:50,top:40,right:50},mutations:{"three-d-dialog":{text:{align:{horizontal:"center"}}}}},{id:"app-dialog-buttons",width:700},{id:"app-dialog-code",width:700,height:35,padding:{right:10},text:App[e].appDialogCode}]}]);t.id="app-dialog",t.visible=!1,t.drawOrder=config.gibbon.MAX_DRAW_ORDER,t.mutations={"three-d-dialog":{childMutations:{"app-dialog-message-text":"three-d-dialog"}}},util.TemplateRegistry.addTemplate("template-dialog",t)}(),function(){var e="addTemplate",t="TemplateRegistry",n="100%",r="MAX_DRAW_ORDER",i="gibbon",s="root";util[t][e]("template-smokedglass",{id:"app-smoked-glass",width:n,height:n,drawOrder:config[i][r]-3,background:{color:{r:0,g:0,b:0}},opacity:.6,visible:!0}),util[t][e]("template-wizard-smokedglass",{id:"app-wizard-smoked-glass",width:n,height:n,drawOrder:config[i][r]-3,background:{color:{r:0,g:0,b:0}},opacity:1,visible:!0}),util[t][e]("template-screensaver",{id:"screensaver",width:n,height:n,drawOrder:config[i][r],background:{color:{r:0,g:0,b:0,a:255}},opacity:.6,visible:!1}),errorpage.ErrorPageView=view2.dialog.DialogView.extend({id:"error-page-view",init:function o(e){gibbon.scene.start({scene:{id:s,width:n,height:n,background:{color:{r:0,g:0,b:0,a:255}}}}),o.base.call(this,e),this.element.parent=gibbon.getElementById(s)}})}(),function(e,t){var n="ERROR_PAGE_VIEW",r="DIALOG_BUTTONS",i=t.SINGLETON,s=t.CLASS;e.ERROR_PAGE_CARD={dependsOn:[n],value:function(e){return new errorpage.ErrorPageCard({viewFactory:e[n]})}},e[n]={dependsOn:[r],value:function(e){return function(){return new errorpage.ErrorPageView({rendererFactory:function(e){return new view2.dialog.DialogRenderer(e)},buttonCollectionFactory:function(){return new e[r]},rangeFactory:function(){return new util.range.Bounded({size:9,offset:-4})},config:config.dialog})}}}}(config.binding,application.Binding.Type),application.uiInfoOverlay={active:new util.ObservableValue(!1),toggle:function(){var e=this.active;e.value=!e.value}},state.ICompoundState=util.Class.create(),state.ACompoundState=state.ICompoundState.extend({id:"ACompoundState",raiseEvent:state.raiseEvent,_simpleHandleEvent:state.handleEvent,_simpleHandlesEvent:state.handlesEvent,_onStack:!1,_hasFocus:!1,get stack(){var e=this._getCurrentState();return e?[e]:[]},_updateActiveState:function(e,t,n,r,i){var s;return e.canEnter()?(e!==this&&(e.parentState=this),this.raiseEvent.subscribe(e),n&&(r||!i||!i.skipExit)&&(this._removeState(n),n.onExit(r,i,e)),e.onEnter(t,i,n),s=!0):s=!1,s},canEnter:function(){return!0},onEnter:function(e,t,n){var r=this._getCurrentState();this._onStack=!0,this._hasFocus=!0,r&&r!==this&&(r.parentState=this),this.raiseEvent.subscribe(r||this),r&&r.onEnter(e,t,n)},onExit:function(e,t,n){var r=this._getCurrentState();e&&(this._onStack=!1),this._hasFocus=!1,r&&r.onExit(e,t,n)},handleEvent:function(e,t){var n,r=this._getCurrentState();return!e.bubbling&&r&&(n=r.handleEvent(e,t)),n||(n=this._simpleHandleEvent(e,t)),n},handlesEvent:function(e,t){var n,r=this._getCurrentState();return r&&(n=r.handlesEvent(e,t)),n||(n=this._simpleHandlesEvent(e,t)),n},toDescription:function(){var e=this._getCurrentState(),t=this.id;return e&&e!==this&&(t+=": ["+(e instanceof state.ICompoundState?e.toDescription():e+"")+"]"),t},_addState:function(e){var t=e!==this;return t&&e.onAdded&&e.onAdded(),t},_removeState:function(e){var t=e!==this;return t&&e.onRemoved&&e.onRemoved(),t}}),state.StateStack=state.ACompoundState.extend({init:function init(e,t){this.id=e,this._stack=[],t&&(this.actions=util.extend({},this.actions,t)),init.base.call(this)},disallowEmpty:!1,enter:function(e,t){var n,r="_enteringNextState",i=this._getCurrentState(),s=this[r],o=!s,u=s,a=this._stack;return delete this[r],this._canEnterState(e,i)?(s?a.pop():(a.push(e),this._addState(e)),this._updateActiveState(e,o,i,u,t),n=!0):n=!1,n},exit:function(e){var t,n;return this._canExitState()&&(this._enteringNextState=!0,t=this._getCurrentState(),n=this._getNextState(),this.enter(n,e)&&delete t.parentState),t},_collapse:function(e){var t;while(t=this._getCurrentState()){if(t instanceof state.StateStack&&!t._collapse(e))return!1;if(!this.exit(e))break}return!0},_findSupportFor:function(e){var t=this._stack,n=t.length-1,r=t[n];while(n>=0){if(r.handlesEvent(e))return r;n--,r=t[n]}return null},_collapseTo:function(e,t){var n="_getCurrentState",r=this[n]();while(r&&r!==this&&r!==e){r instanceof state.StateStack&&r._collapse(t);if(!this.exit(t))break;r=this[n]()}},_collapseToAction:function(e,t,n){var r,i="_collapseTo",s=this._findSupportFor(e),o={name:e,cancelBubble:!0};return s?(this[i](s,n),r=s.handleEvent(o,[t]),r||(this.exit(n),this._collapseToAction(e,t,n))):this[i](this,n),!0},_canEnterState:function(e,t){return e.canEnter()&&e!==t},_canExitState:function(){return!this.disallowEmpty||this._stack.length>1},actions:{"state.enter":function(e,t){return this.enter(e,t)},"state.exit":function(e){return this.exit(e)}},get stack(){return this._stack},handleEvent:function(e,t){var n,r,i,s,o,u="cancelBubble";if(e.tryAll){n=e[u],r=this._stack,i=r.length,e[u]=!0;while(i--){s=r[i];if(s!==e.activeState&&(o=s.handleEvent(e,t)))return o}n||(e[u]=!1)}return this._simpleHandleEvent(e,t)},toDescription:function(){var e,t,n,r=this._stack,i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push(e instanceof state.ICompoundState?e.toDescription():e+"");return this.id+": ["+i.join(", ")+"]"},findState:function(e){var t,n=this._stack.filter(e);return n.length&&(t=n[n.length-1]),t},insertUnder:function(e,t){return this._insert(e,t)},insertAbove:function(e,t){return this._insert(e,t,1)},replace:function(e,t){return this._insert(e,t,0,!0)},_insert:function(e,t,n,r){var i=this._stack,s=i.indexOf(t),o=!1;return n=n||0,s>=0&&(r&&t.onExit(!0,null,e),s+=n,this._insertAt(e,s,r),o=!0),o},_insertAt:function(e,t,n,r){var i=this._stack,s=n?1:0,o=!1;t<i.length?(i.splice(t,s,e),this._addState(e)):this.enter(e,r)},_getNextState:function(){var e=this._stack;return e[e.length-2]||this},_getCurrentState:function(){var e=this._stack;return e[e.length-1]}}),state.RootState=state.StateStack.extend({init:function init(e,t){if(state.hasRoot)throw"Only one instance of state.Root is allowed";this.isRoot=!0,state.hasRoot=!0,init.base.call(this,e,t),state.raiseEvent.subscribe(this)}}),application.AppRootBase=state.RootState.extend({actions:{"root.collapse":function(e){return this._collapse(e)},"stack.collapseToAction":function(e,t,n){var r,i="_collapseToAction",s=this;return n&&n.immediate?this._view.preventAnimationUntil(function(){return r=s[i](e,t||{},n||{}),Rx.Observable.returnValue(UNIT)}):r=this[i](e,t||{},n||{}),r},"state.enter.root":function(e,t,n){this._insertAt(e,t||0,!1,n),this.view().viewController=this,this.disallowEmpty=!0}},keyUp:function(e){var t=!0;switch(e.key){default:return!1}},_toggleOverlay:function(){application.uiInfoOverlay.toggle()}}),config.presentations={enabled:util.CurrentUrlParams.get("enablePTrack")==="true",beaconHost:util.CurrentUrlParams.get("presentationsBeaconHost"),beaconPath:"/users/presentationtracking",maxQueueSize:100,idleDuration:5e3,errorConfig:{maxRetry:0,updateApiEndpoint:!1,refreshAuth:!1}},Rx.Observable.zip([model.AppConfig.loaded,application.environmentLoaded],NOOP).subscribe(function(){var e,t="beaconHost",n=model.AppConfig;n.fromUser&&(e=config.presentations,e[t]=e[t]||config.environment.presentationTrackingHost,e.enabled=n.presentationTrackingEnabled)},NOOP),view.APresentation=util.Observable.extend({init:function(){this.context={}},notify:function notify(e,t){if(!this._isEnabled()||!t||!t.length)return;t.forEach(this._applyContext,this),notify.base.call(this,e,t)},updateState:function(){var e=!this.currentState,t=this.inViewport;this._isEnabled()&&(t||e)&&(this._transition(),this.computeStates.apply(this,arguments))},computeStates:NOOP,inViewport:!1,enterViewport:function(){this.inViewport=!0},exitViewport:function(){delete this.inViewport,this._transition()},reset:function(){delete this.currentState,delete this.previousState,delete this.changedState,delete this.currentData,delete this.previousData,delete this.changedData},_transition:function(){var e="previousState",t="previousData",n=this[e],r=this[t],i=this.currentState,s=this.currentData;this.reset(),this[e]=i||n,this[t]=s||r},_applyContext:function(e){return util.extend(e,this.context)},_isEnabled:function(){return config.presentations.enabled}}),view.AView=util.Class.create({init:function(e){this.id=e,this._widgetCollection={},this._widgets={}},_skipShowInFocus:!1,get _cssSubject(){return gibbon.scene.widgets},visible:!1,focused:!1,show:function(){var e="_showMutation",t=this._cssSubject;this.visible=!0,t&&this[e]&&(t.mutation=this[e]),this._render()},hide:function(){var e="_hideMutation",t=this._cssSubject;this.visible=!1,this.blur(),t&&this[e]&&(t.mutation=this[e])},focus:function(){this.focused=!0,this._skipShowInFocus||this.show(),this._hasUpdateLegend&&this._updateLegend()},blur:function(){this.focused=!1},presentation:new view.APresentation,destroy:NOOP,toString:function(){return this.id},_hasUpdateLegend:!1,_getWidget:function(e){var t="_widgetCollection";return this[t][e]||(this[t][e]=gibbon.getElementById(e)),this[t][e]}}),view.ExperienceMenuView=view.AView.extend({_focusClassName:"experienceMenu-focus",_visibleClassName:"experienceMenu-visible",_isDirty:!0,_menuItemEls:null,_model:null,_idx:0,setPosition:function(e){this._transferClass(this._idx,e,"focus"),this._idx=e},commitSelection:function(){},init:function init(e,t){this._model=t,init.base.call(this,e)},destroy:NOOP,_getDomView:NOOP,_render:NOOP,_getListEl:NOOP,_getMenuItemEls:NOOP,_MAX_LIST_DEPTH:8,_transferClass:NOOP}),util.AIndexManager=util.KeyedObservable.extend({init:function(e,t){this._length=e,t!=null&&(this._defaultIdx=t)},_idx:null,_length:null,_defaultIdx:0,setLength:function(e){return this.updateLength(e),this.setIndex(this._idx)},updateLength:function(e){var t=e!==this._length;return t&&(this._length=e),t},get index(){var e=this._idx;return e!==null?e:this._defaultIdx},get length(){return this._length||0},get hasValidIndex(){var e=this._idx;return e!=null&&!isNaN(e)},get hasValidLength(){var e=this._length;return e!=null&&!isNaN(e)},setIndex:function(e){var t,n=null,r=this._idx;return typeof e!="number"||!this._length?n:(t=this._bound(e),t===n?n:(this.lastSetIndexBounded=e!==t,r!==t?(this._idx=t,this.notify("idx_changed",t,r),!0):!1))},increment:function(){this.setIndex(this._idx+1)},decrement:function(){this.setIndex(this._idx-1)},_bound:function(e){return e>=0&&e<this._length?e:null},invalidateIndex:function(){delete this._idx},reset:function(){delete this._length,delete this._idx}}),util.BoundedLinearIndexManager=util.AIndexManager.extend({_bound:function(e){return util.mathBound(e,0,this._length-1)}}),controller.ExperienceMenuCard=controller.AUiCard.extend({_focusIdx:0,_model:null,_idxMgr:null,id:"ExperienceMenuCard",_initLazy:function(){var e,t,n=location.href,r=new util.UrlParams(n),i=application.Binding.get("UI_EXPERIENCE"),s=i.EXPERIENCE,o=n.match(/^.*\/([a-z0-9_\-]+\.html?)/i)[1],u=[];for(e in s)t=i.getPath(e),o===t&&u.push({title:e,url:r.add("exp",e)+""});this._model=u,this._idxMgr=new util.BoundedLinearIndexManager(u.length),this._initLazy=NOOP},onEnter:function onEnter(e,t){this._initLazy(),onEnter.base.call(this,e,t)},onExit:function onExit(e,t){e&&this._setIndex(0),onExit.base.call(this,e,t)},actions:{"key.up":function(){this._setIndex(this._focusIdx-1)},"key.down":function(){this._setIndex(this._focusIdx+1)},"key.left":function(){return this.actions["key.back"].call(this)},"key.right":function(){return this.actions["key.back"].call(this)},"key.enter":function(){return this._commitSelection()},"key.back":function(){this._exit()},"key.0":function(){return this.actions["key.back"].call(this)}},_initView:function(){var e="ExperienceMenuView";return new view[e](e,this._model)},_setIndex:function(e){var t=this._idxMgr;t.setIndex(e),e=t.index,e!==this._focusIdx&&(this._focusIdx=e,this.view().setPosition(e))},_exit:function(){return state.raiseEvent("state.exit"),!0},_commitSelection:function(){this.view().commitSelection(),location.href=this._model[this._focusIdx].url}}),controller.ExperienceMenuCard=new controller.ExperienceMenuCard,application.AppRoot=new application.AppRootBase("application.AppRoot",{"key.debug_menu":function(){this._toggleOverlay()},"key.time":function(){this._toggleOverlay()},"key.display":function(){this._toggleOverlay()},"key.0":function(){config.isDebugBuild&&state.raiseEvent("state.enter",controller.ExperienceMenuCard)},"key.exit":function(){return state.raiseEvent("app.exitRequested",{exitType:application.exitTypes.UI_KEY})},"key.power":function(){return state.raiseEvent("app.exitRequested",{skipExitConfirmation:!0})},"app.exitRequested":function(e){var t=util.MessageBus;return t.notify(t.APPLICATION_EXIT,e),!0}}),errorpage.ErrorPageRoot=application.AppRoot,function(){var e,t="subscribe",n=util.KeyHistory,r=util.MessageBus,i=state.raiseEvent,s=!1,o=!0,u={"key.left":o,"key.right":o,"key.up":o,"key.down":o,"key.backspace":o,"key.fastfwd":o,"key.rewind":o,"key.l1":o,"key.l2":o,"key.r1":o,"key.r2":o},a={};model.AppConfig.loaded[t](function(t){var n=t.ignoreQuickSuccessionKeys,r=n?n.length:0;while(r)a[n[--r]]=o;e=util.CurrentUrlParams.has("simulateModalPointer")?application.Binding.get("EVENT_DISPATCHER"):null},NOOP),r[t](r.EVENTS.SCREENSAVER_CHANGE,function(e){s=e}),application.keydown[t](function(t){var r,o=t.code,f=t.key;f&&!a[f]&&(n.update(f),r=(u[f]||!n.isHeldOrStuck())&&!n.isRapidOffAxis(),!s&&r&&(e&&f!=="key.back"&&e.simulatePointerHide(),i(f,f,o,{isRepeat:t.repeat,name:f,code:o})))},NOOP)}(),util.css={add:function(e,t){e&&!this.has(e,t)&&(e.className+=e.className?" "+t:t)},addAll:function(e,t){var n,r;if(e){if(t.length===1)return this.add(e,t[0]);n=e.className,r=this._addAll(n,t),r!==n&&(e.className=r)}},swap:function(e,t,n){var r=e.className,i=this._remove(r,n);i!==r?e.className=this._add(i,t):this.add(e,t)},swapAll:function(e,t,n){var r,i;if(t.length===1&&n.length===1)return this.swap(e,t[0],n[0]);i=r=e.className,r&&(r=this._removeAll(r,n)),r=this._addAll(r,t),r!==i&&(e.className=r)},swapCond:function(e,t,n){n?this.add(e,t):this.remove(e,t)},remove:function(e,t){var n=e?e.className:null;if(!n)return;t=this._remove(n,t),t!==n&&(e.className=t)},removeAll:function(e,t){var n,r=e?e.className:null;if(!r)return;n=this._removeAll(r,t),n!==r&&(e.className=n)},has:function(e,t){return this._has(e.className,t)},_add:function(e,t){return this._has(e,t)?e:e+(e?" "+t:t)},_addAll:function(e,t){var n,r,i,s;if(!e)return t.join(" ");n=[e],r=0,i=t.length;for(;r<i;r++){s=t[r];if(this._has(e,s))continue;n.push(s)}return n.join(" ")},_removeAll:function(e,t){var n,r;for(n=0,r=t.length;n<r;n++)e=this._remove(e,t[n]);return e},_remove:function(e,t){var n=e.replace(this._regExp(t),"$1"),r=n.length-1;return n[r]===" "?n.substr(0,r):n},_has:function(e,t){return this._regExp(t).test(e)},_regExp:function(e){return RegExp("(^|\\s+)"+e+"(?:$|\\s+)","g")}},application.startup={},util.MessageBus.EVENTS.CUSTOMER_SERVICE_ACTIVE="CUSTOMER_SERVICE_ACTIVE",config.keySequence={maxDelay:1e4},util.KeySequence=function(e,t){this._keyHistory=[],this._keySequence=e,this._action=t,this._timeout=new util.Timeout(this.resetSequence,config.keySequence.maxDelay,this),this._keyHandler=this._handleKeyEvent.bind(this)},util.KeySequence.prototype={activate:function(){this._keyEventSubscription=application.keydown.subscribe(this._keyHandler)},deactivate:function(){var e="_keyEventSubscription";this.resetSequence(),this[e]&&this[e].dispose()},resetSequence:function(){this._keyHistory.splice(0)},_handleKeyEvent:function(e){var t,n,r,i="length",s=this._timeout,o=util.Keys.getKeyName(e.which),u=this._keySequence,a=u[i],f=this._keyHistory;s.clear(),f.push(o),n=f[i],r=n-a,r>0&&(f.splice(0,r),n=f[i]);for(t=0;t<n;t++)if(f[t]!=u[t])break;t==a?(this.resetSequence(),this._action()):s.run()}},function(){var e="MessageBus",t=!1;util[e].subscribe(util[e].EVENTS.CUSTOMER_SERVICE_ACTIVE,function(e){t=e}),application.showCustomerService=function(){t||(t=!0,Rx.Observable.zip([util.domLoaded,application.uiTextLoaded],NOOP).subscribe(function(){state.raiseEvent("state.enter",application.Binding.get("CUSTOMER_SERVICE_CARD"))},NOOP))}}(),application.startup.startCustomerService=function(e){var t=new util.KeySequence(e,function(){application.showCustomerService()});t.activate()},application.stopPlaybackIfNecessaryAndExecute=function(e){var t=application.isNonMember?null:application.Binding.get("PLAYER_CARD");t&&t.player&&t.player.isPlaying?state.raiseEvent("player.stop",{afterPlayerCardExitCallback:e}):e()},function(){var e,t="updateActiveProfile",n="isXboxProfileEligible",r="gamertagName",i="checkXboxUpsell",s="showXboxUpsell",o="stopPlaybackIfNecessaryAndExecute",u="changeLocation",a=nrdp&&nrdp.nova&&nrdp.nova.x360;application[t]=function(){var t,i=-1,s=!0;if(a)return util.log.debug("application.updateActiveProfile"),t=a.profiles,application[n](e)&&t.forEach(function(t){application[n](t)&&t[r]===e[r]&&(s=!1)}),s&&(t.every(function(e,t){return application[n](e)?(i=t,!1):(e&&e.liveAccount&&(i=t),!0)}),a.activeProfile=i,e=t[i]),s},application.XboxProfileChangeHandler=function(e){gibbon.log("XboxProfileChange event handler: "+JSON.stringify(e)),application[t]()&&(application[i]()?application[s]():application[o](function(){application.deactivate().subscribe(function(){util[u](devicebridge.Adapter.bootURL)})}))},application[i]=function(){return!application[n](e)},application[s]=function(){application[o](function(){util[u]("$DARWIN360.XBOXUPSELL_LOCATION$")})},application[n]=function(e){return e&&e.videoEligible&&e.signedIn}}(),devicebridge.nrdpInited.subscribe(function(){nrdp&&nrdp.nova&&nrdp.nova.x360&&nrdp.nova.x360.addEventListener("XboxProfileChange",application.XboxProfileChangeHandler)},NOOP),application.isErrorPage=!0,application.reskin=!0,function(){var e="device",t="debug",n="onNext",r="loaded",i=!0,s="subscribe",o="changeLocation",u="gibbon",a="defaultLocale",f="uiTextLoaded",l="addEventListener",c="ErrorParameters",h=function(){var h,p,d,v,m,g,y,b=util.localization,w=config.languages,E=w.uiText,S=E.uiPrefix;typeof nrdp!="undefined"&&nrdp[e]&&(h=nrdp[e].UILanguages,p=nrdp[e].language,util.log[t]("UILanguages: "+h.join(", ")),util.log[t]("Device Language: "+p)),config.suspend[r][n]({enabled:i}),devicebridge.suspendChanged[s](function(e){var t=e&&e.data,n=t&&t.suspend,r=e&&e.finishCallback;n===!1?util[o](devicebridge.Adapter.bootURL):(n===i||!devicebridge.isPs3&&!devicebridge.isPs4)&&application.exit(),r&&r()}),d=h&&h.length?h:p,v=b.findClosestCulture(d)||b.cultures["default"],g=v.name,y="../js/error-text/config.text.lruderrorpage."+g+".js",util.log[t]("Loading language file: "+y),nrdp&&nrdp[u]&&nrdp[u][a]&&(nrdp[u][a]=g,util.log[t]("Set gibbon default locale to: "+g)),util.loadScript(y,E.timeout)[s](function(){v[r]=w[r]=i,util.log[t]("Setting preferred culture: "+g),b.preferCulture(g),application[f][n](),application.started[n]()},function(e){application[f].onError(new util.TextLoadError(g,"UI text language file failed to load",config.debugCodes.startup.uiLanguageText,e))},function(){application[f].onCompleted(),config.startupDone=i,nrdp[l]&&nrdp[l]("background",function(e){util.log.error(e),e.result===nrdp.ACTION_ID&&e.actionID===13&&application.reactivateDialog()}),state.raiseEvent("state.enter",application.Binding.get("ERROR_PAGE_CARD"))});if(window[c])for(m in ErrorParameters)util.log[t](m+": "+ErrorParameters[m])},p=function(){devicebridge.Adapter={device:{SDKVersion:{}},registration:{deactivate:function(e){e()}}},window.nrdp||(nrdp={}),nrdp.exit=function(){window.self.close()},util[o]=function(){var e=window[c]&&window[c].url;e?util.location=e:util.location.reload()},h(),h=NOOP};devicebridge.nrdpInited[s](h,p)}();