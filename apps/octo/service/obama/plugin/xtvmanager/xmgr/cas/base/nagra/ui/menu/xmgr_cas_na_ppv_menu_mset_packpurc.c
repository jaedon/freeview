//******************************************************************************
//	INCLUDE
//******************************************************************************
#include <db_svc.h>
#include <db_param.h>
#include <svc_sys.h>
#include <svc_pipe.h>
#include <svc_cas.h>
#include <isosvc.h>
#include <osd_gfx.h>
#include <osd_font.h>

#include <gwm.h>
#include <mgr_action.h>

#include <menuui_coor.h>
#include <settings.h>

#include "_xmgr_cas_na_smartcard_info_coordinate.h"
#include "ap_cas_ppv_menu.h"
#include <ap_util_osd.h>

#include <namgr_main.h>

#include "../../local_include/_xmgr_cas_na_util.h"
#include "../../local_include/_xmgr_cas_na_adapt.h"
#include "../../local_include/_xmgr_cas_na.h"


#if defined(CONFIG_MW_CAS_NAGRA_OP_MEDIASET)
//******************************************************************************
//	DEFINE
//******************************************************************************




#define	MAX_PACKPURC_LIST_GROUP_NUM						3 //(sizeof(s_stPackPurcGroupList) /sizeof(XmgrCas_NaPackPurcGroupInfo_t))
#define MAX_LANGCODE_LEN								3
#define CHAR_VALUE_LINEFEED								0x0a
#define CHAR_VALUE_CARRIAGERETURN						0x0d

typedef struct tagPackPurchaseSubItemEvents
{
	HINT32					EvtNameLength;
	TChar					EvtName[MAX_EVENT_ITEM_NAME_LENGTH+1];
	TCalendarTime 			EvtExpiryDate;
} XmgrCas_NaPackPurcUiSubItemEvents_t;

typedef enum
{
	ePackPurcGroup_SPORT = 0,
	ePackPurcGroup_CINEMA = 1,
	ePackPurcGroup_OTHER = 2,
	ePackPurcGroup_MAX
} XmgrCas_NaPackPurcUiGroup_e;

typedef struct tagPackPurchaseGroupInfo
{
	HUINT8							*pszGroupName;
	XmgrCas_NaPackPurcUiGroup_e		eUiGroup;

	HUINT32							ulItemCount;	/*item °¹¼ö*/
	POINTER_LIST_T					*pstPackageListItem;
} XmgrCas_NaPackPurcGroupInfo_t;

typedef struct tag_CAS_NA_MEDIASET_PP_Contents
{
	/* Draw Service Info */
	HUINT8					ucTitle[MAX_ELEMENT_TEXT_LENGTH]; 					///< title of app context

	/* Group Info */
	XmgrCas_NaPackPurcGroupInfo_t	pstGroupInfo[MAX_PACKPURC_LIST_GROUP_NUM];

	HUINT8					ucCurDate[32];
	HUINT8					ucPageNum[16];

	/* packageItem info */
	HINT32					ulCurGroupIndex;
	HINT32					ulCurPage;
	HUINT16					usSelectedIndex;
	HBOOL					bWaiting;
	HBOOL					bPurchaseSuccess;
	HUINT32					ulTotalItemCount;
	HUINT8*					pstNoItemStr;
	HUINT8*					pstUnpurchasableStr;

	/* Desc or Disc */
	HINT8					ucDescPageStr[16];
	HINT8					ucDiscPageStr[16];

	/* Event Info */
	POINTER_LIST_T			*pstIncludedEventList;
	HUINT16					usIncludedEventNum;
	HUINT8					ucIncludedEventPageStr[16];

	/* purchase error type */
	PACKAGE_UNPURCHASABLE_TYPE 		nPackageErrorType;
} XmgrCas_NaPackPurc_Mediaset_t;

/* group configuration map */
#define	MAX_PACKPURC_LIST_ROW_NUM								5
#define	MAX_PACKPURC_LIST_SUBITEM_COLUMN_NUM 					2 //name, crite
#define	MAX_PACKPURC_LIST_ITEM_NUM								10 //(pContents->stUiCfg.nRow * pContents->stUiCfg.nCol)

#define	MAX_PACKPURC_EVTINFO_ROW_NUM							4
#define	MAX_PACKPURC_EVTINFO_COLUMN_NUM							1
#define	MAX_PACKPURC_EVTINFO_ITEM_NUM							7

#define	MAX_PACKPURC_EVTDESC_ROW_NUM							6
#define	MAX_PACKPURC_EVTDESC_PAGE_NUM							1

#define	MAX_PACKPURC_EVTDISC_ROW_NUM							5
#define	MAX_PACKPURC_EVTDISC_PAGE_NUM							4

#define	MAX_PACKPURC_EVTCONFIRM_ROW_NUM							3
#define	MAX_PACKPURC_EVTCONFIRMEND_ROW_NUM						2

//----------------------------------------------------------------
/* ÁÂ Ç¥ */
//----------------------------------------------------------------
#define	NAPPV_MEDIASET_PACKPURC_WINDOW_WIDTH					OSD_SCREEN_WIDTH
#define	NAPPV_MEDIASET_PACKPURC_WINDOW_HEIGHT					OSD_SCREEN_HEIGHT
#define	NAPPV_MEDIASET_PACKPURC_WINDOW_X						0
#define	NAPPV_MEDIASET_PACKPURC_WINDOW_Y						0
#define	NAPPV_MEDIASET_PACKPURC_STRING_MARGIN_Y					18

#define	NAPPV_MEDIASET_PACKPURC_APP_ID							0

/* ppv mediaset PackPurc background */
#define	NAPPV_MEDIASET_PACKPURC_LOGOBACKGROUND_IMAGE_ID			(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0010)
#define	NAPPV_MEDIASET_PACKPURC_STATE_BTN_ID						(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0020)
#define	NAPPV_MEDIASET_PACKPURC_STATE_BTN_X						598
#define	NAPPV_MEDIASET_PACKPURC_STATE_BTN_Y						189
#define	NAPPV_MEDIASET_PACKPURC_STATE_BTN_WIDTH					546
#define	NAPPV_MEDIASET_PACKPURC_STATE_BTN_HEIGHT					50
/* ppv mediaset PackPurc date */
#define	NAPPV_MEDIASET_PACKPURC_DATE_TEXT_ID					(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0040)
#define	NAPPV_MEDIASET_PACKPURC_DATE_TEXT_X						830
#define	NAPPV_MEDIASET_PACKPURC_DATE_TEXT_Y						(122 - FONT_SIZE_S)
#define	NAPPV_MEDIASET_PACKPURC_DATE_TEXT_WIDTH					300
#define	NAPPV_MEDIASET_PACKPURC_DATE_TEXT_HEIGHT					FONT_SIZE_S

/* ppv mediaset PackPurc info text */
#define	NAPPV_MEDIASET_PACKPURC_INFO_TEXT_ID					(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0100)
#define	NAPPV_MEDIASET_PACKPURC_INFO_TEXT_X						146
#define	NAPPV_MEDIASET_PACKPURC_INFO_TEXT_Y						(225 - FONT_SIZE_M) //253
#define	NAPPV_MEDIASET_PACKPURC_INFO_TEXT_WIDTH					410
#define	NAPPV_MEDIASET_PACKPURC_INFO_TEXT_HEIGHT					FONT_SIZE_M

/* ppv mediaset PackPurc credit */
#define	NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_ID					(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0110)
#define	NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_X						628
#define	NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_Y						225
#define	NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_WIDTH					476
#define	NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_HEIGHT				36

/* ppv mediaset arrow */
#define	NAPPV_MEDIASET_PACKPURC_ARROW_BTN_ID					(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0130)
#define	NAPPV_MEDIASET_PACKPURC_ARROW_BTN_X						1115
#define	NAPPV_MEDIASET_PACKPURC_ARROW_BTN_Y						541
#define	NAPPV_MEDIASET_PACKPURC_ARROW_BTN_WIDTH					30
#define	NAPPV_MEDIASET_PACKPURC_ARROW_BTN_HEIGHT					12

/* ppv mediaset ok button */
#define	NAPPV_MEDIASET_PACKPURC_OK_BTN_ID						(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0150)
#define	NAPPV_MEDIASET_PACKPURC_OK_BTN_X							1017
#define	NAPPV_MEDIASET_PACKPURC_OK_BTN_Y							611
#define	NAPPV_MEDIASET_PACKPURC_OK_BTN_WIDTH						52
#define	NAPPV_MEDIASET_PACKPURC_OK_BTN_HEIGHT					32

/* ppv mediaset PackPurc back button */
#define	NAPPV_MEDIASET_PACKPURC_BACK_BTN_ID						(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0170)
#define	NAPPV_MEDIASET_PACKPURC_BACK_BTN_X						1079
#define	NAPPV_MEDIASET_PACKPURC_BACK_BTN_Y						611
#define	NAPPV_MEDIASET_PACKPURC_BACK_BTN_WIDTH					72
#define	NAPPV_MEDIASET_PACKPURC_BACK_BTN_HEIGHT					32

/* ppv mediaset PackPurc help num01 button */
#define	NAPPV_MEDIASET_PACKPURC_ARROWLEFT_BTN_ID				(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0189)
#define	NAPPV_MEDIASET_PACKPURC_ARROWLEFT_BTN_X					136
#define	NAPPV_MEDIASET_PACKPURC_ARROWLEFT_BTN_Y					(553 - FONT_SIZE_XS)
#define	NAPPV_MEDIASET_PACKPURC_ARROWLEFT_BTN_WIDTH				FONT_SIZE_XS
#define	NAPPV_MEDIASET_PACKPURC_ARROWLEFT_BTN_HEIGHT				FONT_SIZE_XS

#define	NAPPV_MEDIASET_PACKPURC_HELPNUM01_TEXT_ID				(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0190)
#define	NAPPV_MEDIASET_PACKPURC_HELPNUM01_TEXT_X				136
#define	NAPPV_MEDIASET_PACKPURC_HELPNUM01_TEXT_Y				553
#define	NAPPV_MEDIASET_PACKPURC_HELPNUM01_TEXT_WIDTH			130
#define	NAPPV_MEDIASET_PACKPURC_HELPNUM01_TEXT_HEIGHT			FONT_SIZE_XS

/* ppv mediaset PackPurc help num02 button */
#define	NAPPV_MEDIASET_PACKPURC_HELPNUM02_TEXT_ID				(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0191)
#define	NAPPV_MEDIASET_PACKPURC_HELPNUM02_TEXT_X				506
#define	NAPPV_MEDIASET_PACKPURC_HELPNUM02_TEXT_Y				NAPPV_MEDIASET_PACKPURC_HELPNUM01_TEXT_Y
#define	NAPPV_MEDIASET_PACKPURC_HELPNUM02_TEXT_WIDTH			260
#define	NAPPV_MEDIASET_PACKPURC_HELPNUM02_TEXT_HEIGHT			41

/* ppv mediaset PackPurc help num03 button */
#define	NAPPV_MEDIASET_PACKPURC_HELPNUM03_TEXT_ID				(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0192)
#define	NAPPV_MEDIASET_PACKPURC_HELPNUM03_TEXT_X				891
#define	NAPPV_MEDIASET_PACKPURC_HELPNUM03_TEXT_Y				NAPPV_MEDIASET_PACKPURC_HELPNUM01_TEXT_Y
#define	NAPPV_MEDIASET_PACKPURC_HELPNUM03_TEXT_WIDTH			130
#define	NAPPV_MEDIASET_PACKPURC_HELPNUM03_TEXT_HEIGHT			41

#define	NAPPV_MEDIASET_PACKPURC_ARROWRIGHT_BTN_ID				(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0193)
#define	NAPPV_MEDIASET_PACKPURC_ARROWRIGHT_BTN_X					136
#define	NAPPV_MEDIASET_PACKPURC_ARROWRIGHT_BTN_Y					(553 - FONT_SIZE_XS)
#define	NAPPV_MEDIASET_PACKPURC_ARROWRIGHT_BTN_WIDTH				FONT_SIZE_XS
#define	NAPPV_MEDIASET_PACKPURC_ARROWRIGHT_BTN_HEIGHT				FONT_SIZE_XS

/* ppv mediaset list page */
#define	NAPPV_MEDIASET_PACKPURC_LISTPAGE_TEXT_ID				(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0240)
#define	NAPPV_MEDIASET_PACKPURC_LISTPAGE_TEXT_X					1060
#define	NAPPV_MEDIASET_PACKPURC_LISTPAGE_TEXT_Y					553
#define	NAPPV_MEDIASET_PACKPURC_LISTPAGE_TEXT_WIDTH				43
#define	NAPPV_MEDIASET_PACKPURC_LISTPAGE_TEXT_HEIGHT				21

#define __________SUBITEM_LINE_OBJECTS_________________________________________
/* ppv mediaset PackPurc line position */
#define	NAPPV_MEDIASET_PACKPURC_SUBBTN_LINE_ID					(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0300)
#define	NAPPV_MEDIASET_PACKPURC_SUBBTN_LINE_WIDTH				1008
#define	NAPPV_MEDIASET_PACKPURC_SUBBTN_LINE_HEIGHT				2
#define	NAPPV_MEDIASET_PACKPURC_SUBBTN_LINE_X					136
#define	NAPPV_MEDIASET_PACKPURC_SUBBTN_LINE_Y					309
#define	NAPPV_MEDIASET_PACKPURC_SUBBTN_LINE_LINESPACE			44

#define __________SUBITEM_CURSOR_OBJECTS_________________________________________
/* ppv mediaset PackPurc cursor position */
#define	NAPPV_MEDIASET_PACKPURC_SUBBTN_CURSOR_ID				(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0310)
#define	NAPPV_MEDIASET_PACKPURC_SUBBTN_CURSOR_WIDTH				1009
#define	NAPPV_MEDIASET_PACKPURC_SUBBTN_CURSOR_HEIGHT			40
#define	NAPPV_MEDIASET_PACKPURC_SUBBTN_CURSOR_X					136
#define	NAPPV_MEDIASET_PACKPURC_SUBBTN_CURSOR_Y					269
#define	NAPPV_MEDIASET_PACKPURC_SUBBTN_CURSOR_LINESPACE			44

#define __________SUBITEM_OBJECTS_________________________________________
#define	NAPPV_MEDIASET_PACKPURC_SUBBTN_ID						(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0320)
#define	NAPPV_MEDIASET_PACKPURC_SUBBTN_WIDTH					1009
#define	NAPPV_MEDIASET_PACKPURC_SUBBTN_HEIGHT					44
#define	NAPPV_MEDIASET_PACKPURC_SUBBTN_X						136
#define	NAPPV_MEDIASET_PACKPURC_SUBBTN_Y						269
#define	NAPPV_MEDIASET_PACKPURC_SUBBTN_LINESPACE				44

/* ppv mediaset PackPurc btn 01 position */
#define	NAPPV_MEDIASET_PACKPURC_SUBBTN01_ID						(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0330)
#define	NAPPV_MEDIASET_PACKPURC_SUBBTN01_WIDTH					794
#define	NAPPV_MEDIASET_PACKPURC_SUBBTN01_HEIGHT					NAPPV_MEDIASET_PACKPURC_SUBBTN_HEIGHT
#define	NAPPV_MEDIASET_PACKPURC_SUBBTN01_X						146
#define	NAPPV_MEDIASET_PACKPURC_SUBBTN01_Y						299

/* ppv mediaset PackPurc btn 02 position */
#define	NAPPV_MEDIASET_PACKPURC_SUBBTN02_ID						(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0340)
#define	NAPPV_MEDIASET_PACKPURC_SUBBTN02_WIDTH					160
#define	NAPPV_MEDIASET_PACKPURC_SUBBTN02_HEIGHT					NAPPV_MEDIASET_PACKPURC_SUBBTN_HEIGHT
#define	NAPPV_MEDIASET_PACKPURC_SUBBTN02_X						960
#define	NAPPV_MEDIASET_PACKPURC_SUBBTN02_Y						299

#define NAPPV_MEDIASET_PACKPURC_NOITEM_TEXT_ID					(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0350)
#define NAPPV_MEDIASET_PACKPURC_NOITEM_LINE_ID					(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0360)

#define NAPPV_MEDIASET_PACKPURC_TS_ERROR_BACK_ID				(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0370)
#define NAPPV_MEDIASET_PACKPURC_TS_ERROR_BACK_X					0
#define NAPPV_MEDIASET_PACKPURC_TS_ERROR_BACK_Y					260
#define NAPPV_MEDIASET_PACKPURC_TS_ERROR_BACK_WIDTH				1280
#define NAPPV_MEDIASET_PACKPURC_TS_ERROR_BACK_HEIGHT			349

#define NAPPV_MEDIASET_PACKPURC_TS_ERROR_TEXT_ID				(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0380)
#define NAPPV_MEDIASET_PACKPURC_TS_ERROR_TEXT_X					190
#define NAPPV_MEDIASET_PACKPURC_TS_ERROR_TEXT_Y					309
#define NAPPV_MEDIASET_PACKPURC_TS_ERROR_TEXT_WIDTH				900
#define NAPPV_MEDIASET_PACKPURC_TS_ERROR_TEXT_HEIGHT			310
#define NAPPV_MEDIASET_PACKPURC_TS_ERROR_TEXT_LINESPACE			34

#define NAPPV_MEDIASET_PACKPURC_TS_ERROR_BTN_ID					(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0390)
#define NAPPV_MEDIASET_PACKPURC_TS_ERROR_BTN_X					1079
#define NAPPV_MEDIASET_PACKPURC_TS_ERROR_BTN_Y					611
#define NAPPV_MEDIASET_PACKPURC_TS_ERROR_BTN_WIDTH				72
#define NAPPV_MEDIASET_PACKPURC_TS_ERROR_BTN_HEIGHT				32


/******************************************************
EVENTS DESC
******************************************************/
/* ppv mediaset PackPurc Event Desc Text position */
#define	NAPPV_MEDIASET_PACKPURC_EVTDESC_SUBBTN_ID						(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0410)
#define	NAPPV_MEDIASET_PACKPURC_EVTDESC_SUBBTN_LINESPACE				36
#define	NAPPV_MEDIASET_PACKPURC_EVTDESC_SUBBTN_WIDTH					988
#define	NAPPV_MEDIASET_PACKPURC_EVTDESC_SUBBTN_HEIGHT					(NAPPV_MEDIASET_PACKPURC_EVTDESC_SUBBTN_LINESPACE * MAX_PACKPURC_EVTDESC_ROW_NUM) //170
#define	NAPPV_MEDIASET_PACKPURC_EVTDESC_SUBBTN_X						146
#define	NAPPV_MEDIASET_PACKPURC_EVTDESC_SUBBTN_Y						343 -FONT_SIZE_M

#define	NAPPV_MEDIASET_PACKPURC_EVTDESC_GREENBTN_BTN_ID					(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0420)
#define NAPPV_MEDIASET_PACKPURC_EVTDESC_GREENBTN_BTN_X							139
#define NAPPV_MEDIASET_PACKPURC_EVTDESC_GREENBTN_BTN_Y							618
#define NAPPV_MEDIASET_PACKPURC_EVTDESC_GREENBTN_BTN_WIDTH							23
#define NAPPV_MEDIASET_PACKPURC_EVTDESC_GREENBTN_BTN_HEIGHT							23

#define	NAPPV_MEDIASET_PACKPURC_EVTDESC_GREENBTN_TEXT_ID				(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0430)
#define NAPPV_MEDIASET_PACKPURC_EVTDESC_GREENBTN_TEXT_X					169
#define NAPPV_MEDIASET_PACKPURC_EVTDESC_GREENBTN_TEXT_Y					(636 - FONT_SIZE_XS)
#define NAPPV_MEDIASET_PACKPURC_EVTDESC_GREENBTN_TEXT_WIDTH					800
#define NAPPV_MEDIASET_PACKPURC_EVTDESC_GREENBTN_TEXT_HEIGHT					FONT_SIZE_XS

/* ppv mediaset PackPurc Event Desc list page */
#define	NAPPV_MEDIASET_PACKPURC_EVTDESC_LISTPAGE_TEXT_ID				(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0440)
#define	NAPPV_MEDIASET_PACKPURC_EVTDESC_LISTPAGE_TEXT_X					1060
#define	NAPPV_MEDIASET_PACKPURC_EVTDESC_LISTPAGE_TEXT_Y					553
#define	NAPPV_MEDIASET_PACKPURC_EVTDESC_LISTPAGE_TEXT_WIDTH				43
#define	NAPPV_MEDIASET_PACKPURC_EVTDESC_LISTPAGE_TEXT_HEIGHT				21

#define NAPPV_MEDIASET_PACKPURC_EVTDESC_FMT_ID							(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0450)

#define	NAPPV_MEDIASET_PACKPURC_EVTDESC_UNPURCHABLE_TEXT_ID				(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0460)
#define	NAPPV_MEDIASET_PACKPURC_EVTDESC_UNPURCHABLE_TEXT_X				161
#define	NAPPV_MEDIASET_PACKPURC_EVTDESC_UNPURCHABLE_TEXT_Y				(465 + FONT_SIZE_M)
#define	NAPPV_MEDIASET_PACKPURC_EVTDESC_UNPURCHABLE_TEXT_WIDTH			959
#define	NAPPV_MEDIASET_PACKPURC_EVTDESC_UNPURCHABLE_TEXT_HEIGHT			FONT_SIZE_M

#define	NAPPV_MEDIASET_PACKPURC_EVTDESC_UNPURCHABLE_BTN_ID				(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0470)
#define	NAPPV_MEDIASET_PACKPURC_EVTDESC_UNPURCHABLE_BTN_X				136
#define	NAPPV_MEDIASET_PACKPURC_EVTDESC_UNPURCHABLE_BTN_Y				465
#define	NAPPV_MEDIASET_PACKPURC_EVTDESC_UNPURCHABLE_BTN_WIDTH			1009
#define	NAPPV_MEDIASET_PACKPURC_EVTDESC_UNPURCHABLE_BTN_HEIGHT			42


/******************************************************
EVENTS DISC
******************************************************/
/* ppv mediaset PackPurc Event Disc terms box position */
#define	NAPPV_MEDIASET_PACKPURC_EVTDISC_TERMS_ID						(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0510)
#define	NAPPV_MEDIASET_PACKPURC_EVTDISC_TERMS_WIDTH						939
#define	NAPPV_MEDIASET_PACKPURC_EVTDISC_TERMS_HEIGHT					40
#define	NAPPV_MEDIASET_PACKPURC_EVTDISC_TERMS_X							0
#define	NAPPV_MEDIASET_PACKPURC_EVTDISC_TERMS_Y							352 //357

#define	NAPPV_MEDIASET_PACKPURC_EVTDISC_TERMS_TEXT_ID					(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0520)
#define	NAPPV_MEDIASET_PACKPURC_EVTDISC_TERMS_TEXT_WIDTH					988
#define	NAPPV_MEDIASET_PACKPURC_EVTDISC_TERMS_TEXT_HEIGHT					44
#define	NAPPV_MEDIASET_PACKPURC_EVTDISC_TERMS_TEXT_X						146
#define	NAPPV_MEDIASET_PACKPURC_EVTDISC_TERMS_TEXT_Y						(343 - FONT_SIZE_M)

/* ppv mediaset PackPurc Event Disc item position */
#define	NAPPV_MEDIASET_PACKPURC_EVTDISC_SUBBTN_ID						(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0530)
#define	NAPPV_MEDIASET_PACKPURC_EVTDISC_SUBBTN_LINESPACE				36
#define	NAPPV_MEDIASET_PACKPURC_EVTDISC_SUBBTN_WIDTH					988
#define	NAPPV_MEDIASET_PACKPURC_EVTDISC_SUBBTN_HEIGHT					(NAPPV_MEDIASET_PACKPURC_EVTDISC_SUBBTN_LINESPACE * MAX_PACKPURC_EVTDISC_ROW_NUM) //170
#define	NAPPV_MEDIASET_PACKPURC_EVTDISC_SUBBTN_X						146
#define	NAPPV_MEDIASET_PACKPURC_EVTDISC_SUBBTN_Y						(343 + 36 - FONT_SIZE_M)

/* ppv mediaset PackPurc Event Disc list page */
#define	NAPPV_MEDIASET_PACKPURC_EVTDISC_LISTPAGE_TEXT_ID				(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0540)
#define	NAPPV_MEDIASET_PACKPURC_EVTDISC_LISTPAGE_TEXT_X					1060
#define	NAPPV_MEDIASET_PACKPURC_EVTDISC_LISTPAGE_TEXT_Y					553
#define	NAPPV_MEDIASET_PACKPURC_EVTDISC_LISTPAGE_TEXT_WIDTH				43
#define	NAPPV_MEDIASET_PACKPURC_EVTDISC_LISTPAGE_TEXT_HEIGHT				21

#define NAPPV_MEDIASET_PACKPURC_EVTDISC_FMT_ID							(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0550)


/******************************************************
EVENTS INFO
******************************************************/
/* ppv mediaset Event Info list page */
#define	NAPPV_MEDIASET_PACKPURC_EVTINFO_LISTPAGE_TEXT_ID				(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0620)
#define	NAPPV_MEDIASET_PACKPURC_EVTINFO_LISTPAGE_TEXT_X					1060
#define	NAPPV_MEDIASET_PACKPURC_EVTINFO_LISTPAGE_TEXT_Y					553
#define	NAPPV_MEDIASET_PACKPURC_EVTINFO_LISTPAGE_TEXT_WIDTH				43
#define	NAPPV_MEDIASET_PACKPURC_EVTINFO_LISTPAGE_TEXT_HEIGHT				21

#define NAPPV_MEDIASET_PACKPURC_EVTINFO_EVENTNAME_TEXT_ID				(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0630)
#define	NAPPV_MEDIASET_PACKPURC_EVTINFO_EVENTNAME_TEXT_WIDTH			939
#define	NAPPV_MEDIASET_PACKPURC_EVTINFO_EVENTNAME_TEXT_HEIGHT			34
#define	NAPPV_MEDIASET_PACKPURC_EVTINFO_EVENTNAME_TEXT_X				141
#define	NAPPV_MEDIASET_PACKPURC_EVTINFO_EVENTNAME_TEXT_Y				357

#define	NAPPV_MEDIASET_PACKPURC_EVTINFO_EVENTLIST_ID					(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0640)
#define	NAPPV_MEDIASET_PACKPURC_EVTINFO_EVENTPAGE_BTN_ID				(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0650)

/******************************************************
EVENTS CONFIRM
******************************************************/
/* ppv mediaset PackPurc Event Confirm Message position */
#define	NAPPV_MEDIASET_PACKPURC_EVTCONFIRM_SUBBTN_ID					(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0710)
#define	NAPPV_MEDIASET_PACKPURC_EVTCONFIRM_SUBBTN_LINESPACE				34
#define	NAPPV_MEDIASET_PACKPURC_EVTCONFIRM_SUBBTN_WIDTH					679
#define	NAPPV_MEDIASET_PACKPURC_EVTCONFIRM_SUBBTN_HEIGHT				(NAPPV_MEDIASET_PACKPURC_EVTCONFIRM_SUBBTN_LINESPACE * MAX_PACKPURC_EVTCONFIRM_ROW_NUM)
#define	NAPPV_MEDIASET_PACKPURC_EVTCONFIRM_SUBBTN_X						271
#define	NAPPV_MEDIASET_PACKPURC_EVTCONFIRM_SUBBTN_Y						419

#define	NAPPV_MEDIASET_PACKPURC_EVTCONFIRM_MESSAGE_ID					(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0720)



/******************************************************
EVENTS CONFIRM END
******************************************************/
/* ppv mediaset PackPurc Event Confirm End Message position */
#define	NAPPV_MEDIASET_PACKPURC_EVTCONFIRMEND_SUBBTN_ID						(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0800)
#define	NAPPV_MEDIASET_PACKPURC_EVTCONFIRMEND_SUBBTN_LINESPACE				34
#define	NAPPV_MEDIASET_PACKPURC_EVTCONFIRMEND_SUBBTN_WIDTH					679
#define	NAPPV_MEDIASET_PACKPURC_EVTCONFIRMEND_SUBBTN_HEIGHT					(NAPPV_MEDIASET_PACKPURC_EVTCONFIRM_SUBBTN_LINESPACE * MAX_PACKPURC_EVTCONFIRMEND_ROW_NUM)
#define	NAPPV_MEDIASET_PACKPURC_EVTCONFIRMEND_SUBBTN_X						271
#define	NAPPV_MEDIASET_PACKPURC_EVTCONFIRMEND_SUBBTN_Y						341

/* ppv mediaset PackPurc Event Confirm End credit */
#define	NAPPV_MEDIASET_PACKPURC_EVTCONFIRMEND_CREDIT_BTN_ID					(NAPPV_MEDIASET_PACKPURC_APP_ID|0x0810)
#define	NAPPV_MEDIASET_PACKPURC_EVTCONFIRMEND_CREDIT_BTN_X					271
#define	NAPPV_MEDIASET_PACKPURC_EVTCONFIRMEND_CREDIT_BTN_Y					443
#define	NAPPV_MEDIASET_PACKPURC_EVTCONFIRMEND_CREDIT_BTN_WIDTH				679
#define	NAPPV_MEDIASET_PACKPURC_EVTCONFIRMEND_CREDIT_BTN_HEIGHT				34


STATIC Item_t s_Mediaset_PackPurc_NaviSubItem[MAX_PACKPURC_LIST_SUBITEM_COLUMN_NUM] =
{
/* 01 */	{NAPPV_MEDIASET_PACKPURC_SUBBTN01_ID, { NAPPV_MEDIASET_PACKPURC_SUBBTN01_X, NAPPV_MEDIASET_PACKPURC_SUBBTN01_Y, NAPPV_MEDIASET_PACKPURC_SUBBTN01_WIDTH, NAPPV_MEDIASET_PACKPURC_SUBBTN01_HEIGHT}},
/* 02 */	{NAPPV_MEDIASET_PACKPURC_SUBBTN02_ID, { NAPPV_MEDIASET_PACKPURC_SUBBTN02_X, NAPPV_MEDIASET_PACKPURC_SUBBTN02_Y, NAPPV_MEDIASET_PACKPURC_SUBBTN02_WIDTH, NAPPV_MEDIASET_PACKPURC_SUBBTN02_HEIGHT}},
};

STATIC Item_t s_Mediaset_PackPurc_NaviSubItemLine[1] =
{
/* 01 */	{NAPPV_MEDIASET_PACKPURC_SUBBTN_LINE_ID, { NAPPV_MEDIASET_PACKPURC_SUBBTN_LINE_X, NAPPV_MEDIASET_PACKPURC_SUBBTN_LINE_Y, NAPPV_MEDIASET_PACKPURC_SUBBTN_LINE_WIDTH, NAPPV_MEDIASET_PACKPURC_SUBBTN_LINE_HEIGHT}},
};

STATIC Item_t s_Mediaset_PackPurc_NaviSubItemCursor[1] =
{
/* 01 */	{NAPPV_MEDIASET_PACKPURC_SUBBTN_CURSOR_ID, { NAPPV_MEDIASET_PACKPURC_SUBBTN_CURSOR_X, NAPPV_MEDIASET_PACKPURC_SUBBTN_CURSOR_Y, NAPPV_MEDIASET_PACKPURC_SUBBTN_CURSOR_WIDTH, NAPPV_MEDIASET_PACKPURC_SUBBTN_CURSOR_HEIGHT}},
};

#ifdef WIN32

typedef struct tagPackPurchaseSubItem
{
	HINT32					PackPurcItemIdx;
	TChar					PackPurcItemName[MAX_EVENT_ITEM_NAME_LENGTH+1];
	TCreditAmount			PackPurcItemCredit;
	TChar					PackPurcItemDescText[MAX_MSET_PPV_DESCRIPTION_LENGTH+1];
	TChar					PackPurcItemDiscText[MAX_MSET_PPV_DISCLAIMER_LENGTH+1];
} XmgrCas_NaPackPurcUiSubItem_t;

STATIC XmgrCas_NaPackPurcUiSubItem_t s_stPackPrucListSubItem[MAX_PACKPURC_LIST_GROUP_NUM][MAX_PACKPURC_LIST_ITEM_NUM] =
{
	{
		{	0x1,	"0SPORT MALAN",		0x0001,		"Events :\nSPORT IS CAMPIONATO MALAN.\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890........\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890........\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890........\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890........\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890........",	"LINE01\nLINE02\nLINE03\nLINE04\nLINE05\nLINE06\nLINE07\nLINE08\nLINE09\nLINE10\nLINE11\nLINE12\nLINE13\nLINE14\nLINE15\nLINE16\nLINE17\nLINE18\nLINE19\nLINE20\n",	},
		{	0x2,	"1SPORT JUVE",		0x0003,		"Events :\nSPORT IS CAMPIONATO JUVE.\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890...........",	"LINE01\nLINE02\nLINE03\nLINE04\nLINE05\nLINE06\nLINE07\nLINE08\nLINE09\nLINE10\nLINE11\nLINE12\nLINE13\nLINE14\nLINE15\nLINE16\nLINE17\nLINE18\nLINE19\nLINE20\n",	},
		{	0x3,	"2SPORT INTER",		0x0005,		"Events :\nSPORT IS CAMPIONATO INTER.\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890.........",	"LINE01\nLINE02\nLINE03\nLINE04\nLINE05\nLINE06\nLINE07\nLINE08\nLINE09\nLINE10\nLINE11\nLINE12\nLINE13\nLINE14\nLINE15\nLINE16\nLINE17\nLINE18\nLINE19\nLINE20\n",	},
		{	0x4,	"3SPORT MCRO",		0x0007,		"Events :\nSPORT IS CAMPIONATO MCRO.\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890.........",	"LINE01\nLINE02\nLINE03\nLINE04\nLINE05\nLINE06\nLINE07\nLINE08\nLINE09\nLINE10\nLINE11\nLINE12\nLINE13\nLINE14\nLINE15\nLINE16\nLINE17\nLINE18\nLINE19\nLINE20\n",	},
		{	0x5,	"4SPORT ITEFT",		0x0009,		"Events :\nSPORT IS CAMPIONATO ITEFT.\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890..........",	"LINE01\nLINE02\nLINE03\nLINE04\nLINE05\nLINE06\nLINE07\nLINE08\nLINE09\nLINE10\nLINE11\nLINE12\nLINE13\nLINE14\nLINE15\nLINE16\nLINE17\nLINE18\nLINE19\nLINE20\n",	},
		{	0x6,	"5SPORT MALAN01",	0x00011,	"Events :\nSPORT IS CAMPIONATO MALAN01.\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890.....",		"LINE01\nLINE02\nLINE03\nLINE04\nLINE05\nLINE06\nLINE07\nLINE08\nLINE09\nLINE10\nLINE11\nLINE12\nLINE13\nLINE14\nLINE15\nLINE16\nLINE17\nLINE18\nLINE19\nLINE20\n",	},
		{	0x7,	"6SPORT JUVE01",		0x00013,	"Events :\nSPORT IS CAMPIONATO JUVE01.\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890........",	"LINE01\nLINE02\nLINE03\nLINE04\nLINE05\nLINE06\nLINE07\nLINE08\nLINE09\nLINE10\nLINE11\nLINE12\nLINE13\nLINE14\nLINE15\nLINE16\nLINE17\nLINE18\nLINE19\nLINE20\n",	},
		{	0x8,	"7SPORT INTER01",	0x00015,	"Events :\nSPORT IS CAMPIONATO INTER01.\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890......",	"LINE01\nLINE02\nLINE03\nLINE04\nLINE05\nLINE06\nLINE07\nLINE08\nLINE09\nLINE10\nLINE11\nLINE12\nLINE13\nLINE14\nLINE15\nLINE16\nLINE17\nLINE18\nLINE19\nLINE20\n",	},
		{	0x9,	"8SPORT MCRO01",		0x00017,	"Events :\nSPORT IS CAMPIONATO MCRO01.\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890......",		"LINE01\nLINE02\nLINE03\nLINE04\nLINE05\nLINE06\nLINE07\nLINE08\nLINE09\nLINE10\nLINE11\nLINE12\nLINE13\nLINE14\nLINE15\nLINE16\nLINE17\nLINE18\nLINE19\nLINE20\n",	},
		{	0xa,	"9SPORT ITEFT01",	0x00019,	"Events :\nSPORT IS CAMPIONATO ITEFT01.\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890.......",	"LINE01\nLINE02\nLINE03\nLINE04\nLINE05\nLINE06\nLINE07\nLINE08\nLINE09\nLINE10\nLINE11\nLINE12\nLINE13\nLINE14\nLINE15\nLINE16\nLINE17\nLINE18\nLINE19\nLINE20\n"	}
	},

	{
		{	0x11,	"10CINAMA MALAN",		0x0002,		"Events :\nCINAMA IS ATRMFTFDFO MALAN.\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890........",	"LINE01\nLINE02\nLINE03\nLINE04\nLINE05\nLINE06\nLINE07\nLINE08\nLINE09\nLINE10\nLINE11\nLINE12\nLINE13\nLINE14\nLINE15\nLINE16\nLINE17\nLINE18\nLINE19\nLINE20\n",	},
		{	0x12,	"11CINAMA JUVE",		0x0004,		"Events :\nCINAMA IS ATRMFTFDFO JUVE.\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890...........",	"LINE01\nLINE02\nLINE03\nLINE04\nLINE05\nLINE06\nLINE07\nLINE08\nLINE09\nLINE10\nLINE11\nLINE12\nLINE13\nLINE14\nLINE15\nLINE16\nLINE17\nLINE18\nLINE19\nLINE20\n",	},
		{	0x13,	"12CINAMA INTER",		0x0006,		"Events :\nCINAMA IS ATRMFTFDFO INTER.\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890.........",	"LINE01\nLINE02\nLINE03\nLINE04\nLINE05\nLINE06\nLINE07\nLINE08\nLINE09\nLINE10\nLINE11\nLINE12\nLINE13\nLINE14\nLINE15\nLINE16\nLINE17\nLINE18\nLINE19\nLINE20\n",	},
		{	0x14,	"13CINAMA MCRO",		0x0008,		"Events :\nCINAMA IS ATRMFTFDFO MCRO.\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890.........",	"LINE01\nLINE02\nLINE03\nLINE04\nLINE05\nLINE06\nLINE07\nLINE08\nLINE09\nLINE10\nLINE11\nLINE12\nLINE13\nLINE14\nLINE15\nLINE16\nLINE17\nLINE18\nLINE19\nLINE20\n",	},
		{	0x15,	"14CINAMA ITEFT",		0x000a,		"Events :\nCINAMA IS ATRMFTFDFO ITEFT.\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890..........",	"LINE01\nLINE02\nLINE03\nLINE04\nLINE05\nLINE06\nLINE07\nLINE08\nLINE09\nLINE10\nLINE11\nLINE12\nLINE13\nLINE14\nLINE15\nLINE16\nLINE17\nLINE18\nLINE19\nLINE20\n",	},
		{	0x16,	"15CINAMA MAAN01",	0x00012,	"Events :\nCINAMA IS ATRMFTFDFO MAAN01.\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890.....",		"LINE01\nLINE02\nLINE03\nLINE04\nLINE05\nLINE06\nLINE07\nLINE08\nLINE09\nLINE10\nLINE11\nLINE12\nLINE13\nLINE14\nLINE15\nLINE16\nLINE17\nLINE18\nLINE19\nLINE20\n",	},
		{	0x17,	"16CINAMA JUVE01",	0x00014,	"Events :\nCINAMA IS ATRMFTFDFO JUVE01.\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890.......",	"LINE01\nLINE02\nLINE03\nLINE04\nLINE05\nLINE06\nLINE07\nLINE08\nLINE09\nLINE10\nLINE11\nLINE12\nLINE13\nLINE14\nLINE15\nLINE16\nLINE17\nLINE18\nLINE19\nLINE20\n",	},
		{	0x18,	"17CINAMA INTR01",	0x00016,	"Events :\nCINAMA IS ATRMFTFDFO INTR01.\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890.......",	"LINE01\nLINE02\nLINE03\nLINE04\nLINE05\nLINE06\nLINE07\nLINE08\nLINE09\nLINE10\nLINE11\nLINE12\nLINE13\nLINE14\nLINE15\nLINE16\nLINE17\nLINE18\nLINE19\nLINE20\n",	},
		{	0x19,	"18CINAMA MCRO01",	0x00018,	"Events :\nCINAMA IS ATRMFTFDFO INTR01.\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890.......",	"LINE01\nLINE02\nLINE03\nLINE04\nLINE05\nLINE06\nLINE07\nLINE08\nLINE09\nLINE10\nLINE11\nLINE12\nLINE13\nLINE14\nLINE15\nLINE16\nLINE17\nLINE18\nLINE19\nLINE20\n",	},
		{	0x1a,	"19CINAMA ITEF01",	0x0001a,	"Events :\nCINAMA IS ATRMFTFDFO ITEF01.\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890........",	"LINE01\nLINE02\nLINE03\nLINE04\nLINE05\nLINE06\nLINE07\nLINE08\nLINE09\nLINE10\nLINE11\nLINE12\nLINE13\nLINE14\nLINE15\nLINE16\nLINE17\nLINE18\nLINE19\nLINE20\n"	}
	},

	{
		{	0x21,	"20OTHER MALAN",		0x000b,		"Events :\nOTHER IS TSFDFDSFTO MALAN.\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890..........",	"LINE01\nLINE02\nLINE03\nLINE04\nLINE05\nLINE06\nLINE07\nLINE08\nLINE09\nLINE10\nLINE11\nLINE12\nLINE13\nLINE14\nLINE15\nLINE16\nLINE17\nLINE18\nLINE19\nLINE20\n",	},
		{	0x22,	"21OTHER JUVE",		0x000c,		"Events :\nOTHER IS TSFDFDSFTO JUVE.\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890............",	"LINE01\nLINE02\nLINE03\nLINE04\nLINE05\nLINE06\nLINE07\nLINE08\nLINE09\nLINE10\nLINE11\nLINE12\nLINE13\nLINE14\nLINE15\nLINE16\nLINE17\nLINE18\nLINE19\nLINE20\n",	},
		{	0x23,	"22OTHER INTER",		0x000d,		"Events :\nOTHER IS TSFDFDSFTO INTER.\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890...........",	"LINE01\nLINE02\nLINE03\nLINE04\nLINE05\nLINE06\nLINE07\nLINE08\nLINE09\nLINE10\nLINE11\nLINE12\nLINE13\nLINE14\nLINE15\nLINE16\nLINE17\nLINE18\nLINE19\nLINE20\n",	},
		{	0x24,	"23OTHER MCRO",		0x000e,		"Events :\nOTHER IS TSFDFDSFTO MCRO.\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890...........",	"LINE01\nLINE02\nLINE03\nLINE04\nLINE05\nLINE06\nLINE07\nLINE08\nLINE09\nLINE10\nLINE11\nLINE12\nLINE13\nLINE14\nLINE15\nLINE16\nLINE17\nLINE18\nLINE19\nLINE20\n",	},
		{	0x25,	"24OTHER ITEFT",		0x000f,		"Events :\nOTHER IS TSFDFDSFTO ITEFT.\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890...........",	"LINE01\nLINE02\nLINE03\nLINE04\nLINE05\nLINE06\nLINE07\nLINE08\nLINE09\nLINE10\nLINE11\nLINE12\nLINE13\nLINE14\nLINE15\nLINE16\nLINE17\nLINE18\nLINE19\nLINE20\n",	},
		{	0x26,	"25OTHER MALAN01",	0x0001b,	"Events :\nOTHER IS TSFDFDSFTO MALAN01.\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890.......",	"LINE01\nLINE02\nLINE03\nLINE04\nLINE05\nLINE06\nLINE07\nLINE08\nLINE09\nLINE10\nLINE11\nLINE12\nLINE13\nLINE14\nLINE15\nLINE16\nLINE17\nLINE18\nLINE19\nLINE20\n",	},
		{	0x27,	"26OTHER JUVE01",		0x0001c,	"Events :\nOTHER IS TSFDFDSFTO JUVE01.\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890..........",	"LINE01\nLINE02\nLINE03\nLINE04\nLINE05\nLINE06\nLINE07\nLINE08\nLINE09\nLINE10\nLINE11\nLINE12\nLINE13\nLINE14\nLINE15\nLINE16\nLINE17\nLINE18\nLINE19\nLINE20\n",	},
		{	0x28,	"27OTHER INTER01",	0x0001d,	"Events :\nOTHER IS TSFDFDSFTO INTER01.\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890........",	"LINE01\nLINE02\nLINE03\nLINE04\nLINE05\nLINE06\nLINE07\nLINE08\nLINE09\nLINE10\nLINE11\nLINE12\nLINE13\nLINE14\nLINE15\nLINE16\nLINE17\nLINE18\nLINE19\nLINE20\n",	},
		{	0x29,	"28OTHER MCRO01",		0x0001e,	"Events :\nOTHER IS TSFDFDSFTO MCRO01.\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890........",	"LINE01\nLINE02\nLINE03\nLINE04\nLINE05\nLINE06\nLINE07\nLINE08\nLINE09\nLINE10\nLINE11\nLINE12\nLINE13\nLINE14\nLINE15\nLINE16\nLINE17\nLINE18\nLINE19\nLINE20\n",	},
		{	0x2a,	"29OTHER ITEFT01",	0x0001f,	"Events :\nOTHER IS TSFDFDSFTO ITEFT01.\n1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890.........",	"LINE01\nLINE02\nLINE03\nLINE04\nLINE05\nLINE06\nLINE07\nLINE08\nLINE09\nLINE10\nLINE11\nLINE12\nLINE13\nLINE14\nLINE15\nLINE16\nLINE17\nLINE18\nLINE19\nLINE20\n"	}
	}
};

STATIC XmgrCas_NaPackPurcUiSubItemEvents_t s_stPackPrucSportEvent[MAX_PACKPURC_LIST_ITEM_NUM][MAX_PACKPURC_EVTINFO_ITEM_NUM] =
{
	{	{0x9, "S ITEM01", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM02", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM03", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM04", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM05", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM06", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM07", {109, 0x09, 0x1E, 0, 0, 0}},	},
	{	{0x9, "S ITEM08", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM09", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM10", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM11", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM12", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM13", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM14", {109, 0x09, 0x1E, 0, 0, 0}},	},
	{	{0x9, "S ITEM15", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM16", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM17", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM18", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM19", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM20", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM21", {109, 0x09, 0x1E, 0, 0, 0}},	},
	{	{0x9, "S ITEM10", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM11", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM12", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM12", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM12", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM12", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM12", {109, 0x09, 0x1E, 0, 0, 0}},	},
	{	{0x9, "S ITEM13", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM14", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM15", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM15", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM15", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM15", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM15", {109, 0x09, 0x1E, 0, 0, 0}},	},
	{	{0x9, "S ITEM16", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM17", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM18", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM18", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM18", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM18", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM18", {109, 0x09, 0x1E, 0, 0, 0}},	},
	{	{0x9, "S ITEM19", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM20", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM21", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM21", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM21", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM21", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM21", {109, 0x09, 0x1E, 0, 0, 0}},	},
	{	{0x9, "S ITEM22", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM23", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM24", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM24", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM24", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM24", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM24", {109, 0x09, 0x1E, 0, 0, 0}},	},
	{	{0x9, "S ITEM25", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM26", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM27", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM27", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM27", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM27", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM27", {109, 0x09, 0x1E, 0, 0, 0}},	},
	{	{0x9, "S ITEM28", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM29", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM30", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM30", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM30", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM30", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "S ITEM30", {109, 0x09, 0x1E, 0, 0, 0}}	},
};

STATIC XmgrCas_NaPackPurcUiSubItemEvents_t s_stPackPrucCinemaEvent[MAX_PACKPURC_LIST_ITEM_NUM][MAX_PACKPURC_EVTINFO_ITEM_NUM] =
{
	{	{0x9, "C ITEM01", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM02", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM03", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM03", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM03", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM03", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM03", {109, 0x09, 0x1E, 0, 0, 0}},	},
	{	{0x9, "C ITEM04", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM05", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM06", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM06", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM06", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM06", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM06", {109, 0x09, 0x1E, 0, 0, 0}},	},
	{	{0x9, "C ITEM07", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM08", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM09", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM09", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM09", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM09", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM09", {109, 0x09, 0x1E, 0, 0, 0}},	},
	{	{0x9, "C ITEM10", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM11", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM12", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM12", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM12", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM12", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM12", {109, 0x09, 0x1E, 0, 0, 0}},	},
	{	{0x9, "C ITEM13", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM14", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM15", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM15", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM15", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM15", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM15", {109, 0x09, 0x1E, 0, 0, 0}},	},
	{	{0x9, "C ITEM16", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM17", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM18", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM18", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM18", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM18", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM18", {109, 0x09, 0x1E, 0, 0, 0}},	},
	{	{0x9, "C ITEM19", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM20", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM21", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM21", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM21", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM21", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM21", {109, 0x09, 0x1E, 0, 0, 0}},	},
	{	{0x9, "C ITEM22", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM23", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM24", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM24", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM24", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM24", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM24", {109, 0x09, 0x1E, 0, 0, 0}},	},
	{	{0x9, "C ITEM25", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM26", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM27", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM27", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM27", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM27", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM27", {109, 0x09, 0x1E, 0, 0, 0}},	},
	{	{0x9, "C ITEM28", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM29", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM30", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM30", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM30", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM30", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "C ITEM30", {109, 0x09, 0x1E, 0, 0, 0}}	},
};

STATIC XmgrCas_NaPackPurcUiSubItemEvents_t s_stPackPrucOtherEvent[MAX_PACKPURC_LIST_ITEM_NUM][MAX_PACKPURC_EVTINFO_ITEM_NUM] =
{
	{	{0x9, "O ITEM01", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM02", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM03", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM03", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM03", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM03", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM03", {109, 0x09, 0x1E, 0, 0, 0}},	},
	{	{0x9, "O ITEM04", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM05", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM06", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM06", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM06", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM06", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM06", {109, 0x09, 0x1E, 0, 0, 0}},	},
	{	{0x9, "O ITEM07", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM08", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM09", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM09", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM09", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM09", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM09", {109, 0x09, 0x1E, 0, 0, 0}},	},
	{	{0x9, "O ITEM10", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM11", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM12", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM12", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM12", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM12", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM12", {109, 0x09, 0x1E, 0, 0, 0}},	},
	{	{0x9, "O ITEM13", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM14", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM15", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM15", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM15", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM15", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM15", {109, 0x09, 0x1E, 0, 0, 0}},	},
	{	{0x9, "O ITEM16", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM17", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM18", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM18", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM18", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM18", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM18", {109, 0x09, 0x1E, 0, 0, 0}},	},
	{	{0x9, "O ITEM19", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM20", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM21", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM21", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM21", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM21", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM21", {109, 0x09, 0x1E, 0, 0, 0}},	},
	{	{0x9, "O ITEM22", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM23", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM24", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM24", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM24", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM24", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM24", {109, 0x09, 0x1E, 0, 0, 0}},	},
	{	{0x9, "O ITEM25", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM26", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM27", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM27", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM27", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM27", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM27", {109, 0x09, 0x1E, 0, 0, 0}},	},
	{	{0x9, "O ITEM28", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM29", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM30", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM30", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM30", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM30", {109, 0x09, 0x1E, 0, 0, 0}},	{0x9, "O ITEM30", {109, 0x09, 0x1E, 0, 0, 0}}	},
};
#endif

STATIC XmgrCas_NaPackPurcUiGroup_e s_stPackPurcGroupList[] =
{
	ePackPurcGroup_SPORT,
	ePackPurcGroup_CINEMA,
	ePackPurcGroup_OTHER,
};

//******************************************************************************
//	STATIC VARIABLES
//******************************************************************************
STATIC XmgrCas_NaPackPurc_Mediaset_t 	s_stNaMsetPackPurc;


//******************************************************************************
//	PROTOTYPE FUNCTIONS
//******************************************************************************
#define ________XMGR_CAS_NA_PpvMEDIASET_MENU_STATIC___________________________________________


#define	_____PACK_PURC______________________________
STATIC XmgrCas_NaPackPurc_Mediaset_t* xmgr_cas_NaPpvPackpurcGetLocalContents_Mediaset(void);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcSetMainTitle_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcRequestPackageList_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents);
STATIC PPV_PACKAGE_LIST_ITEM	*xmgr_cas_NaPpvPackpurcGetCurSubItem_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcSetCurSubItemIndex_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents, KEY_Code_t eKeyCode);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcInitUiConfiguration_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcGetPageStr_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcLoadChangeGroup_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents, XmgrCas_NaPackPurcUiGroup_e eNewGroup);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcChangeGroup_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents, KEY_Code_t eKeyCode);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcDrawMenuNoItemText_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcDrawMenuNoItemLine_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcDrawBackgroundImage_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcDrawStateButton_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtdescDrawErrorButton_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcDrawMenuGroupName_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1);
PPV_PACKAGE_LIST_ITEM 	*xmgr_cas_NaPpvPackpurcLinkTraverseListItembyIndex_Mediaset(POINTER_LIST_T **pRoot, HUINT16 usTotalItemIdx, HUINT16 usItemIdx);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcDrawPackageListItem_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect, GWM_GuiObject_t tObject, void *pvArg, int nParam1);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcDrawCredit_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcDrawUpDownArrow_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcDrawOKButton_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcDrawBackButton_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcSetUiObjects_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcDestroyUI_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcProcessOKClicked_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents, KEY_Code_t eKeyCode);
STATIC BUS_Result_t	xmgr_cas_NaPpvPackpurcFreePackageList_Mediaset(POINTER_LIST_T **pRoot);
STATIC HERROR 		xmgr_cas_NaPpvPackpurcAddLocalTimeOffset_Mediaset(UNIXTIME *startTime, UNIXTIME *endTime);
STATIC HERROR 		xmgr_cas_NaPpvPackpurcCheckValidPeriod_Mediaset(TCalendarTime tStartTime, TCalendarTime tEndTime);
STATIC HERROR		xmgr_cas_NaPpvPackpurcCheckValidService_Mediaset(DbSvc_TripleId_t triple);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcUpdatePackageList_Mediaset(HUINT32 xStatus, HUINT32 xNumberOfItems, const PPV_PACKAGE_LIST_ITEM* pxPackageList, XmgrCas_NaPackPurc_Mediaset_t* pContents);
STATIC BUS_Result_t	xmgr_cas_NaPpvPackpurcAddLongStringWithWordwrap_Mediaset(HUINT32 ulFmtObjID, HUINT32 ulFmtObjWidth,HUINT8 *pszString, HUINT32 ulStrLen, Text_Property_t *pstTextProperty);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcDrawTitleName_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents, OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1);
STATIC BUS_Result_t	xmgr_cas_NaPpvPackpurcExtendInfo_DrawItems_Mediaset(int ID, OSD_Screen_t *pScreen, FMT_DrawItem_t *pDrawItem);
STATIC BUS_Result_t	xmgr_cas_NaPpvPackpurcExtendInfo_DrawScroll_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect, FMT_OBJECT pObject);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcDrawTsErrorMessage_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcDrawTsErrorExitBtn_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcUpdateRemainedCredit_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents, TCreditAmount nCredit);

#define	_____EVENT_DESC______________________________
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtDescRequestPackageInfo_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtDescDrawGreenButton_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1);
STATIC HUINT8		*xmgr_cas_NaPpvPackpurcEvtDescLeftTrimFromString_Mediaset(HUINT8 *pszMessage);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtDescGetCountOfCharsFromCutLines_Mediaset(HUINT8 *message, HINT32 nfontsize, HINT32 nwidth, HINT16 nCutline);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtDescGetPageStr_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtDescDrawPackagePurchase_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtDescInitUiObjects_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtDescDrawErrorMessage_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea,	OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtDescSetUiObjects_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtDescProcessArrowUpDownClicked_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents, KEY_Code_t eKeyCode);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtDescProcessGreenClicked_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents, KEY_Code_t eKeyCode);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtDescProcessOKClicked_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents, KEY_Code_t eKeyCode);


#define	_____EVENT_DISC______________________________
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtDiscGetPageStr_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtDiscDrawPackagePurchase_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtDiscSetUiObjects_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtDiscProcessOKClicked_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents, KEY_Code_t eKeyCode);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtDiscProcessArrowUpDownClicked_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents, KEY_Code_t eKeyCode);


#define	_____EVENT_INFO______________________________
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtInfoScrollPage_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents, KEY_Code_t eKeyCode);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtInfoGetPageStr_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtInfoDrawPackagePurchase_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtInfoMakeIncludedEventList_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtInfoSetUiObjects_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtInfoDestroyUI_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents);


#define	_____EVENT_CONFIRM______________________________
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtConfirmDrawPackagePurchase_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtConfirmDrawMainMessage_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtConfirmSetUiObjects_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents);
STATIC HBOOL 		xmgr_cas_NaPpvPackpurcEvtConfirmCheckPurchasable_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents, PPV_PACKAGE_LIST_ITEM *pstPackageItem);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtConfirmProcessOKClicked_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents, KEY_Code_t eKeyCode);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtConfirmResponsePurchaseResult_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents, HINT32 nResult);


#define	_____EVENT_CONFIRM_END______________________________
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtConfirmEndDrawResultCredit_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtConfirmEndDrawMainMessage_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1);
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtConfirmEndSetUiObjects_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents);




#define ________XMGR_CAS_NA_PpvMEDIASET_MENU_PUBLIC___________________________________________
BUS_Result_t xproc_cas_NaPackagePurchase_Mediaset(HINT32 message, Handle_t hAction, HINT32 p1, HINT32 p2, HINT32 p3);
BUS_Result_t xproc_cas_NaPackagePurchaseEvtDesc_Mediaset(HINT32 message, Handle_t hAction, HINT32 p1, HINT32 p2, HINT32 p3);
BUS_Result_t xproc_cas_NaPackagePurchaseEvtDisc_Mediaset(HINT32 message, Handle_t hAction, HINT32 p1, HINT32 p2, HINT32 p3);
BUS_Result_t xproc_cas_NaPackagePurchaseEvtInfo_Mediaset(HINT32 message, Handle_t hAction, HINT32 p1, HINT32 p2, HINT32 p3);
BUS_Result_t xproc_cas_NaPackagePurchaseEvtConfirm_Mediaset(HINT32 message, Handle_t hAction, HINT32 p1, HINT32 p2, HINT32 p3);
BUS_Result_t xproc_cas_NaPackagePurchaseEvtConfirmEnd_Mediaset(HINT32 message, Handle_t hAction, HINT32 p1, HINT32 p2, HINT32 p3);


#define	______
#define	_________________________STATIC_BODY______________________________
#define	______

#define	_____PACK_PURC______________________________
/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcGetLocalContents_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC XmgrCas_NaPackPurc_Mediaset_t* xmgr_cas_NaPpvPackpurcGetLocalContents_Mediaset(void)
{
	return &s_stNaMsetPackPurc;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcSetMainTitle_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcSetMainTitle_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents)
{
	HxLOG_Print("+++++++++++++++\n");

	/* set, draw background */
	Settings_DrawBack(FALSE);

	/* title */
	MWC_UTIL_DvbStrcpy(pContents->ucTitle, GetStrRsc(LOC_CAS_NAGRA_MEDIASET_PACKAGE_PURCHASE_TEXT_ID));
	Settings_SetWindowTitle(SETTING_GET_AP_DEPTH(eSetting_NagraPpvMediasetPackPurc), LOC_CAS_NAGRA_MEDIASET_PACKAGE_PURCHASE_TEXT_ID, pContents->ucTitle);

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcRequestPackageList_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcRequestPackageList_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents)
{
#ifdef WIN32
	HUINT16					i = 0, j = 0, k = 0;
	PPV_PACKAGE_LIST		s_packageList = {NULL, 0, NULL};
	PPV_PACKAGE_LIST_ITEM	*traveler = NULL;
	PPV_PACKAGE_LIST_ITEM	*holder;

	for (i = 0; i < MAX_PACKPURC_LIST_GROUP_NUM; i++)
	{
		for (j = 0; j < MAX_PACKPURC_LIST_ITEM_NUM; j++)
		{
			traveler = (PPV_PACKAGE_LIST_ITEM*)OxCAS_Malloc(sizeof(PPV_PACKAGE_LIST_ITEM));
			HxSTD_memset(traveler, 0, sizeof(PPV_PACKAGE_LIST_ITEM));
			traveler->PackageNameLength = SvcCas_UtilStrLen(s_stPackPrucListSubItem[i][j].PackPurcItemName);
			traveler->pProduct = 0x1111;
			traveler->ProductID = 123;
			MWC_UTIL_DvbStrncpy(traveler->PackageName, s_stPackPrucListSubItem[i][j].PackPurcItemName, MAX_PACKAGE_NAME_LENGTH);
			traveler->Cost = s_stPackPrucListSubItem[i][j].PackPurcItemCredit;
			if (i == 0)
				traveler->BusinessType = ePACKAGE_SPORT+(j%2);
			else if (i == 1)
				traveler->BusinessType = ePACKAGE_FICTION+(j%2);
			else
				traveler->BusinessType = ePACKAGE_OTHERS+(j%2);
			HxSTD_memset(&traveler->PurchaseStartTime, 0, sizeof(TCalendarTime));
			HxSTD_memset(&traveler->PurchaseEndTime, 0, sizeof(TCalendarTime));
			if (j == MAX_PACKPURC_LIST_ITEM_NUM-1)
				traveler->PurchasableFlag = CA_PRODUCT_PURCHASED;
			else
				traveler->PurchasableFlag = CA_PRODUCT_PURCHASABLE;
			traveler->NumOfServices = 1;
			traveler->pServices = (TDvbTriplet*)OxCAS_Malloc(sizeof(TDvbTriplet)*traveler->NumOfServices);
			for (k = 0; k < traveler->NumOfServices; k++)
			{
				traveler->pServices[k].originalNetworkId = 0x0110;
				traveler->pServices[k].transportStreamId = 0x15;
				traveler->pServices[k].serviceId = 0x0d;
			}
			HxSTD_memset(&traveler->PackageInfo, 0, sizeof(PACKAGE_INFO));
			traveler->PackageInfo.pRequest = 0x4444;
			traveler->PackageInfo.pProduct = 0x4445;
			traveler->PackageInfo.pServiceFilter = NULL;
			traveler->PackageInfo.nDesSize = SvcCas_UtilStrLen(s_stPackPrucListSubItem[i][j].PackPurcItemDescText);
			if (traveler->PackageInfo.nDesSize > MAX_MSET_PPV_DESCRIPTION_LENGTH)
			{
				traveler->PackageInfo.nDesSize = MAX_MSET_PPV_DESCRIPTION_LENGTH;
			}
			MWC_UTIL_DvbStrncpy(traveler->PackageInfo.aucDescription, s_stPackPrucListSubItem[i][j].PackPurcItemDescText, traveler->PackageInfo.nDesSize);
			if ((traveler->BusinessType%2) == 0)
				traveler->PackageInfo.ulNbEvents = 0;
			else
			{
				traveler->PackageInfo.ulNbEvents = MAX_PACKPURC_EVTINFO_ITEM_NUM;
				traveler->PackageInfo.pEvents = (EVENT_ITEM*)OxCAS_Malloc(sizeof(EVENT_ITEM)*traveler->PackageInfo.ulNbEvents);
				HxSTD_memset(traveler->PackageInfo.pEvents, 0, sizeof(EVENT_ITEM)*traveler->PackageInfo.ulNbEvents);
				for (k = 0; k < traveler->PackageInfo.ulNbEvents; k++)
				{
					if (i == 0)
					{
						traveler->PackageInfo.pEvents[k].EvtNameLength = s_stPackPrucSportEvent[j][k].EvtNameLength;
						MWC_UTIL_DvbStrncpy(traveler->PackageInfo.pEvents[k].EvtName, s_stPackPrucSportEvent[j][k].EvtName, MAX_EVENT_ITEM_NAME_LENGTH);
						HxSTD_memcpy(&traveler->PackageInfo.pEvents[k].pStartTime, &s_stPackPrucSportEvent[j][k].EvtExpiryDate, sizeof(TCalendarTime));
					}
					else if (i == 1)
					{
						traveler->PackageInfo.pEvents[k].EvtNameLength = s_stPackPrucCinemaEvent[j][k].EvtNameLength;
						MWC_UTIL_DvbStrncpy(traveler->PackageInfo.pEvents[k].EvtName, s_stPackPrucCinemaEvent[j][k].EvtName, MAX_EVENT_ITEM_NAME_LENGTH);
						HxSTD_memcpy(&traveler->PackageInfo.pEvents[k].pStartTime, &s_stPackPrucCinemaEvent[j][k].EvtExpiryDate, sizeof(TCalendarTime));
					}
					else
					{
						traveler->PackageInfo.pEvents[k].EvtNameLength = s_stPackPrucOtherEvent[j][k].EvtNameLength;
						MWC_UTIL_DvbStrncpy(traveler->PackageInfo.pEvents[k].EvtName, s_stPackPrucOtherEvent[j][k].EvtName, MAX_EVENT_ITEM_NAME_LENGTH);
						HxSTD_memcpy(&traveler->PackageInfo.pEvents[k].pStartTime, &s_stPackPrucOtherEvent[j][k].EvtExpiryDate, sizeof(TCalendarTime));
					}
				}
			}
			traveler->PackageInfo.nDisclaimerSize = SvcCas_UtilStrLen(s_stPackPrucListSubItem[i][j].PackPurcItemDiscText);
			if (traveler->PackageInfo.nDisclaimerSize > MAX_MSET_PPV_DISCLAIMER_LENGTH)
			{
				traveler->PackageInfo.nDisclaimerSize = MAX_MSET_PPV_DISCLAIMER_LENGTH;
			}
			MWC_UTIL_DvbStrncpy(traveler->PackageInfo.aucDisclaimer, s_stPackPrucListSubItem[i][j].PackPurcItemDiscText, traveler->PackageInfo.nDisclaimerSize);

			traveler->pNext = NULL;

			if (s_packageList.xNbItems == 0)
			{
				s_packageList.pList = traveler;
				holder = s_packageList.pList;
			}
			else
			{
				holder->pNext = traveler;
				holder = holder->pNext;
			}
			s_packageList.xNbItems ++;
		}
	}

	BUS_PostMessage(NULL, eMEVT_XMGR_CAS_NA_NOTIFY_PPV_PACKAGE_LIST, (Handle_t)CA_EVENT_SUCCESS, eDxCAS_GROUPID_NA, (HINT32)s_packageList.xNbItems, (HINT32)s_packageList.pList);
#else
	xmgr_cas_NaGetPackageList(NA_MEDIASET_PROVIDER_ID);
#endif
	pContents->bWaiting = TRUE;

	return ERR_BUS_NO_ERROR;
}


/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcGetCurSubItem_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC PPV_PACKAGE_LIST_ITEM	*xmgr_cas_NaPpvPackpurcGetCurSubItem_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents)
{
	PPV_PACKAGE_LIST_ITEM	*pDrawSubItemInfo = NULL;
	POINTER_LIST_T			*pstPackageList;
	HUINT32					nListItemNum = 0;

	pstPackageList = pContents->pstGroupInfo[pContents->ulCurGroupIndex].pstPackageListItem;
	nListItemNum = pContents->pstGroupInfo[pContents->ulCurGroupIndex].ulItemCount;
	pDrawSubItemInfo = xmgr_cas_NaPpvPackpurcLinkTraverseListItembyIndex_Mediaset(&pstPackageList, (HUINT16)nListItemNum, pContents->usSelectedIndex);

	return pDrawSubItemInfo;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcSetCurSubItemIndex_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcSetCurSubItemIndex_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents, KEY_Code_t eKeyCode)
{
	HINT32			nOldDrawIndex = 0, nNumPerPage = 0;
	BUS_Result_t	hRes = ERR_BUS_NO_ERROR;

	if (pContents == NULL)
	{
		return ERR_NO_OBJECT;
	}

	nNumPerPage = GWM_List_GetNumOfPage(NAPPV_MEDIASET_PACKPURC_SUBBTN_ID);
	nOldDrawIndex = GWM_List_GetCurrentIndex(NAPPV_MEDIASET_PACKPURC_SUBBTN_ID);

	switch(eKeyCode)
	{
		case KEY_ARROWUP:
			hRes = GWM_List_SetCurrentIndex(NAPPV_MEDIASET_PACKPURC_SUBBTN_ID, nOldDrawIndex-1);
			if (hRes == ERR_BUS_NO_ERROR)
			{
				if (nOldDrawIndex/nNumPerPage != (nOldDrawIndex-1)/nNumPerPage)		// page°¡ ¹Ù²ï °æ¿ì
				{
					pContents->ulCurPage --;
					xmgr_cas_NaPpvPackpurcGetPageStr_Mediaset(pContents);
					GWM_Text_SetText(NAPPV_MEDIASET_PACKPURC_LISTPAGE_TEXT_ID, pContents->ucPageNum);
				}
			}
			break;

		case KEY_PAGEUP:
			hRes = GWM_List_SetCurrentIndex(NAPPV_MEDIASET_PACKPURC_SUBBTN_ID, nOldDrawIndex-nNumPerPage);
			if (hRes == ERR_BUS_NO_ERROR)
			{
				pContents->ulCurPage --;
				xmgr_cas_NaPpvPackpurcGetPageStr_Mediaset(pContents);
				GWM_Text_SetText(NAPPV_MEDIASET_PACKPURC_LISTPAGE_TEXT_ID, pContents->ucPageNum);
			}
			break;

		case KEY_ARROWDOWN:
			hRes = GWM_List_SetCurrentIndex(NAPPV_MEDIASET_PACKPURC_SUBBTN_ID, nOldDrawIndex+1);
			if (hRes == ERR_BUS_NO_ERROR)
			{
				if (nOldDrawIndex/nNumPerPage != (nOldDrawIndex+1)/nNumPerPage)		// page°¡ ¹Ù²ï °æ¿ì
				{
					pContents->ulCurPage ++;
					xmgr_cas_NaPpvPackpurcGetPageStr_Mediaset(pContents);
					GWM_Text_SetText(NAPPV_MEDIASET_PACKPURC_LISTPAGE_TEXT_ID, pContents->ucPageNum);
				}
			}
			break;

		case KEY_PAGEDOWN:
			hRes = GWM_List_SetCurrentIndex(NAPPV_MEDIASET_PACKPURC_SUBBTN_ID, nOldDrawIndex+nNumPerPage);
			if (hRes == ERR_BUS_NO_ERROR)
			{
				pContents->ulCurPage ++;
				xmgr_cas_NaPpvPackpurcGetPageStr_Mediaset(pContents);
				GWM_Text_SetText(NAPPV_MEDIASET_PACKPURC_LISTPAGE_TEXT_ID, pContents->ucPageNum);
			}
			break;

		default:
			break;
	}

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcInitUiConfiguration_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcInitUiConfiguration_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents)
{
	HUINT16 	i = 0;
	HUINT8 		szDate[32];

	HxSTD_memset(pContents, 0, sizeof(XmgrCas_NaPackPurc_Mediaset_t));

	pContents->ulCurGroupIndex = 0;
	pContents->ulCurPage = 0;
	for (i = 0; i < MAX_PACKPURC_LIST_GROUP_NUM; i++)
	{
		pContents->pstGroupInfo[i].eUiGroup = ePackPurcGroup_SPORT+i;
		pContents->pstGroupInfo[i].pszGroupName = (HUINT8 *)GetStrRsc(LOC_CAS_NAGRA_MEDIASET_SPORT_TEXT_ID+i);
		pContents->pstGroupInfo[i].ulItemCount = 0;
		pContents->pstGroupInfo[i].pstPackageListItem = NULL;
	}

	pContents->pstNoItemStr = (HINT8 *)GetStrRsc(LOC_CAS_NAGRA_MEDIASET_MENU_MSG_NO_PACKAGE_TYPE_ID);
	xmgr_cas_NaGetCurrentDateStr(szDate);
	snprintf(pContents->ucCurDate, 32, "%s: %s", (HUINT8 *)GetStrRsc(LOC_CAS_NAGRA_MEDIASET_DATE_TEXT_ID), szDate);

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcGetPageStr_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcGetPageStr_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents)
{
	HINT32	nCurPage, nTotalPage;

	nCurPage = pContents->ulCurPage + 1;
	nTotalPage = pContents->pstGroupInfo[pContents->ulCurGroupIndex].ulItemCount / MAX_PACKPURC_LIST_ROW_NUM + 1;
	if ((pContents->pstGroupInfo[pContents->ulCurGroupIndex].ulItemCount % MAX_PACKPURC_LIST_ROW_NUM) == 0)
	{
		nTotalPage--;
	}

	if (nTotalPage > 0)
	{
		snprintf(pContents->ucPageNum, 16, "%d/%d", nCurPage, nTotalPage);
	}
	else
	{
		snprintf(pContents->ucPageNum, 16, "");
	}

	return ERR_BUS_NO_ERROR;
}


/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcLoadChangeGroup_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcLoadChangeGroup_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents, XmgrCas_NaPackPurcUiGroup_e eNewGroup)
{
	XmgrCas_NaPackPurcGroupInfo_t	curGroupInfo;
	OSD_Rect_t				rect;
	HUINT16					i = 0;

	pContents->ulCurGroupIndex = eNewGroup;
	pContents->ulCurPage = 0;
	curGroupInfo = pContents->pstGroupInfo[eNewGroup];
	xmgr_cas_NaPpvPackpurcGetPageStr_Mediaset(pContents);

	if (GWM_Obj_GetObjectByID(NAPPV_MEDIASET_PACKPURC_SUBBTN_ID))
	{
		GWM_Obj_Destroy(NAPPV_MEDIASET_PACKPURC_SUBBTN_ID);
	}

	/* package List ItemÀ» »ý¼ºÇÑ´Ù. */
	if (curGroupInfo.ulItemCount > 0)
	{
		if (GWM_Obj_GetObjectByID(NAPPV_MEDIASET_PACKPURC_NOITEM_TEXT_ID))
		{
			GWM_Obj_Destroy(NAPPV_MEDIASET_PACKPURC_NOITEM_TEXT_ID);
		}
		if (GWM_Obj_GetObjectByID(NAPPV_MEDIASET_PACKPURC_NOITEM_LINE_ID))
		{
			GWM_Obj_Destroy(NAPPV_MEDIASET_PACKPURC_NOITEM_LINE_ID);
		}

		OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_SUBBTN_X, NAPPV_MEDIASET_PACKPURC_SUBBTN_Y, NAPPV_MEDIASET_PACKPURC_SUBBTN_WIDTH, (NAPPV_MEDIASET_PACKPURC_SUBBTN_HEIGHT * MAX_PACKPURC_LIST_ROW_NUM) + 16);
		GWM_List_Create(NAPPV_MEDIASET_PACKPURC_SUBBTN_ID, &rect, NULL, NAPPV_MEDIASET_PACKPURC_SUBBTN_HEIGHT, curGroupInfo.ulItemCount, /* page count */ MAX_PACKPURC_LIST_ROW_NUM, ((GWM_LIST_ITEMS)curGroupInfo.pstPackageListItem));
		GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_SUBBTN_ID, xmgr_cas_NaPpvPackpurcDrawPackageListItem_Mediaset);

		/* na ppv mediaset packpurc list page str */
		GWM_Text_SetText(NAPPV_MEDIASET_PACKPURC_LISTPAGE_TEXT_ID, pContents->ucPageNum);

		// ok btn »ý¼º
		if (GWM_Obj_GetObjectByID(NAPPV_MEDIASET_PACKPURC_OK_BTN_ID) == NULL)
		{
			OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_OK_BTN_X, NAPPV_MEDIASET_PACKPURC_OK_BTN_Y, NAPPV_MEDIASET_PACKPURC_OK_BTN_WIDTH, NAPPV_MEDIASET_PACKPURC_OK_BTN_HEIGHT);
			GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_OK_BTN_ID, &rect, NULL);
			GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_OK_BTN_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawOKButton_Mediaset);

		}
	}
	else
	{
		if (GWM_Obj_GetObjectByID(NAPPV_MEDIASET_PACKPURC_NOITEM_TEXT_ID) == NULL)
		{
			OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_SUBBTN01_X, NAPPV_MEDIASET_PACKPURC_SUBBTN01_Y-FONT_SIZE_M, NAPPV_MEDIASET_PACKPURC_SUBBTN01_WIDTH, NAPPV_MEDIASET_PACKPURC_SUBBTN01_HEIGHT*2);
			GWM_Text_Create(NAPPV_MEDIASET_PACKPURC_NOITEM_TEXT_ID, &rect, NULL);
			GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_NOITEM_TEXT_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawMenuNoItemText_Mediaset);
		}
		if (GWM_Obj_GetObjectByID(NAPPV_MEDIASET_PACKPURC_NOITEM_LINE_ID) == NULL)
		{
			OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_SUBBTN_LINE_X, NAPPV_MEDIASET_PACKPURC_SUBBTN_LINE_Y+NAPPV_MEDIASET_PACKPURC_SUBBTN01_HEIGHT, NAPPV_MEDIASET_PACKPURC_SUBBTN_LINE_WIDTH, NAPPV_MEDIASET_PACKPURC_SUBBTN_LINE_HEIGHT);
			GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_NOITEM_LINE_ID, &rect, NULL);
			GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_NOITEM_LINE_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawMenuNoItemLine_Mediaset);
		}

		if (GWM_Obj_GetObjectByID(NAPPV_MEDIASET_PACKPURC_OK_BTN_ID) != NULL)
		{
			GWM_Obj_Destroy(NAPPV_MEDIASET_PACKPURC_OK_BTN_ID);
		}
	}
	//GWM_APP_InvalidateObject(NAPPV_MEDIASET_PACKPURC_ARROWRIGHT_BTN_ID);
	//GWM_APP_InvalidateObject(NAPPV_MEDIASET_PACKPURC_ARROWLEFT_BTN_ID);
	for(i = 0; i < MAX_PACKPURC_LIST_GROUP_NUM; i++)
	{
		GWM_APP_InvalidateObject(NAPPV_MEDIASET_PACKPURC_HELPNUM01_TEXT_ID + i);
	}
	/* na ppv mediaset packpurc list page str */
	GWM_Text_SetText(NAPPV_MEDIASET_PACKPURC_LISTPAGE_TEXT_ID, pContents->ucPageNum);

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcChangeGroup_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcChangeGroup_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents, KEY_Code_t eKeyCode)
{
	XmgrCas_NaPackPurcUiGroup_e		eUiGroup = pContents->ulCurGroupIndex;

	switch(eKeyCode)
	{
		case KEY_ARROWLEFT:
			if (eUiGroup == 0)
			{
				eUiGroup = ePackPurcGroup_MAX - 1;
			}
			else
			{
				eUiGroup--;
			}

			xmgr_cas_NaPpvPackpurcLoadChangeGroup_Mediaset(pContents, (XmgrCas_NaPackPurcUiGroup_e)eUiGroup);
			break;
		case KEY_ARROWRIGHT:
			if (eUiGroup == (ePackPurcGroup_MAX - 1))
			{
				eUiGroup = 0;
			}
			else
			{
				eUiGroup++;
			}

			xmgr_cas_NaPpvPackpurcLoadChangeGroup_Mediaset(pContents, (XmgrCas_NaPackPurcUiGroup_e)eUiGroup);
			break;

		default:
			break;
	}

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcDrawMenuNoItemText_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcDrawMenuNoItemText_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1)
{
	HINT32					nObjectId;
	OSD_Rect_t				rect_text;
	OSD_Font_t				*pFont;

	//----------------------------------------------------------------
	rect_text.x = pArea->x1 + pRect->x;
	rect_text.y = pArea->y1 + pRect->y;
	rect_text.w = pRect->w;
	rect_text.h = pRect->h;
	//----------------------------------------------------------------

	/* for compiler */
	(void)pArg;
	(void)param1;

	nObjectId = GWM_Obj_GetObjectID(pObject);
	pFont = OSD_FONT_Get(eFont_SystemNormal);
	if (pFont == NULL)
	{
		return ERR_FAIL;
	}
	OSD_FONT_SetSize (pFont, FONT_SIZE_M);

	OSD_GFX_DrawMultiLineStringAlign(pScreen, pFont, rect_text.x, rect_text.y, rect_text.w, rect_text.h, (HINT8 *)GetStrRsc(LOC_CAS_NAGRA_MEDIASET_MENU_MSG_NO_PACKAGE_TYPE_ID),
		NAPPV_MEDIASET_PACKPURC_SUBBTN_LINESPACE-FONT_SIZE_M, COL(C_T_MList_Yellow), TEXT_ALIGN_LEFT|TEXT_MULTILINED);

	if (pFont != NULL)
	{
		OSD_FONT_Release(pFont);
	}

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcDrawMenuNoItemLine_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcDrawMenuNoItemLine_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea,
										OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1)
{
	HINT32				 nX1, nY1;
	OSD_Rect_t			 stRect;
	OSD_StockImage_t	 stImage;

	(void)pObject;
	(void)pArg;
	(void)param1;

	nX1 = pArea->x1 + pRect->x;
	nY1 = pArea->y1 + pRect->y;

	if (!AP_StockImg_GetImage (e914_6_24_Line2, &stImage))
	{
		OSD_GFX_SetRect (&stRect, nX1, nY1, stImage.width, stImage.height);
		OSD_GFX_FB_Blend (stImage.hBuffer, stImage.width, stImage.height, pScreen, &stRect);
	}

	return ERR_BUS_NO_ERROR;
}


/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcDrawBackgroundImage_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcDrawBackgroundImage_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea,
										OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1)
{
	HUINT32					x1, y1;
	OSD_StockImage_t		img;

	/* for compiler */
	NOT_USED_PARAM(pObject);
	NOT_USED_PARAM(pArg);
	NOT_USED_PARAM(param1);

	/* absolute coordinate */
	x1=pArea->x1+pRect->x;
	y1=pArea->y1+pRect->y;

	if (AP_StockImg_GetImage(e914_1_24_BG, &img) == ERR_OK)
	{
		OSD_GFX_FB_Copy((unsigned long)img.hBuffer, img.width, img.height, pScreen, pRect);
	}

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_Nappv_mset_selprog_DrawStateButton_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcDrawStateButton_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect,
											GWM_GuiObject_t pObject, void *pArg, int param1)
{
	HINT32				 nX1, nY1;
	OSD_Rect_t			 stRect;
	OSD_StockImage_t	 stImage;

	(void)pObject;
	(void)pArg;
	(void)param1;

	nX1 = pArea->x1 + pRect->x;
	nY1 = pArea->y1 + pRect->y;

	if (!AP_StockImg_GetImage (e914_5_24_M_3Title_Blue, &stImage))
	{
		OSD_GFX_SetRect (&stRect, nX1, nY1, stImage.width, stImage.height);
		OSD_GFX_FB_Blend (stImage.hBuffer, stImage.width, stImage.height, pScreen, &stRect);
	}

	return ERR_BUS_NO_ERROR;
}

 STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtdescDrawErrorButton_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect,
											GWM_GuiObject_t pObject, void *pArg, int param1)
{
	HINT32				 nX1, nY1;
	OSD_Rect_t			 stRect;
	OSD_StockImage_t	 stImage;

	(void)pObject;
	(void)pArg;
	(void)param1;

	nX1 = pArea->x1 + pRect->x;
	nY1 = pArea->y1 + pRect->y;

	if (!AP_StockImg_GetImage (e914_5_24_M_Bar_Red, &stImage))
	{
		OSD_GFX_SetRect (&stRect, nX1, nY1, stImage.width, stImage.height);
		OSD_GFX_FB_Blend (stImage.hBuffer, stImage.width, stImage.height, pScreen, &stRect);
	}

	return ERR_BUS_NO_ERROR;
}

 STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcDrawMenuGroupName_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1)
{
	HINT32					nObjectId, nThisDrawIndex;
	OSD_Rect_t				rect_text;
	OSD_Font_t				*pFont;

	HINT8 					szListGroupName[32];
	HUINT32					nStrLen1;

	XmgrCas_NaPackPurc_Mediaset_t	*pContents = xmgr_cas_NaPpvPackpurcGetLocalContents_Mediaset();

	//----------------------------------------------------------------
	rect_text.x = pArea->x1 + pRect->x;
	rect_text.y = pArea->y1 + pRect->y;
	rect_text.w = pRect->w;
	rect_text.h = pRect->h;
	//----------------------------------------------------------------

	/* for compiler */
	(void)pArg;
	(void)param1;

	nObjectId = GWM_Obj_GetObjectID(pObject);

	nThisDrawIndex = nObjectId - NAPPV_MEDIASET_PACKPURC_HELPNUM01_TEXT_ID;

	pFont = OSD_FONT_Get(eFont_SystemNormal);
	if (pFont == NULL)
	{
		return ERR_FAIL;
	}
	OSD_FONT_SetSize (pFont, FONT_SIZE_XS);

	switch(nThisDrawIndex)
	{
		case ePackPurcGroup_SPORT:
			sprintf((HUINT8*)szListGroupName, (HUINT8*)"[1] %s", (HUINT8*)GetStrRsc(LOC_CAS_NAGRA_MEDIASET_SPORT_TEXT_ID));

			if(pContents->ulCurGroupIndex == ePackPurcGroup_SPORT)
			{
				OSD_GFX_DrawTextByLimit(pScreen, nObjectId, eFont_SystemNormal, eFontAlign_Left, FONT_SIZE_XS, rect_text.x, rect_text.y, rect_text.w,
						(HINT8 *)szListGroupName, COL(C_T_MList_Yellow));
			}
			else
			{
				OSD_GFX_DrawTextByLimit(pScreen, nObjectId, eFont_SystemNormal, eFontAlign_Left, FONT_SIZE_XS, rect_text.x, rect_text.y, rect_text.w,
							(HINT8 *)szListGroupName, COL(C_T_Cursor));
			}
			break;
		case ePackPurcGroup_CINEMA:
			sprintf((HUINT8*)szListGroupName, (HUINT8*)"[2] %s", (HUINT8*)GetStrRsc(LOC_CAS_NAGRA_MEDIASET_CINEMA_TEXT_ID));

			if(pContents->ulCurGroupIndex == ePackPurcGroup_CINEMA)
			{
				OSD_GFX_DrawTextByLimit(pScreen, nObjectId, eFont_SystemNormal, eFontAlign_Left, FONT_SIZE_XS, rect_text.x, rect_text.y, rect_text.w,
						(HINT8 *)szListGroupName, COL(C_T_MList_Yellow));

			}
			else
			{
				OSD_GFX_DrawTextByLimit(pScreen, nObjectId, eFont_SystemNormal, eFontAlign_Left, FONT_SIZE_XS, rect_text.x, rect_text.y, rect_text.w,
							(HINT8 *)szListGroupName, COL(C_T_Cursor));
			}
			break;

		case ePackPurcGroup_OTHER:
			sprintf((HUINT8*)szListGroupName, (HUINT8*)"[3] %s", (HUINT8*)GetStrRsc(LOC_CAS_NAGRA_MEDIASET_OTHER_TEXT_ID));

			if(pContents->ulCurGroupIndex == ePackPurcGroup_OTHER)
			{
				OSD_GFX_DrawTextByLimit(pScreen, nObjectId, eFont_SystemNormal, eFontAlign_Left, FONT_SIZE_XS, rect_text.x, rect_text.y, rect_text.w,
							(HINT8 *)szListGroupName, COL(C_T_MList_Yellow));
			}
			else
			{
				OSD_GFX_DrawTextByLimit(pScreen, nObjectId, eFont_SystemNormal, eFontAlign_Left, FONT_SIZE_XS, rect_text.x, rect_text.y, rect_text.w,
							(HINT8 *)szListGroupName, COL(C_T_Cursor));
			}
			break;

		default:
			break;
	}

	if (pFont != NULL)
	{
		OSD_FONT_Release(pFont);
	}

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcLinkTraverseListItembyIndex_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
PPV_PACKAGE_LIST_ITEM 	*xmgr_cas_NaPpvPackpurcLinkTraverseListItembyIndex_Mediaset (POINTER_LIST_T **pRoot, HUINT16 usTotalItemIdx, HUINT16 usItemIdx)
{
	POINTER_LIST_T 	*tmp = NULL;

	if (usItemIdx < usTotalItemIdx)
	{
		tmp = UTIL_LINKEDLIST_FindNthListItemFromPointerList (*pRoot, usItemIdx, NULL, NULL);
		if (tmp == NULL)
		{
			HxLOG_Print("Index = %d\n", usItemIdx);
			HxLOG_Critical("Critical Eror!!!\n");
			return NULL;
		}
		return ((PPV_PACKAGE_LIST_ITEM *)tmp->pvContents);
	}
	else
	{

	}

	return NULL;
}


/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcDrawPackageListItem_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcDrawPackageListItem_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect, GWM_GuiObject_t tObject, void *pvArg, int nParam1)
{
	OSD_StockImage_t	 	stImage;

	PPV_PACKAGE_LIST_ITEM	*pDrawSubItemInfo = NULL;

	OSD_Rect_t				rect_list, rect_img;
	HINT32				 	nX1, nY1, nW1;
	HINT8 					szDate[128];

	//credit icon
	OSD_Rect_t				rect_icon;

	HUINT32					nListItemNum = 0, nListFocusIndex = 0, nItemNum = 0, ulNumOfUiSubItemEvents = 0;
	HUINT16					i = 0;
	XmgrCas_NaPackPurc_Mediaset_t	*pContents = xmgr_cas_NaPpvPackpurcGetLocalContents_Mediaset();
	POINTER_LIST_T			*pstPackageList;


	GWM_List_GetTotalItem(GWM_Obj_GetObjectID(tObject), &nListItemNum);
	nItemNum = (HUINT32)GWM_List_GetNumOfPage(GWM_Obj_GetObjectID(tObject));
	nListFocusIndex = (HUINT32)GWM_List_GetCurrentIndex(GWM_Obj_GetObjectID(tObject));
	pDrawSubItemInfo = (PPV_PACKAGE_LIST_ITEM*)GWM_List_GetArrayPtr((LIST_OBJECT)tObject);

	if ((pContents->ulCurGroupIndex < 0) || (pContents->ulCurGroupIndex >= MAX_PACKPURC_LIST_GROUP_NUM))
	{
		HxLOG_Error("ERROR!!! pContents->ulCurGroupIndex(%d)\n", pContents->ulCurGroupIndex);
		return ERR_FAIL;
	}

	pstPackageList = pContents->pstGroupInfo[pContents->ulCurGroupIndex].pstPackageListItem;
	ulNumOfUiSubItemEvents = pContents->pstGroupInfo[pContents->ulCurGroupIndex].ulItemCount;


	if (pstPackageList)
	{
		for (i = 0; i < nItemNum; i++)
		{
			pDrawSubItemInfo = xmgr_cas_NaPpvPackpurcLinkTraverseListItembyIndex_Mediaset(&pstPackageList, ulNumOfUiSubItemEvents, (nListFocusIndex/nItemNum)*nItemNum+i);		// pageÀÇ Ã¹¹øÂ° Ç×¸ñºÎÅÍ
			if (pDrawSubItemInfo)
			{
				if (i == nListFocusIndex % nItemNum)
				{
					// setting text style of the item cursor
					OSD_GFX_SetRect(&rect_img, s_Mediaset_PackPurc_NaviSubItemCursor[0].rect.x, s_Mediaset_PackPurc_NaviSubItemCursor[0].rect.y + (i*NAPPV_MEDIASET_PACKPURC_SUBBTN_CURSOR_LINESPACE),
						s_Mediaset_PackPurc_NaviSubItemCursor[0].rect.w, s_Mediaset_PackPurc_NaviSubItemCursor[0].rect.h);
					nX1 = pArea->x1 + rect_img.x;
					nY1 = pArea->y1 + rect_img.y;
					if (!AP_StockImg_GetImage (e914_5_24_M_4Cursor, &stImage))
					{
						OSD_GFX_SetRect (&rect_img, nX1, nY1, stImage.width, stImage.height);
						OSD_GFX_FB_Blend (stImage.hBuffer, stImage.width, stImage.height, pScreen, &rect_img);
					}
					// setting text style of the line
					OSD_GFX_SetRect(&rect_img, s_Mediaset_PackPurc_NaviSubItemLine[0].rect.x, s_Mediaset_PackPurc_NaviSubItemLine[0].rect.y + (i*NAPPV_MEDIASET_PACKPURC_SUBBTN_LINE_LINESPACE),
												s_Mediaset_PackPurc_NaviSubItemLine[0].rect.w, s_Mediaset_PackPurc_NaviSubItemLine[0].rect.h);
					nX1 = pArea->x1 + rect_img.x;
					nY1 = pArea->y1 + rect_img.y;
					if (!AP_StockImg_GetImage (e914_6_24_Line2, &stImage))
					{
						OSD_GFX_SetRect (&rect_img, nX1, nY1, stImage.width, stImage.height);
						OSD_GFX_FB_Blend (stImage.hBuffer, stImage.width, stImage.height, pScreen, &rect_img);
					}
				}
				else
				{
					// setting text style of the line
					OSD_GFX_SetRect(&rect_img, s_Mediaset_PackPurc_NaviSubItemLine[0].rect.x, s_Mediaset_PackPurc_NaviSubItemLine[0].rect.y + (i*NAPPV_MEDIASET_PACKPURC_SUBBTN_LINE_LINESPACE),
												s_Mediaset_PackPurc_NaviSubItemLine[0].rect.w, s_Mediaset_PackPurc_NaviSubItemLine[0].rect.h);
					nX1 = pArea->x1 + rect_img.x;
					nY1 = pArea->y1 + rect_img.y;
					if (!AP_StockImg_GetImage (e914_6_24_Line2, &stImage))
					{
						OSD_GFX_SetRect (&rect_img, nX1, nY1, stImage.width, stImage.height);
						OSD_GFX_FB_Blend (stImage.hBuffer, stImage.width, stImage.height, pScreen, &rect_img);
					}
				}

				if (MWC_UTIL_DvbStrlenStrOnly(pDrawSubItemInfo->PackageName) > 0)
				{
					// setting text style of the evtname info list
					OSD_GFX_SetRect(&rect_list, s_Mediaset_PackPurc_NaviSubItem[0].rect.x, s_Mediaset_PackPurc_NaviSubItem[0].rect.y + (i*NAPPV_MEDIASET_PACKPURC_SUBBTN_LINESPACE),
												s_Mediaset_PackPurc_NaviSubItem[0].rect.w, s_Mediaset_PackPurc_NaviSubItem[0].rect.h);
					OSD_GFX_DrawTextByLimit(pScreen, GWM_Obj_GetObjectID(tObject), eFont_SystemNormal, eFontAlign_Left, FONT_SIZE_M, rect_list.x, rect_list.y, rect_list.w,
												(HINT8 *)pDrawSubItemInfo->PackageName, COL(C_T_Cursor));
				}

				// setting text style of the credit info list
				OSD_GFX_SetRect(&rect_list, s_Mediaset_PackPurc_NaviSubItem[1].rect.x, s_Mediaset_PackPurc_NaviSubItem[1].rect.y + (i*NAPPV_MEDIASET_PACKPURC_SUBBTN_LINESPACE),
											s_Mediaset_PackPurc_NaviSubItem[1].rect.w, s_Mediaset_PackPurc_NaviSubItem[1].rect.h);

				/* credit icon */
				if (!AP_StockImg_GetImage (e911_4_24_Euro_Font_White_B, &stImage))
				{
					nX1 = rect_list.x + rect_list.w - stImage.width;
					nY1 = rect_list.y - NAPPV_MEDIASET_PACKPURC_STRING_MARGIN_Y;
					OSD_GFX_SetRect (&rect_icon, nX1, nY1, stImage.width, stImage.height);
					OSD_GFX_FB_Blend (stImage.hBuffer, stImage.width, stImage.height, pScreen, &rect_icon);
				}
				/* credit */
				nW1 = rect_list.w - stImage.width -10;
				snprintf(szDate, 128, "%d,%02d", pDrawSubItemInfo->Cost/100, pDrawSubItemInfo->Cost%100);
				OSD_GFX_DrawTextByLimit(pScreen, GWM_Obj_GetObjectID(tObject), eFont_SystemNormal, eFontAlign_Right, FONT_SIZE_M, rect_list.x, rect_list.y, nW1,
												(HINT8 *)szDate, COL(C_T_Cursor));


			}
		}
	}

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcDrawCredit_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcDrawCredit_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect,
											GWM_GuiObject_t pObject, void *pArg, int param1)
{
	HINT8 					szDate[128];
	HINT32					nObjectId, nRemainCredit = 0;
	OSD_Rect_t				rect_text;

	//credit icon
	OSD_StockImage_t	 	stImage;
	OSD_Rect_t				rect_icon;
	HINT32					nX, nY, nW, nStrLen = 0;

	OSD_Font_t				*pFont;

	//----------------------------------------------------------------
	rect_text.x = pArea->x1 + pRect->x;
	rect_text.y = pArea->y1 + pRect->y;
	rect_text.w = pRect->w;
	rect_text.h = pRect->h;
	//----------------------------------------------------------------

	/* for compiler */
	(void)pArg;
	(void)param1;

	nObjectId = GWM_Obj_GetObjectID(pObject);

	/* na ppv mediaset packpurc credit icon */
	if (!AP_StockImg_GetImage (e915_1_24_EUR, &stImage))
	{
		nX = rect_text.x + rect_text.w - stImage.width;
		nY = rect_text.y - NAPPV_MEDIASET_PACKPURC_STRING_MARGIN_Y;
		OSD_GFX_SetRect (&rect_icon, nX, nY, stImage.width, stImage.height);
		OSD_GFX_FB_Blend (stImage.hBuffer, stImage.width, stImage.height, pScreen, &rect_icon);
	}

	/* na ppv mediaset packpurc credit  */
	xmgr_cas_NaGetScCredit(&nRemainCredit);
	nW = rect_text.w - stImage.width -10;
	snprintf(szDate, 128, "%d,%02d", nRemainCredit/100, nRemainCredit%100);
	OSD_GFX_DrawTextByLimit(pScreen, nObjectId, eFont_SystemNormal, eFontAlign_Right, FONT_SIZE_M, rect_text.x, rect_text.y, nW,
										(HINT8 *)szDate, COL(C_T_MList_Yellow));

	/* na ppv mediaset packpurc credit text*/
	pFont = OSD_FONT_Get(eFont_SystemNormal);
	nStrLen = OSD_GFX_GetStringWidth(pFont, szDate);
	nW = nW - nStrLen;
	if (pFont != NULL)
		OSD_FONT_Release(pFont);

	OSD_GFX_DrawTextByLimit(pScreen, nObjectId, eFont_SystemNormal, eFontAlign_Right, FONT_SIZE_M, rect_text.x, rect_text.y, nW,
										(HINT8 *)GetStrRsc(LOC_CAS_NAGRA_MEDIASET_CREDIT_TEXT_ID), COL(C_T_Cursor));

	return ERR_BUS_NO_ERROR;
}


/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcDrawUpDownArrow_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcDrawUpDownArrow_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect,
											GWM_GuiObject_t pObject, void *pArg, int param1)
{
	HINT32			nX1, nY1;
	OSD_Rect_t		stRect;
	OSD_StockImage_t	stImage;

	(void)pObject;
	(void)pArg;
	(void)param1;

	nX1 = pArea->x1 + pRect->x;
	nY1 = pArea->y1 + pRect->y;

	if (!AP_StockImg_GetImage (e914_2_24_Arrow_W_3UD, &stImage))
	{
		OSD_GFX_SetRect (&stRect, nX1, nY1, stImage.width, stImage.height);
		OSD_GFX_FB_Blend (stImage.hBuffer, stImage.width, stImage.height, pScreen, &stRect);
	}

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcDrawOKButton_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcDrawOKButton_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect,
											GWM_GuiObject_t pObject, void *pArg, int param1)
{
	HINT32			nX1, nY1;
	OSD_Rect_t		stRect;
	OSD_StockImage_t	stImage;

	(void)pObject;
	(void)pArg;
	(void)param1;

	nX1 = pArea->x1 + pRect->x;
	nY1 = pArea->y1 + pRect->y;

	if (!AP_StockImg_GetImage (e914_1_24_BTN_1OK, &stImage))
	{
		OSD_GFX_SetRect (&stRect, nX1, nY1, stImage.width, stImage.height);
		OSD_GFX_FB_Blend (stImage.hBuffer, stImage.width, stImage.height, pScreen, &stRect);
	}

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcDrawBackButton_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcDrawBackButton_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect,
											GWM_GuiObject_t pObject, void *pArg, int param1)
{
	HINT32				 nX1, nY1;
	OSD_Rect_t			 stRect;
	OSD_StockImage_t	 stImage;

	(void)pObject;
	(void)pArg;
	(void)param1;

	nX1 = pArea->x1 + pRect->x;
	nY1 = pArea->y1 + pRect->y;

	if (!AP_StockImg_GetImage (e914_1_24_BTN_2Back, &stImage))
	{
		OSD_GFX_SetRect (&stRect, nX1, nY1, stImage.width, stImage.height);
		OSD_GFX_FB_Blend (stImage.hBuffer, stImage.width, stImage.height, pScreen, &stRect);
	}

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcSetUiObjects_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcSetUiObjects_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents)
{
	OSD_Rect_t				rect = {0, };

	/* na ppv mediaset packpurc background */
	Settings_DrawBack(FALSE);
	OSD_GFX_SetRect(&rect, 0, 0, OSD_SCREEN_WIDTH, OSD_SCREEN_HEIGHT);
	GWM_Rect_Create(NAPPV_MEDIASET_PACKPURC_LOGOBACKGROUND_IMAGE_ID, &rect, 0x00000000);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_LOGOBACKGROUND_IMAGE_ID, xmgr_cas_NaPpvPackpurcDrawBackgroundImage_Mediaset);

	/* na ppv mediaset spackpurc credit button */
	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_STATE_BTN_X, NAPPV_MEDIASET_PACKPURC_STATE_BTN_Y, NAPPV_MEDIASET_PACKPURC_STATE_BTN_WIDTH, NAPPV_MEDIASET_PACKPURC_STATE_BTN_HEIGHT);
	GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_STATE_BTN_ID, &rect, NULL);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_STATE_BTN_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawStateButton_Mediaset);

	/* na ppv mediaset packpurc date text*/
	OSD_GFX_SetRect (&rect, NAPPV_MEDIASET_PACKPURC_DATE_TEXT_X, NAPPV_MEDIASET_PACKPURC_DATE_TEXT_Y, NAPPV_MEDIASET_PACKPURC_DATE_TEXT_WIDTH, NAPPV_MEDIASET_PACKPURC_DATE_TEXT_HEIGHT);
	GWM_Text_Create(NAPPV_MEDIASET_PACKPURC_DATE_TEXT_ID, &rect, pContents->ucCurDate);
	GWM_Text_SetAlign (NAPPV_MEDIASET_PACKPURC_DATE_TEXT_ID, TEXT_ALIGN_RIGHT);
	GWM_Text_SetSize (NAPPV_MEDIASET_PACKPURC_DATE_TEXT_ID, FONT_SIZE_S);
	GWM_Text_ChangeColor (NAPPV_MEDIASET_PACKPURC_DATE_TEXT_ID, COL(C_T_Cursor), 0x00);

	/* na ppv mediaset packpurc info text*/
	OSD_GFX_SetRect (&rect, NAPPV_MEDIASET_PACKPURC_INFO_TEXT_X, NAPPV_MEDIASET_PACKPURC_INFO_TEXT_Y, NAPPV_MEDIASET_PACKPURC_INFO_TEXT_WIDTH, NAPPV_MEDIASET_PACKPURC_INFO_TEXT_HEIGHT);
	GWM_Text_Create (NAPPV_MEDIASET_PACKPURC_INFO_TEXT_ID, &rect, (HUINT8 *)GetStrRsc(LOC_CAS_NAGRA_MEDIASET_MENU_MSG_PACKAGE_WAITING_ID));
	GWM_Text_SetAlign (NAPPV_MEDIASET_PACKPURC_INFO_TEXT_ID, TEXT_ALIGN_LEFT);
	GWM_Text_SetSize (NAPPV_MEDIASET_PACKPURC_INFO_TEXT_ID, FONT_SIZE_M);
	GWM_Text_ChangeColor(NAPPV_MEDIASET_PACKPURC_INFO_TEXT_ID, COL (C_T_Cursor), 0x00);

	/* na ppv mediaset packpurc state button */
	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_X, NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_Y, NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_WIDTH, NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_HEIGHT);
	GWM_Text_Create(NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_ID, &rect, NULL);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawCredit_Mediaset);

	/* na ppv mediaset packpurc back button */
	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_BACK_BTN_X, NAPPV_MEDIASET_PACKPURC_BACK_BTN_Y, NAPPV_MEDIASET_PACKPURC_BACK_BTN_WIDTH, NAPPV_MEDIASET_PACKPURC_BACK_BTN_HEIGHT);
	GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_BACK_BTN_ID, &rect, NULL);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_BACK_BTN_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawBackButton_Mediaset);

	HxLOG_Print(" --- \n");

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcDestroyUI_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcDestroyUI_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents)
{
	HUINT16 i = 0;

	for (i = 0; i < MAX_PACKPURC_LIST_GROUP_NUM; i++)
	{
		if (pContents->pstGroupInfo[i].pstPackageListItem)
		{
			xmgr_cas_NaPpvPackpurcFreePackageList_Mediaset(&pContents->pstGroupInfo[i].pstPackageListItem);
			pContents->pstGroupInfo[i].pstPackageListItem = NULL;
		}
	}

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcProcessOKClicked_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcProcessOKClicked_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents, KEY_Code_t eKeyCode)
{
	/* for compiler */
	(void)pContents;
	(void)eKeyCode;

	pContents->usSelectedIndex = GWM_List_GetCurrentIndex(NAPPV_MEDIASET_PACKPURC_SUBBTN_ID);

	BUS_MGR_Create(  "xproc_cas_NaPackagePurchaseEvtDesc_Mediaset",
				APP_DIALOGBOX_PRIORITY,
				xproc_cas_NaPackagePurchaseEvtDesc_Mediaset,
				HANDLE_NULL,
				0, //(HINT32)GetStrRsc(LOC_CAS_PACKAGEPURCHASE_INFORMATION_TEXT_ID),
				DLG_TYPE_MESSAGE|DLG_TIMEOUT_60SEC,
				(HINT32)BUS_MGR_GetAppCallback(BUS_MGR_GetThis()));

	return ERR_BUS_NO_ERROR;
}

STATIC BUS_Result_t	xmgr_cas_NaPpvPackpurcFreePackageList_Mediaset(POINTER_LIST_T **pRoot)
{
	*pRoot = UTIL_LINKEDLIST_FreeWholeListItemsFromPointerList(*pRoot, NULL);

	if(*pRoot != NULL)
	{
		HxLOG_Critical("\n\n");
	}

	return ERR_BUS_NO_ERROR;
}

STATIC HERROR xmgr_cas_NaPpvPackpurcAddLocalTimeOffset_Mediaset(UNIXTIME *startTime, UNIXTIME *endTime)
{
	//ÁÖ¾îÁø time¿¡ local offset °ªÀ» Àû¿ë ÇÏ¿© º¯°æ ÇÏ¿© ÁÖ±â....
	HERROR 		hErr;
	HUINT32		ulValue;
	UNIXTIME 	unixtimeOffset = 0;

	if ((startTime == NULL) && (endTime == NULL))
	{
		HxLOG_Info("input time all NULL\n");
		return ERR_FAIL;
	}

	hErr = DB_PARAM_GetItem(eDB_PARAM_ITEM_GMT_OFFSET_MINUTES, &ulValue, 0);
	HxLOG_Info("eDB_PARAM_ITEM_GMT_OFFSET_MINUTES = %ld\n", ulValue);
	unixtimeOffset = (UNIXTIME)ulValue;

	if (hErr == ERR_OK)
	{
		if (startTime)
		{
			*startTime += unixtimeOffset;
		}
		if (endTime)
		{
			*endTime += unixtimeOffset;
		}
	}

	return hErr;
}

STATIC HERROR xmgr_cas_NaPpvPackpurcCheckValidPeriod_Mediaset(TCalendarTime tStartTime, TCalendarTime tEndTime)
{
	UNIXTIME		ulStartTime = 0, ulEndTime = 0, ulCurTime= 0;
	BUS_Result_t	hRes;
	HxDATETIME_t 	dateTime;

	hRes = VK_CLOCK_GetTime((unsigned long *)&ulCurTime);
	HxLOG_Print("hRes = %d, ulCurTime = %d\n", hRes, ulCurTime);
	if (hRes != ERR_OK || ulCurTime == 0)
	{
		return ERR_FAIL;
	}

	dateTime.stDate.usYear = (unsigned short)tStartTime.year +1900;
	dateTime.stDate.ucMonth = (unsigned short)tStartTime.month;
	dateTime.stDate.ucDay= (unsigned short)tStartTime.day;
	dateTime.stTime.ucHour= (unsigned short)tStartTime.hour;
	dateTime.stTime.ucMinute= (unsigned short)tStartTime.minute;
	dateTime.stTime.ucSecond= (unsigned short)tStartTime.second;
	dateTime.stTime.usMillisecond = 0;
	HLIB_DATETIME_ConvertDateTimeToUnixTimeWithOutOffset(&dateTime, &ulStartTime);
	HxLOG_Print("StartTime - %d/%d/%d %d:%d:%d\n", dateTime.stDate.usYear, dateTime.stDate.ucMonth,
		dateTime.stDate.ucDay, dateTime.stTime.ucHour, dateTime.stTime.ucMinute, dateTime.stTime.ucSecond));
	HxLOG_Print("ulStartTime = %d\n", ulStartTime);

	dateTime.stDate.usYear = (unsigned short)tEndTime.year +1900;
	dateTime.stDate.ucMonth = (unsigned short)tEndTime.month;
	dateTime.stDate.ucDay= (unsigned short)tEndTime.day;
	dateTime.stTime.ucHour= (unsigned short)tEndTime.hour;
	dateTime.stTime.ucMinute= (unsigned short)tEndTime.minute;
	dateTime.stTime.ucSecond= (unsigned short)tEndTime.second;
	dateTime.stTime.usMillisecond = 0 ;
	HLIB_DATETIME_ConvertDateTimeToUnixTimeWithOutOffset(&dateTime, &ulEndTime);
	HxLOG_Print("EndTime - %d/%d/%d %d:%d:%d\n", dateTime.stDate.usYear, dateTime.stDate.ucMonth,
		dateTime.stDate.ucDay, dateTime.stTime.ucHour, dateTime.stTime.ucMinute, dateTime.stTime.ucSecond));
	HxLOG_Print("ulEndTime = %d\n", ulEndTime);

	xmgr_cas_NaPpvPackpurcAddLocalTimeOffset_Mediaset(&ulStartTime, &ulEndTime);
	if (ulCurTime <  ulStartTime || ulCurTime > ulEndTime)
	{
		return ERR_FAIL;
	}

	return ERR_OK;
}

STATIC HERROR xmgr_cas_NaPpvPackpurcCheckValidService_Mediaset(DbSvc_TripleId_t tripleId)
{
	HERROR			hErr;
	Handle_t 		hSvcHandle = HANDLE_NULL;
	hErr = DB_SVC_FindServiceHandleByTripleId(eDxDELIVERY_TYPE_TER, tripleId, &hSvcHandle);
	HxLOG_Print("tripleId.usOnId = 0x%x, tripleId.usSvcId = 0x%x, tripleId.usTsId = 0x%x\n", tripleId.usOnId, tripleId.usSvcId, tripleId.usTsId);
	HxLOG_Print("hErr = %d, hSvcHandle = 0x%x\n", hErr, hSvcHandle);
	if (hErr != ERR_OK || hSvcHandle == HANDLE_NULL)
	{
		return ERR_FAIL;
	}

	return ERR_OK;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcUpdatePackageList_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcUpdatePackageList_Mediaset(HUINT32 xStatus, HUINT32 xNumberOfItems, const PPV_PACKAGE_LIST_ITEM* pxPackageList, XmgrCas_NaPackPurc_Mediaset_t* pContents)
{
	HUINT16					index = 0, i = 0, j = 0;
	OSD_Rect_t				rect;
	PPV_PACKAGE_LIST_ITEM	*package = pxPackageList;
	HINT32					nGroupIndex = 0;
	HINT32					nStrLen = 0, nStrLen1 = 0,  nStrLen2 = 0, nStrLen3 = 0;

	OSD_Font_t				*pFont;
	HINT8 					szListGroupName[32] = {0, };

	if (pContents->bWaiting != TRUE)
	{
		return MESSAGE_BREAK;
	}

	HxLOG_Print("xStatus = %d, xNumberOfItems = %d, pxPackageList = 0x%x, pxPackageList->pRequest = 0x%x\n", xStatus, xNumberOfItems, pxPackageList, pxPackageList?pxPackageList->pRequest:0);


	pContents->bWaiting = FALSE;

	pContents->ulCurGroupIndex = 0;
	pContents->ulCurPage = 0;
	for (i = 0; i < MAX_PACKPURC_LIST_GROUP_NUM; i++)
	{
		pContents->pstGroupInfo[i].eUiGroup = ePackPurcGroup_SPORT+i;
		pContents->pstGroupInfo[i].pszGroupName = (HUINT8 *)GetStrRsc(LOC_CAS_NAGRA_MEDIASET_SPORT_TEXT_ID+i);
		pContents->pstGroupInfo[i].ulItemCount = 0;
		if (pContents->pstGroupInfo[i].pstPackageListItem)
		{
			xmgr_cas_NaPpvPackpurcFreePackageList_Mediaset(&pContents->pstGroupInfo[i].pstPackageListItem);
			pContents->pstGroupInfo[i].pstPackageListItem = NULL;
		}
	}

	if (xStatus == CA_EVENT_SUCCESS)
	{
		for (index = 0; index < xNumberOfItems; index ++)
		{
			HBOOL	bValid = TRUE;

			// type °Ë»ç
			if (package->BusinessType < ePACKAGE_SPORT || package->BusinessType > ePACKAGE_OTHERS_MORE)
			{
				package = package->pNext;
				continue;
			}

			nGroupIndex = ((package->BusinessType - 1) / 2);

#ifndef WIN32
			// start time & end time °Ë»ç
			if (xmgr_cas_NaPpvPackpurcCheckValidPeriod_Mediaset(package->PurchaseStartTime, package->PurchaseEndTime) != ERR_OK)
			{
				package = package->pNext;
				continue;
			}

			// tripple id °Ë»ç
			HxLOG_Print("Package[%s] service num = %d\n", package->PackageName, package->NumOfServices);
			for (j = 0; j < package->NumOfServices; j++)
			{
				DbSvc_TripleId_t	tripleId;

				tripleId.usOnId = package->pServices[j].originalNetworkId;
				tripleId.usSvcId = package->pServices[j].serviceId;
				tripleId.usTsId = package->pServices[j].transportStreamId;

				if (xmgr_cas_NaPpvPackpurcCheckValidService_Mediaset(tripleId) != ERR_OK)
				{
					bValid = FALSE;
					break;
				}
			}
			if (!bValid)
			{
				package = package->pNext;
				continue;
			}
#endif
			pContents->pstGroupInfo[nGroupIndex].pstPackageListItem = UTIL_LINKEDLIST_AppendListItemToPointerList(pContents->pstGroupInfo[nGroupIndex].pstPackageListItem, package);
			pContents->pstGroupInfo[nGroupIndex].ulItemCount++;
			pContents->ulTotalItemCount++;

			package = package->pNext;
		}

		/* na ppv mediaset packpurc info text*/
		GWM_Text_SetText(NAPPV_MEDIASET_PACKPURC_INFO_TEXT_ID, (HUINT8 *)GetStrRsc(LOC_CAS_NAGRA_MEDIASET_PACKAGE_PURCHASE_TEXT_ID));

		/* package List ItemÀ» »ý¼ºÇÑ´Ù. */
		if (pContents->pstGroupInfo[pContents->ulCurGroupIndex].ulItemCount > 0 && pContents->pstGroupInfo[pContents->ulCurGroupIndex].pstPackageListItem)
		{
			OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_SUBBTN_X, NAPPV_MEDIASET_PACKPURC_SUBBTN_Y, NAPPV_MEDIASET_PACKPURC_SUBBTN_WIDTH, (NAPPV_MEDIASET_PACKPURC_SUBBTN_HEIGHT * MAX_PACKPURC_LIST_ROW_NUM) + 16);
			GWM_List_Create(NAPPV_MEDIASET_PACKPURC_SUBBTN_ID, &rect, NULL, NAPPV_MEDIASET_PACKPURC_SUBBTN_HEIGHT, pContents->pstGroupInfo[pContents->ulCurGroupIndex].ulItemCount, /* page count */ MAX_PACKPURC_LIST_ROW_NUM, ((GWM_LIST_ITEMS)pContents->pstGroupInfo[pContents->ulCurGroupIndex].pstPackageListItem));
			GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_SUBBTN_ID, xmgr_cas_NaPpvPackpurcDrawPackageListItem_Mediaset);

			// ok btn »ý¼º
			OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_OK_BTN_X, NAPPV_MEDIASET_PACKPURC_OK_BTN_Y, NAPPV_MEDIASET_PACKPURC_OK_BTN_WIDTH, NAPPV_MEDIASET_PACKPURC_OK_BTN_HEIGHT);
			GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_OK_BTN_ID, &rect, NULL);
			GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_OK_BTN_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawOKButton_Mediaset);
		}
		else	// no item text Ãâ·Â
		{
			// no item string display
			OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_SUBBTN01_X, NAPPV_MEDIASET_PACKPURC_SUBBTN01_Y-FONT_SIZE_M, NAPPV_MEDIASET_PACKPURC_SUBBTN01_WIDTH, NAPPV_MEDIASET_PACKPURC_SUBBTN01_HEIGHT*2);
			GWM_Text_Create(NAPPV_MEDIASET_PACKPURC_NOITEM_TEXT_ID, &rect, NULL);
			GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_NOITEM_TEXT_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawMenuNoItemText_Mediaset);

			// under line
			OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_SUBBTN_LINE_X, NAPPV_MEDIASET_PACKPURC_SUBBTN_LINE_Y+NAPPV_MEDIASET_PACKPURC_SUBBTN01_HEIGHT, NAPPV_MEDIASET_PACKPURC_SUBBTN_LINE_WIDTH, NAPPV_MEDIASET_PACKPURC_SUBBTN_LINE_HEIGHT);
			GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_NOITEM_LINE_ID, &rect, NULL);
			GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_NOITEM_LINE_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawMenuNoItemLine_Mediaset);
		}

		if (1)//(pContents->ulTotalItemCount)
		{
			/* na ppv mediaset packpurc help num button text*/
			//snprintf(szLeft, 2, "<");
			pFont = OSD_FONT_Get(eFont_SystemNormal);
			nStrLen = OSD_GFX_GetStringWidth(pFont, "<");

			OSD_GFX_SetRect (&rect, NAPPV_MEDIASET_PACKPURC_ARROWLEFT_BTN_X, NAPPV_MEDIASET_PACKPURC_ARROWLEFT_BTN_Y, nStrLen, NAPPV_MEDIASET_PACKPURC_ARROWLEFT_BTN_HEIGHT);
			GWM_Text_Create (NAPPV_MEDIASET_PACKPURC_ARROWLEFT_BTN_ID, &rect, (HUINT8 *)"<");
			GWM_Text_SetAlign (NAPPV_MEDIASET_PACKPURC_ARROWLEFT_BTN_ID, TEXT_ALIGN_LEFT);
			GWM_Text_SetSize (NAPPV_MEDIASET_PACKPURC_ARROWLEFT_BTN_ID, FONT_SIZE_XS);
			GWM_Text_ChangeColor(NAPPV_MEDIASET_PACKPURC_ARROWLEFT_BTN_ID, COL (C_T_Cursor), 0x00);

			sprintf(szListGroupName, (HUINT8*)"[1] %s", (HUINT8*)pContents->pstGroupInfo[ePackPurcGroup_SPORT].pszGroupName);
			nStrLen1 = OSD_GFX_GetStringWidth(pFont, szListGroupName);

			HxLOG_Print("%s %d\n\n", szListGroupName, nStrLen1);
			OSD_GFX_SetRect (&rect, NAPPV_MEDIASET_PACKPURC_HELPNUM01_TEXT_X + nStrLen + 20, NAPPV_MEDIASET_PACKPURC_HELPNUM01_TEXT_Y, nStrLen1, NAPPV_MEDIASET_PACKPURC_HELPNUM01_TEXT_HEIGHT);
			GWM_Text_Create (NAPPV_MEDIASET_PACKPURC_HELPNUM01_TEXT_ID, &rect, (HUINT8*)NULL);
			GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_HELPNUM01_TEXT_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawMenuGroupName_Mediaset);

			sprintf(szListGroupName, (HUINT8*)"[2] %s", (HUINT8*)pContents->pstGroupInfo[ePackPurcGroup_CINEMA].pszGroupName);
			nStrLen2 = OSD_GFX_GetStringWidth(pFont, szListGroupName);

			OSD_GFX_SetRect (&rect, NAPPV_MEDIASET_PACKPURC_HELPNUM01_TEXT_X + nStrLen + 20 + nStrLen1 + 45, NAPPV_MEDIASET_PACKPURC_HELPNUM02_TEXT_Y, nStrLen2, NAPPV_MEDIASET_PACKPURC_HELPNUM02_TEXT_HEIGHT);
			GWM_Text_Create (NAPPV_MEDIASET_PACKPURC_HELPNUM02_TEXT_ID, &rect, (HUINT8 *)NULL);
			GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_HELPNUM02_TEXT_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawMenuGroupName_Mediaset);

			sprintf(szListGroupName, (HUINT8*)"[3] %s", (HUINT8*)pContents->pstGroupInfo[ePackPurcGroup_OTHER].pszGroupName);
			nStrLen3 = OSD_GFX_GetStringWidth(pFont, szListGroupName);

			OSD_GFX_SetRect (&rect, NAPPV_MEDIASET_PACKPURC_HELPNUM01_TEXT_X + nStrLen + 20 + nStrLen1 + 45 + nStrLen2 + 45, NAPPV_MEDIASET_PACKPURC_HELPNUM03_TEXT_Y, nStrLen3, NAPPV_MEDIASET_PACKPURC_HELPNUM03_TEXT_HEIGHT);
			GWM_Text_Create (NAPPV_MEDIASET_PACKPURC_HELPNUM03_TEXT_ID, &rect, (HUINT8 *)NULL);
			GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_HELPNUM03_TEXT_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawMenuGroupName_Mediaset);

			OSD_GFX_SetRect (&rect, NAPPV_MEDIASET_PACKPURC_HELPNUM01_TEXT_X + nStrLen + 20 + nStrLen1 + 45 + nStrLen2 + 45 + nStrLen3 + 20, NAPPV_MEDIASET_PACKPURC_ARROWRIGHT_BTN_Y, NAPPV_MEDIASET_PACKPURC_ARROWRIGHT_BTN_WIDTH, NAPPV_MEDIASET_PACKPURC_ARROWRIGHT_BTN_HEIGHT);
			GWM_Text_Create (NAPPV_MEDIASET_PACKPURC_ARROWRIGHT_BTN_ID, &rect, (HUINT8 *)">");
			GWM_Text_SetAlign (NAPPV_MEDIASET_PACKPURC_ARROWRIGHT_BTN_ID, TEXT_ALIGN_LEFT);
			GWM_Text_SetSize (NAPPV_MEDIASET_PACKPURC_ARROWRIGHT_BTN_ID, FONT_SIZE_XS);
			GWM_Text_ChangeColor(NAPPV_MEDIASET_PACKPURC_ARROWRIGHT_BTN_ID, COL (C_T_Cursor), 0x00);

			/* na ppv mediaset packpurc up/down arrow */
			OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_ARROW_BTN_X, NAPPV_MEDIASET_PACKPURC_ARROW_BTN_Y, NAPPV_MEDIASET_PACKPURC_ARROW_BTN_WIDTH, NAPPV_MEDIASET_PACKPURC_ARROW_BTN_HEIGHT);
			GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_ARROW_BTN_ID, &rect, NULL);
			GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_ARROW_BTN_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawUpDownArrow_Mediaset);

			/* na ppv mediaset packpurc list page button */
			xmgr_cas_NaPpvPackpurcGetPageStr_Mediaset(pContents);
			OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_LISTPAGE_TEXT_X, NAPPV_MEDIASET_PACKPURC_LISTPAGE_TEXT_Y-FONT_SIZE_XS, NAPPV_MEDIASET_PACKPURC_LISTPAGE_TEXT_WIDTH, NAPPV_MEDIASET_PACKPURC_LISTPAGE_TEXT_HEIGHT);
			GWM_Text_Create(NAPPV_MEDIASET_PACKPURC_LISTPAGE_TEXT_ID, &rect, pContents->ucPageNum);
			GWM_Text_SetAlign (NAPPV_MEDIASET_PACKPURC_LISTPAGE_TEXT_ID, TEXT_ALIGN_LEFT);
			GWM_Text_SetSize (NAPPV_MEDIASET_PACKPURC_LISTPAGE_TEXT_ID, FONT_SIZE_XS);
			GWM_Text_ChangeColor(NAPPV_MEDIASET_PACKPURC_LISTPAGE_TEXT_ID, COL (C_T_Cursor), 0x00);
		}
		else
		{
			// no item string display
		}

		GWM_Obj_SetFocus(NAPPV_MEDIASET_PACKPURC_SUBBTN_ID);
	}
	else
	{
		if (GWM_Obj_GetObjectByID(NAPPV_MEDIASET_PACKPURC_STATE_BTN_ID))
		{
			GWM_Obj_Destroy(NAPPV_MEDIASET_PACKPURC_STATE_BTN_ID);
		}
		if (GWM_Obj_GetObjectByID(NAPPV_MEDIASET_PACKPURC_DATE_TEXT_ID))
		{
			GWM_Obj_Destroy(NAPPV_MEDIASET_PACKPURC_DATE_TEXT_ID);
		}
		if (GWM_Obj_GetObjectByID(NAPPV_MEDIASET_PACKPURC_INFO_TEXT_ID))
		{
			GWM_Obj_Destroy(NAPPV_MEDIASET_PACKPURC_INFO_TEXT_ID);
		}
		if (GWM_Obj_GetObjectByID(NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_ID))
		{
			GWM_Obj_Destroy(NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_ID);
		}
		if (GWM_Obj_GetObjectByID(NAPPV_MEDIASET_PACKPURC_BACK_BTN_ID))
		{
			GWM_Obj_Destroy(NAPPV_MEDIASET_PACKPURC_BACK_BTN_ID);
		}
		// ts error string display
		OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_TS_ERROR_TEXT_X, NAPPV_MEDIASET_PACKPURC_TS_ERROR_TEXT_Y, NAPPV_MEDIASET_PACKPURC_TS_ERROR_TEXT_WIDTH, NAPPV_MEDIASET_PACKPURC_TS_ERROR_TEXT_HEIGHT);
		GWM_Text_Create(NAPPV_MEDIASET_PACKPURC_TS_ERROR_TEXT_ID, &rect, NULL);
		GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_TS_ERROR_TEXT_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawTsErrorMessage_Mediaset);

		// ts error exit button
		OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_TS_ERROR_BTN_X, NAPPV_MEDIASET_PACKPURC_TS_ERROR_BTN_Y, NAPPV_MEDIASET_PACKPURC_TS_ERROR_BTN_WIDTH, NAPPV_MEDIASET_PACKPURC_TS_ERROR_BTN_HEIGHT);
		GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_TS_ERROR_BTN_ID, &rect, NULL);
		GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_TS_ERROR_BTN_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawTsErrorExitBtn_Mediaset);
	}
}

STATIC BUS_Result_t	xmgr_cas_NaPpvPackpurcAddLongStringWithWordwrap_Mediaset(HUINT32 ulFmtObjID, HUINT32 ulFmtObjWidth,HUINT8 *pszString, HUINT32 ulStrLen, Text_Property_t *pstTextProperty)
{
	BUS_Result_t				lResult = ERR_INITIAL_FAILED;
	HERROR					hError = ERR_FAIL;
	HUINT8					*pszBuf;
	HUINT8					*pucTraverse;
	HUINT32					ulCharNumPerLine = 1;
	HUINT8					aucLangCode[MAX_LANGCODE_LEN] = {0, };
	HUINT32 					ulLangCodeLen = 0;
	HINT32 					lSingleLineStrLen = 0;
	OSD_Font_t 				*pFont = OSD_FONT_Get(eFont_SystemNormal);

	if(pszString == NULL || pFont == NULL || ulStrLen <= 0)
	{
		HxLOG_Print("[local_CasNaPPVMediasetBanner_AddLongStringWithWordwrap] pszString null \n");
		goto EXIT_EPGMAINAP_FUNC;
	}

	pszBuf = GetTextBuffer(TEXT_SIZE512);

	ulLangCodeLen = MWC_UTIL_GetLocaleCodeLen(pszString);
	HxSTD_memcpy(aucLangCode, pszString, ulLangCodeLen*sizeof(HUINT8));

/*****************************************************************************************
  *
  *  stringÀÌ ±æ¸é width¿¡ ¸Â°Ô ¿©·¯¹ø Àß¶ó¼­ ÀÔ·ÂÇÏ±â À§ÇØ, traversingÇÑ´Ù.
  *
  *****************************************************************************************/
	pucTraverse = pszString + ulLangCodeLen;
	OSD_FONT_SetSize(pFont, pstTextProperty->ulFontSize);

	while (pucTraverse || ulCharNumPerLine > 0)
	{
		switch(pucTraverse[0])
		{
			case CHAR_VALUE_LINEFEED :
				// LF
				GWM_FMT_AddItem(ulFmtObjID, " ", pstTextProperty);
				pucTraverse++;
				break;
			case CHAR_VALUE_CARRIAGERETURN :
				if(pucTraverse[1] == CHAR_VALUE_LINEFEED)
				{
					// CR/LF
					GWM_FMT_AddItem(ulFmtObjID, " ", pstTextProperty);
					pucTraverse += 2;
				}
				break;
			default :
				break;
		}

/*****************************************************************************************
  *
  * pszLine = width³»¿¡ ÇØ´çÇÏ´Â string Á¶°¢
  * ulCharNumPerLine = width¿¡ ¸Â°Ô Àß¸° stringÀÇ char °¹¼ö
  *
  *****************************************************************************************/
		lSingleLineStrLen = (HINT32)MWC_UTIL_DvbStrlen(pucTraverse);
		hError = OSD_FONT_CountChByWidth_300468(	pFont,
													ulFmtObjWidth,
													aucLangCode,
													ulLangCodeLen,
													lSingleLineStrLen,
													pucTraverse,
													&ulCharNumPerLine);

		if(ulCharNumPerLine == 0)
		{
			break;
		}

		if (ulCharNumPerLine >= TEXT_SIZE512 - MAX_LANGCODE_LEN - 1)
		{
			HxLOG_Error("[local_CasNaPPVMediasetBanner_AddLongStringWithWordwrap] too long length per line!! max 508!! curLen(%d) \n", ulCharNumPerLine);
			goto EXIT_EPGMAINAP_FUNC;
		}

		HxSTD_memset(pszBuf, 0x00, TEXT_SIZE512);
		HxSTD_memcpy(pszBuf, aucLangCode, ulLangCodeLen);
		HxSTD_memcpy(&pszBuf[ulLangCodeLen], pucTraverse, ulCharNumPerLine);
		GWM_FMT_AddItem(ulFmtObjID, pszBuf, pstTextProperty);

		if(ulCharNumPerLine >= lSingleLineStrLen)
		{
			break;
		}
		pucTraverse += ulCharNumPerLine;
	}

	lResult = ERR_BUS_NO_ERROR;

EXIT_EPGMAINAP_FUNC:
	if (pFont)
	{
		OSD_FONT_Release(pFont);
	}

	return lResult;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcDrawTitleName_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcDrawTitleName_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents, OSD_Screen_t *pScreen, OSD_Area_t *pArea,
										OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1)
{
	OSD_Rect_t				rect_list, rect_img;
	HINT32				 	nX1, nY1, nW1;
	HINT8 					szDate[128];
	OSD_StockImage_t		stImage;

	PPV_PACKAGE_LIST_ITEM	*pstPackageItem;
	HINT32					nObjectId;

	//credit icon
	OSD_Rect_t				rect_icon;

	/* for compiler */
	(void)pRect;
	(void)pArg;
	(void)param1;

	nObjectId = GWM_Obj_GetObjectID(pObject);

	pstPackageItem = xmgr_cas_NaPpvPackpurcGetCurSubItem_Mediaset(pContents);

	// setting text style of the evtname info
	OSD_GFX_SetRect(&rect_list, s_Mediaset_PackPurc_NaviSubItem[0].rect.x, s_Mediaset_PackPurc_NaviSubItem[0].rect.y,
						s_Mediaset_PackPurc_NaviSubItem[0].rect.w, s_Mediaset_PackPurc_NaviSubItem[0].rect.h);
	if (MWC_UTIL_DvbStrlenStrOnly(pstPackageItem->PackageName) > 0)
	{
		OSD_GFX_DrawTextByLimit(pScreen, nObjectId, eFont_SystemNormal, eFontAlign_Left, FONT_SIZE_M, rect_list.x, rect_list.y, rect_list.w,
													(HINT8 *)pstPackageItem->PackageName, COL(C_T_MList_Yellow));
	}

	// setting text style of the credit info
	OSD_GFX_SetRect(&rect_list, s_Mediaset_PackPurc_NaviSubItem[1].rect.x, s_Mediaset_PackPurc_NaviSubItem[1].rect.y,
						s_Mediaset_PackPurc_NaviSubItem[1].rect.w, s_Mediaset_PackPurc_NaviSubItem[1].rect.h);

	/* credit icon */
	if (!AP_StockImg_GetImage (e915_1_24_EUR, &stImage))
	{
		nX1 = rect_list.x + rect_list.w - stImage.width;
		nY1 = rect_list.y - NAPPV_MEDIASET_PACKPURC_STRING_MARGIN_Y;
		OSD_GFX_SetRect (&rect_icon, nX1, nY1, stImage.width, stImage.height);
		OSD_GFX_FB_Blend (stImage.hBuffer, stImage.width, stImage.height, pScreen, &rect_icon);
	}
	/* credit */
	nW1 = rect_list.w - stImage.width -10;
	HxSTD_memset(szDate, 0, 128);
	snprintf(szDate, 128, "%d,%02d", pstPackageItem->Cost / 100, pstPackageItem->Cost % 100);
	OSD_GFX_DrawTextByLimit(pScreen, nObjectId, eFont_SystemNormal, eFontAlign_Right, FONT_SIZE_M, rect_list.x, rect_list.y, nW1,
										(HINT8 *)szDate, COL(C_T_MList_Yellow));

	if (nObjectId != NAPPV_MEDIASET_PACKPURC_EVTINFO_EVENTNAME_TEXT_ID)
	{
		// setting text style of the line
		OSD_GFX_SetRect(&rect_img, s_Mediaset_PackPurc_NaviSubItemLine[0].rect.x, s_Mediaset_PackPurc_NaviSubItemLine[0].rect.y,
							s_Mediaset_PackPurc_NaviSubItemLine[0].rect.w, s_Mediaset_PackPurc_NaviSubItemLine[0].rect.h);
		nX1 = pArea->x1 + rect_img.x;
		nY1 = pArea->y1 + rect_img.y;
		if (!AP_StockImg_GetImage (e914_6_24_Line2, &stImage))
		{
			OSD_GFX_SetRect (&rect_img, nX1, nY1, stImage.width, stImage.height);
			OSD_GFX_FB_Blend (stImage.hBuffer, stImage.width, stImage.height, pScreen, &rect_img);
		}
	}

	return ERR_BUS_NO_ERROR;
}

STATIC BUS_Result_t	xmgr_cas_NaPpvPackpurcExtendInfo_DrawItems_Mediaset(int ID, OSD_Screen_t *pScreen, FMT_DrawItem_t *pDrawItem)
{
	BUS_Result_t			hRet = ERR_INITIAL_FAILED;
	FMT_OBJECT				obj = NULL;
	OSD_Rect_t				*pstRect;
	OSD_Font_t				*pFont = OSD_FONT_Get(eFont_SystemNormal);
	HUINT8					*pStr = NULL;
	HBOOL					bImg = FALSE;
	HUINT8					ucMainGenreIndex = 0;
	TEXT_DRAW_INFO_t		stTextInfo;

	obj = (FMT_OBJECT)BUS_MGR_GetObject(ID);

	if (obj == NULL)
	{
		hRet = ERR_NO_OBJECT;
		goto EXIT_EXTENDINFO_DRAWITEMS_FUNC;
	}

	if (pDrawItem == NULL)
	{
		hRet = ERR_FAIL;
		goto EXIT_EXTENDINFO_DRAWITEMS_FUNC;
	}

	if (pDrawItem->str == NULL)
	{
		hRet = ERR_INITIAL_FAILED;
		goto EXIT_EXTENDINFO_DRAWITEMS_FUNC;
	}

	OSD_FONT_SetSize(pFont, pDrawItem->stTextProperty.ulFontSize);
	pstRect = &pDrawItem->itemRect;
	pStr = pDrawItem->str;

	while(*pStr)
	{
		/* ==========================================================
		 *		Check Custom tag
		 * ========================================================= */
		if (*pStr == FMT_CUSTOMTAG_ON)
		{
			pStr++;

			if (*pStr == FMT_CUSTOMTAG_IMAGE)
			{
				if ( (pStr[1] == FMT_CUSTOMTAG_DATA_START) && (pStr[3] == FMT_CUSTOMTAG_DATA_END))
				{
					bImg = TRUE;
					ucMainGenreIndex = pStr[2];
				}
				pStr += 4;
			}
		}
		else
		{
			/* ==========================================================
			 *		Draw text and image
			 * ========================================================= */
			stTextInfo.ulFontSize = pDrawItem->stTextProperty.ulFontSize;
			stTextInfo.ulTextColor = pDrawItem->stTextProperty.cFontColor;
			stTextInfo.ulDrawMode = TEXTMODE_NORMAL;
			stTextInfo.ulXAlign = TEXT_ALIGN_LEFT;
			stTextInfo.ulYAlign = TEXT_ALIGN_MIDDLE;
			AP_UTIL_DrawFormattedText(pScreen, pFont, pstRect, &stTextInfo, pStr);

			break;
		}
	}

	hRet= ERR_BUS_NO_ERROR;

EXIT_EXTENDINFO_DRAWITEMS_FUNC:
	if (pFont)
	{
		OSD_FONT_Release(pFont);
	}

	return hRet;
}

STATIC BUS_Result_t	xmgr_cas_NaPpvPackpurcExtendInfo_DrawScroll_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect, FMT_OBJECT pObject)
{
	(void)pObject;
	(void)pArea;
	(void)pRect;


	return ERR_BUS_NO_ERROR;
}

STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcDrawTsErrorMessage_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea,
										OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1)
{
	HINT32					nObjectId;
	OSD_Rect_t				rect_text;

	OSD_Font_t				*pFont;

	//----------------------------------------------------------------
	rect_text.x = pRect->x;
	rect_text.y = pRect->y - NAPPV_MEDIASET_PACKPURC_STRING_MARGIN_Y;
	rect_text.w = pRect->w;
	rect_text.h = pRect->h;
	//----------------------------------------------------------------

	/* for compiler */
	(void)pArg;
	(void)param1;

	nObjectId = GWM_Obj_GetObjectID(pObject);
	pFont = OSD_FONT_Get(eFont_SystemNormal);
	if (pFont == NULL)
	{
		return ERR_FAIL;
	}
	OSD_FONT_SetSize (pFont, FONT_SIZE_M);

	OSD_GFX_DrawMultiLineStringAlign(pScreen, pFont, rect_text.x, rect_text.y, rect_text.w, rect_text.h, (HINT8 *)GetStrRsc(LOC_CAS_NAGRA_MEDIASET_MENU_MSG_NO_PACKAGE_NAME_ID),
		NAPPV_MEDIASET_PACKPURC_TS_ERROR_TEXT_LINESPACE-FONT_SIZE_M, COL(C_T_Cursor), TEXT_ALIGN_CENTER|TEXT_MULTILINED);

	if (pFont != NULL)
	{
		OSD_FONT_Release(pFont);
	}

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcDrawTsErrorExitBtn_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcDrawTsErrorExitBtn_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect,
											GWM_GuiObject_t pObject, void *pArg, int param1)
{
	HINT32				 nX1, nY1;
	OSD_Rect_t			 stRect;
	OSD_StockImage_t	 stImage;

	(void)pObject;
	(void)pArg;
	(void)param1;

	nX1 = pArea->x1 + pRect->x;
	nY1 = pArea->y1 + pRect->y;
	if (!AP_StockImg_GetImage (e914_1_24_BTN_3Exit, &stImage))
	{
		OSD_GFX_SetRect (&stRect, nX1, nY1, stImage.width, stImage.height);
		OSD_GFX_FB_Blend (stImage.hBuffer, stImage.width, stImage.height, pScreen, &stRect);
	}

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcUpdateRemainedCredit_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcUpdateRemainedCredit_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents, TCreditAmount nCredit)
{
	GWM_APP_InvalidateObject(NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_ID);

	return ERR_BUS_NO_ERROR;
}


#define	_____EVENT_DESC______________________________

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcEvtDescRequestPackageInfo_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtDescRequestPackageInfo_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents)
{
	PPV_PACKAGE_LIST_ITEM	*pstPackageItem = NULL;
	PACKAGE_INFO 			*pPackageInfo = NULL;
	HERROR					hErr = ERR_OK;

	pstPackageItem = xmgr_cas_NaPpvPackpurcGetCurSubItem_Mediaset(pContents);
	if (pstPackageItem == NULL)
	{
		return ERR_FAIL;
	}

#ifndef WIN32
	hErr = xmgr_cas_NaGetPackageEventInfo((TCaRequest *)pstPackageItem->pRequest, (TCaProduct *)pstPackageItem->pProduct, &pPackageInfo);

	if (hErr == ERR_OK && pPackageInfo)
	{
		pstPackageItem->PackageInfo.nDesSize = pPackageInfo->nDesSize;
		HxSTD_memset(pstPackageItem->PackageInfo.aucDescription, 0, MAX_MSET_PPV_DESCRIPTION_LENGTH+1);
		HxSTD_memcpy(pstPackageItem->PackageInfo.aucDescription, pPackageInfo->aucDescription, pPackageInfo->nDesSize);
		pstPackageItem->PackageInfo.nDisclaimerSize = pPackageInfo->nDisclaimerSize;
		HxSTD_memset(pstPackageItem->PackageInfo.aucDisclaimer, 0, MAX_MSET_PPV_DISCLAIMER_LENGTH+1);
		HxSTD_memcpy(pstPackageItem->PackageInfo.aucDisclaimer, pPackageInfo->aucDisclaimer, pPackageInfo->nDisclaimerSize);
		pstPackageItem->PackageInfo.ulNbEvents = pPackageInfo->ulNbEvents;
		if (pstPackageItem->PackageInfo.ulNbEvents > 0)
		{
			pstPackageItem->PackageInfo.pEvents = (EVENT_ITEM*)pPackageInfo->pEvents;
		}
		else
		{
			pstPackageItem->PackageInfo.pEvents = NULL;
		}
	}
#endif
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcEvtDescDrawGreenButton_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtDescDrawGreenButton_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect,
											GWM_GuiObject_t pObject, void *pArg, int param1)
{
	HINT32				 nX1, nY1;
	OSD_Rect_t			 stRect;
	OSD_StockImage_t	 stImage;

	(void)pObject;
	(void)pArg;
	(void)param1;

	nX1 = pArea->x1 + pRect->x;
	nY1 = pArea->y1 + pRect->y;

	if (!AP_StockImg_GetImage (e914_3_24_Help_01Green, &stImage))
	{
		OSD_GFX_SetRect (&stRect, nX1, nY1, stImage.width, stImage.height);
		OSD_GFX_FB_Blend (stImage.hBuffer, stImage.width, stImage.height, pScreen, &stRect);
	}

	return ERR_BUS_NO_ERROR;
}


/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcEvtDescLeftTrimFromString_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC HUINT8* xmgr_cas_NaPpvPackpurcEvtDescLeftTrimFromString_Mediaset(HUINT8 *pszMessage)
{
	while(*pszMessage == 0x20)
		pszMessage++;

	return pszMessage;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcEvtDescGetCountOfCharsFromCutLines_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtDescGetCountOfCharsFromCutLines_Mediaset(HUINT8 *message, HINT32 nfontsize, HINT32 nwidth, HINT16 nCutline)
{
	HINT32		nNumOfMsgTextLine = 0;
	HINT32		nTotal = 0;
	HINT32		nLocLen = 0;
	HINT32		nStrLen = 0;
	HUINT32		nNumOfChForOneLine = 0;

	OSD_Font_t	*pFont = NULL;
	eHxCP_CodePage_e	encoding = eHCodepage_MAX;

	pFont = OSD_FONT_Get(eFont_SystemNormal);
	OSD_FONT_SetSize(pFont,nfontsize);
	nTotal = MWC_UTIL_GetLocaleCodeLen (&(message[nTotal]));
	nLocLen = nTotal;
	do
	{
		nNumOfChForOneLine = 0;
		nStrLen = SvcCas_UtilStrLen(&(message[nTotal]));
		encoding= MWC_UTIL_GetEncodingByLocaleCode((const HUINT8 *)message);

		OSD_FONT_CountChByWidth_SingleByte(
			pFont, nwidth, encoding,
			nStrLen, &(message[nTotal]), &nNumOfChForOneLine);

		if(nNumOfChForOneLine != 0)
		{
			nNumOfMsgTextLine++;
		}
		nTotal += (nNumOfChForOneLine - 1);

		if (nNumOfMsgTextLine == nCutline)
		{
			break;
		}

	} while(nNumOfChForOneLine != 0);

	if (pFont != NULL)
		OSD_FONT_Release(pFont);

	return (nTotal + nLocLen);
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcEvtDescGetPageStr_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtDescGetPageStr_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents)
{
	HINT32						nCurPage, nAllPage;
	HUINT32 					nAttrib = 0, nStartIndex = 0, nPageNum = 0, nItemNum = 0;

	GWM_FMT_GetProperty((FMT_OBJECT)BUS_MGR_GetObject(NAPPV_MEDIASET_PACKPURC_EVTDESC_FMT_ID), &nAttrib, &nStartIndex, &nPageNum, &nItemNum);
	HxLOG_Error("nStartIndex= %d, nItemNum = %d, nPageNum = %d\n", nStartIndex, nItemNum, nPageNum);

	nAllPage = nItemNum / nPageNum + 1;
	if (nItemNum % nPageNum == 0)
		nAllPage --;
	nCurPage = nStartIndex / nPageNum + 1;

	if (nItemNum == 0)
	{
		nCurPage = 0;
		nAllPage = 0;
	}

	snprintf(pContents->ucDescPageStr, 16, "%d/%d", nCurPage, nAllPage);

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcEvtDescDrawPackagePurchase_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtDescDrawPackagePurchase_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea,
										OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1)
{
	HERROR					hError;
	XmgrCas_NaPackPurc_Mediaset_t	*pContents = xmgr_cas_NaPpvPackpurcGetLocalContents_Mediaset();

	/* na ppv mediaset packpurc title name text */
	hError = xmgr_cas_NaPpvPackpurcDrawTitleName_Mediaset(pContents, pScreen, pArea, pRect, pObject, pArg, param1);
	if (hError != ERR_BUS_NO_ERROR)
	{
		HxLOG_Error(" xmgr_cas_NaPpvPackpurcDrawTitleName_Mediaset Error!\n");
		return ERR_FAIL;
	}

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcEvtDescInitUiObjects_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtDescInitUiObjects_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents)
{
	OSD_Rect_t				rect = {0, };
	Text_Property_t 		stTextProperty;
	PPV_PACKAGE_LIST_ITEM	*pstPackageItem = NULL;

	/* for compiler */
	(void)pContents;

	HxLOG_Print(" +++ \n");

	/* na ppv mediaset packpurc background */
	Settings_DrawBack(FALSE);
	OSD_GFX_SetRect(&rect, 0, 0, OSD_SCREEN_WIDTH, OSD_SCREEN_HEIGHT);
	GWM_Rect_Create(NAPPV_MEDIASET_PACKPURC_LOGOBACKGROUND_IMAGE_ID, &rect, 0x00000000);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_LOGOBACKGROUND_IMAGE_ID, xmgr_cas_NaPpvPackpurcDrawBackgroundImage_Mediaset);

	/* na ppv mediaset packpurc date text*/
	OSD_GFX_SetRect (&rect, NAPPV_MEDIASET_PACKPURC_DATE_TEXT_X, NAPPV_MEDIASET_PACKPURC_DATE_TEXT_Y, NAPPV_MEDIASET_PACKPURC_DATE_TEXT_WIDTH, NAPPV_MEDIASET_PACKPURC_DATE_TEXT_HEIGHT);
	GWM_Text_Create(NAPPV_MEDIASET_PACKPURC_DATE_TEXT_ID, &rect, pContents->ucCurDate);
	GWM_Text_SetAlign (NAPPV_MEDIASET_PACKPURC_DATE_TEXT_ID, TEXT_ALIGN_RIGHT);
	GWM_Text_SetSize (NAPPV_MEDIASET_PACKPURC_DATE_TEXT_ID, FONT_SIZE_S);
	GWM_Text_ChangeColor (NAPPV_MEDIASET_PACKPURC_DATE_TEXT_ID, COL(C_T_Cursor), 0x00);

	/* na ppv mediaset packpurc infotext*/
	OSD_GFX_SetRect (&rect, NAPPV_MEDIASET_PACKPURC_INFO_TEXT_X, NAPPV_MEDIASET_PACKPURC_INFO_TEXT_Y, NAPPV_MEDIASET_PACKPURC_INFO_TEXT_WIDTH, NAPPV_MEDIASET_PACKPURC_INFO_TEXT_HEIGHT);
	GWM_Text_Create (NAPPV_MEDIASET_PACKPURC_INFO_TEXT_ID, &rect, (HUINT8 *)GetStrRsc(LOC_CAS_NAGRA_MEDIASET_PACKAGE_PURCHASE_TEXT_ID));
	GWM_Text_SetAlign (NAPPV_MEDIASET_PACKPURC_INFO_TEXT_ID, TEXT_ALIGN_LEFT);
	GWM_Text_SetSize (NAPPV_MEDIASET_PACKPURC_INFO_TEXT_ID, FONT_SIZE_M);
	GWM_Text_ChangeColor(NAPPV_MEDIASET_PACKPURC_INFO_TEXT_ID, COL (C_T_Cursor), 0x00);

	/* na ppv mediaset spackpurc credit button */
	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_STATE_BTN_X, NAPPV_MEDIASET_PACKPURC_STATE_BTN_Y, NAPPV_MEDIASET_PACKPURC_STATE_BTN_WIDTH, NAPPV_MEDIASET_PACKPURC_STATE_BTN_HEIGHT);
	GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_STATE_BTN_ID, &rect, NULL);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_STATE_BTN_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawStateButton_Mediaset);

	/* na ppv mediaset packpurc state button */
	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_X, NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_Y, NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_WIDTH, NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_HEIGHT);
	GWM_Text_Create(NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_ID, &rect, NULL);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawCredit_Mediaset);

	HxLOG_Print(" --- \n");
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcEvtDescDrawErrorMessage_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtDescDrawErrorMessage_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea,
										OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1)
{
	HINT32					nObjectId;
	OSD_Rect_t				rect_text;
	OSD_Font_t				*pFont;
	XmgrCas_NaPackPurc_Mediaset_t	*pContents = xmgr_cas_NaPpvPackpurcGetLocalContents_Mediaset();

	//----------------------------------------------------------------
	rect_text.x = pArea->x1 + pRect->x;
	rect_text.y = pArea->y1 + pRect->y;
	rect_text.w = pRect->w;
	rect_text.h = pRect->h;
	//----------------------------------------------------------------

	/* for compiler */
	(void)pArg;
	(void)param1;

	nObjectId = GWM_Obj_GetObjectID(pObject);
	pFont = OSD_FONT_Get(eFont_SystemNormal);
	if (pFont == NULL)
	{
		return ERR_FAIL;
	}

	OSD_FONT_SetSize (pFont, FONT_SIZE_M);

	OSD_GFX_DrawMultiLineStringAlign(pScreen, pFont, rect_text.x, rect_text.y, rect_text.w, rect_text.h, (HINT8 *)pContents->pstUnpurchasableStr,
		10, COL(C_T_Cursor), TEXT_ALIGN_CENTER|TEXT_MULTILINED);

	if (pFont != NULL)
	{
		OSD_FONT_Release(pFont);
	}

	return ERR_BUS_NO_ERROR;
}


/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcEvtDescSetUiObjects_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtDescSetUiObjects_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents)
{
	OSD_Rect_t				rect = {0, };
	Text_Property_t 		stTextProperty;
	PPV_PACKAGE_LIST_ITEM	*pstPackageItem = NULL;

	/* for compiler */
	(void)pContents;

	HxLOG_Print(" +++ \n");

	/* na ppv mediaset packpurc arrow */
	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_ARROW_BTN_X, NAPPV_MEDIASET_PACKPURC_ARROW_BTN_Y, NAPPV_MEDIASET_PACKPURC_ARROW_BTN_WIDTH, NAPPV_MEDIASET_PACKPURC_ARROW_BTN_HEIGHT);
	GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_ARROW_BTN_ID, &rect, NULL);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_ARROW_BTN_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawUpDownArrow_Mediaset);

	/* event info formatted text */
	pstPackageItem = xmgr_cas_NaPpvPackpurcGetCurSubItem_Mediaset(pContents);
	if (pstPackageItem == NULL)
	{
		return ERR_FAIL;
	}

	if (xmgr_cas_NaPpvPackpurcEvtConfirmCheckPurchasable_Mediaset(pContents, pstPackageItem) == TRUE)
	{
		/* na ppv mediaset packpurc ok button */
		OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_OK_BTN_X, NAPPV_MEDIASET_PACKPURC_OK_BTN_Y, NAPPV_MEDIASET_PACKPURC_OK_BTN_WIDTH, NAPPV_MEDIASET_PACKPURC_OK_BTN_HEIGHT);
		GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_OK_BTN_ID, &rect, NULL);
		GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_OK_BTN_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawOKButton_Mediaset);


		if (pstPackageItem->PackageInfo.ulNbEvents > 0)
		{
			/* na ppv mediaset packpurc events green button*/
			OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_EVTDESC_GREENBTN_BTN_X, NAPPV_MEDIASET_PACKPURC_EVTDESC_GREENBTN_BTN_Y, NAPPV_MEDIASET_PACKPURC_EVTDESC_GREENBTN_BTN_WIDTH, NAPPV_MEDIASET_PACKPURC_EVTDESC_GREENBTN_BTN_HEIGHT);
			GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_EVTDESC_GREENBTN_BTN_ID, &rect, NULL);
			GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_EVTDESC_GREENBTN_BTN_ID, xmgr_cas_NaPpvPackpurcEvtDescDrawGreenButton_Mediaset);

			/* na ppv mediaset packpurc events green text*/
			OSD_GFX_SetRect (&rect, NAPPV_MEDIASET_PACKPURC_EVTDESC_GREENBTN_TEXT_X, NAPPV_MEDIASET_PACKPURC_EVTDESC_GREENBTN_TEXT_Y, NAPPV_MEDIASET_PACKPURC_EVTDESC_GREENBTN_TEXT_WIDTH, NAPPV_MEDIASET_PACKPURC_EVTDESC_GREENBTN_TEXT_HEIGHT);
			GWM_Text_Create (NAPPV_MEDIASET_PACKPURC_EVTDESC_GREENBTN_TEXT_ID, &rect, (HUINT8 *)GetStrRsc(LOC_CAS_NAGRA_MEDIASET_PACKAGE_BTN_NAME_SINGLE_ID));
			GWM_Text_SetAlign (NAPPV_MEDIASET_PACKPURC_EVTDESC_GREENBTN_TEXT_ID, TEXT_ALIGN_LEFT);
			GWM_Text_SetSize (NAPPV_MEDIASET_PACKPURC_EVTDESC_GREENBTN_TEXT_ID, FONT_SIZE_XS);
			GWM_Text_ChangeColor(NAPPV_MEDIASET_PACKPURC_EVTDESC_GREENBTN_TEXT_ID, COL (C_T_Editbox), 0x00);
		}
	}
	else
	{
		// error display
		switch(pContents->nPackageErrorType)
		{
			case ePACKAGE_ALREADY_PURCHASED:
				pContents->pstUnpurchasableStr = (HUINT8*)GetStrRsc(LOC_CAS_NAGRA_MEDIASET_MENU_ERR_PURCHASED_ALREADY_ID);
				break;

			case ePACKAGE_CARD_EXPIRED:
				pContents->pstUnpurchasableStr = (HUINT8*)GetStrRsc(LOC_CAS_NAGRA_MEDIASET_MENU_ERR_EXPIRED_CARD_ID);
				break;

			case ePACKAGE_PERIOD_ENDED:
				pContents->pstUnpurchasableStr = (HUINT8*)GetStrRsc(LOC_CAS_NAGRA_MEDIASET_MENU_ERR_PACKAGE_PERIOD_END_ID);
				break;

			case ePACKAGE_CREDIT_SHORTAGE:
				pContents->pstUnpurchasableStr = (HUINT8*)GetStrRsc(LOC_CAS_NAGRA_MEDIASET_MENU_ERR_PACKAGE_INSUFFICIENT_CREDIT_ID);
				break;

			case ePACKAGE_PURCHASABLE_NO_ERROR:
			default:
				// ¿©±â·Î µé¾î¿À¸é ¾ÈµÊ - µð¹ö±ë ¿ä¸Á
				HxLOG_Print("pContents->nPackageErrorType = %d\n", pContents->nPackageErrorType);
				pContents->pstUnpurchasableStr = (HUINT8*)GetStrRsc(LOC_CAS_NAGRA_MEDIASET_MENU_ERR_PACKAGE_PURCHASE_FAIL_ID);
				break;
		}

		/* na ppv mediaset packpurc events error button */
		OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_EVTDESC_UNPURCHABLE_BTN_X, NAPPV_MEDIASET_PACKPURC_EVTDESC_UNPURCHABLE_BTN_Y, NAPPV_MEDIASET_PACKPURC_EVTDESC_UNPURCHABLE_BTN_WIDTH, NAPPV_MEDIASET_PACKPURC_EVTDESC_UNPURCHABLE_BTN_HEIGHT);
		GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_EVTDESC_UNPURCHABLE_BTN_ID, &rect, NULL);
		GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_EVTDESC_UNPURCHABLE_BTN_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcEvtdescDrawErrorButton_Mediaset);

		/* na ppv mediaset packpurc events error text*/
		OSD_GFX_SetRect (&rect, NAPPV_MEDIASET_PACKPURC_EVTDESC_UNPURCHABLE_TEXT_X, NAPPV_MEDIASET_PACKPURC_EVTDESC_UNPURCHABLE_TEXT_Y - FONT_SIZE_XS, NAPPV_MEDIASET_PACKPURC_EVTDESC_UNPURCHABLE_TEXT_WIDTH, NAPPV_MEDIASET_PACKPURC_EVTDESC_UNPURCHABLE_TEXT_HEIGHT*2);
		GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_EVTDESC_UNPURCHABLE_TEXT_ID, &rect, NULL);
		GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_EVTDESC_UNPURCHABLE_TEXT_ID, xmgr_cas_NaPpvPackpurcEvtDescDrawErrorMessage_Mediaset);
	}

	/* na ppv mediaset packpurc back button */
	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_BACK_BTN_X, NAPPV_MEDIASET_PACKPURC_BACK_BTN_Y, NAPPV_MEDIASET_PACKPURC_BACK_BTN_WIDTH, NAPPV_MEDIASET_PACKPURC_BACK_BTN_HEIGHT);
	GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_BACK_BTN_ID, &rect, NULL);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_BACK_BTN_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawBackButton_Mediaset);


	/* na ppv mediaset packpurc event desc info*/
	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_EVTDESC_SUBBTN_X, NAPPV_MEDIASET_PACKPURC_EVTDESC_SUBBTN_Y, NAPPV_MEDIASET_PACKPURC_EVTDESC_SUBBTN_WIDTH, NAPPV_MEDIASET_PACKPURC_EVTDESC_SUBBTN_HEIGHT);
	GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_EVTDESC_SUBBTN_ID, &rect, NULL);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_EVTDESC_SUBBTN_ID, xmgr_cas_NaPpvPackpurcEvtDescDrawPackagePurchase_Mediaset);

	stTextProperty.ulFontSize = FONT_SIZE_M;
	stTextProperty.ulFontAlign = TEXT_ALIGN_LEFT;
	stTextProperty.cFontColor = COL(C_T_Cursor);

	if (xmgr_cas_NaPpvPackpurcEvtConfirmCheckPurchasable_Mediaset(pContents, pstPackageItem) == TRUE)
	{
		OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_EVTDESC_SUBBTN_X, NAPPV_MEDIASET_PACKPURC_EVTDESC_SUBBTN_Y, NAPPV_MEDIASET_PACKPURC_EVTDESC_SUBBTN_WIDTH, NAPPV_MEDIASET_PACKPURC_EVTDESC_SUBBTN_HEIGHT);
		GWM_FMT_Create(NAPPV_MEDIASET_PACKPURC_EVTDESC_FMT_ID, &rect, FMT_OWN_DRAWITEM | FMT_SCROLL_ON, MAX_PACKPURC_EVTDESC_ROW_NUM);
	}
	else
	{
		OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_EVTDESC_SUBBTN_X, NAPPV_MEDIASET_PACKPURC_EVTDESC_SUBBTN_Y, NAPPV_MEDIASET_PACKPURC_EVTDESC_SUBBTN_WIDTH, (NAPPV_MEDIASET_PACKPURC_EVTDESC_SUBBTN_HEIGHT - (NAPPV_MEDIASET_PACKPURC_EVTDESC_SUBBTN_LINESPACE*2)));
		GWM_FMT_Create(NAPPV_MEDIASET_PACKPURC_EVTDESC_FMT_ID, &rect, FMT_OWN_DRAWITEM | FMT_SCROLL_ON, (MAX_PACKPURC_EVTDESC_ROW_NUM - 2));
	}
	GWM_FMT_ChangeItemDrawMethod(NAPPV_MEDIASET_PACKPURC_EVTDESC_FMT_ID, xmgr_cas_NaPpvPackpurcExtendInfo_DrawItems_Mediaset);
	GWM_FMT_ChangeScrollDrawMethod(NAPPV_MEDIASET_PACKPURC_EVTDESC_FMT_ID, xmgr_cas_NaPpvPackpurcExtendInfo_DrawScroll_Mediaset);
	xmgr_cas_NaPpvPackpurcAddLongStringWithWordwrap_Mediaset(NAPPV_MEDIASET_PACKPURC_EVTDESC_FMT_ID, NAPPV_MEDIASET_PACKPURC_EVTDESC_SUBBTN_WIDTH, pstPackageItem->PackageInfo.aucDescription, pstPackageItem->PackageInfo.nDesSize, &stTextProperty);

	xmgr_cas_NaPpvPackpurcEvtDescGetPageStr_Mediaset(pContents);
	OSD_GFX_SetRect (&rect, NAPPV_MEDIASET_PACKPURC_EVTDESC_LISTPAGE_TEXT_X, NAPPV_MEDIASET_PACKPURC_EVTDESC_LISTPAGE_TEXT_Y-FONT_SIZE_M, NAPPV_MEDIASET_PACKPURC_EVTDESC_LISTPAGE_TEXT_WIDTH, NAPPV_MEDIASET_PACKPURC_EVTDESC_LISTPAGE_TEXT_HEIGHT);
	GWM_Text_Create (NAPPV_MEDIASET_PACKPURC_EVTDESC_LISTPAGE_TEXT_ID, &rect, (HUINT8*)pContents->ucDescPageStr);
	GWM_Text_SetAlign (NAPPV_MEDIASET_PACKPURC_EVTDESC_LISTPAGE_TEXT_ID, TEXT_ALIGN_LEFT);
	GWM_Text_SetSize (NAPPV_MEDIASET_PACKPURC_EVTDESC_LISTPAGE_TEXT_ID, FONT_SIZE_M);
	GWM_Text_ChangeColor(NAPPV_MEDIASET_PACKPURC_EVTDESC_LISTPAGE_TEXT_ID, COL (C_T_Cursor), 0x00);

	HxLOG_Print(" --- \n");

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcEvtDescProcessArrowUpDownClicked_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtDescProcessArrowUpDownClicked_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents, KEY_Code_t eKeyCode)
{
	switch(eKeyCode)
	{
		case KEY_ARROWUP:
		case KEY_PAGEUP:
			GWM_FMT_ScrollUpPageStrict(NAPPV_MEDIASET_PACKPURC_EVTDESC_FMT_ID);
			break;

		case KEY_ARROWDOWN:
		case KEY_PAGEDOWN:
			GWM_FMT_ScrollDownPageStrict(NAPPV_MEDIASET_PACKPURC_EVTDESC_FMT_ID);
			break;

		default:
			return ERR_BUS_NO_ERROR;
	}

	xmgr_cas_NaPpvPackpurcEvtDescGetPageStr_Mediaset(pContents);
	GWM_Text_SetText(NAPPV_MEDIASET_PACKPURC_EVTDESC_LISTPAGE_TEXT_ID, pContents->ucDescPageStr);

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcEvtDescProcessOKClicked_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtDescProcessOKClicked_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents, KEY_Code_t eKeyCode)
{
	/* for compiler */
	(void)pContents;
	(void)eKeyCode;

	BUS_MGR_Create(  "xproc_cas_NaPackagePurchaseEvtDisc_Mediaset",
				APP_DIALOGBOX_PRIORITY,
				xproc_cas_NaPackagePurchaseEvtDisc_Mediaset,
				HANDLE_NULL,
				0, //(HINT32)GetStrRsc(LOC_CAS_PACKAGEPURCHASE_INFORMATION_TEXT_ID),
				DLG_TYPE_MESSAGE|DLG_TIMEOUT_60SEC,
				(HINT32)BUS_MGR_GetAppCallback(BUS_MGR_GetThis()));

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcEvtDescProcessGreenClicked_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtDescProcessGreenClicked_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents, KEY_Code_t eKeyCode)
{
	/* for compiler */
	(void)pContents;
	(void)eKeyCode;

	BUS_MGR_Create(  "xproc_cas_NaPackagePurchaseEvtInfo_Mediaset",
				APP_DIALOGBOX_PRIORITY,
				xproc_cas_NaPackagePurchaseEvtInfo_Mediaset,
				HANDLE_NULL,
				0, //(HINT32)GetStrRsc(LOC_CAS_PACKAGEPURCHASE_INFORMATION_TEXT_ID),
				DLG_TYPE_MESSAGE|DLG_TIMEOUT_60SEC,
				(HINT32)BUS_MGR_GetAppCallback(BUS_MGR_GetThis()));

	return ERR_BUS_NO_ERROR;
}


#define	_____EVENT_DISC______________________________
/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcEvtDiscGetPageStr_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtDiscGetPageStr_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents)
{
	HINT32						nCurPage, nAllPage;
	HUINT32 					nAttrib = 0, nStartIndex = 0, nPageNum = 0, nItemNum = 0;

	GWM_FMT_GetProperty((FMT_OBJECT)BUS_MGR_GetObject(NAPPV_MEDIASET_PACKPURC_EVTDISC_FMT_ID), &nAttrib, &nStartIndex, &nPageNum, &nItemNum);

	nAllPage = nItemNum / nPageNum + 1;
	if (nItemNum % nPageNum == 0)
		nAllPage --;
	nCurPage = nStartIndex / nPageNum + 1;

	if (nItemNum == 0)
	{
		nCurPage = 0;
		nAllPage = 0;
	}

	snprintf(pContents->ucDiscPageStr, 16, "%d/%d", nCurPage, nAllPage);

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcEvtDiscDrawPackagePurchase_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtDiscDrawPackagePurchase_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea,
										OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1)
{
	HERROR					hError;
	XmgrCas_NaPackPurc_Mediaset_t	*pContents = xmgr_cas_NaPpvPackpurcGetLocalContents_Mediaset();

	/* na ppv mediaset packpurc title name text */
	hError = xmgr_cas_NaPpvPackpurcDrawTitleName_Mediaset(pContents, pScreen, pArea, pRect, pObject, pArg, param1);
	if (hError != ERR_BUS_NO_ERROR)
	{
		HxLOG_Error(" xmgr_cas_NaPpvPackpurcDrawTitleName_Mediaset Error!\n");
		return ERR_FAIL;
	}

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcEvtDiscSetUiObjects_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtDiscSetUiObjects_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents)
{
	OSD_Rect_t				rect = {0, };
	Text_Property_t 		stTextProperty;
	PPV_PACKAGE_LIST_ITEM	*pstPackageItem = NULL;

	/* for compiler */
	(void)pContents;

	HxLOG_Print(" +++ \n");

	/* na ppv mediaset packpurc background */
	Settings_DrawBack(FALSE);
	OSD_GFX_SetRect(&rect, 0, 0, OSD_SCREEN_WIDTH, OSD_SCREEN_HEIGHT);
	GWM_Rect_Create(NAPPV_MEDIASET_PACKPURC_LOGOBACKGROUND_IMAGE_ID, &rect, 0x00000000);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_LOGOBACKGROUND_IMAGE_ID, xmgr_cas_NaPpvPackpurcDrawBackgroundImage_Mediaset);

	/* na ppv mediaset selprog date text*/
	OSD_GFX_SetRect (&rect, NAPPV_MEDIASET_PACKPURC_DATE_TEXT_X, NAPPV_MEDIASET_PACKPURC_DATE_TEXT_Y, NAPPV_MEDIASET_PACKPURC_DATE_TEXT_WIDTH, NAPPV_MEDIASET_PACKPURC_DATE_TEXT_HEIGHT);
	GWM_Text_Create(NAPPV_MEDIASET_PACKPURC_DATE_TEXT_ID, &rect, pContents->ucCurDate);
	GWM_Text_SetAlign (NAPPV_MEDIASET_PACKPURC_DATE_TEXT_ID, TEXT_ALIGN_RIGHT);
	GWM_Text_SetSize (NAPPV_MEDIASET_PACKPURC_DATE_TEXT_ID, FONT_SIZE_S);
	GWM_Text_ChangeColor (NAPPV_MEDIASET_PACKPURC_DATE_TEXT_ID, COL(C_T_Cursor), 0x00);

	/* na ppv mediaset packpurc infotext*/
	OSD_GFX_SetRect (&rect, NAPPV_MEDIASET_PACKPURC_INFO_TEXT_X, NAPPV_MEDIASET_PACKPURC_INFO_TEXT_Y, NAPPV_MEDIASET_PACKPURC_INFO_TEXT_WIDTH, NAPPV_MEDIASET_PACKPURC_INFO_TEXT_HEIGHT);
	GWM_Text_Create (NAPPV_MEDIASET_PACKPURC_INFO_TEXT_ID, &rect, (HUINT8 *)GetStrRsc(LOC_CAS_NAGRA_MEDIASET_PACKAGE_PURCHASE_TEXT_ID));
	GWM_Text_SetAlign (NAPPV_MEDIASET_PACKPURC_INFO_TEXT_ID, TEXT_ALIGN_LEFT);
	GWM_Text_SetSize (NAPPV_MEDIASET_PACKPURC_INFO_TEXT_ID, FONT_SIZE_M);
	GWM_Text_ChangeColor(NAPPV_MEDIASET_PACKPURC_INFO_TEXT_ID, COL (C_T_Cursor), 0x00);

	/* na ppv mediaset spackpurc credit button */
	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_STATE_BTN_X, NAPPV_MEDIASET_PACKPURC_STATE_BTN_Y, NAPPV_MEDIASET_PACKPURC_STATE_BTN_WIDTH, NAPPV_MEDIASET_PACKPURC_STATE_BTN_HEIGHT);
	GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_STATE_BTN_ID, &rect, NULL);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_STATE_BTN_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawStateButton_Mediaset);

	/* na ppv mediaset packpurc state button */
	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_X, NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_Y, NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_WIDTH, NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_HEIGHT);
	GWM_Text_Create(NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_ID, &rect, NULL);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawCredit_Mediaset);

	/* na ppv mediaset packpurc arrow */
	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_ARROW_BTN_X, NAPPV_MEDIASET_PACKPURC_ARROW_BTN_Y, NAPPV_MEDIASET_PACKPURC_ARROW_BTN_WIDTH, NAPPV_MEDIASET_PACKPURC_ARROW_BTN_HEIGHT);
	GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_ARROW_BTN_ID, &rect, NULL);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_ARROW_BTN_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawUpDownArrow_Mediaset);

	/* na ppv mediaset packpurc ok button */
	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_OK_BTN_X, NAPPV_MEDIASET_PACKPURC_OK_BTN_Y, NAPPV_MEDIASET_PACKPURC_OK_BTN_WIDTH, NAPPV_MEDIASET_PACKPURC_OK_BTN_HEIGHT);
	GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_OK_BTN_ID, &rect, NULL);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_OK_BTN_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawOKButton_Mediaset);

	/* na ppv mediaset packpurc back button */
	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_BACK_BTN_X, NAPPV_MEDIASET_PACKPURC_BACK_BTN_Y, NAPPV_MEDIASET_PACKPURC_BACK_BTN_WIDTH, NAPPV_MEDIASET_PACKPURC_BACK_BTN_HEIGHT);
	GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_BACK_BTN_ID, &rect, NULL);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_BACK_BTN_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawBackButton_Mediaset);

	/* na ppv mediaset packpurc terms button text*/
	OSD_GFX_SetRect (&rect, NAPPV_MEDIASET_PACKPURC_EVTDISC_TERMS_TEXT_X, NAPPV_MEDIASET_PACKPURC_EVTDISC_TERMS_TEXT_Y, NAPPV_MEDIASET_PACKPURC_EVTDISC_TERMS_TEXT_WIDTH, NAPPV_MEDIASET_PACKPURC_EVTDISC_TERMS_TEXT_HEIGHT);
	GWM_Text_Create (NAPPV_MEDIASET_PACKPURC_EVTDISC_TERMS_TEXT_ID, &rect, (HUINT8 *)GetStrRsc(LOC_CAS_NAGRA_MEDIASET_TERMS_TEXT_ID));
	GWM_Text_SetAlign (NAPPV_MEDIASET_PACKPURC_EVTDISC_TERMS_TEXT_ID, TEXT_ALIGN_LEFT);
	GWM_Text_SetSize (NAPPV_MEDIASET_PACKPURC_EVTDISC_TERMS_TEXT_ID, FONT_SIZE_M);
	GWM_Text_ChangeColor(NAPPV_MEDIASET_PACKPURC_EVTDISC_TERMS_TEXT_ID, COL (C_T_Cursor), 0x00);

	/* na ppv mediaset packpurc event disc info*/
	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_EVTDISC_SUBBTN_X, NAPPV_MEDIASET_PACKPURC_EVTDISC_SUBBTN_Y, NAPPV_MEDIASET_PACKPURC_EVTDISC_SUBBTN_WIDTH, NAPPV_MEDIASET_PACKPURC_EVTDISC_SUBBTN_HEIGHT);
	GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_EVTDISC_SUBBTN_ID, &rect, NULL);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_EVTDISC_SUBBTN_ID, xmgr_cas_NaPpvPackpurcEvtDiscDrawPackagePurchase_Mediaset);

	/* event info formatted text */
	pstPackageItem = xmgr_cas_NaPpvPackpurcGetCurSubItem_Mediaset(pContents);
	if (pstPackageItem == NULL)
	{
		return ERR_FAIL;
	}
	stTextProperty.ulFontSize = FONT_SIZE_M;
	stTextProperty.ulFontAlign = TEXT_ALIGN_LEFT;
	stTextProperty.cFontColor = COL(C_T_Cursor);

	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_EVTDISC_SUBBTN_X, NAPPV_MEDIASET_PACKPURC_EVTDISC_SUBBTN_Y, NAPPV_MEDIASET_PACKPURC_EVTDISC_SUBBTN_WIDTH, NAPPV_MEDIASET_PACKPURC_EVTDISC_SUBBTN_HEIGHT);
	GWM_FMT_Create(NAPPV_MEDIASET_PACKPURC_EVTDISC_FMT_ID, &rect, FMT_OWN_DRAWITEM | FMT_SCROLL_ON, MAX_PACKPURC_EVTDISC_ROW_NUM);
	GWM_FMT_ChangeItemDrawMethod(NAPPV_MEDIASET_PACKPURC_EVTDISC_FMT_ID, xmgr_cas_NaPpvPackpurcExtendInfo_DrawItems_Mediaset);
	GWM_FMT_ChangeScrollDrawMethod(NAPPV_MEDIASET_PACKPURC_EVTDISC_FMT_ID, xmgr_cas_NaPpvPackpurcExtendInfo_DrawScroll_Mediaset);
	xmgr_cas_NaPpvPackpurcAddLongStringWithWordwrap_Mediaset(NAPPV_MEDIASET_PACKPURC_EVTDISC_FMT_ID, NAPPV_MEDIASET_PACKPURC_EVTDISC_SUBBTN_WIDTH, pstPackageItem->PackageInfo.aucDisclaimer, pstPackageItem->PackageInfo.nDisclaimerSize, &stTextProperty);

	/* na ppv mediaset packpurc event ListPage info*/
	xmgr_cas_NaPpvPackpurcEvtDiscGetPageStr_Mediaset(pContents);
	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_EVTDISC_LISTPAGE_TEXT_X, NAPPV_MEDIASET_PACKPURC_EVTDISC_LISTPAGE_TEXT_Y-FONT_SIZE_M, NAPPV_MEDIASET_PACKPURC_EVTDISC_LISTPAGE_TEXT_WIDTH, NAPPV_MEDIASET_PACKPURC_EVTDISC_LISTPAGE_TEXT_HEIGHT);
	GWM_Text_Create(NAPPV_MEDIASET_PACKPURC_EVTDISC_LISTPAGE_TEXT_ID, &rect, (HUINT8*)pContents->ucDiscPageStr);
	GWM_Text_SetAlign (NAPPV_MEDIASET_PACKPURC_EVTDISC_LISTPAGE_TEXT_ID, TEXT_ALIGN_LEFT);
	GWM_Text_SetSize (NAPPV_MEDIASET_PACKPURC_EVTDISC_LISTPAGE_TEXT_ID, FONT_SIZE_M);
	GWM_Text_ChangeColor(NAPPV_MEDIASET_PACKPURC_EVTDISC_LISTPAGE_TEXT_ID, COL (C_T_Cursor), 0x00);

	HxLOG_Print(" --- \n");

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcEvtDiscProcessOKClicked_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtDiscProcessOKClicked_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents, KEY_Code_t eKeyCode)
{
	/* for compiler */
	(void)pContents;
	(void)eKeyCode;

	BUS_MGR_Create(  "xproc_cas_NaPackagePurchaseEvtConfirm_Mediaset",
				APP_DIALOGBOX_PRIORITY,
				xproc_cas_NaPackagePurchaseEvtConfirm_Mediaset,
				HANDLE_NULL,
				0, //(HINT32)GetStrRsc(LOC_CAS_PACKAGEPURCHASE_EVENTS_CONFIRMATION_TEXT_ID),
				DLG_TYPE_MESSAGE|DLG_TIMEOUT_60SEC,
				(HINT32)BUS_MGR_GetAppCallback(BUS_MGR_GetThis()));

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcEvtDiscProcessArrowUpDownClicked_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtDiscProcessArrowUpDownClicked_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents, KEY_Code_t eKeyCode)
{
	switch(eKeyCode)
	{
		case KEY_ARROWUP:
		case KEY_PAGEUP:
			GWM_FMT_ScrollUpPageStrict(NAPPV_MEDIASET_PACKPURC_EVTDISC_FMT_ID);
			break;

		case KEY_ARROWDOWN:
		case KEY_PAGEDOWN:
			GWM_FMT_ScrollDownPageStrict(NAPPV_MEDIASET_PACKPURC_EVTDISC_FMT_ID);
			break;

		default:
			return ERR_BUS_NO_ERROR;
	}

	xmgr_cas_NaPpvPackpurcEvtDiscGetPageStr_Mediaset(pContents);
	GWM_Text_SetText(NAPPV_MEDIASET_PACKPURC_EVTDISC_LISTPAGE_TEXT_ID, pContents->ucDiscPageStr);

	return ERR_BUS_NO_ERROR;
}


#define	_____EVENT_INFO______________________________

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcEvtInfoScrollPage_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtInfoScrollPage_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents, KEY_Code_t eKeyCode)
{
	HINT32			nOldDrawIndex = 0, nNumPerPage = 0;
	BUS_Result_t	hRes = ERR_BUS_NO_ERROR;

	if (pContents == NULL)
	{
		return ERR_NO_OBJECT;
	}

	nNumPerPage = GWM_List_GetNumOfPage(NAPPV_MEDIASET_PACKPURC_EVTINFO_EVENTLIST_ID);
	nOldDrawIndex = GWM_List_GetCurrentIndex(NAPPV_MEDIASET_PACKPURC_EVTINFO_EVENTLIST_ID);

	switch(eKeyCode)
	{
		case KEY_ARROWUP:
		case KEY_PAGEUP:
			hRes = GWM_List_SetCurrentIndex(NAPPV_MEDIASET_PACKPURC_EVTINFO_EVENTLIST_ID, nOldDrawIndex-nNumPerPage);
			if (hRes == ERR_BUS_NO_ERROR)
			{
				xmgr_cas_NaPpvPackpurcEvtInfoGetPageStr_Mediaset(pContents);
				GWM_Text_SetText(NAPPV_MEDIASET_PACKPURC_EVTINFO_LISTPAGE_TEXT_ID, pContents->ucIncludedEventPageStr);
			}
			break;
		case KEY_ARROWDOWN:
		case KEY_PAGEDOWN:
			hRes = GWM_List_SetCurrentIndex(NAPPV_MEDIASET_PACKPURC_EVTINFO_EVENTLIST_ID, nOldDrawIndex+nNumPerPage);
			if (hRes == ERR_BUS_NO_ERROR)
			{
				xmgr_cas_NaPpvPackpurcEvtInfoGetPageStr_Mediaset(pContents);
				GWM_Text_SetText(NAPPV_MEDIASET_PACKPURC_EVTINFO_LISTPAGE_TEXT_ID, pContents->ucIncludedEventPageStr);
			}
			break;

		case KEY_OK:
		default:
			break;
	}

	return ERR_BUS_NO_ERROR;
}


/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcEvtInfoGetPageStr_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtInfoGetPageStr_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents)
{
	HINT32	nCurIndex, nCurPage, nTotalPage, nTotalNum, nNumPerPage;

	nNumPerPage = GWM_List_GetNumOfPage(NAPPV_MEDIASET_PACKPURC_EVTINFO_EVENTLIST_ID);
	nCurIndex = GWM_List_GetCurrentIndex(NAPPV_MEDIASET_PACKPURC_EVTINFO_EVENTLIST_ID);
	GWM_List_GetTotalItem(NAPPV_MEDIASET_PACKPURC_EVTINFO_EVENTLIST_ID, &nTotalNum);

	nTotalPage = nTotalNum / nNumPerPage + 1;
	if (nTotalNum % nNumPerPage == 0)
	{
		nTotalPage--;
	}

	nCurPage = nCurIndex / nNumPerPage + 1;

	snprintf(pContents->ucIncludedEventPageStr, 16, "%d/%d", nCurPage, nTotalPage);

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcEvtInfoDrawRechargeListItem_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtInfoDrawIncludedEventListItem_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea,
										OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1)
{
	OSD_StockImage_t	 		stImage;

	XmgrCas_NaPackPurcUiSubItemEvents_t	*pDrawSubItemInfo = NULL;

	OSD_Rect_t					rect_list, rect_img;
	HINT32				 		nX1, nY1;
	HINT8 						szDate[128];

	HINT32						nListItemNum = 0, nListFocusIndex = 0, nItemNum = 0;
	HUINT16						i = 0;
	XmgrCas_NaPackPurc_Mediaset_t		*pContents = xmgr_cas_NaPpvPackpurcGetLocalContents_Mediaset();


	GWM_List_GetTotalItem(GWM_Obj_GetObjectID(pObject), &nListItemNum);
	nItemNum = GWM_List_GetNumOfPage(GWM_Obj_GetObjectID(pObject));
	nListFocusIndex = GWM_List_GetCurrentIndex(GWM_Obj_GetObjectID(pObject));
	pDrawSubItemInfo = (XmgrCas_NaPackPurcUiSubItemEvents_t*)GWM_List_GetArrayPtr((LIST_OBJECT)pObject);

	if (pDrawSubItemInfo)
	{
		for (i = 0; i < nItemNum; i++)
		{
			pDrawSubItemInfo = xmgr_cas_NaPpvPackpurcLinkTraverseListItembyIndex_Mediaset(&pContents->pstIncludedEventList, pContents->usIncludedEventNum, nListFocusIndex+i);
			if (pDrawSubItemInfo)
			{
				if (MWC_UTIL_DvbStrlenStrOnly(pDrawSubItemInfo->EvtName) > 0)
				{
					// setting text style of the evtname info list
					OSD_GFX_SetRect(&rect_list, s_Mediaset_PackPurc_NaviSubItem[0].rect.x, s_Mediaset_PackPurc_NaviSubItem[0].rect.y + ((i+1)*NAPPV_MEDIASET_PACKPURC_SUBBTN_LINESPACE),
							s_Mediaset_PackPurc_NaviSubItem[0].rect.w, s_Mediaset_PackPurc_NaviSubItem[0].rect.h);
					OSD_GFX_DrawTextByLimit(pScreen, GWM_Obj_GetObjectID(pObject), eFont_SystemNormal, eFontAlign_Left, FONT_SIZE_M, rect_list.x, rect_list.y, rect_list.w,
												(HINT8 *)pDrawSubItemInfo->EvtName, COL(C_T_Cursor));
				}

				// setting text style of the expirydate info list
				OSD_GFX_SetRect(&rect_list, s_Mediaset_PackPurc_NaviSubItem[1].rect.x, s_Mediaset_PackPurc_NaviSubItem[1].rect.y + ((i+1)*NAPPV_MEDIASET_PACKPURC_SUBBTN_LINESPACE),
											s_Mediaset_PackPurc_NaviSubItem[1].rect.w, s_Mediaset_PackPurc_NaviSubItem[1].rect.h);
				snprintf(szDate, 128, "%02d/%02d/%04d\n", pDrawSubItemInfo->EvtExpiryDate.day, pDrawSubItemInfo->EvtExpiryDate.month, pDrawSubItemInfo->EvtExpiryDate.year+1900);
				OSD_GFX_DrawTextByLimit(pScreen, GWM_Obj_GetObjectID(pObject), eFont_SystemNormal, eFontAlign_Right, FONT_SIZE_M, rect_list.x, rect_list.y, rect_list.w,
												(HINT8 *)szDate, COL(C_T_Cursor));

				// setting text style of the line
				OSD_GFX_SetRect(&rect_img, s_Mediaset_PackPurc_NaviSubItemLine[0].rect.x, s_Mediaset_PackPurc_NaviSubItemLine[0].rect.y + ((i+1)*NAPPV_MEDIASET_PACKPURC_SUBBTN_LINE_LINESPACE),
									s_Mediaset_PackPurc_NaviSubItemLine[0].rect.w, s_Mediaset_PackPurc_NaviSubItemLine[0].rect.h);
				nX1 = pArea->x1 + rect_img.x;
				nY1 = pArea->y1 + rect_img.y;
				if (!AP_StockImg_GetImage (e914_6_24_Line2, &stImage))
				{
					OSD_GFX_SetRect (&rect_img, nX1, nY1, stImage.width, stImage.height);
					OSD_GFX_FB_Blend (stImage.hBuffer, stImage.width, stImage.height, pScreen, &rect_img);
				}
			}
		}
	}

	return ERR_BUS_NO_ERROR;
}


/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcEvtInfoDrawPackagePurchase_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtInfoDrawPackagePurchase_Mediaset (OSD_Screen_t *pScreen, OSD_Area_t *pArea,
										OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1)
{
	HERROR					hError;
	XmgrCas_NaPackPurc_Mediaset_t	*pContents = xmgr_cas_NaPpvPackpurcGetLocalContents_Mediaset();

	HINT32					nObjectId, nThisDrawIndex;
	OSD_Rect_t					rect_img;
	HINT32				 		nX1, nY1;
	OSD_StockImage_t	 		stImage;

	nObjectId = GWM_Obj_GetObjectID(pObject);
	nThisDrawIndex = nObjectId - NAPPV_MEDIASET_PACKPURC_SUBBTN_ID;

	/* na ppv mediaset packpurc title name text */
	hError = xmgr_cas_NaPpvPackpurcDrawTitleName_Mediaset(pContents, pScreen, pArea, pRect, pObject, pArg, param1);
	if (hError != ERR_BUS_NO_ERROR)
	{
		HxLOG_Error(" xmgr_cas_NaPpvPackpurcEvtInfoDrawTitleName_Mediaset Error!\n");
		return ERR_FAIL;
	}

	// setting text style of the line
		OSD_GFX_SetRect(&rect_img, s_Mediaset_PackPurc_NaviSubItemLine[0].rect.x, s_Mediaset_PackPurc_NaviSubItemLine[0].rect.y,
							s_Mediaset_PackPurc_NaviSubItemLine[0].rect.w, s_Mediaset_PackPurc_NaviSubItemLine[0].rect.h);
		nX1 = pArea->x1 + rect_img.x;
		nY1 = pArea->y1 + rect_img.y;
		if (!AP_StockImg_GetImage (e914_6_24_Line2, &stImage))
		{
			OSD_GFX_SetRect (&rect_img, nX1, nY1, stImage.width, stImage.height);
			OSD_GFX_FB_Blend (stImage.hBuffer, stImage.width, stImage.height, pScreen, &rect_img);
		}

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcEvtInfoMakeIncludedEventList_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtInfoMakeIncludedEventList_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents)
{
	HUINT16						index = 0;
	XmgrCas_NaPackPurcUiSubItemEvents_t	*ptItem;
	OSD_Rect_t					rect;
	PPV_PACKAGE_LIST_ITEM		*pstPackageItem;


	pstPackageItem = xmgr_cas_NaPpvPackpurcGetCurSubItem_Mediaset(pContents);
	if (pstPackageItem == NULL)
	{
		return ERR_FAIL;
	}

	if (pContents->pstIncludedEventList)
	{
		xmgr_cas_NaPpvPackpurcFreePackageList_Mediaset(&pContents->pstIncludedEventList);
		pContents->pstIncludedEventList = NULL;
		pContents->usIncludedEventNum = 0;
	}

	pContents->usIncludedEventNum = pstPackageItem->PackageInfo.ulNbEvents;

	for (index = 0; index < pstPackageItem->PackageInfo.ulNbEvents; index ++)
	{
		ptItem = (XmgrCas_NaPackPurcUiSubItemEvents_t*)OxAP_Malloc(sizeof(XmgrCas_NaPackPurcUiSubItemEvents_t));
		if (ptItem)
		{
			ptItem->EvtNameLength = pstPackageItem->PackageInfo.pEvents[index].EvtNameLength;
			MWC_UTIL_DvbStrncpy(ptItem->EvtName, pstPackageItem->PackageInfo.pEvents[index].EvtName, MAX_EVENT_ITEM_NAME_LENGTH);

			HxSTD_memcpy(&ptItem->EvtExpiryDate, &pstPackageItem->PackageInfo.pEvents[index].pStartTime, sizeof(TCalendarTime));

			pContents->pstIncludedEventList = UTIL_LINKEDLIST_AppendListItemToPointerList(pContents->pstIncludedEventList, ptItem);
		}
	}

	/* included event List ItemÀ» »ý¼ºÇÑ´Ù. */
	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_SUBBTN_X, NAPPV_MEDIASET_PACKPURC_SUBBTN_Y+NAPPV_MEDIASET_PACKPURC_SUBBTN_HEIGHT, NAPPV_MEDIASET_PACKPURC_SUBBTN_WIDTH, (NAPPV_MEDIASET_PACKPURC_SUBBTN_HEIGHT * MAX_PACKPURC_EVTINFO_ROW_NUM) + 16);
	GWM_List_Create(NAPPV_MEDIASET_PACKPURC_EVTINFO_EVENTLIST_ID, &rect, NULL, NAPPV_MEDIASET_PACKPURC_SUBBTN_HEIGHT, pContents->usIncludedEventNum, /* page count */ MAX_PACKPURC_EVTINFO_ROW_NUM, ((GWM_LIST_ITEMS)pContents->pstIncludedEventList));
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_EVTINFO_EVENTLIST_ID, xmgr_cas_NaPpvPackpurcEvtInfoDrawIncludedEventListItem_Mediaset);

	if (pContents->usIncludedEventNum)
	{
		/* na ppv mediaset selprog list page button */
		xmgr_cas_NaPpvPackpurcEvtInfoGetPageStr_Mediaset(pContents);
		OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_EVTINFO_LISTPAGE_TEXT_X, NAPPV_MEDIASET_PACKPURC_EVTINFO_LISTPAGE_TEXT_Y-FONT_SIZE_M, NAPPV_MEDIASET_PACKPURC_EVTINFO_LISTPAGE_TEXT_WIDTH, NAPPV_MEDIASET_PACKPURC_LISTPAGE_TEXT_HEIGHT);
		GWM_Text_Create(NAPPV_MEDIASET_PACKPURC_EVTINFO_LISTPAGE_TEXT_ID, &rect, (HUINT8*)pContents->ucIncludedEventPageStr);
		GWM_Text_SetAlign (NAPPV_MEDIASET_PACKPURC_EVTINFO_LISTPAGE_TEXT_ID, TEXT_ALIGN_LEFT);
		GWM_Text_SetSize (NAPPV_MEDIASET_PACKPURC_EVTINFO_LISTPAGE_TEXT_ID, FONT_SIZE_M);
		GWM_Text_ChangeColor(NAPPV_MEDIASET_PACKPURC_EVTINFO_LISTPAGE_TEXT_ID, COL (C_T_Cursor), 0x00);
	}
}


/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcEvtDescSetUiObjects_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtInfoSetUiObjects_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents)
{
	OSD_Rect_t				rect = {0, };
	PPV_PACKAGE_LIST_ITEM	*pstPackageItem;

	HxLOG_Print(" +++ \n");

	/* na ppv mediaset packpurc background */
	Settings_DrawBack(FALSE);
	OSD_GFX_SetRect(&rect, 0, 0, OSD_SCREEN_WIDTH, OSD_SCREEN_HEIGHT);
	GWM_Rect_Create(NAPPV_MEDIASET_PACKPURC_LOGOBACKGROUND_IMAGE_ID, &rect, 0x00000000);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_LOGOBACKGROUND_IMAGE_ID, xmgr_cas_NaPpvPackpurcDrawBackgroundImage_Mediaset);

	/* na ppv mediaset selprog date text*/
	OSD_GFX_SetRect (&rect, NAPPV_MEDIASET_PACKPURC_DATE_TEXT_X, NAPPV_MEDIASET_PACKPURC_DATE_TEXT_Y, NAPPV_MEDIASET_PACKPURC_DATE_TEXT_WIDTH, NAPPV_MEDIASET_PACKPURC_DATE_TEXT_HEIGHT);
	GWM_Text_Create(NAPPV_MEDIASET_PACKPURC_DATE_TEXT_ID, &rect, (HUINT8*)pContents->ucCurDate);
	GWM_Text_SetAlign (NAPPV_MEDIASET_PACKPURC_DATE_TEXT_ID, TEXT_ALIGN_RIGHT);
	GWM_Text_SetSize (NAPPV_MEDIASET_PACKPURC_DATE_TEXT_ID, FONT_SIZE_S);
	GWM_Text_ChangeColor (NAPPV_MEDIASET_PACKPURC_DATE_TEXT_ID, COL(C_T_Cursor), 0x00);

	/* na ppv mediaset packpurc infotext*/
	OSD_GFX_SetRect (&rect, NAPPV_MEDIASET_PACKPURC_INFO_TEXT_X, NAPPV_MEDIASET_PACKPURC_INFO_TEXT_Y, NAPPV_MEDIASET_PACKPURC_INFO_TEXT_WIDTH, NAPPV_MEDIASET_PACKPURC_INFO_TEXT_HEIGHT);
	GWM_Text_Create (NAPPV_MEDIASET_PACKPURC_INFO_TEXT_ID, &rect, (HUINT8 *)GetStrRsc(LOC_CAS_NAGRA_MEDIASET_PACKAGE_PURCHASE_TEXT_ID));
	GWM_Text_SetAlign (NAPPV_MEDIASET_PACKPURC_INFO_TEXT_ID, TEXT_ALIGN_LEFT);
	GWM_Text_SetSize (NAPPV_MEDIASET_PACKPURC_INFO_TEXT_ID, FONT_SIZE_M);
	GWM_Text_ChangeColor(NAPPV_MEDIASET_PACKPURC_INFO_TEXT_ID, COL (C_T_Cursor), 0x00);

	/* na ppv mediaset spackpurc credit button */
	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_STATE_BTN_X, NAPPV_MEDIASET_PACKPURC_STATE_BTN_Y, NAPPV_MEDIASET_PACKPURC_STATE_BTN_WIDTH, NAPPV_MEDIASET_PACKPURC_STATE_BTN_HEIGHT);
	GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_STATE_BTN_ID, &rect, NULL);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_STATE_BTN_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawStateButton_Mediaset);

	/* na ppv mediaset packpurc state button */
	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_X, NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_Y, NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_WIDTH, NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_HEIGHT);
	GWM_Text_Create(NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_ID, &rect, NULL);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawCredit_Mediaset);

	/* na ppv mediaset packpurc arrow */
	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_ARROW_BTN_X, NAPPV_MEDIASET_PACKPURC_ARROW_BTN_Y, NAPPV_MEDIASET_PACKPURC_ARROW_BTN_WIDTH, NAPPV_MEDIASET_PACKPURC_ARROW_BTN_HEIGHT);
	GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_ARROW_BTN_ID, &rect, NULL);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_ARROW_BTN_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawUpDownArrow_Mediaset);

	/* na ppv mediaset packpurc ok button */
	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_OK_BTN_X, NAPPV_MEDIASET_PACKPURC_OK_BTN_Y, NAPPV_MEDIASET_PACKPURC_OK_BTN_WIDTH, NAPPV_MEDIASET_PACKPURC_OK_BTN_HEIGHT);
	GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_OK_BTN_ID, &rect, NULL);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_OK_BTN_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawOKButton_Mediaset);

	/* na ppv mediaset packpurc back button */
	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_BACK_BTN_X, NAPPV_MEDIASET_PACKPURC_BACK_BTN_Y, NAPPV_MEDIASET_PACKPURC_BACK_BTN_WIDTH, NAPPV_MEDIASET_PACKPURC_BACK_BTN_HEIGHT);
	GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_BACK_BTN_ID, &rect, NULL);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_BACK_BTN_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawBackButton_Mediaset);

	pstPackageItem = xmgr_cas_NaPpvPackpurcGetCurSubItem_Mediaset(pContents);
	if (pstPackageItem == NULL)
	{
		return ERR_FAIL;
	}
	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_EVTINFO_EVENTNAME_TEXT_X, NAPPV_MEDIASET_PACKPURC_EVTINFO_EVENTNAME_TEXT_Y, NAPPV_MEDIASET_PACKPURC_EVTINFO_EVENTNAME_TEXT_WIDTH, NAPPV_MEDIASET_PACKPURC_EVTINFO_EVENTNAME_TEXT_HEIGHT);
	GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_EVTINFO_EVENTNAME_TEXT_ID, &rect, NULL);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_EVTINFO_EVENTNAME_TEXT_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcEvtInfoDrawPackagePurchase_Mediaset);

	xmgr_cas_NaPpvPackpurcEvtInfoMakeIncludedEventList_Mediaset(pContents);

	HxLOG_Print(" --- \n");

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcEvtInfoDestroyUI_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtInfoDestroyUI_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents)
{
	if (pContents->pstIncludedEventList)
	{
		xmgr_cas_NaPpvPackpurcFreePackageList_Mediaset(&pContents->pstIncludedEventList);
		pContents->pstIncludedEventList = NULL;
	}

	return ERR_BUS_NO_ERROR;
}


#define	_____EVENT_CONFIRM______________________________

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcEvtConfirmDrawPackagePurchase_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtConfirmDrawPackagePurchase_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea,
										OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1)
{
	HERROR					hError;
	XmgrCas_NaPackPurc_Mediaset_t	*pContents = xmgr_cas_NaPpvPackpurcGetLocalContents_Mediaset();

	/* na ppv mediaset packpurc title name text */
	hError = xmgr_cas_NaPpvPackpurcDrawTitleName_Mediaset(pContents, pScreen, pArea, pRect, pObject, pArg, param1);
	if (hError != ERR_BUS_NO_ERROR)
	{
		HxLOG_Error(" xmgr_cas_NaPpvPackpurcDrawTitleName_Mediaset Error!\n");
		return ERR_FAIL;
	}

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcEvtConfirmDrawMainMessage_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtConfirmDrawMainMessage_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea,
										OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1)
{
	HINT32					nObjectId;
	OSD_Rect_t				rect_text;
	OSD_Font_t				*pFont;

	//----------------------------------------------------------------
	rect_text.x = pArea->x1 + pRect->x;
	rect_text.y = pArea->y1 + pRect->y;
	rect_text.w = pRect->w;
	rect_text.h = pRect->h;
	//----------------------------------------------------------------

	/* for compiler */
	(void)pArg;
	(void)param1;

	nObjectId = GWM_Obj_GetObjectID(pObject);
	pFont = OSD_FONT_Get(eFont_SystemNormal);
	if (pFont == NULL)
	{
		return ERR_FAIL;
	}
	OSD_FONT_SetSize (pFont, FONT_SIZE_M);

	OSD_GFX_DrawMultiLineStringAlign(pScreen, pFont, rect_text.x, rect_text.y, rect_text.w, rect_text.h, (HINT8 *)GetStrRsc(LOC_CAS_NAGRA_MEDIASET_MENU_MSG_PACKAGE_PURCHASE_CONFIRM_ID),
		NAPPV_MEDIASET_PACKPURC_EVTCONFIRM_SUBBTN_LINESPACE-FONT_SIZE_M, COL(C_T_MList_Yellow), TEXT_ALIGN_CENTER|TEXT_MULTILINED);

	if (pFont != NULL)
	{
		OSD_FONT_Release(pFont);
	}

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcEvtConfirmSetUiObjects_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtConfirmSetUiObjects_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents)
{
	OSD_Rect_t				rect = {0, };

	/* for compiler */
	(void)pContents;

	HxLOG_Print(" +++ \n");

	/* na ppv mediaset packpurc background */
	Settings_DrawBack(FALSE);
	OSD_GFX_SetRect(&rect, 0, 0, OSD_SCREEN_WIDTH, OSD_SCREEN_HEIGHT);
	GWM_Rect_Create(NAPPV_MEDIASET_PACKPURC_LOGOBACKGROUND_IMAGE_ID, &rect, 0x00000000);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_LOGOBACKGROUND_IMAGE_ID, xmgr_cas_NaPpvPackpurcDrawBackgroundImage_Mediaset);

	/* na ppv mediaset selprog date text*/
	OSD_GFX_SetRect (&rect, NAPPV_MEDIASET_PACKPURC_DATE_TEXT_X, NAPPV_MEDIASET_PACKPURC_DATE_TEXT_Y, NAPPV_MEDIASET_PACKPURC_DATE_TEXT_WIDTH, NAPPV_MEDIASET_PACKPURC_DATE_TEXT_HEIGHT);
	GWM_Text_Create(NAPPV_MEDIASET_PACKPURC_DATE_TEXT_ID, &rect, pContents->ucCurDate);
	GWM_Text_SetAlign (NAPPV_MEDIASET_PACKPURC_DATE_TEXT_ID, TEXT_ALIGN_RIGHT);
	GWM_Text_SetSize (NAPPV_MEDIASET_PACKPURC_DATE_TEXT_ID, FONT_SIZE_S);
	GWM_Text_ChangeColor (NAPPV_MEDIASET_PACKPURC_DATE_TEXT_ID, COL(C_T_Cursor), 0x00);

	/* na ppv mediaset packpurc infotext*/
	OSD_GFX_SetRect (&rect, NAPPV_MEDIASET_PACKPURC_INFO_TEXT_X, NAPPV_MEDIASET_PACKPURC_INFO_TEXT_Y, NAPPV_MEDIASET_PACKPURC_INFO_TEXT_WIDTH, NAPPV_MEDIASET_PACKPURC_INFO_TEXT_HEIGHT);
	GWM_Text_Create (NAPPV_MEDIASET_PACKPURC_INFO_TEXT_ID, &rect, (HUINT8 *)GetStrRsc(LOC_CAS_NAGRA_MEDIASET_PACKAGE_PURCHASE_TEXT_ID));
	GWM_Text_SetAlign (NAPPV_MEDIASET_PACKPURC_INFO_TEXT_ID, TEXT_ALIGN_LEFT);
	GWM_Text_SetSize (NAPPV_MEDIASET_PACKPURC_INFO_TEXT_ID, FONT_SIZE_M);
	GWM_Text_ChangeColor(NAPPV_MEDIASET_PACKPURC_INFO_TEXT_ID, COL (C_T_Cursor), 0x00);

	/* na ppv mediaset spackpurc credit button */
	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_STATE_BTN_X, NAPPV_MEDIASET_PACKPURC_STATE_BTN_Y, NAPPV_MEDIASET_PACKPURC_STATE_BTN_WIDTH, NAPPV_MEDIASET_PACKPURC_STATE_BTN_HEIGHT);
	GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_STATE_BTN_ID, &rect, NULL);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_STATE_BTN_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawStateButton_Mediaset);

	/* na ppv mediaset packpurc state button */
	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_X, NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_Y, NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_WIDTH, NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_HEIGHT);
	GWM_Text_Create(NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_ID, &rect, NULL);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_CREDIT_BTN_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawCredit_Mediaset);

	/* na ppv mediaset packpurc ok button */
	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_OK_BTN_X, NAPPV_MEDIASET_PACKPURC_OK_BTN_Y, NAPPV_MEDIASET_PACKPURC_OK_BTN_WIDTH, NAPPV_MEDIASET_PACKPURC_OK_BTN_HEIGHT);
	GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_OK_BTN_ID, &rect, NULL);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_OK_BTN_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawOKButton_Mediaset);

	/* na ppv mediaset packpurc back button */
	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_BACK_BTN_X, NAPPV_MEDIASET_PACKPURC_BACK_BTN_Y, NAPPV_MEDIASET_PACKPURC_BACK_BTN_WIDTH, NAPPV_MEDIASET_PACKPURC_BACK_BTN_HEIGHT);
	GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_BACK_BTN_ID, &rect, NULL);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_BACK_BTN_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawBackButton_Mediaset);

	/* na ppv mediaset packpurc event confirm info*/
	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_EVTCONFIRM_SUBBTN_X, NAPPV_MEDIASET_PACKPURC_EVTCONFIRM_SUBBTN_Y, NAPPV_MEDIASET_PACKPURC_EVTCONFIRM_SUBBTN_WIDTH, NAPPV_MEDIASET_PACKPURC_EVTCONFIRM_SUBBTN_HEIGHT);
	GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_EVTCONFIRM_SUBBTN_ID, &rect, NULL);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_EVTCONFIRM_SUBBTN_ID, xmgr_cas_NaPpvPackpurcEvtConfirmDrawPackagePurchase_Mediaset);


	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_EVTCONFIRM_SUBBTN_X, NAPPV_MEDIASET_PACKPURC_EVTCONFIRM_SUBBTN_Y, NAPPV_MEDIASET_PACKPURC_EVTCONFIRM_SUBBTN_WIDTH, NAPPV_MEDIASET_PACKPURC_EVTCONFIRM_SUBBTN_HEIGHT);
	GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_EVTCONFIRM_MESSAGE_ID, &rect, NULL);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_EVTCONFIRM_MESSAGE_ID, xmgr_cas_NaPpvPackpurcEvtConfirmDrawMainMessage_Mediaset);

	HxLOG_Print(" --- \n");

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcEvtConfirmCheckPurchasable_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC HBOOL xmgr_cas_NaPpvPackpurcEvtConfirmCheckPurchasable_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents, PPV_PACKAGE_LIST_ITEM	*pstPackageItem)
{
	UNIXTIME					nCurrTime;
	HERROR						hErr = ERR_OK;
	HUINT32						nRemainCredit = 0;
	XmgrCas_NaAlamType_e			eAlarmType;

	hErr = xmgr_cas_NaGetScCredit(&nRemainCredit);
	if (hErr != ERR_OK)
	{
		pContents->nPackageErrorType = ePACKAGE_CREDIT_SHORTAGE;
		HxLOG_Print("nPackageErrorType = %d\n", pContents->nPackageErrorType);
		return FALSE;
	}

	// ¸ÕÀú ÇöÀç ½Ã°£À» ¾ò¾î¿Â´Ù.
	hErr = VK_CLOCK_GetTime((unsigned long*)&nCurrTime);
	if (hErr != ERR_OK)
	{
		pContents->nPackageErrorType = ePACKAGE_PERIOD_ENDED;
		HxLOG_Print("nPackageErrorType = %d\n", pContents->nPackageErrorType);
		return FALSE;
	}

	// 1. check Purchased Already or Not - ¼ø¼­´ë·Î Ã¼Å©ÇØ¾ß ÇÔ
	if (pstPackageItem->PurchasableFlag & CA_PRODUCT_PURCHASED)
	{
		pContents->nPackageErrorType = ePACKAGE_ALREADY_PURCHASED;
		HxLOG_Print("nPackageErrorType = %d\n", pContents->nPackageErrorType);
		return FALSE;
	}
	else
	{
		HxLOG_Print("PurchasableFlag = %d\n", pstPackageItem->PurchasableFlag);
	}


	// 2. check SmartCard Expired
	hErr = xmgr_cas_NaGetSmartCardStatus(&eAlarmType);
	if (hErr != ERR_OK || eAlarmType == eCAS_NA_CA_SMARTCARD_EXPIRED)
	{
		pContents->nPackageErrorType = ePACKAGE_CARD_EXPIRED;
		HxLOG_Print("nPackageErrorType = %d\n", pContents->nPackageErrorType);
		return FALSE;
	}

	// 3. Check Purchase Period - purchasable Ã¼Å©·Î ¹Ù²ã¾ß ÇÒ¼öµµ
	hErr = xmgr_cas_NaPpvPackpurcCheckValidPeriod_Mediaset(pstPackageItem->PurchaseStartTime, pstPackageItem->PurchaseEndTime);
	if (hErr != ERR_OK)
	{
		pContents->nPackageErrorType = ePACKAGE_PERIOD_ENDED;
		HxLOG_Print("nPackageErrorType = %d\n", pContents->nPackageErrorType);
		return FALSE;
	}

	if (xmgr_cas_NaCheckProductPurchasable(pstPackageItem->pRequest, (TCaProduct *)pstPackageItem->pProduct) != ERR_OK)	// °¢ ´Ü°è¸¶´Ù Ã¼Å©ÇØ¾ß ÇÒ µí
	{
		pContents->nPackageErrorType = ePACKAGE_PERIOD_ENDED;
		HxLOG_Print("xmgr_cas_NaCheckProductPurchasable error nPackageErrorType = %d\n", pContents->nPackageErrorType);
		return FALSE;
	}

	// 4. check credit
	if (pstPackageItem->Cost > nRemainCredit)
	{
		pContents->nPackageErrorType = ePACKAGE_CREDIT_SHORTAGE;
		HxLOG_Print("nPackageErrorType = %d\n", pContents->nPackageErrorType);
		return FALSE;
	}

	pContents->nPackageErrorType = ePACKAGE_PURCHASABLE_NO_ERROR;

	return TRUE;

}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcEvtConfirmProcessOKClicked_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtConfirmProcessOKClicked_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents, KEY_Code_t eKeyCode)
{
	PPV_PACKAGE_LIST_ITEM	*pstPackageItem;
	HERROR					hErr = ERR_OK;

	pstPackageItem = xmgr_cas_NaPpvPackpurcGetCurSubItem_Mediaset(pContents);

	if (xmgr_cas_NaPpvPackpurcEvtConfirmCheckPurchasable_Mediaset(pContents, pstPackageItem) == TRUE)
	{
		hErr = xmgr_cas_NaRequestPackagePurchase_Mediaset(pstPackageItem->pProduct);

		if (hErr == ERR_OK)
		{
			HxLOG_Print("xmgr_cas_NaRequestPackagePurchase_Mediaset OK!!!\n");
		}
		else
		{
			HxLOG_Print("xmgr_cas_NaRequestPackagePurchase_Mediaset FAIL!!!\n");
		}
	}
	else
	{
		HxLOG_Print("pContents->nPackageErrorType = %d\n", pContents->nPackageErrorType);
		// error display
	}

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcEvtConfirmResponsePurchaseResult_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtConfirmResponsePurchaseResult_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents, HINT32 nResult)
{

	BUS_MGR_Destroy(NULL);

	BUS_MGR_Create(  "xproc_cas_NaPackagePurchaseEvtConfirmEnd_Mediaset",
				APP_DIALOGBOX_PRIORITY,
				xproc_cas_NaPackagePurchaseEvtConfirmEnd_Mediaset,
				HANDLE_NULL,
				nResult,
				DLG_TYPE_MESSAGE|DLG_TIMEOUT_60SEC,
				(HINT32)BUS_MGR_GetAppCallback(BUS_MGR_GetThis()));

	return ERR_BUS_NO_ERROR;
}


#define	_____EVENT_CONFIRM_END______________________________

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcEvtConfirmEndDrawResultCredit_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtConfirmEndDrawResultCredit_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea, OSD_Rect_t *pRect,
											GWM_GuiObject_t pObject, void *pArg, int param1)
{
	HINT8 					szDate[128];
	HINT32					nObjectId, nRemainCredit = 0;
	OSD_Rect_t				rect_text;

	//credit icon
	OSD_Font_t				*pFont;
	HINT32					nStrLen = 0;
	OSD_StockImage_t	 	stImage;
	OSD_Rect_t				rect_icon;
	HINT32					nX, nY;

	//----------------------------------------------------------------
	rect_text.x = pArea->x1 + pRect->x;
	rect_text.y = pArea->y1 + pRect->y;
	rect_text.w = pRect->w;
	rect_text.h = pRect->h;
	//----------------------------------------------------------------

	/* for compiler */
	(void)pArg;
	(void)param1;

	nObjectId = GWM_Obj_GetObjectID(pObject);

	xmgr_cas_NaGetScCredit(&nRemainCredit);

	pFont = OSD_FONT_Get(eFont_SystemNormal);
	snprintf(szDate, 128, "%s %d,00", (HUINT8 *)GetStrRsc(LOC_CAS_NAGRA_MEDIASET_CREDIT_TEXT_ID), nRemainCredit); //all string
	nStrLen = OSD_GFX_GetStringWidth(pFont, szDate);
	nX = rect_text.x + (rect_text.w - nStrLen)/2;
	rect_text.x = nX;
	if (pFont != NULL)
		OSD_FONT_Release(pFont);

	// credit text
	OSD_GFX_DrawTextByLimit(pScreen, nObjectId, eFont_SystemNormal, eFontAlign_Left, FONT_SIZE_M, rect_text.x, rect_text.y, nStrLen,
										(HINT8 *)GetStrRsc(LOC_CAS_NAGRA_MEDIASET_CREDIT_TEXT_ID), COL(C_T_Cursor));
	//credit value
	snprintf(szDate, 128, "%d,%02d", nRemainCredit/100, nRemainCredit%100);
	OSD_GFX_DrawTextByLimit(pScreen, nObjectId, eFont_SystemNormal, eFontAlign_Right, FONT_SIZE_M, rect_text.x, rect_text.y, nStrLen,
										(HINT8 *)szDate, COL(C_T_MList_Yellow));

	// credit icon
	if (!AP_StockImg_GetImage (e915_1_24_EUR, &stImage))
	{
		nX = rect_text.x + nStrLen + 10;
		nY = rect_text.y - NAPPV_MEDIASET_PACKPURC_STRING_MARGIN_Y;
		OSD_GFX_SetRect (&rect_icon, nX, nY, stImage.width, stImage.height);
		OSD_GFX_FB_Blend (stImage.hBuffer, stImage.width, stImage.height, pScreen, &rect_icon);
	}

	return ERR_BUS_NO_ERROR;
}

STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtConfirmEndDrawMainMessage_Mediaset(OSD_Screen_t *pScreen, OSD_Area_t *pArea,
										OSD_Rect_t *pRect, GWM_GuiObject_t pObject, void *pArg, int param1)
{
	HINT32					nObjectId;
	OSD_Rect_t				rect_text;
	OSD_Font_t				*pFont;

	XmgrCas_NaPackPurc_Mediaset_t	*pContents = xmgr_cas_NaPpvPackpurcGetLocalContents_Mediaset();

	//----------------------------------------------------------------
	rect_text.x = pRect->x;
	rect_text.y = pRect->y - NAPPV_MEDIASET_PACKPURC_STRING_MARGIN_Y;
	rect_text.w = pRect->w;
	rect_text.h = pRect->h;
	//----------------------------------------------------------------

	/* for compiler */
	(void)pArg;
	(void)param1;

	nObjectId = GWM_Obj_GetObjectID(pObject);
	pFont = OSD_FONT_Get(eFont_SystemNormal);
	if (pFont == NULL)
	{
		return ERR_FAIL;
	}
	OSD_FONT_SetSize (pFont, FONT_SIZE_M);

	if (pContents->bPurchaseSuccess == TRUE)
	{
		OSD_GFX_DrawMultiLineStringAlign(pScreen, pFont, rect_text.x, rect_text.y, rect_text.w, rect_text.h, (HINT8 *)GetStrRsc(LOC_CAS_NAGRA_MEDIASET_MENU_MSG_PACKAGE_RESULT_ID),
			NAPPV_MEDIASET_PACKPURC_EVTCONFIRM_SUBBTN_LINESPACE-FONT_SIZE_M, COL(C_T_MList_Yellow), TEXT_ALIGN_CENTER|TEXT_MULTILINED);
	}
	else
	{
		OSD_GFX_DrawMultiLineStringAlign(pScreen, pFont, rect_text.x, rect_text.y, rect_text.w, rect_text.h, (HINT8 *)GetStrRsc(LOC_CAS_NAGRA_MEDIASET_MENU_ERR_PACKAGE_PURCHASE_FAIL_ID),
			NAPPV_MEDIASET_PACKPURC_EVTCONFIRM_SUBBTN_LINESPACE-FONT_SIZE_M, COL(C_T_MList_Yellow), TEXT_ALIGN_CENTER|TEXT_MULTILINED);
	}

	if (pFont != NULL)
	{
		OSD_FONT_Release(pFont);
	}

	return ERR_BUS_NO_ERROR;
}

/********************************************************************
 Function		: xmgr_cas_NaPpvPackpurcEvtConfirmEndSetUiObjects_Mediaset
 Description	:
 Input		:
 Output 		:
 Return 		:
 ********************************************************************/
STATIC BUS_Result_t xmgr_cas_NaPpvPackpurcEvtConfirmEndSetUiObjects_Mediaset(XmgrCas_NaPackPurc_Mediaset_t *pContents)
{
	OSD_Rect_t				rect = {0, };

	/* for compiler */
	(void)pContents;

	HxLOG_Print(" +++ \n");

	/* na ppv mediaset packpurc background */
	Settings_DrawBack(FALSE);
	OSD_GFX_SetRect(&rect, 0, 0, OSD_SCREEN_WIDTH, OSD_SCREEN_HEIGHT);
	GWM_Rect_Create(NAPPV_MEDIASET_PACKPURC_LOGOBACKGROUND_IMAGE_ID, &rect, 0x00000000);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_LOGOBACKGROUND_IMAGE_ID, xmgr_cas_NaPpvPackpurcDrawBackgroundImage_Mediaset);

	/* na ppv mediaset selprog date text*/
	OSD_GFX_SetRect (&rect, NAPPV_MEDIASET_PACKPURC_DATE_TEXT_X, NAPPV_MEDIASET_PACKPURC_DATE_TEXT_Y, NAPPV_MEDIASET_PACKPURC_DATE_TEXT_WIDTH, NAPPV_MEDIASET_PACKPURC_DATE_TEXT_HEIGHT);
	GWM_Text_Create(NAPPV_MEDIASET_PACKPURC_DATE_TEXT_ID, &rect, pContents->ucCurDate);
	GWM_Text_SetAlign (NAPPV_MEDIASET_PACKPURC_DATE_TEXT_ID, TEXT_ALIGN_RIGHT);
	GWM_Text_SetSize (NAPPV_MEDIASET_PACKPURC_DATE_TEXT_ID, FONT_SIZE_S);
	GWM_Text_ChangeColor (NAPPV_MEDIASET_PACKPURC_DATE_TEXT_ID, COL(C_T_Cursor), 0x00);

	/* na ppv mediaset packpurc event confirm end info*/
	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_EVTCONFIRMEND_SUBBTN_X, NAPPV_MEDIASET_PACKPURC_EVTCONFIRMEND_SUBBTN_Y, NAPPV_MEDIASET_PACKPURC_EVTCONFIRMEND_SUBBTN_WIDTH, NAPPV_MEDIASET_PACKPURC_EVTCONFIRMEND_SUBBTN_HEIGHT);
	GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_EVTCONFIRMEND_SUBBTN_ID, &rect, NULL);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_EVTCONFIRMEND_SUBBTN_ID, xmgr_cas_NaPpvPackpurcEvtConfirmEndDrawMainMessage_Mediaset);

	/* na ppv mediaset spackpurc credit button */
	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_STATE_BTN_X, NAPPV_MEDIASET_PACKPURC_STATE_BTN_Y, NAPPV_MEDIASET_PACKPURC_STATE_BTN_WIDTH, NAPPV_MEDIASET_PACKPURC_STATE_BTN_HEIGHT);
	GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_STATE_BTN_ID, &rect, NULL);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_STATE_BTN_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawStateButton_Mediaset);

	/* na ppv mediaset packpurc state button */
	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_EVTCONFIRMEND_CREDIT_BTN_X, NAPPV_MEDIASET_PACKPURC_EVTCONFIRMEND_CREDIT_BTN_Y, NAPPV_MEDIASET_PACKPURC_EVTCONFIRMEND_CREDIT_BTN_WIDTH, NAPPV_MEDIASET_PACKPURC_EVTCONFIRMEND_CREDIT_BTN_HEIGHT);
	GWM_Text_Create(NAPPV_MEDIASET_PACKPURC_EVTCONFIRMEND_CREDIT_BTN_ID, &rect, NULL);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_EVTCONFIRMEND_CREDIT_BTN_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcEvtConfirmEndDrawResultCredit_Mediaset);

	/* na ppv mediaset packpurc back button */
	OSD_GFX_SetRect(&rect, NAPPV_MEDIASET_PACKPURC_BACK_BTN_X, NAPPV_MEDIASET_PACKPURC_BACK_BTN_Y, NAPPV_MEDIASET_PACKPURC_BACK_BTN_WIDTH, NAPPV_MEDIASET_PACKPURC_BACK_BTN_HEIGHT);
	GWM_Frame_Create(NAPPV_MEDIASET_PACKPURC_BACK_BTN_ID, &rect, NULL);
	GWM_APP_SetObjectDrawMethod(NAPPV_MEDIASET_PACKPURC_BACK_BTN_ID, (GWM_ObjDraw_t)xmgr_cas_NaPpvPackpurcDrawBackButton_Mediaset);

	HxLOG_Print(" --- \n");

	return ERR_BUS_NO_ERROR;
}


#define	______
#define	_________________________PUBLIC_BODY______________________________
#define	______
/******************************************************************************/
/**
*   \fn     xproc_cas_NaPackagePurchase_Mediaset(HINT32 message, Handle_t hAction, HINT32 p1, HINT32 p2, HINT32 p3)
*   \brief  system status procedure
*
*   @param[in]  gwm msg/action handler
*   @return     BUS_ProcessMessageDefault(message, hAction, p1, p2, p3)
*   @ingroup    SYSTEM STATUS
*/
/******************************************************************************/
BUS_Result_t xproc_cas_NaPackagePurchase_Mediaset(HINT32 message, Handle_t hAction, HINT32 p1, HINT32 p2, HINT32 p3)
{
//	HUINT32							ulActionId;
	XmgrCas_NaPackPurc_Mediaset_t			*pContents = xmgr_cas_NaPpvPackpurcGetLocalContents_Mediaset();
	HUINT32							nResult = ERR_FAIL;

	switch(message)
	{
		case MSG_GWM_CREATE:
			/* set app area */
			GWM_APP_SetAppArea(NAPPV_MEDIASET_PACKPURC_WINDOW_X, NAPPV_MEDIASET_PACKPURC_WINDOW_Y,
								NAPPV_MEDIASET_PACKPURC_WINDOW_WIDTH, NAPPV_MEDIASET_PACKPURC_WINDOW_HEIGHT);

			/* initialize packpurc content data */
			xmgr_cas_NaPpvPackpurcInitUiConfiguration_Mediaset(pContents);
			xmgr_cas_NaPpvPackpurcSetMainTitle_Mediaset(pContents);

			// update packpurc information
			//xmgr_cas_NaPpvPackpurcLoadGroupInfo_Mediaset(pContents);
			xmgr_cas_NaPpvPackpurcRequestPackageList_Mediaset(pContents);

			/* set ui objects */
			xmgr_cas_NaPpvPackpurcSetUiObjects_Mediaset(pContents);

			// set front panel
			//AP_SPEC_DisplayMenuPanelString(pContents->ucTitle, eDxPANEL_ALIGN_CENTER);
			break;

		case MSG_APP_UPDATE_SMARTCARD_INFO:
			if(p1 == eDxCAS_GROUPID_NA)
			{
				XmgrCas_NaAlamType_e	eAlarmType;

				xmgr_cas_NaGetSmartCardStatus(&eAlarmType);
				HxLOG_Print("MSG_APP_UPDATE_SMARTCARD_INFO... eAlarmType = %d\n", eAlarmType);
				if (eAlarmType != eCAS_NA_CA_SMARTCARD_OK && eAlarmType != eCAS_NA_CA_SMARTCARD_EXPIRED)
				{
					BUS_MGR_Destroy(NULL);

					/* to upper depth */
					BUS_MGR_Create("xmgr_cas_NaMSET_MenuSmartCardError_Proc", (APP_DEFAULT_PRIORITY | UISTATE_MENU), (GWM_Callback_t)xmgr_cas_NaMSET_MenuSmartCardError_Proc, 0, eAlarmType, 0, 0);

					return MESSAGE_PASS;
				}
				else
				{
					// Card Á¤»ó »ðÀÔ »óÅÂÀÎµ¥.. ÀÌÂÊÀ¸·Î ¿Ö ¿Ã±î?
				}
			}
			break;

		case eMEVT_XMGR_CAS_NA_NOTIFY_PPV_PACKAGE_LIST:
			if(p1 == eDxCAS_GROUPID_NA)
			{
				xmgr_cas_NaPpvPackpurcUpdatePackageList_Mediaset((HUINT32)hAction, (HUINT32)p2, p3, pContents);
			}
			return MESSAGE_BREAK;

		case eMEVT_XMGR_CAS_NA_NOTIFY_SMARTCARD_CREDIT:
			HxLOG_Print("eMEVT_XMGR_CAS_NA_NOTIFY_SMARTCARD_CREDIT...\n");
			if(p1 == eDxCAS_GROUPID_NA)
			{
				xmgr_cas_NaPpvPackpurcUpdateRemainedCredit_Mediaset(pContents, (TCreditAmount)p3);
			}
			break;

		case MSG_GWM_OBJ_FOCUS_CHANGED:
			return MESSAGE_BREAK;

		case MSG_GWM_CLICKED :
			break;

		case MSG_GWM_KEYUP :
			AP_KeyConv_UiCommon(&p1);
			break;

		case MSG_GWM_KEYDOWN :
			AP_KeyConv_UiCommon(&p1);

			if (p1 == KEY_1 || p1 == KEY_2 || p1 == KEY_3)
			{
				xmgr_cas_NaPpvPackpurcLoadChangeGroup_Mediaset(pContents, (XmgrCas_NaPackPurcUiGroup_e)(p1-KEY_1));
				return MESSAGE_BREAK;
			}

			nResult = Settings_CheckKeyPass(p1, BUS_MGR_GetAppCallback(BUS_MGR_GetThis()));
			if(nResult != ERR_OK)
			{
				return nResult;
			}

			switch(p1)
			{
				case KEY_EXIT:
				case KEY_MENU:
					Settings_ClearWindowTitle();

					BUS_MGR_Destroy(NULL);
					return MESSAGE_BREAK;

				case KEY_BACK:
					/* »óÀ§ ¸Þ´º·Î ¿Ã¶ó°¥ ¶§ focus¸¦ ±â¾ïÇÏÁö ¾Ê´Â °ÍÀÌ ÆíÇÒ ¼öµµ ÀÖ´Ù. */
					//Settings_InitFocus(pstContents);

					BUS_MGR_Destroy(NULL);

					/* to upper depth */
					BUS_MGR_Create("xproc_cas_NaPpvMenu_Mediaset", (APP_DEFAULT_PRIORITY | UISTATE_MENU), (GWM_Callback_t)xproc_cas_NaPpvMenu_Mediaset, 0, 0, 0, 0);
					return MESSAGE_BREAK;

				case KEY_ARROWUP:
				case KEY_ARROWDOWN:
				case KEY_PAGEUP:
				case KEY_PAGEDOWN:
					if (pContents->ulTotalItemCount != 0)
					{
						xmgr_cas_NaPpvPackpurcSetCurSubItemIndex_Mediaset(pContents, p1);
					}
					return MESSAGE_BREAK;

				case KEY_OK:
					if (GWM_Obj_GetObjectByID(NAPPV_MEDIASET_PACKPURC_OK_BTN_ID) != NULL)
					{
						xmgr_cas_NaPpvPackpurcProcessOKClicked_Mediaset(pContents, p1);
					}
					return MESSAGE_BREAK;

				case KEY_ARROWLEFT:
				case KEY_ARROWRIGHT:
					//if (pContents->ulTotalItemCount != 0)	// Package list request °¡ successÀÌ¸é °³¼ö°¡ 0°³ÀÌ´õ¶óµµ group ÀüÈ¯Àº °¡´ÉÇØ¾ß ÇÑ´Ù.
					if (GWM_Obj_GetObjectByID(NAPPV_MEDIASET_PACKPURC_TS_ERROR_BTN_ID) == NULL)	// ts ¿¡·¯ÀÏ °æ¿ì
					{
						xmgr_cas_NaPpvPackpurcChangeGroup_Mediaset(pContents, p1);
					}
					return MESSAGE_BREAK;
			}
			break;

		case MSG_GWM_SCROLLUP:
			return MESSAGE_BREAK;

		case MSG_GWM_SCROLLDOWN:
			return MESSAGE_BREAK;

		case MSG_GWM_TIMER:
			return MESSAGE_BREAK;

		case MSG_GWM_DESTROY:
			/* destroy UI */
			xmgr_cas_NaPpvPackpurcDestroyUI_Mediaset(pContents);

			/* clear front PANEL */
			//AP_SPEC_ClearMenuPanelString();
			break;

		default:
			break;
	}

	HxLOG_Info("xproc_cas_NaPackagePurchase_Mediaset handle(0x%x)\n", hAction);

	return BUS_ProcessMessageDefault(message, hAction, p1, p2, p3);
}

/******************************************************************************/
/**
*   \fn     xproc_cas_NaPackagePurchaseEvtDesc_Mediaset(HINT32 message, Handle_t hAction, HINT32 p1, HINT32 p2, HINT32 p3)
*   \brief  system status procedure
*
*   @param[in]  gwm msg/action handler
*   @return     BUS_ProcessMessageDefault(message, hAction, p1, p2, p3)
*   @ingroup    SYSTEM STATUS
*/
/******************************************************************************/
BUS_Result_t xproc_cas_NaPackagePurchaseEvtDesc_Mediaset(HINT32 message, Handle_t hAction, HINT32 p1, HINT32 p2, HINT32 p3)
{
//	HUINT32							ulActionId;
	XmgrCas_NaPackPurc_Mediaset_t			*pContents = xmgr_cas_NaPpvPackpurcGetLocalContents_Mediaset();
	HUINT32							nResult = ERR_FAIL;

	switch(message)
	{
		case MSG_GWM_CREATE:
			/* set app area */
			GWM_APP_SetAppArea(NAPPV_MEDIASET_PACKPURC_WINDOW_X, NAPPV_MEDIASET_PACKPURC_WINDOW_Y,
								NAPPV_MEDIASET_PACKPURC_WINDOW_WIDTH, NAPPV_MEDIASET_PACKPURC_WINDOW_HEIGHT);

			/* init ui objects */
			xmgr_cas_NaPpvPackpurcEvtDescInitUiObjects_Mediaset(pContents);

			xmgr_cas_NaPpvPackpurcEvtDescRequestPackageInfo_Mediaset(pContents);

			/* set ui objects */
			xmgr_cas_NaPpvPackpurcEvtDescSetUiObjects_Mediaset(pContents);

			// set front panel
			//AP_SPEC_DisplayMenuPanelString(pContents->ucTitle, eDxPANEL_ALIGN_CENTER);
			break;

		case MSG_APP_UPDATE_SMARTCARD_INFO:
			if(p1 == eDxCAS_GROUPID_NA)
			{
				XmgrCas_NaAlamType_e	eAlarmType;

				xmgr_cas_NaGetSmartCardStatus(&eAlarmType);
				HxLOG_Print("MSG_APP_UPDATE_SMARTCARD_INFO... eAlarmType = %d\n", eAlarmType);
				if (eAlarmType != eCAS_NA_CA_SMARTCARD_OK && eAlarmType != eCAS_NA_CA_SMARTCARD_EXPIRED)
				{
					BUS_MGR_Destroy(NULL);
					BUS_MGR_Destroy(xproc_cas_NaPackagePurchase_Mediaset);

					/* to upper depth */
					BUS_MGR_Create("xmgr_cas_NaMSET_MenuSmartCardError_Proc", (APP_DEFAULT_PRIORITY | UISTATE_MENU), (GWM_Callback_t)xmgr_cas_NaMSET_MenuSmartCardError_Proc, 0, eAlarmType, 0, 0);

					return MESSAGE_PASS;
				}
				else
				{
					// Card Á¤»ó »ðÀÔ »óÅÂÀÎµ¥.. ÀÌÂÊÀ¸·Î ¿Ö ¿Ã±î?
				}
			}
			break;

		case eMEVT_XMGR_CAS_NA_NOTIFY_SMARTCARD_CREDIT:
			HxLOG_Print("eMEVT_XMGR_CAS_NA_NOTIFY_SMARTCARD_CREDIT...\n");
			if(p1 == eDxCAS_GROUPID_NA)
			{
				xmgr_cas_NaPpvPackpurcUpdateRemainedCredit_Mediaset(pContents, (TCreditAmount)p3);
			}
			break;

		case MSG_GWM_OBJ_FOCUS_CHANGED:
			return MESSAGE_BREAK;

		case MSG_GWM_CLICKED :
			break;

		case MSG_GWM_KEYUP :
			AP_KeyConv_UiCommon(&p1);
			break;

		case MSG_GWM_KEYDOWN :
			AP_KeyConv_UiCommon(&p1);

			nResult = Settings_CheckKeyPass(p1, BUS_MGR_GetAppCallback(BUS_MGR_GetThis()));
			if(nResult != ERR_OK)
			{
				return nResult;
			}

			switch(p1)
			{
				case KEY_EXIT:
				case KEY_MENU:
					Settings_ClearWindowTitle();

					BUS_MGR_Destroy(NULL);
					BUS_MGR_Destroy(xproc_cas_NaPackagePurchase_Mediaset);
					return MESSAGE_BREAK;

				case KEY_BACK:
					/* »óÀ§ ¸Þ´º·Î ¿Ã¶ó°¥ ¶§ focus¸¦ ±â¾ïÇÏÁö ¾Ê´Â °ÍÀÌ ÆíÇÒ ¼öµµ ÀÖ´Ù. */
					//Settings_InitFocus(pstContents);

					BUS_MGR_Destroy(NULL);

					/* to upper depth */
//					BUS_MGR_Create("xproc_cas_NaPackagePurchase_Mediaset", (APP_DEFAULT_PRIORITY | UISTATE_MENU), (GWM_Callback_t)xproc_cas_NaPackagePurchase_Mediaset, 0, 0, 0, 0);
					return MESSAGE_BREAK;

				case KEY_ARROWUP:
				case KEY_PAGEUP:
				case KEY_ARROWDOWN:
				case KEY_PAGEDOWN:
					if (GWM_Obj_GetObjectByID(NAPPV_MEDIASET_PACKPURC_EVTDESC_SUBBTN_ID))		// package info request°¡ ³¡³ª±â Àü¿¡´Â µ¿ÀÛÇÏÁö ¾Êµµ·Ï ÇÔ
					{
						xmgr_cas_NaPpvPackpurcEvtDescProcessArrowUpDownClicked_Mediaset(pContents, p1);
					}
					return MESSAGE_BREAK;

				case KEY_OK:
					if (GWM_Obj_GetObjectByID(NAPPV_MEDIASET_PACKPURC_EVTDESC_SUBBTN_ID))		// package info request°¡ ³¡³ª±â Àü¿¡´Â µ¿ÀÛÇÏÁö ¾Êµµ·Ï ÇÔ
					{
						if (GWM_Obj_GetObjectByID(NAPPV_MEDIASET_PACKPURC_OK_BTN_ID))			// UnpurchasableÀÏ °æ¿ì Ã¼Å©
						{
							BUS_MGR_Destroy(NULL);

							xmgr_cas_NaPpvPackpurcEvtDescProcessOKClicked_Mediaset(pContents, p1);

							return MESSAGE_BREAK;
						}
					}
					return MESSAGE_BREAK;

				case KEY_ARROWLEFT:
				case KEY_ARROWRIGHT:
					return MESSAGE_BREAK;

				case KEY_GREEN:
					if (GWM_Obj_GetObjectByID(NAPPV_MEDIASET_PACKPURC_EVTDESC_SUBBTN_ID))		// package info request°¡ ³¡³ª±â Àü¿¡´Â µ¿ÀÛÇÏÁö ¾Êµµ·Ï ÇÔ
					{
						if (GWM_Obj_GetObjectByID(NAPPV_MEDIASET_PACKPURC_EVTDESC_GREENBTN_BTN_ID))	// green ¹öÆ°ÀÌ  °æ¿ì¿¡¸¸
						{
							BUS_MGR_Destroy(NULL);

							xmgr_cas_NaPpvPackpurcEvtDescProcessGreenClicked_Mediaset(pContents, p1);

							return MESSAGE_BREAK;
						}
					}
					return MESSAGE_BREAK;
			}
			break;

		case MSG_GWM_SCROLLUP:
			return MESSAGE_BREAK;

		case MSG_GWM_SCROLLDOWN:
			return MESSAGE_BREAK;

		case MSG_GWM_TIMER:
			return MESSAGE_BREAK;

		case MSG_GWM_DESTROY:
			/* destroy UI */
//			xmgr_cas_NaPpvPackpurcDestroyUI_Mediaset(pContents);

			/* clear front PANEL */
//			AP_SPEC_ClearMenuPanelString();
			break;

		default:
			break;
	}

	HxLOG_Info("xproc_cas_NaPackagePurchaseEvtDesc_Mediaset handle(0x%x)\n", hAction);

	return BUS_ProcessMessageDefault(message, hAction, p1, p2, p3);
}

/******************************************************************************/
/**
*   \fn     xproc_cas_NaPackagePurchaseEvtDisc_Mediaset(HINT32 message, Handle_t hAction, HINT32 p1, HINT32 p2, HINT32 p3)
*   \brief  system status procedure
*
*   @param[in]  gwm msg/action handler
*   @return     BUS_ProcessMessageDefault(message, hAction, p1, p2, p3)
*   @ingroup    SYSTEM STATUS
*/
/******************************************************************************/
BUS_Result_t xproc_cas_NaPackagePurchaseEvtDisc_Mediaset(HINT32 message, Handle_t hAction, HINT32 p1, HINT32 p2, HINT32 p3)
{
//	HUINT32							ulActionId;
	XmgrCas_NaPackPurc_Mediaset_t			*pContents = xmgr_cas_NaPpvPackpurcGetLocalContents_Mediaset();
	HUINT32							nResult = ERR_FAIL;

	switch(message)
	{
		case MSG_GWM_CREATE:
			/* set app area */
			GWM_APP_SetAppArea(NAPPV_MEDIASET_PACKPURC_WINDOW_X, NAPPV_MEDIASET_PACKPURC_WINDOW_Y,
								NAPPV_MEDIASET_PACKPURC_WINDOW_WIDTH, NAPPV_MEDIASET_PACKPURC_WINDOW_HEIGHT);

			/* set ui objects */
			xmgr_cas_NaPpvPackpurcEvtDiscSetUiObjects_Mediaset(pContents);

			// set front panel
			//AP_SPEC_DisplayMenuPanelString(pContents->ucTitle, eDxPANEL_ALIGN_CENTER);
			break;

		case MSG_APP_UPDATE_SMARTCARD_INFO:
			if(p1 == eDxCAS_GROUPID_NA)
			{
				XmgrCas_NaAlamType_e	eAlarmType;

				xmgr_cas_NaGetSmartCardStatus(&eAlarmType);
				HxLOG_Print("MSG_APP_UPDATE_SMARTCARD_INFO... eAlarmType = %d\n", eAlarmType);
				if (eAlarmType != eCAS_NA_CA_SMARTCARD_OK && eAlarmType != eCAS_NA_CA_SMARTCARD_EXPIRED)
				{
					BUS_MGR_Destroy(NULL);
					BUS_MGR_Destroy(xproc_cas_NaPackagePurchase_Mediaset);

					/* to upper depth */
					BUS_MGR_Create("xmgr_cas_NaMSET_MenuSmartCardError_Proc", (APP_DEFAULT_PRIORITY | UISTATE_MENU), (GWM_Callback_t)xmgr_cas_NaMSET_MenuSmartCardError_Proc, 0, eAlarmType, 0, 0);

					return MESSAGE_PASS;
				}
				else
				{
					// Card Á¤»ó »ðÀÔ »óÅÂÀÎµ¥.. ÀÌÂÊÀ¸·Î ¿Ö ¿Ã±î?
				}
			}
			break;

		case eMEVT_XMGR_CAS_NA_NOTIFY_SMARTCARD_CREDIT:
			HxLOG_Print("eMEVT_XMGR_CAS_NA_NOTIFY_SMARTCARD_CREDIT...\n");
			if(p1 == eDxCAS_GROUPID_NA)
			{
				xmgr_cas_NaPpvPackpurcUpdateRemainedCredit_Mediaset(pContents, (TCreditAmount)p3);
			}
			break;

		case MSG_GWM_OBJ_FOCUS_CHANGED:
			return MESSAGE_BREAK;

		case MSG_GWM_CLICKED :
			break;

		case MSG_GWM_KEYUP :
			AP_KeyConv_UiCommon(&p1);
			break;

		case MSG_GWM_KEYDOWN :
			AP_KeyConv_UiCommon(&p1);

			nResult = Settings_CheckKeyPass(p1, BUS_MGR_GetMgrCallback(BUS_MGR_GetThis()));
			if(nResult != ERR_OK)
			{
				return nResult;
			}

			switch(p1)
			{
				case KEY_EXIT:
				case KEY_MENU:
					Settings_ClearWindowTitle();

					BUS_MGR_Destroy(NULL);
					BUS_MGR_Destroy(xproc_cas_NaPackagePurchase_Mediaset);
					return MESSAGE_BREAK;

				case KEY_BACK:
					/* »óÀ§ ¸Þ´º·Î ¿Ã¶ó°¥ ¶§ focus¸¦ ±â¾ïÇÏÁö ¾Ê´Â °ÍÀÌ ÆíÇÒ ¼öµµ ÀÖ´Ù. */
					//Settings_InitFocus(pstContents);

					BUS_MGR_Destroy(NULL);

					/* to upper depth */
					BUS_MGR_Create("xproc_cas_NaPackagePurchaseEvtDesc_Mediaset", (APP_DEFAULT_PRIORITY | UISTATE_MENU), (GWM_Callback_t)xproc_cas_NaPackagePurchaseEvtDesc_Mediaset, 0, 0, 0, 0);
					return MESSAGE_BREAK;

				case KEY_ARROWUP:
				case KEY_PAGEUP:
				case KEY_ARROWDOWN:
				case KEY_PAGEDOWN:
					xmgr_cas_NaPpvPackpurcEvtDiscProcessArrowUpDownClicked_Mediaset(pContents, p1);
					return MESSAGE_BREAK;

				case KEY_OK:
					BUS_MGR_Destroy(NULL);

					xmgr_cas_NaPpvPackpurcEvtDiscProcessOKClicked_Mediaset(pContents, p1);
					return MESSAGE_BREAK;

				case KEY_ARROWLEFT:
				case KEY_ARROWRIGHT:
					return MESSAGE_BREAK;

				case KEY_GREEN:
					return MESSAGE_BREAK;
			}
			break;

		case MSG_GWM_SCROLLUP:
			return MESSAGE_BREAK;

		case MSG_GWM_SCROLLDOWN:
			return MESSAGE_BREAK;

		case MSG_GWM_TIMER:
			return MESSAGE_BREAK;

		case MSG_GWM_DESTROY:
			/* destroy UI */
//			xmgr_cas_NaPpvPackpurcDestroyUI_Mediaset(pContents);

			/* clear front PANEL */
//			AP_SPEC_ClearMenuPanelString();
			break;

		default:
			break;
	}

	HxLOG_Info("xproc_cas_NaPackagePurchaseEvtDisc_Mediaset handle(0x%x)\n", hAction);

	return BUS_ProcessMessageDefault(message, hAction, p1, p2, p3);
}

/******************************************************************************/
/**
*   \fn     xproc_cas_NaPackagePurchaseEvtInfo_Mediaset(HINT32 message, Handle_t hAction, HINT32 p1, HINT32 p2, HINT32 p3)
*   \brief  system status procedure
*
*   @param[in]  gwm msg/action handler
*   @return     BUS_ProcessMessageDefault(message, hAction, p1, p2, p3)
*   @ingroup    SYSTEM STATUS
*/
/******************************************************************************/
BUS_Result_t xproc_cas_NaPackagePurchaseEvtInfo_Mediaset(HINT32 message, Handle_t hAction, HINT32 p1, HINT32 p2, HINT32 p3)
{
//	HUINT32							ulActionId;
	XmgrCas_NaPackPurc_Mediaset_t			*pContents = xmgr_cas_NaPpvPackpurcGetLocalContents_Mediaset();
	HUINT32							nResult = ERR_FAIL;

	switch(message)
	{
		case MSG_GWM_CREATE:
			/* set app area */
			GWM_APP_SetAppArea(NAPPV_MEDIASET_PACKPURC_WINDOW_X, NAPPV_MEDIASET_PACKPURC_WINDOW_Y,
								NAPPV_MEDIASET_PACKPURC_WINDOW_WIDTH, NAPPV_MEDIASET_PACKPURC_WINDOW_HEIGHT);

			/* set ui objects */
			xmgr_cas_NaPpvPackpurcEvtInfoSetUiObjects_Mediaset(pContents);

			// set front panel
			//AP_SPEC_DisplayMenuPanelString(pContents->ucTitle, eDxPANEL_ALIGN_CENTER);
			break;

		case MSG_APP_UPDATE_SMARTCARD_INFO:
			if(p1 == eDxCAS_GROUPID_NA)
			{
				XmgrCas_NaAlamType_e	eAlarmType;

				xmgr_cas_NaGetSmartCardStatus(&eAlarmType);
				HxLOG_Print("MSG_APP_UPDATE_SMARTCARD_INFO... eAlarmType = %d\n", eAlarmType);
				if (eAlarmType != eCAS_NA_CA_SMARTCARD_OK && eAlarmType != eCAS_NA_CA_SMARTCARD_EXPIRED)
				{
					BUS_MGR_Destroy(NULL);
					BUS_MGR_Destroy(xproc_cas_NaPackagePurchase_Mediaset);

					/* to upper depth */
					BUS_MGR_Create("xmgr_cas_NaMSET_MenuSmartCardError_Proc", (APP_DEFAULT_PRIORITY | UISTATE_MENU), (GWM_Callback_t)xmgr_cas_NaMSET_MenuSmartCardError_Proc, 0, eAlarmType, 0, 0);

					return MESSAGE_PASS;
				}
				else
				{
					// Card Á¤»ó »ðÀÔ »óÅÂÀÎµ¥.. ÀÌÂÊÀ¸·Î ¿Ö ¿Ã±î?
				}
			}
			break;

		case eMEVT_XMGR_CAS_NA_NOTIFY_SMARTCARD_CREDIT:
			HxLOG_Print("eMEVT_XMGR_CAS_NA_NOTIFY_SMARTCARD_CREDIT...\n");
			if(p1 == eDxCAS_GROUPID_NA)
			{
				xmgr_cas_NaPpvPackpurcUpdateRemainedCredit_Mediaset(pContents, (TCreditAmount)p3);
			}
			break;

		case MSG_GWM_OBJ_FOCUS_CHANGED:
			return MESSAGE_BREAK;

		case MSG_GWM_CLICKED :
			break;

		case MSG_GWM_KEYUP :
			AP_KeyConv_UiCommon(&p1);
			break;

		case MSG_GWM_KEYDOWN :
			AP_KeyConv_UiCommon(&p1);

			nResult = Settings_CheckKeyPass(p1, BUS_MGR_GetAppCallback(BUS_MGR_GetThis()));
			if(nResult != ERR_OK)
			{
				return nResult;
			}

			switch(p1)
			{
				case KEY_EXIT:
				case KEY_MENU:
					Settings_ClearWindowTitle();

					BUS_MGR_Destroy(NULL);
					BUS_MGR_Destroy(xproc_cas_NaPackagePurchase_Mediaset);
					return MESSAGE_BREAK;

				case KEY_BACK:
					/* »óÀ§ ¸Þ´º·Î ¿Ã¶ó°¥ ¶§ focus¸¦ ±â¾ïÇÏÁö ¾Ê´Â °ÍÀÌ ÆíÇÒ ¼öµµ ÀÖ´Ù. */
					//Settings_InitFocus(pstContents);

					BUS_MGR_Destroy(NULL);

					/* to upper depth */
					BUS_MGR_Create("xproc_cas_NaPackagePurchaseEvtDesc_Mediaset", (APP_DEFAULT_PRIORITY | UISTATE_MENU), (GWM_Callback_t)xproc_cas_NaPackagePurchaseEvtDesc_Mediaset, 0, 0, 0, 0);
					return MESSAGE_BREAK;

				case KEY_ARROWUP:
				case KEY_ARROWDOWN:
				case KEY_PAGEUP:
				case KEY_PAGEDOWN:
					xmgr_cas_NaPpvPackpurcEvtInfoScrollPage_Mediaset(pContents, p1);
					return MESSAGE_BREAK;

				case KEY_OK:
					BUS_MGR_Destroy(NULL);

					/* to upper depth */
					BUS_MGR_Create("xproc_cas_NaPackagePurchaseEvtDisc_Mediaset", (APP_DEFAULT_PRIORITY | UISTATE_MENU), (GWM_Callback_t)xproc_cas_NaPackagePurchaseEvtDisc_Mediaset, 0, 0, 0, 0);
					return MESSAGE_BREAK;

				case KEY_ARROWLEFT:
				case KEY_ARROWRIGHT:
					return MESSAGE_BREAK;
			}
			break;

		case MSG_GWM_SCROLLUP:
			return MESSAGE_BREAK;

		case MSG_GWM_SCROLLDOWN:
			return MESSAGE_BREAK;

		case MSG_GWM_TIMER:
			return MESSAGE_BREAK;

		case MSG_GWM_DESTROY:
			/* destroy UI */
			xmgr_cas_NaPpvPackpurcEvtInfoDestroyUI_Mediaset(pContents);

			/* clear front PANEL */
//			AP_SPEC_ClearMenuPanelString();
			break;

		default:
			break;
	}

	HxLOG_Info("xproc_cas_NaPackagePurchaseEvtInfo_Mediaset handle(0x%x)\n", hAction);

	return BUS_ProcessMessageDefault(message, hAction, p1, p2, p3);
}

/******************************************************************************/
/**
*   \fn     xproc_cas_NaPackagePurchaseEvtConfirm_Mediaset(HINT32 message, Handle_t hAction, HINT32 p1, HINT32 p2, HINT32 p3)
*   \brief  system status procedure
*
*   @param[in]  gwm msg/action handler
*   @return     BUS_ProcessMessageDefault(message, hAction, p1, p2, p3)
*   @ingroup    SYSTEM STATUS
*/
/******************************************************************************/
BUS_Result_t xproc_cas_NaPackagePurchaseEvtConfirm_Mediaset(HINT32 message, Handle_t hAction, HINT32 p1, HINT32 p2, HINT32 p3)
{
	XmgrCas_NaPackPurc_Mediaset_t			*pContents = xmgr_cas_NaPpvPackpurcGetLocalContents_Mediaset();
	HUINT32							nResult = ERR_FAIL;

	switch(message)
	{
		case MSG_GWM_CREATE:
			/* set app area */
			GWM_APP_SetAppArea(NAPPV_MEDIASET_PACKPURC_WINDOW_X, NAPPV_MEDIASET_PACKPURC_WINDOW_Y,
								NAPPV_MEDIASET_PACKPURC_WINDOW_WIDTH, NAPPV_MEDIASET_PACKPURC_WINDOW_HEIGHT);

			/* set ui objects */
			xmgr_cas_NaPpvPackpurcEvtConfirmSetUiObjects_Mediaset(pContents);

			// set front panel
			//AP_SPEC_DisplayMenuPanelString(pContents->ucTitle, eDxPANEL_ALIGN_CENTER);
			break;

		case MSG_APP_UPDATE_SMARTCARD_INFO:
			if(p1 == eDxCAS_GROUPID_NA)
			{
				XmgrCas_NaAlamType_e	eAlarmType;

				xmgr_cas_NaGetSmartCardStatus(&eAlarmType);
				HxLOG_Print("MSG_APP_UPDATE_SMARTCARD_INFO... eAlarmType = %d\n", eAlarmType);
				if (eAlarmType != eCAS_NA_CA_SMARTCARD_OK && eAlarmType != eCAS_NA_CA_SMARTCARD_EXPIRED)
				{
					BUS_MGR_Destroy(NULL);
					BUS_MGR_Destroy(xproc_cas_NaPackagePurchase_Mediaset);

					/* to upper depth */
					BUS_MGR_Create("xmgr_cas_NaMSET_MenuSmartCardError_Proc", (APP_DEFAULT_PRIORITY | UISTATE_MENU), (GWM_Callback_t)xmgr_cas_NaMSET_MenuSmartCardError_Proc, 0, eAlarmType, 0, 0);

					return MESSAGE_PASS;
				}
				else
				{
					// Card Á¤»ó »ðÀÔ »óÅÂÀÎµ¥.. ÀÌÂÊÀ¸·Î ¿Ö ¿Ã±î?
				}
			}
			break;

		case eMEVT_XMGR_CAS_NA_NOTIFY_SMARTCARD_CREDIT:
			HxLOG_Print("eMEVT_XMGR_CAS_NA_NOTIFY_SMARTCARD_CREDIT...\n");
			if(p1 == eDxCAS_GROUPID_NA)
			{
				xmgr_cas_NaPpvPackpurcUpdateRemainedCredit_Mediaset(pContents, (TCreditAmount)p3);
			}
			break;

		case eMEVT_XMGR_CAS_NA_NOTIFY_PPV_PURCHASE_PACKAGE_RESULT:
			HxLOG_Print("eMEVT_XMGR_CAS_NA_NOTIFY_PPV_PURCHASE_PACKAGE_RESULT...\n");
			if(p1 == eDxCAS_GROUPID_NA)
			{
				xmgr_cas_NaPpvPackpurcEvtConfirmResponsePurchaseResult_Mediaset(pContents, (HINT32)hAction);
			}
			return MESSAGE_BREAK;

		case MSG_GWM_OBJ_FOCUS_CHANGED:
			return MESSAGE_BREAK;

		case MSG_GWM_CLICKED :
			break;

		case MSG_GWM_KEYUP :
			AP_KeyConv_UiCommon(&p1);
			break;

		case MSG_GWM_KEYDOWN :
			AP_KeyConv_UiCommon(&p1);

			nResult = Settings_CheckKeyPass(p1, BUS_MGR_GetAppCallback(BUS_MGR_GetThis()));
			if(nResult != ERR_OK)
			{
				return nResult;
			}

			switch(p1)
			{
				case KEY_EXIT:
				case KEY_MENU:
					Settings_ClearWindowTitle();

					BUS_MGR_Destroy(NULL);
					BUS_MGR_Destroy(xproc_cas_NaPackagePurchase_Mediaset);
					return MESSAGE_BREAK;

				case KEY_BACK:
					/* »óÀ§ ¸Þ´º·Î ¿Ã¶ó°¥ ¶§ focus¸¦ ±â¾ïÇÏÁö ¾Ê´Â °ÍÀÌ ÆíÇÒ ¼öµµ ÀÖ´Ù. */
					//Settings_InitFocus(pstContents);

					BUS_MGR_Destroy(NULL);

					/* to upper depth */
					BUS_MGR_Create("xproc_cas_NaPackagePurchaseEvtDisc_Mediaset", (APP_DEFAULT_PRIORITY | UISTATE_MENU), (GWM_Callback_t)xproc_cas_NaPackagePurchaseEvtDisc_Mediaset, 0, 0, 0, 0);
					return MESSAGE_BREAK;

				case KEY_ARROWUP:
				case KEY_PAGEUP:
				case KEY_ARROWDOWN:
				case KEY_PAGEDOWN:
					return MESSAGE_BREAK;

				case KEY_OK:
					//BUS_MGR_Destroy(NULL);

					xmgr_cas_NaPpvPackpurcEvtConfirmProcessOKClicked_Mediaset(pContents, p1);
					return MESSAGE_BREAK;

				case KEY_ARROWLEFT:
				case KEY_ARROWRIGHT:
					return MESSAGE_BREAK;

				case KEY_GREEN:
					return MESSAGE_BREAK;
			}
			break;

		case MSG_GWM_SCROLLUP:
			return MESSAGE_BREAK;

		case MSG_GWM_SCROLLDOWN:
			return MESSAGE_BREAK;

		case MSG_GWM_TIMER:
			return MESSAGE_BREAK;

		case MSG_GWM_DESTROY:
			/* destroy UI */
//			xmgr_cas_NaPpvPackpurcDestroyUI_Mediaset(pContents);

			/* clear front PANEL */
//			AP_SPEC_ClearMenuPanelString();
			break;

		default:
			break;
	}

	HxLOG_Info("xproc_cas_NaPackagePurchaseEvtConfirm_Mediaset handle(0x%x)\n", hAction);

	return BUS_ProcessMessageDefault(message, hAction, p1, p2, p3);
}

/******************************************************************************/
/**
*   \fn     xproc_cas_NaPackagePurchaseEvtConfirmEnd_Mediaset(HINT32 message, Handle_t hAction, HINT32 p1, HINT32 p2, HINT32 p3)
*   \brief  system status procedure
*
*   @param[in]  gwm msg/action handler
*   @return     BUS_ProcessMessageDefault(message, hAction, p1, p2, p3)
*   @ingroup    SYSTEM STATUS
*/
/******************************************************************************/
BUS_Result_t xproc_cas_NaPackagePurchaseEvtConfirmEnd_Mediaset(HINT32 message, Handle_t hAction, HINT32 p1, HINT32 p2, HINT32 p3)
{
	XmgrCas_NaPackPurc_Mediaset_t			*pContents = xmgr_cas_NaPpvPackpurcGetLocalContents_Mediaset();
	HUINT32							nResult = ERR_FAIL;

	switch(message)
	{
		case MSG_GWM_CREATE:
			/* set app area */
			GWM_APP_SetAppArea(NAPPV_MEDIASET_PACKPURC_WINDOW_X, NAPPV_MEDIASET_PACKPURC_WINDOW_Y,
								NAPPV_MEDIASET_PACKPURC_WINDOW_WIDTH, NAPPV_MEDIASET_PACKPURC_WINDOW_HEIGHT);

			if (p1 == eNA_PPV_PURCHASE_RESULT_TYPE_SUCCESS)
			{
				pContents->bPurchaseSuccess = TRUE;
			}
			else
			{
				pContents->bPurchaseSuccess = FALSE;
			}
			HxLOG_Print("MSG_GWM_CREATE - p1 = %d, pContents->bPurchaseSuccess = %d\n", p1, pContents->bPurchaseSuccess);


			/* set ui objects */
			xmgr_cas_NaPpvPackpurcEvtConfirmEndSetUiObjects_Mediaset(pContents);

			// set front panel
			//AP_SPEC_DisplayMenuPanelString(pContents->ucTitle, eDxPANEL_ALIGN_CENTER);
			break;

		case MSG_APP_UPDATE_SMARTCARD_INFO:
			if(p1 == eDxCAS_GROUPID_NA)
			{
				XmgrCas_NaAlamType_e	eAlarmType;

				xmgr_cas_NaGetSmartCardStatus(&eAlarmType);
				HxLOG_Print("MSG_APP_UPDATE_SMARTCARD_INFO... eAlarmType = %d\n", eAlarmType);
				if (eAlarmType != eCAS_NA_CA_SMARTCARD_OK && eAlarmType != eCAS_NA_CA_SMARTCARD_EXPIRED)
				{
					BUS_MGR_Destroy(NULL);
					BUS_MGR_Destroy(xproc_cas_NaPackagePurchase_Mediaset);

					/* to upper depth */
					BUS_MGR_Create("xmgr_cas_NaMSET_MenuSmartCardError_Proc", (APP_DEFAULT_PRIORITY | UISTATE_MENU), (GWM_Callback_t)xmgr_cas_NaMSET_MenuSmartCardError_Proc, 0, eAlarmType, 0, 0);

					return MESSAGE_PASS;
				}
				else
				{
					// Card Á¤»ó »ðÀÔ »óÅÂÀÎµ¥.. ÀÌÂÊÀ¸·Î ¿Ö ¿Ã±î?
				}
			}
			break;

		case eMEVT_XMGR_CAS_NA_NOTIFY_SMARTCARD_CREDIT:
			HxLOG_Print("eMEVT_XMGR_CAS_NA_NOTIFY_SMARTCARD_CREDIT...\n");
			if(p1 == eDxCAS_GROUPID_NA)
			{
				xmgr_cas_NaPpvPackpurcUpdateRemainedCredit_Mediaset(pContents, (TCreditAmount)p3);
			}
			break;

		case MSG_GWM_OBJ_FOCUS_CHANGED:
			return MESSAGE_BREAK;

		case MSG_GWM_CLICKED :
			break;

		case MSG_GWM_KEYUP :
			AP_KeyConv_UiCommon(&p1);
			break;

		case MSG_GWM_KEYDOWN :
			AP_KeyConv_UiCommon(&p1);

			nResult = Settings_CheckKeyPass(p1, BUS_MGR_GetAppCallback(BUS_MGR_GetThis()));
			if(nResult != ERR_OK)
			{
				return nResult;
			}

			switch(p1)
			{
				case KEY_EXIT:
				case KEY_MENU:
					Settings_ClearWindowTitle();

					BUS_MGR_Destroy(NULL);
					BUS_MGR_Destroy(xproc_cas_NaPackagePurchase_Mediaset);
					return MESSAGE_BREAK;

				case KEY_BACK:
					/* »óÀ§ ¸Þ´º·Î ¿Ã¶ó°¥ ¶§ focus¸¦ ±â¾ïÇÏÁö ¾Ê´Â °ÍÀÌ ÆíÇÒ ¼öµµ ÀÖ´Ù. */
					//Settings_InitFocus(pstContents);

					BUS_MGR_Destroy(NULL);
					BUS_MGR_Destroy(xproc_cas_NaPackagePurchase_Mediaset);

					/* to upper depth */
					BUS_MGR_Create("xproc_cas_NaPpvMenu_Mediaset", (APP_DEFAULT_PRIORITY | UISTATE_MENU), (GWM_Callback_t)xproc_cas_NaPpvMenu_Mediaset, 0, 0, 0, 0);
					return MESSAGE_BREAK;

				case KEY_ARROWUP:
				case KEY_PAGEUP:
				case KEY_ARROWDOWN:
				case KEY_PAGEDOWN:
					return MESSAGE_BREAK;

				case KEY_OK:
					return MESSAGE_BREAK;

				case KEY_ARROWLEFT:
				case KEY_ARROWRIGHT:
					return MESSAGE_BREAK;

				case KEY_GREEN:
					return MESSAGE_BREAK;
			}
			break;

		case MSG_GWM_SCROLLUP:
			return MESSAGE_BREAK;

		case MSG_GWM_SCROLLDOWN:
			return MESSAGE_BREAK;

		case MSG_GWM_TIMER:
			return MESSAGE_BREAK;

		case MSG_GWM_DESTROY:
			/* destroy UI */
//			xmgr_cas_NaPpvPackpurcDestroyUI_Mediaset(pContents);

			/* clear front PANEL */
//			AP_SPEC_ClearMenuPanelString();
			break;

		default:
			break;
	}

	HxLOG_Info("xproc_cas_NaPackagePurchaseEvtConfirmEnd_Mediaset handle(0x%x)\n", hAction);

	return BUS_ProcessMessageDefault(message, hAction, p1, p2, p3);
}
#endif	//end of #if defined(CONFIG_MW_CAS_NAGRA_OP_MEDIASET)
/* End of File */
