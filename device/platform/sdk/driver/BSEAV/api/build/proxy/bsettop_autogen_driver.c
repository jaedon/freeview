/*********************************
*
* This file is autogenerated. Do not modify.
*
*********************************/
case BSETTOP_IOCTL_bdisplay_open:
  {{
  ioctl_settopapi_struct_bdisplay_open st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bdisplay_open(st.display_id);
  bhandle_mgr_add(file->private_data, st.__retval, (settopapi_close_func)bdisplay_close, "bdisplay_close");
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bdisplay_close:
  {{
  ioctl_settopapi_struct_bdisplay_close st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bdisplay_close(st.display);
  bhandle_mgr_remove(file->private_data, st.display, "bdisplay_close");
  rc = 0;

  }
  }}
  break;

case BSETTOP_IOCTL_boutput_rf_set:
  {{
  ioctl_settopapi_struct_boutput_rf_set st;
  boutput_rf_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.settings) {
  rc = copy_from_user((void*)&settings, st.settings, sizeof(settings));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = boutput_rf_set(st.rf,st.settings ? &settings:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_boutput_rf_get:
  {{
  ioctl_settopapi_struct_boutput_rf_get st;
  boutput_rf_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  boutput_rf_get(st.rf,st.settings ? &settings:NULL);
  rc = 0;

  if (st.settings) {
    rc = copy_to_user(st.settings, &settings, sizeof(settings));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_boutput_hdmi_set:
  {{
  ioctl_settopapi_struct_boutput_hdmi_set st;
  boutput_hdmi_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.settings) {
  rc = copy_from_user((void*)&settings, st.settings, sizeof(settings));
  if (rc) break;
  }
  if ( settings.hdmi_hotplug_callback ) { settings.hdmi_hotplug_callback = b_proxy_create_callback(ioctl_settopapi_boutput_dvi_settings_hdmi_hotplug_callback, st.dvi, settings.callback_context); }
  if ( settings.hdmi_disconnect_callback ) { settings.hdmi_disconnect_callback = b_proxy_create_callback(ioctl_settopapi_boutput_dvi_settings_hdmi_disconnect_callback, st.dvi, settings.callback_context); }
  if ( settings.hdmi_hdcp_status_callback ) { settings.hdmi_hdcp_status_callback = b_proxy_create_callback(ioctl_settopapi_boutput_dvi_settings_hdmi_hdcp_status_callback, st.dvi, settings.callback_context); }

  /* Make the function call */
  st.__retval = boutput_hdmi_set(st.dvi,st.settings ? &settings:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_boutput_hdmi_get:
  {{
  ioctl_settopapi_struct_boutput_hdmi_get st;
  boutput_hdmi_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  boutput_hdmi_get(st.dvi,st.settings ? &settings:NULL);
  rc = 0;

  if (st.settings) {
    rc = copy_to_user(st.settings, &settings, sizeof(settings));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_boutput_hdmi_get_capabilities:
  {{
  ioctl_settopapi_struct_boutput_hdmi_get_capabilities st;
  boutput_hdmi_capabilities caps;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = boutput_hdmi_get_capabilities(st.dvi,st.caps ? &caps:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.caps) {
    rc = copy_to_user(st.caps, &caps, sizeof(caps));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_boutput_hdmi_get_status:
  {{
  ioctl_settopapi_struct_boutput_hdmi_get_status st;
  boutput_hdmi_status status;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = boutput_hdmi_get_status(st.dvi,st.status ? &status:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.status) {
    rc = copy_to_user(st.status, &status, sizeof(status));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_boutput_hdmi_cec_get_message:
  {{
  ioctl_settopapi_struct_boutput_hdmi_cec_get_message st;
  boutput_hdmi_cec_message_data cec_message_data;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = boutput_hdmi_cec_get_message(st.dvi,st.cec_message_data ? &cec_message_data:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.cec_message_data) {
    rc = copy_to_user(st.cec_message_data, &cec_message_data, sizeof(cec_message_data));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_boutput_hdmi_cec_send_message:
  {{
  ioctl_settopapi_struct_boutput_hdmi_cec_send_message st;
  boutput_hdmi_cec_message_data cec_message_data;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.cec_message_data) {
  rc = copy_from_user((void*)&cec_message_data, st.cec_message_data, sizeof(cec_message_data));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = boutput_hdmi_cec_send_message(st.dvi,st.cec_message_data ? &cec_message_data:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_boutput_hdmi_cec_get_configuration:
  {{
  ioctl_settopapi_struct_boutput_hdmi_cec_get_configuration st;
  boutput_hdmi_cec_configuration cec_configuration;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = boutput_hdmi_cec_get_configuration(st.dvi,st.cec_configuration ? &cec_configuration:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.cec_configuration) {
    rc = copy_to_user(st.cec_configuration, &cec_configuration, sizeof(cec_configuration));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_boutput_hdmi_cec_is_device_ready:
  {{
  ioctl_settopapi_struct_boutput_hdmi_cec_is_device_ready st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = boutput_hdmi_cec_is_device_ready(st.dvi);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_boutput_hdmi_cec_enable_receive:
  {{
  ioctl_settopapi_struct_boutput_hdmi_cec_enable_receive st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = boutput_hdmi_cec_enable_receive(st.dvi);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_boutput_component_set:
  {{
  ioctl_settopapi_struct_boutput_component_set st;
  boutput_component_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.settings) {
  rc = copy_from_user((void*)&settings, st.settings, sizeof(settings));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = boutput_component_set(st.component,st.settings ? &settings:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_boutput_component_get:
  {{
  ioctl_settopapi_struct_boutput_component_get st;
  boutput_component_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  boutput_component_get(st.component,st.settings ? &settings:NULL);
  rc = 0;

  if (st.settings) {
    rc = copy_to_user(st.settings, &settings, sizeof(settings));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_boutput_spdif_set:
  {{
  ioctl_settopapi_struct_boutput_spdif_set st;
  boutput_spdif_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.settings) {
  rc = copy_from_user((void*)&settings, st.settings, sizeof(settings));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = boutput_spdif_set(st.spdif,st.settings ? &settings:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_boutput_spdif_get:
  {{
  ioctl_settopapi_struct_boutput_spdif_get st;
  boutput_spdif_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  boutput_spdif_get(st.spdif,st.settings ? &settings:NULL);
  rc = 0;

  if (st.settings) {
    rc = copy_to_user(st.settings, &settings, sizeof(settings));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_boutput_spdif_open:
  {{
  ioctl_settopapi_struct_boutput_spdif_open st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = boutput_spdif_open(st.spdif_id);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_boutput_rf_open:
  {{
  ioctl_settopapi_struct_boutput_rf_open st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = boutput_rf_open(st.rfmod_id);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_boutput_composite_open:
  {{
  ioctl_settopapi_struct_boutput_composite_open st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = boutput_composite_open(st.composite_id);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_boutput_svideo_open:
  {{
  ioctl_settopapi_struct_boutput_svideo_open st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = boutput_svideo_open(st.svideo_id);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_boutput_hdmi_open:
  {{
  ioctl_settopapi_struct_boutput_hdmi_open st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = boutput_hdmi_open(st.dvi_id);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_boutput_component_open:
  {{
  ioctl_settopapi_struct_boutput_component_open st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = boutput_component_open(st.component_id);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bdisplay_get_video_format_settings:
  {{
  ioctl_settopapi_struct_bdisplay_get_video_format_settings st;
  bdisplay_settings settings;
  bvideo_format_settings format_settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.settings) {
  rc = copy_from_user((void*)&settings, st.settings, sizeof(settings));
  if (rc) break;
  }

  /* Make the function call */
  bdisplay_get_video_format_settings(st.settings ? &settings:NULL,st.format_settings ? &format_settings:NULL);
  rc = 0;

  if (st.format_settings) {
    rc = copy_to_user(st.format_settings, &format_settings, sizeof(format_settings));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bvideo_get_format_settings:
  {{
  ioctl_settopapi_struct_bvideo_get_format_settings st;
  bvideo_format_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bvideo_get_format_settings(st.format,st.settings ? &settings:NULL);
  rc = 0;

  if (st.settings) {
    rc = copy_to_user(st.settings, &settings, sizeof(settings));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bdisplay_set:
  {{
  ioctl_settopapi_struct_bdisplay_set st;
  bdisplay_settings settings;
  bmacrovision_tables mv_tables;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.settings) {
  rc = copy_from_user((void*)&settings, st.settings, sizeof(settings));
  if (rc) break;
  }
  if (st.settings && settings.macrovision_tables) {
    rc = copy_from_user(&mv_tables, (void*)settings.macrovision_tables, sizeof(mv_tables));
    if (rc) break;
    settings.macrovision_tables = &mv_tables;
  }

  /* Make the function call */
  st.__retval = bdisplay_set(st.display,st.settings ? &settings:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bdisplay_get:
  {{
  ioctl_settopapi_struct_bdisplay_get st;
  bdisplay_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bdisplay_get(st.display,st.settings ? &settings:NULL);
  rc = 0;

  if (st.settings) {
    rc = copy_to_user(st.settings, &settings, sizeof(settings));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_window_open:
  {{
  ioctl_settopapi_struct_bdecode_window_open st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bdecode_window_open(st.window_id,st.display);
  bhandle_mgr_add(file->private_data, st.__retval, (settopapi_close_func)bdecode_window_close, "bdecode_window_close");
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_window_open_mosaic:
  {{
  ioctl_settopapi_struct_bdecode_window_open_mosaic st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bdecode_window_open_mosaic(st.parent_window,st.mosaic_id);
  bhandle_mgr_add(file->private_data, st.__retval, (settopapi_close_func)bdecode_window_close, "bdecode_window_close");
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_window_close:
  {{
  ioctl_settopapi_struct_bdecode_window_close st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bdecode_window_close(st.window);
  bhandle_mgr_remove(file->private_data, st.window, "bdecode_window_close");
  rc = 0;

  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_window_clone:
  {{
  ioctl_settopapi_struct_bdecode_window_clone st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bdecode_window_clone(st.window,st.clone_window_id,st.display);
  bhandle_mgr_add(file->private_data, st.__retval, (settopapi_close_func)bdecode_window_close, "bdecode_window_close");
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bdisplay_set_dac_audio_volume:
  {{
  ioctl_settopapi_struct_bdisplay_set_dac_audio_volume st;
  baudio_volume volume;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.volume) {
  rc = copy_from_user((void*)&volume, st.volume, sizeof(volume));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = bdisplay_set_dac_audio_volume(st.display,st.volume ? &volume:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bdisplay_get_dac_audio_volume:
  {{
  ioctl_settopapi_struct_bdisplay_get_dac_audio_volume st;
  baudio_volume volume;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bdisplay_get_dac_audio_volume(st.display,st.volume ? &volume:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.volume) {
    rc = copy_to_user(st.volume, &volume, sizeof(volume));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_boutput_rf_set_audio_volume:
  {{
  ioctl_settopapi_struct_boutput_rf_set_audio_volume st;
  baudio_volume volume;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.volume) {
  rc = copy_from_user((void*)&volume, st.volume, sizeof(volume));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = boutput_rf_set_audio_volume(st.rf,st.volume ? &volume:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_boutput_spdif_set_audio_volume:
  {{
  ioctl_settopapi_struct_boutput_spdif_set_audio_volume st;
  baudio_volume volume;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.volume) {
  rc = copy_from_user((void*)&volume, st.volume, sizeof(volume));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = boutput_spdif_set_audio_volume(st.spdif,st.volume ? &volume:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_boutput_spdif_get_audio_volume:
  {{
  ioctl_settopapi_struct_boutput_spdif_get_audio_volume st;
  baudio_volume volume;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = boutput_spdif_get_audio_volume(st.spdif,st.volume ? &volume:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.volume) {
    rc = copy_to_user(st.volume, &volume, sizeof(volume));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_boutput_rf_get_audio_volume:
  {{
  ioctl_settopapi_struct_boutput_rf_get_audio_volume st;
  baudio_volume volume;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = boutput_rf_get_audio_volume(st.rf,st.volume ? &volume:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.volume) {
    rc = copy_to_user(st.volume, &volume, sizeof(volume));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_window_get:
  {{
  ioctl_settopapi_struct_bdecode_window_get st;
  bdecode_window_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bdecode_window_get(st.window,st.settings ? &settings:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.settings) {
    rc = copy_to_user(st.settings, &settings, sizeof(settings));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_window_set:
  {{
  ioctl_settopapi_struct_bdecode_window_set st;
  bdecode_window_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.settings) {
  rc = copy_from_user((void*)&settings, st.settings, sizeof(settings));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = bdecode_window_set(st.window,st.settings ? &settings:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bmessage_open:
  {{
  ioctl_settopapi_struct_bmessage_open st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bmessage_open(st.format);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bmessage_stream_params_init:
  {{
  ioctl_settopapi_struct_bmessage_stream_params_init st;
  bmessage_stream_params params;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bmessage_stream_params_init(st.params ? &params:NULL,st.stream);
  rc = 0;

  if (st.params) {
    rc = copy_to_user(st.params, &params, sizeof(params));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bmessage_start:
  {{
  ioctl_settopapi_struct_bmessage_start st;
  bmessage_stream_params params;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.params) {
  rc = copy_from_user((void*)&params, st.params, sizeof(params));
  if (rc) break;
  }
  if ( params.data_ready_callback ) { params.data_ready_callback = b_proxy_create_callback(ioctl_settopapi_bmessage_data_ready_callback, st.message_stream, params.callback_context); }
  if ( params.overflow ) { params.overflow = b_proxy_create_callback(ioctl_settopapi_bmessage_overflow_callback, st.message_stream, params.callback_context); }

  /* Make the function call */
  st.__retval = bmessage_start(st.message_stream,st.params ? &params:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bmessage_get_buffer:
  {{
  ioctl_settopapi_struct_bmessage_get_buffer st;
  const void * p_bfr;
  size_t length;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bmessage_get_buffer(st.message_stream,st.p_bfr ? &p_bfr:NULL,st.length ? &length:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.p_bfr) {
    rc = copy_to_user(st.p_bfr, &p_bfr, sizeof(p_bfr));
    if (rc) {rc = -EFAULT; break;}
  }
  if (st.length) {
    rc = copy_to_user(st.length, &length, sizeof(length));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bmessage_read_complete:
  {{
  ioctl_settopapi_struct_bmessage_read_complete st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bmessage_read_complete(st.message_stream,st.amount_consumed);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bmessage_stop:
  {{
  ioctl_settopapi_struct_bmessage_stop st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bmessage_stop(st.message_stream);
  rc = 0;

  }
  }}
  break;

case BSETTOP_IOCTL_bmessage_close:
  {{
  ioctl_settopapi_struct_bmessage_close st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bmessage_close(st.message_stream);
  rc = 0;

  }
  }}
  break;

case BSETTOP_IOCTL_brecpump_get_open_params:
  {{
  ioctl_settopapi_struct_brecpump_get_open_params st;
  brecpump_open_params open_params;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  brecpump_get_open_params(st.id,st.open_params ? &open_params:NULL);
  rc = 0;

  if (st.open_params) {
    rc = copy_to_user(st.open_params, &open_params, sizeof(open_params));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_brecpump_open:
  {{
  ioctl_settopapi_struct_brecpump_open st;
  brecpump_open_params open_params;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.open_params) {
  rc = copy_from_user((void*)&open_params, st.open_params, sizeof(open_params));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = brecpump_open(st.id,st.open_params ? &open_params:NULL);
  bhandle_mgr_add(file->private_data, st.__retval, (settopapi_close_func)brecpump_close, "brecpump_close");
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_brecpump_close:
  {{
  ioctl_settopapi_struct_brecpump_close st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  brecpump_close(st.recpump);
  bhandle_mgr_remove(file->private_data, st.recpump, "brecpump_close");
  rc = 0;

  }
  }}
  break;

case BSETTOP_IOCTL_brecpump_params_init:
  {{
  ioctl_settopapi_struct_brecpump_params_init st;
  brecpump_params params;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  brecpump_params_init(st.params ? &params:NULL,st.recpump);
  rc = 0;

  if (st.params) {
    rc = copy_to_user(st.params, &params, sizeof(params));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_brecpump_start:
  {{
  ioctl_settopapi_struct_brecpump_start st;
  brecpump_params params;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.params) {
  rc = copy_from_user((void*)&params, st.params, sizeof(params));
  if (rc) break;
  }
  if ( params.data_write_callback ) { params.data_write_callback = b_proxy_create_callback(ioctl_settopapi_brecpump_data_write_callback, st.recpump, params.callback_context); }
  if ( params.index_write_callback ) { params.index_write_callback = b_proxy_create_callback(ioctl_settopapi_brecpump_index_write_callback, st.recpump, params.callback_context); }
  if ( params.overflow ) { params.overflow = b_proxy_create_callback(ioctl_settopapi_brecpump_overflow_callback, st.recpump, params.callback_context); }

  /* Make the function call */
  st.__retval = brecpump_start(st.recpump,st.stream,st.params ? &params:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_brecpump_stop:
  {{
  ioctl_settopapi_struct_brecpump_stop st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = brecpump_stop(st.recpump);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_brecpump_immediate_stop:
  {{
  ioctl_settopapi_struct_brecpump_immediate_stop st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  brecpump_immediate_stop(st.recpump);
  rc = 0;

  }
  }}
  break;

case BSETTOP_IOCTL_brecpump_data_get_buffer:
  {{
  ioctl_settopapi_struct_brecpump_data_get_buffer st;
  const void * buffer;
  size_t buffer_size;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = brecpump_data_get_buffer(st.recpump,st.buffer ? &buffer:NULL,st.buffer_size ? &buffer_size:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.buffer) {
    rc = copy_to_user(st.buffer, &buffer, sizeof(buffer));
    if (rc) {rc = -EFAULT; break;}
  }
  if (st.buffer_size) {
    rc = copy_to_user(st.buffer_size, &buffer_size, sizeof(buffer_size));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_brecpump_index_get_buffer:
  {{
  ioctl_settopapi_struct_brecpump_index_get_buffer st;
  const void * buffer;
  size_t buffer_size;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = brecpump_index_get_buffer(st.recpump,st.buffer ? &buffer:NULL,st.buffer_size ? &buffer_size:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.buffer) {
    rc = copy_to_user(st.buffer, &buffer, sizeof(buffer));
    if (rc) {rc = -EFAULT; break;}
  }
  if (st.buffer_size) {
    rc = copy_to_user(st.buffer_size, &buffer_size, sizeof(buffer_size));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_brecpump_data_write_complete:
  {{
  ioctl_settopapi_struct_brecpump_data_write_complete st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = brecpump_data_write_complete(st.recpump,st.amount_written);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_brecpump_index_write_complete:
  {{
  ioctl_settopapi_struct_brecpump_index_write_complete st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = brecpump_index_write_complete(st.recpump,st.amount_written);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_brecpump_get_status:
  {{
  ioctl_settopapi_struct_brecpump_get_status st;
  brecpump_status status;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  brecpump_get_status(st.recpump,st.status ? &status:NULL);
  rc = 0;

  if (st.status) {
    rc = copy_to_user(st.status, &status, sizeof(status));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bcipher_open:
  {{
  ioctl_settopapi_struct_bcipher_open st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bcipher_open(st.id);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bcipher_close:
  {{
  ioctl_settopapi_struct_bcipher_close st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bcipher_close(st.encrypt);
  rc = 0;

  }
  }}
  break;

case BSETTOP_IOCTL_bcipher_settings_init:
  {{
  ioctl_settopapi_struct_bcipher_settings_init st;
  bcipher_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bcipher_settings_init(st.settings ? &settings:NULL,st.cipher);
  rc = 0;

  if (st.settings) {
    rc = copy_to_user(st.settings, &settings, sizeof(settings));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bcipher_convert_data:
  {{
  ioctl_settopapi_struct_bcipher_convert_data st;
  void * dest;
  const void * source;
  bcipher_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  unsigned char dest_array[st.datalen];
  dest = dest_array;
  unsigned char source_array[st.datalen];
  source = source_array;
  rc = copy_from_user((void*)source, st.source, st.datalen*sizeof(unsigned char));
  if (rc) break;
  if (st.settings) {
  rc = copy_from_user((void*)&settings, st.settings, sizeof(settings));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = bcipher_convert_data(st.handle,dest,source,st.datalen,st.settings ? &settings:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.dest) {
    rc = copy_to_user(st.dest, dest, st.datalen*sizeof(unsigned char));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bencode_open:
  {{
  ioctl_settopapi_struct_bencode_open st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bencode_open(st.id);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bencode_close:
  {{
  ioctl_settopapi_struct_bencode_close st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bencode_close(st.encode);
  rc = 0;

  }
  }}
  break;

case BSETTOP_IOCTL_bencode_extended_settings_init:
  {{
  ioctl_settopapi_struct_bencode_extended_settings_init st;
  bencode_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bencode_extended_settings_init(st.settings ? &settings:NULL,st.quality,st.encode,st.vpp_mode);
  rc = 0;

  if (st.settings) {
    rc = copy_to_user(st.settings, &settings, sizeof(settings));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bencode_settings_init:
  {{
  ioctl_settopapi_struct_bencode_settings_init st;
  bencode_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bencode_settings_init(st.settings ? &settings:NULL,st.quality,st.encode);
  rc = 0;

  if (st.settings) {
    rc = copy_to_user(st.settings, &settings, sizeof(settings));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bencode_start:
  {{
  ioctl_settopapi_struct_bencode_start st;
  bencode_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.settings) {
  rc = copy_from_user((void*)&settings, st.settings, sizeof(settings));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = bencode_start(st.encode,st.stream,st.settings ? &settings:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bencode_stop:
  {{
  ioctl_settopapi_struct_bencode_stop st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bencode_stop(st.encode,st.stream);
  rc = 0;

  }
  }}
  break;

case BSETTOP_IOCTL_bpcm_play_settings_init:
  {{
  ioctl_settopapi_struct_bpcm_play_settings_init st;
  bpcm_play_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bpcm_play_settings_init(st.settings ? &settings:NULL,st.pcmplay);
  rc = 0;

  if (st.settings) {
    rc = copy_to_user(st.settings, &settings, sizeof(settings));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bpcm_play_open:
  {{
  ioctl_settopapi_struct_bpcm_play_open st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bpcm_play_open(st.id);
  bhandle_mgr_add(file->private_data, st.__retval, (settopapi_close_func)bpcm_play_close, "bpcm_play_close");
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bpcm_play_close:
  {{
  ioctl_settopapi_struct_bpcm_play_close st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bpcm_play_close(st.pcmplay);
  bhandle_mgr_remove(file->private_data, st.pcmplay, "bpcm_play_close");
  rc = 0;

  }
  }}
  break;

case BSETTOP_IOCTL_bpcm_play_start:
  {{
  ioctl_settopapi_struct_bpcm_play_start st;
  bpcm_play_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.settings) {
  rc = copy_from_user((void*)&settings, st.settings, sizeof(settings));
  if (rc) break;
  }
  if ( settings.callback ) { settings.callback = b_proxy_create_callback(ioctl_settopapi_bpcm_play_callback, st.pcmplay, settings.callback_context); }

  /* Make the function call */
  st.__retval = bpcm_play_start(st.pcmplay,st.display,st.settings ? &settings:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bpcm_play_get_status:
  {{
  ioctl_settopapi_struct_bpcm_play_get_status st;
  bpcm_play_status status;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bpcm_play_get_status(st.pcmplay,st.status ? &status:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.status) {
    rc = copy_to_user(st.status, &status, sizeof(status));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bpcm_play_get_buffer:
  {{
  ioctl_settopapi_struct_bpcm_play_get_buffer st;
  void * data;
  size_t length;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bpcm_play_get_buffer(st.pcmplay,st.data ? &data:NULL,st.length ? &length:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.data) {
    rc = copy_to_user(st.data, &data, sizeof(data));
    if (rc) {rc = -EFAULT; break;}
  }
  if (st.length) {
    rc = copy_to_user(st.length, &length, sizeof(length));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bpcm_play_write_complete:
  {{
  ioctl_settopapi_struct_bpcm_play_write_complete st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bpcm_play_write_complete(st.pcmplay,st.amount_written);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bpcm_play_stop:
  {{
  ioctl_settopapi_struct_bpcm_play_stop st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bpcm_play_stop(st.pcmplay);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bpcm_play_get_output_settings:
  {{
  ioctl_settopapi_struct_bpcm_play_get_output_settings st;
  bpcm_play_output_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bpcm_play_get_output_settings(st.pcmplay,st.settings ? &settings:NULL);
  rc = 0;

  if (st.settings) {
    rc = copy_to_user(st.settings, &settings, sizeof(settings));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bpcm_play_set_output_settings:
  {{
  ioctl_settopapi_struct_bpcm_play_set_output_settings st;
  bpcm_play_output_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.settings) {
  rc = copy_from_user((void*)&settings, st.settings, sizeof(settings));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = bpcm_play_set_output_settings(st.pcmplay,st.settings ? &settings:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bpcm_capture_settings_init:
  {{
  ioctl_settopapi_struct_bpcm_capture_settings_init st;
  bpcm_capture_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bpcm_capture_settings_init(st.settings ? &settings:NULL,st.pcmcapture);
  rc = 0;

  if (st.settings) {
    rc = copy_to_user(st.settings, &settings, sizeof(settings));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bpcm_capture_open:
  {{
  ioctl_settopapi_struct_bpcm_capture_open st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bpcm_capture_open(st.id);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bpcm_capture_close:
  {{
  ioctl_settopapi_struct_bpcm_capture_close st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bpcm_capture_close(st.pcmcapture);
  rc = 0;

  }
  }}
  break;

case BSETTOP_IOCTL_bpcm_capture_start:
  {{
  ioctl_settopapi_struct_bpcm_capture_start st;
  bpcm_capture_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.settings) {
  rc = copy_from_user((void*)&settings, st.settings, sizeof(settings));
  if (rc) break;
  }
  if ( settings.callback ) { settings.callback = b_proxy_create_callback(ioctl_settopapi_bpcm_capture_callback, st.pcmcapture, settings.callback_context); }

  /* Make the function call */
  st.__retval = bpcm_capture_start(st.pcmcapture,st.display,st.settings ? &settings:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bpcm_capture_get_buffer:
  {{
  ioctl_settopapi_struct_bpcm_capture_get_buffer st;
  void * data;
  size_t length;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bpcm_capture_get_buffer(st.pcmcapture,st.data ? &data:NULL,st.length ? &length:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.data) {
    rc = copy_to_user(st.data, &data, sizeof(data));
    if (rc) {rc = -EFAULT; break;}
  }
  if (st.length) {
    rc = copy_to_user(st.length, &length, sizeof(length));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bpcm_capture_read_complete:
  {{
  ioctl_settopapi_struct_bpcm_capture_read_complete st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bpcm_capture_read_complete(st.pcmcapture,st.amount_read);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bpcm_capture_stop:
  {{
  ioctl_settopapi_struct_bpcm_capture_stop st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bpcm_capture_stop(st.pcmcapture);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bsmartcard_settings_init:
  {{
  ioctl_settopapi_struct_bsmartcard_settings_init st;
  bsmartcard_settings_t settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bsmartcard_settings_init(st.settings ? &settings:NULL);
  rc = 0;

  if (st.settings) {
    rc = copy_to_user(st.settings, &settings, sizeof(settings));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bsmartcard_open:
  {{
  ioctl_settopapi_struct_bsmartcard_open st;
  bsmartcard_settings_t settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.settings) {
  rc = copy_from_user((void*)&settings, st.settings, sizeof(settings));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = bsmartcard_open(st.smartcard_id,st.settings ? &settings:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bsmartcard_close:
  {{
  ioctl_settopapi_struct_bsmartcard_close st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bsmartcard_close(st.smartcard);
  rc = 0;

  }
  }}
  break;

case BSETTOP_IOCTL_bsmartcard_get_settings:
  {{
  ioctl_settopapi_struct_bsmartcard_get_settings st;
  bsmartcard_settings_t settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bsmartcard_get_settings(st.smartcard,st.settings ? &settings:NULL);
  rc = 0;

  if (st.settings) {
    rc = copy_to_user(st.settings, &settings, sizeof(settings));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bsmartcard_set_settings:
  {{
  ioctl_settopapi_struct_bsmartcard_set_settings st;
  bsmartcard_settings_t settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.settings) {
  rc = copy_from_user((void*)&settings, st.settings, sizeof(settings));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = bsmartcard_set_settings(st.smartcard,st.settings ? &settings:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bsmartcard_read:
  {{
  ioctl_settopapi_struct_bsmartcard_read st;
  void * data;
  size_t length_read;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  unsigned char data_array[st.length];
  data = data_array;

  /* Make the function call */
  st.__retval = bsmartcard_read(st.smartcard,data,st.length,st.length_read ? &length_read:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.data) {
    rc = copy_to_user(st.data, data, st.length*sizeof(unsigned char));
    if (rc) {rc = -EFAULT; break;}
  }
  if (st.length_read) {
    rc = copy_to_user(st.length_read, &length_read, sizeof(length_read));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bsmartcard_write:
  {{
  ioctl_settopapi_struct_bsmartcard_write st;
  const void * data;
  size_t length_written;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  unsigned char data_array[st.length];
  data = data_array;
  rc = copy_from_user((void*)data, st.data, st.length*sizeof(unsigned char));
  if (rc) break;

  /* Make the function call */
  st.__retval = bsmartcard_write(st.smartcard,data,st.length,st.length_written ? &length_written:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.length_written) {
    rc = copy_to_user(st.length_written, &length_written, sizeof(length_written));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bsmartcard_get_status:
  {{
  ioctl_settopapi_struct_bsmartcard_get_status st;
  bsmartcard_status status;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bsmartcard_get_status(st.smartcard,st.status ? &status:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.status) {
    rc = copy_to_user(st.status, &status, sizeof(status));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bsmartcard_reset_card:
  {{
  ioctl_settopapi_struct_bsmartcard_reset_card st;
  void * data;
  size_t length_read;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  unsigned char data_array[st.length];
  data = data_array;

  /* Make the function call */
  st.__retval = bsmartcard_reset_card(st.smartcard,data,st.length,st.length_read ? &length_read:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.data) {
    rc = copy_to_user(st.data, data, st.length*sizeof(unsigned char));
    if (rc) {rc = -EFAULT; break;}
  }
  if (st.length_read) {
    rc = copy_to_user(st.length_read, &length_read, sizeof(length_read));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bsmartcard_reset:
  {{
  ioctl_settopapi_struct_bsmartcard_reset st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bsmartcard_reset(st.smartcard,st.warm_reset);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bsmartcard_detect_card:
  {{
  ioctl_settopapi_struct_bsmartcard_detect_card st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bsmartcard_detect_card(st.smartcard);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bsmartcard_init:
  {{
  ioctl_settopapi_struct_bsmartcard_init st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bsmartcard_init();
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bsmartcard_shutdown:
  {{
  {

  /* Make the function call */
  bsmartcard_shutdown();
  rc = 0;

  }
  }}
  break;

case BSETTOP_IOCTL_buser_input_open:
  {{
  ioctl_settopapi_struct_buser_input_open st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = buser_input_open(st.user_input_id);
  bhandle_mgr_add(file->private_data, st.__retval, (settopapi_close_func)buser_input_close, "buser_input_close");
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_buser_input_close:
  {{
  ioctl_settopapi_struct_buser_input_close st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  buser_input_close(st.ui);
  bhandle_mgr_remove(file->private_data, st.ui, "buser_input_close");
  rc = 0;

  }
  }}
  break;

case BSETTOP_IOCTL_buser_input_get_settings:
  {{
  ioctl_settopapi_struct_buser_input_get_settings st;
  buser_input_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  buser_input_get_settings(st.ui,st.settings ? &settings:NULL);
  rc = 0;

  if (st.settings) {
    rc = copy_to_user(st.settings, &settings, sizeof(settings));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_buser_input_set_settings:
  {{
  ioctl_settopapi_struct_buser_input_set_settings st;
  buser_input_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.settings) {
  rc = copy_from_user((void*)&settings, st.settings, sizeof(settings));
  if (rc) break;
  }
  if ( settings.data_ready_callback ) { settings.data_ready_callback = b_proxy_create_callback(ioctl_settopapi_buser_input_data_ready_callback, st.ui, settings.callback_context); }

  /* Make the function call */
  buser_input_set_settings(st.ui,st.settings ? &settings:NULL);
  rc = 0;

  }
  }}
  break;

case BSETTOP_IOCTL_buser_input_get_event:
  {{
  ioctl_settopapi_struct_buser_input_get_event st;
  buser_input_event * event;
  unsigned result_nevents;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  buser_input_event event_array[st.nevents];
  event = event_array;

  /* Make the function call */
  st.__retval = buser_input_get_event(st.ui,event,st.nevents,st.result_nevents ? &result_nevents:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.event) {
    rc = copy_to_user(st.event, event, st.nevents*sizeof(buser_input_event));
    if (rc) {rc = -EFAULT; break;}
  }
  if (st.result_nevents) {
    rc = copy_to_user(st.result_nevents, &result_nevents, sizeof(result_nevents));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_buser_output_open:
  {{
  ioctl_settopapi_struct_buser_output_open st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = buser_output_open(st.user_output_id);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_buser_output_close:
  {{
  ioctl_settopapi_struct_buser_output_close st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  buser_output_close(st.uo);
  rc = 0;

  }
  }}
  break;

case BSETTOP_IOCTL_buser_output_set_led:
  {{
  ioctl_settopapi_struct_buser_output_set_led st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = buser_output_set_led(st.ui,st.led,st.on);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_buser_output_display_message:
  {{
  ioctl_settopapi_struct_buser_output_display_message st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  char message[__maxstringlength];
  rc = copy_from_user((void*)message, st.message, __maxstringlength*sizeof(char));
  if (rc) break;

  /* Make the function call */
  st.__retval = buser_output_display_message(st.ui,message);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_buser_input_set_xmp_settings:
  {{
  ioctl_settopapi_struct_buser_input_set_xmp_settings st;
  buser_input_xmp_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.settings) {
  rc = copy_from_user((void*)&settings, st.settings, sizeof(settings));
  if (rc) break;
  }

  /* Make the function call */
  buser_input_set_xmp_settings(st.ui,st.settings ? &settings:NULL);
  rc = 0;

  }
  }}
  break;

case BSETTOP_IOCTL_buser_input_get_xmp_settings:
  {{
  ioctl_settopapi_struct_buser_input_get_xmp_settings st;
  buser_input_xmp_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  buser_input_get_xmp_settings(st.ui,st.settings ? &settings:NULL);
  rc = 0;

  if (st.settings) {
    rc = copy_to_user(st.settings, &settings, sizeof(settings));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_buser_input_send_xmp:
  {{
  ioctl_settopapi_struct_buser_input_send_xmp st;
  const uint8_t * input_buffer;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  uint8_t input_buffer_array[st.length];
  input_buffer = input_buffer_array;
  rc = copy_from_user((void*)input_buffer, st.input_buffer, st.length*sizeof(uint8_t));
  if (rc) break;

  /* Make the function call */
  st.__retval = buser_input_send_xmp(st.remote,input_buffer,st.length);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_buser_input_receive_xmp:
  {{
  ioctl_settopapi_struct_buser_input_receive_xmp st;
  uint8_t * output_data;
  unsigned output_size;
  uint32_t data_packet;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  uint8_t output_data_array[st.length];
  output_data = output_data_array;

  /* Make the function call */
  st.__retval = buser_input_receive_xmp(st.remote,output_data,st.length,st.output_size ? &output_size:NULL,st.data_packet ? &data_packet:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.output_data) {
    rc = copy_to_user(st.output_data, output_data, st.length*sizeof(uint8_t));
    if (rc) {rc = -EFAULT; break;}
  }
  if (st.output_size) {
    rc = copy_to_user(st.output_size, &output_size, sizeof(output_size));
    if (rc) {rc = -EFAULT; break;}
  }
  if (st.data_packet) {
    rc = copy_to_user(st.data_packet, &data_packet, sizeof(data_packet));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bgraphics_open:
  {{
  ioctl_settopapi_struct_bgraphics_open st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bgraphics_open(st.id,st.display);
  bhandle_mgr_add(file->private_data, st.__retval, (settopapi_close_func)bgraphics_close, "bgraphics_close");
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bgraphics_close:
  {{
  ioctl_settopapi_struct_bgraphics_close st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bgraphics_close(st.graphics);
  bhandle_mgr_remove(file->private_data, st.graphics, "bgraphics_close");
  rc = 0;

  }
  }}
  break;

case BSETTOP_IOCTL_bgraphics_get:
  {{
  ioctl_settopapi_struct_bgraphics_get st;
  bgraphics_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bgraphics_get(st.graphics,st.settings ? &settings:NULL);
  rc = 0;

  if (st.settings) {
    rc = copy_to_user(st.settings, &settings, sizeof(settings));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bgraphics_set:
  {{
  ioctl_settopapi_struct_bgraphics_set st;
  bgraphics_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.settings) {
  rc = copy_from_user((void*)&settings, st.settings, sizeof(settings));
  if (rc) break;
  }
  if ( settings.operation_complete_callback ) { settings.operation_complete_callback = b_proxy_create_callback(ioctl_settopapi_bgraphics_operation_complete_callback, st.graphics, settings.callback_context); }

  /* Make the function call */
  st.__retval = bgraphics_set(st.graphics,st.settings ? &settings:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bgraphics_sync:
  {{
  ioctl_settopapi_struct_bgraphics_sync st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bgraphics_sync(st.graphics);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bsurface_sync:
  {{
  ioctl_settopapi_struct_bsurface_sync st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bsurface_sync(st.surface);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bgraphics_flip:
  {{
  ioctl_settopapi_struct_bgraphics_flip st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bgraphics_flip(st.graphics);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bgraphics_flip_sync:
  {{
  ioctl_settopapi_struct_bgraphics_flip_sync st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bgraphics_flip_sync(st.graphics);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bsurface_create_settings_init:
  {{
  ioctl_settopapi_struct_bsurface_create_settings_init st;
  bsurface_create_settings create_settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bsurface_create_settings_init(st.create_settings ? &create_settings:NULL,st.graphics);
  rc = 0;

  if (st.create_settings) {
    rc = copy_to_user(st.create_settings, &create_settings, sizeof(create_settings));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bgraphics_create_framebuffer:
  {{
  ioctl_settopapi_struct_bgraphics_create_framebuffer st;
  bsurface_create_settings create_settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.create_settings) {
  rc = copy_from_user((void*)&create_settings, st.create_settings, sizeof(create_settings));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = bgraphics_create_framebuffer(st.graphics,st.create_settings ? &create_settings:NULL,st.back_buffer_count);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bsurface_create:
  {{
  ioctl_settopapi_struct_bsurface_create st;
  bsurface_create_settings create_settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.create_settings) {
  rc = copy_from_user((void*)&create_settings, st.create_settings, sizeof(create_settings));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = bsurface_create(st.graphics,st.create_settings ? &create_settings:NULL);
  bhandle_mgr_add(file->private_data, st.__retval, (settopapi_close_func)bsurface_destroy, "bsurface_destroy");
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bsurface_get_display:
  {{
  ioctl_settopapi_struct_bsurface_get_display st;
  bsurface_create_settings create_settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.create_settings) {
  rc = copy_from_user((void*)&create_settings, st.create_settings, sizeof(create_settings));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = bsurface_get_display(st.graphics,st.create_settings ? &create_settings:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bsurface_destroy:
  {{
  ioctl_settopapi_struct_bsurface_destroy st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bsurface_destroy(st.surface);
  bhandle_mgr_remove(file->private_data, st.surface, "bsurface_destroy");
  rc = 0;

  }
  }}
  break;

case BSETTOP_IOCTL_bsurface_get_memory:
  {{
  ioctl_settopapi_struct_bsurface_get_memory st;
  bsurface_memory memory;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bsurface_get_memory(st.s,st.memory ? &memory:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.memory) {
    rc = copy_to_user(st.memory, &memory, sizeof(memory));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bsurface_set:
  {{
  ioctl_settopapi_struct_bsurface_set st;
  bsurface_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.settings) {
  rc = copy_from_user((void*)&settings, st.settings, sizeof(settings));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = bsurface_set(st.s,st.settings ? &settings:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bsurface_get:
  {{
  ioctl_settopapi_struct_bsurface_get st;
  bsurface_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bsurface_get(st.s,st.settings ? &settings:NULL);
  rc = 0;

  if (st.settings) {
    rc = copy_to_user(st.settings, &settings, sizeof(settings));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bsurface_fill:
  {{
  ioctl_settopapi_struct_bsurface_fill st;
  bsettop_rect rect;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.rect) {
  rc = copy_from_user((void*)&rect, st.rect, sizeof(rect));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = bsurface_fill(st.surface,st.rect ? &rect:NULL,st.pixel);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bsurface_copy:
  {{
  ioctl_settopapi_struct_bsurface_copy st;
  bsettop_rect destrect;
  bsettop_rect srcrect;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.destrect) {
  rc = copy_from_user((void*)&destrect, st.destrect, sizeof(destrect));
  if (rc) break;
  }
  if (st.srcrect) {
  rc = copy_from_user((void*)&srcrect, st.srcrect, sizeof(srcrect));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = bsurface_copy(st.destsurface,st.destrect ? &destrect:NULL,st.srcsurface,st.srcrect ? &srcrect:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bsurface_blit:
  {{
  ioctl_settopapi_struct_bsurface_blit st;
  bsettop_rect destrect;
  bsettop_rect src1_rect;
  bsettop_rect src2_rect;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.destrect) {
  rc = copy_from_user((void*)&destrect, st.destrect, sizeof(destrect));
  if (rc) break;
  }
  if (st.src1_rect) {
  rc = copy_from_user((void*)&src1_rect, st.src1_rect, sizeof(src1_rect));
  if (rc) break;
  }
  if (st.src2_rect) {
  rc = copy_from_user((void*)&src2_rect, st.src2_rect, sizeof(src2_rect));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = bsurface_blit(st.destsurface,st.destrect ? &destrect:NULL,st.operation,st.src1,st.src1_rect ? &src1_rect:NULL,st.src2,st.src2_rect ? &src2_rect:NULL,st.pixel1,st.pixel2);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bsurface_blit_params_init:
  {{
  ioctl_settopapi_struct_bsurface_blit_params_init st;
  bsurface_blit_params params;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bsurface_blit_params_init(st.params ? &params:NULL);
  rc = 0;

  if (st.params) {
    rc = copy_to_user(st.params, &params, sizeof(params));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bsurface_extended_blit:
  {{
  ioctl_settopapi_struct_bsurface_extended_blit st;
  bsettop_rect destrect;
  bsurface_blit_params params;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.destrect) {
  rc = copy_from_user((void*)&destrect, st.destrect, sizeof(destrect));
  if (rc) break;
  }
  if (st.params) {
  rc = copy_from_user((void*)&params, st.params, sizeof(params));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = bsurface_extended_blit(st.destsurface,st.destrect ? &destrect:NULL,st.params ? &params:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bsurface_blended_fill:
  {{
  ioctl_settopapi_struct_bsurface_blended_fill st;
  bsettop_rect rect;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.rect) {
  rc = copy_from_user((void*)&rect, st.rect, sizeof(rect));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = bsurface_blended_fill(st.surface,st.rect ? &rect:NULL,st.pixel,st.operation);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bsurface_load_clut:
  {{
  ioctl_settopapi_struct_bsurface_load_clut st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bsurface_load_clut(st.s,st.palette);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bplaypump_get_open_params:
  {{
  ioctl_settopapi_struct_bplaypump_get_open_params st;
  bplaypump_open_params open_params;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bplaypump_get_open_params(st.id,st.open_params ? &open_params:NULL);
  rc = 0;

  if (st.open_params) {
    rc = copy_to_user(st.open_params, &open_params, sizeof(open_params));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bplaypump_open:
  {{
  ioctl_settopapi_struct_bplaypump_open st;
  bplaypump_open_params open_params;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.open_params) {
  rc = copy_from_user((void*)&open_params, st.open_params, sizeof(open_params));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = bplaypump_open(st.id,st.open_params ? &open_params:NULL);
  bhandle_mgr_add(file->private_data, st.__retval, (settopapi_close_func)bplaypump_close, "bplaypump_close");
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bplaypump_close:
  {{
  ioctl_settopapi_struct_bplaypump_close st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bplaypump_close(st.playpump);
  bhandle_mgr_remove(file->private_data, st.playpump, "bplaypump_close");
  rc = 0;

  }
  }}
  break;

case BSETTOP_IOCTL_bplaypump_params_init:
  {{
  ioctl_settopapi_struct_bplaypump_params_init st;
  bplaypump_params params;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bplaypump_params_init(st.params ? &params:NULL,st.playpump);
  rc = 0;

  if (st.params) {
    rc = copy_to_user(st.params, &params, sizeof(params));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bplaypump_start:
  {{
  ioctl_settopapi_struct_bplaypump_start st;
  bstream_mpeg mpeg;
  bplaypump_params params;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.mpeg) {
  rc = copy_from_user((void*)&mpeg, st.mpeg, sizeof(mpeg));
  if (rc) break;
  }
  if (st.params) {
  rc = copy_from_user((void*)&params, st.params, sizeof(params));
  if (rc) break;
  }
  if ( params.read_callback ) { params.read_callback = b_proxy_create_callback(ioctl_settopapi_bplaypump_read_callback, st.playpump, params.callback_context); }

  /* Make the function call */
  st.__retval = bplaypump_start(st.playpump,st.mpeg ? &mpeg:NULL,st.params ? &params:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bplaypump_stop:
  {{
  ioctl_settopapi_struct_bplaypump_stop st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bplaypump_stop(st.playpump);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bplaypump_get_buffer:
  {{
  ioctl_settopapi_struct_bplaypump_get_buffer st;
  void * buffer;
  size_t size;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bplaypump_get_buffer(st.playpump,st.buffer ? &buffer:NULL,st.size ? &size:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.buffer) {
    rc = copy_to_user(st.buffer, &buffer, sizeof(buffer));
    if (rc) {rc = -EFAULT; break;}
  }
  if (st.size) {
    rc = copy_to_user(st.size, &size, sizeof(size));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bplaypump_read_complete:
  {{
  ioctl_settopapi_struct_bplaypump_read_complete st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bplaypump_read_complete(st.playpump,st.skip,st.amount);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bplaypump_set:
  {{
  ioctl_settopapi_struct_bplaypump_set st;
  bplaypump_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.settings) {
  rc = copy_from_user((void*)&settings, st.settings, sizeof(settings));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = bplaypump_set(st.playpump,st.settings ? &settings:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bplaypump_get:
  {{
  ioctl_settopapi_struct_bplaypump_get st;
  bplaypump_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bplaypump_get(st.playpump,st.settings ? &settings:NULL);
  rc = 0;

  if (st.settings) {
    rc = copy_to_user(st.settings, &settings, sizeof(settings));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bplaypump_set_state:
  {{
  ioctl_settopapi_struct_bplaypump_set_state st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bplaypump_set_state(st.playpump,st.state,st.forward);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bplaypump_set_decoder_rate:
  {{
  ioctl_settopapi_struct_bplaypump_set_decoder_rate st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bplaypump_set_decoder_rate(st.playpump,st.rate);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bplaypump_frame_advance:
  {{
  ioctl_settopapi_struct_bplaypump_frame_advance st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bplaypump_frame_advance(st.playpump);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bplaypump_flush:
  {{
  ioctl_settopapi_struct_bplaypump_flush st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bplaypump_flush(st.playpump);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bplaypump_get_status:
  {{
  ioctl_settopapi_struct_bplaypump_get_status st;
  bplaypump_status status;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bplaypump_get_status(st.p,st.status ? &status:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.status) {
    rc = copy_to_user(st.status, &status, sizeof(status));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bplaypump_p_set_pwm_value:
  {{
  ioctl_settopapi_struct_bplaypump_p_set_pwm_value st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bplaypump_p_set_pwm_value(st.p,st.pwm_value);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bplaypump_get_source:
  {{
  ioctl_settopapi_struct_bplaypump_get_source st;
  bplaypump_source source;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bplaypump_get_source(st.playpump,st.source ? &source:NULL);
  rc = 0;

  if (st.source) {
    rc = copy_to_user(st.source, &source, sizeof(source));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bplaypump_set_source:
  {{
  ioctl_settopapi_struct_bplaypump_set_source st;
  bplaypump_source source;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.source) {
  rc = copy_from_user((void*)&source, st.source, sizeof(source));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = bplaypump_set_source(st.playpump,st.source ? &source:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bplaypump_get_rtp_hdr_data:
  {{
  ioctl_settopapi_struct_bplaypump_get_rtp_hdr_data st;
  bplaypump_rtp_hdr_data_t rtp_header_data;
  unsigned entry_cnt;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.rtp_header_data) {
  rc = copy_from_user((void*)&rtp_header_data, st.rtp_header_data, sizeof(rtp_header_data));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = bplaypump_get_rtp_hdr_data(st.p,st.rtp_header_data ? &rtp_header_data:NULL,st.entry_cnt ? &entry_cnt:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.entry_cnt) {
    rc = copy_to_user(st.entry_cnt, &entry_cnt, sizeof(entry_cnt));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bencryption_params_init:
  {{
  ioctl_settopapi_struct_bencryption_params_init st;
  bencryption_params encryption;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bencryption_params_init(st.encryption ? &encryption:NULL);
  rc = 0;

  if (st.encryption) {
    rc = copy_to_user(st.encryption, &encryption, sizeof(encryption));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bstream_mpeg_init:
  {{
  ioctl_settopapi_struct_bstream_mpeg_init st;
  bstream_mpeg mpeg;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bstream_mpeg_init(st.mpeg ? &mpeg:NULL);
  rc = 0;

  if (st.mpeg) {
    rc = copy_to_user(st.mpeg, &mpeg, sizeof(mpeg));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bstreamer_attach:
  {{
  ioctl_settopapi_struct_bstreamer_attach st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bstreamer_attach(st.id,st.mpeg_type);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bstream_open:
  {{
  ioctl_settopapi_struct_bstream_open st;
  bstream_mpeg mpegparams;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.mpegparams) {
  rc = copy_from_user((void*)&mpegparams, st.mpegparams, sizeof(mpegparams));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = bstream_open(st.band,st.mpegparams ? &mpegparams:NULL);
  bhandle_mgr_add(file->private_data, st.__retval, (settopapi_close_func)bstream_close, "bstream_close");
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bstream_set_encryption:
  {{
  ioctl_settopapi_struct_bstream_set_encryption st;
  bencryption_params encryption;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.encryption) {
  rc = copy_from_user((void*)&encryption, st.encryption, sizeof(encryption));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = bstream_set_encryption(st.stream,st.encryption ? &encryption:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bstream_join:
  {{
  ioctl_settopapi_struct_bstream_join st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bstream_join(st.video_source,st.audio_source);
  rc = 0;

  }
  }}
  break;

case BSETTOP_IOCTL_bstream_open_child:
  {{
  ioctl_settopapi_struct_bstream_open_child st;
  bstream_mpeg mpegparams;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.mpegparams) {
  rc = copy_from_user((void*)&mpegparams, st.mpegparams, sizeof(mpegparams));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = bstream_open_child(st.parent,st.mpegparams ? &mpegparams:NULL);
  bhandle_mgr_add(file->private_data, st.__retval, (settopapi_close_func)bstream_close, "bstream_close");
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bstream_close:
  {{
  ioctl_settopapi_struct_bstream_close st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bstream_close(st.stream);
  bhandle_mgr_remove(file->private_data, st.stream, "bstream_close");
  rc = 0;

  }
  }}
  break;

case BSETTOP_IOCTL_bstream_get_mpeg_parameters:
  {{
  ioctl_settopapi_struct_bstream_get_mpeg_parameters st;
  bstream_status status;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bstream_get_mpeg_parameters(st.stream,st.status ? &status:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.status) {
    rc = copy_to_user(st.status, &status, sizeof(status));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bstream_set_mpeg_parameters:
  {{
  ioctl_settopapi_struct_bstream_set_mpeg_parameters st;
  bstream_mpeg mpeg;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.mpeg) {
  rc = copy_from_user((void*)&mpeg, st.mpeg, sizeof(mpeg));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = bstream_set_mpeg_parameters(st.stream,st.mpeg ? &mpeg:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bband_get:
  {{
  ioctl_settopapi_struct_bband_get st;
  bband_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bband_get(st.band,st.settings ? &settings:NULL);
  rc = 0;

  if (st.settings) {
    rc = copy_to_user(st.settings, &settings, sizeof(settings));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bstream_start_pcr_monitor:
  {{
  ioctl_settopapi_struct_bstream_start_pcr_monitor st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bstream_start_pcr_monitor(st.stream);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bstream_stop_pcr_monitor:
  {{
  ioctl_settopapi_struct_bstream_stop_pcr_monitor st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bstream_stop_pcr_monitor(st.stream);
  rc = 0;

  }
  }}
  break;

case BSETTOP_IOCTL_bstream_get_pcr_status:
  {{
  ioctl_settopapi_struct_bstream_get_pcr_status st;
  bstream_pcr_status status;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bstream_get_pcr_status(st.stream,st.status ? &status:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.status) {
    rc = copy_to_user(st.status, &status, sizeof(status));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bstream_vbi_get_settings:
  {{
  ioctl_settopapi_struct_bstream_vbi_get_settings st;
  bstream_vbi_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bstream_vbi_get_settings(st.stream,st.settings ? &settings:NULL);
  rc = 0;

  if (st.settings) {
    rc = copy_to_user(st.settings, &settings, sizeof(settings));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bstream_vbi_set_settings:
  {{
  ioctl_settopapi_struct_bstream_vbi_set_settings st;
  bstream_vbi_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.settings) {
  rc = copy_from_user((void*)&settings, st.settings, sizeof(settings));
  if (rc) break;
  }
  if ( settings.cc_data_ready_callback ) { settings.cc_data_ready_callback = b_proxy_create_callback(ioctl_settopapi_bvbi_cc_data_ready_callback, st.stream, settings.callback_context); }

  /* Make the function call */
  st.__retval = bstream_vbi_set_settings(st.stream,st.settings ? &settings:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bstream_vbi_cc_read:
  {{
  ioctl_settopapi_struct_bstream_vbi_cc_read st;
  bstream_vbi_cc * data;
  size_t length_read;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  bstream_vbi_cc data_array[st.length];
  data = data_array;

  /* Make the function call */
  st.__retval = bstream_vbi_cc_read(st.stream,data,st.length,st.length_read ? &length_read:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.data) {
    rc = copy_to_user(st.data, data, st.length*sizeof(bstream_vbi_cc));
    if (rc) {rc = -EFAULT; break;}
  }
  if (st.length_read) {
    rc = copy_to_user(st.length_read, &length_read, sizeof(length_read));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bstream_vbi_cc708_read:
  {{
  ioctl_settopapi_struct_bstream_vbi_cc708_read st;
  bstream_cc_708 * data;
  size_t length_read;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  bstream_cc_708 data_array[st.length];
  data = data_array;

  /* Make the function call */
  st.__retval = bstream_vbi_cc708_read(st.stream,data,st.length,st.length_read ? &length_read:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.data) {
    rc = copy_to_user(st.data, data, st.length*sizeof(bstream_cc_708));
    if (rc) {rc = -EFAULT; break;}
  }
  if (st.length_read) {
    rc = copy_to_user(st.length_read, &length_read, sizeof(length_read));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bdisplay_vbi_cc_write:
  {{
  ioctl_settopapi_struct_bdisplay_vbi_cc_write st;
  const bstream_vbi_cc * data;
  size_t length_written;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  bstream_vbi_cc data_array[st.length];
  data = data_array;
  rc = copy_from_user((void*)data, st.data, st.length*sizeof(bstream_vbi_cc));
  if (rc) break;

  /* Make the function call */
  st.__retval = bdisplay_vbi_cc_write(st.display,data,st.length,st.length_written ? &length_written:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.length_written) {
    rc = copy_to_user(st.length_written, &length_written, sizeof(length_written));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bstream_vbi_tt_read:
  {{
  ioctl_settopapi_struct_bstream_vbi_tt_read st;
  bstream_vbi_tt * data;
  size_t length_read;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  bstream_vbi_tt data_array[st.length];
  data = data_array;

  /* Make the function call */
  st.__retval = bstream_vbi_tt_read(st.stream,data,st.length,st.length_read ? &length_read:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.data) {
    rc = copy_to_user(st.data, data, st.length*sizeof(bstream_vbi_tt));
    if (rc) {rc = -EFAULT; break;}
  }
  if (st.length_read) {
    rc = copy_to_user(st.length_read, &length_read, sizeof(length_read));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bdisplay_vbi_tt_write:
  {{
  ioctl_settopapi_struct_bdisplay_vbi_tt_write st;
  const bstream_vbi_tt * data;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  bstream_vbi_tt data_array[st.length];
  data = data_array;
  rc = copy_from_user((void*)data, st.data, st.length*sizeof(bstream_vbi_tt));
  if (rc) break;

  /* Make the function call */
  st.__retval = bdisplay_vbi_tt_write(st.display,data,st.length,st.polarity);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bdisplay_vbi_set_cgms:
  {{
  ioctl_settopapi_struct_bdisplay_vbi_set_cgms st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bdisplay_vbi_set_cgms(st.display,st.cgms_value);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bdisplay_vbi_set_wss:
  {{
  ioctl_settopapi_struct_bdisplay_vbi_set_wss st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bdisplay_vbi_set_wss(st.display,st.wss_value);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bdisplay_vbi_get_cgms:
  {{
  ioctl_settopapi_struct_bdisplay_vbi_get_cgms st;
  bool enabled;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bdisplay_vbi_get_cgms(st.display,st.enabled ? &enabled:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.enabled) {
    rc = copy_to_user(st.enabled, &enabled, sizeof(enabled));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bdisplay_vbi_get_wss:
  {{
  ioctl_settopapi_struct_bdisplay_vbi_get_wss st;
  bool enabled;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bdisplay_vbi_get_wss(st.display,st.enabled ? &enabled:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.enabled) {
    rc = copy_to_user(st.enabled, &enabled, sizeof(enabled));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_open:
  {{
  ioctl_settopapi_struct_bdecode_open st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bdecode_open(st.decode_id);
  bhandle_mgr_add(file->private_data, st.__retval, (settopapi_close_func)bdecode_close, "bdecode_close");
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_mosaic_settings_init:
  {{
  ioctl_settopapi_struct_bdecode_mosaic_settings_init st;
  bdecode_mosaic_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bdecode_mosaic_settings_init(st.parent,st.settings ? &settings:NULL);
  rc = 0;

  if (st.settings) {
    rc = copy_to_user(st.settings, &settings, sizeof(settings));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_open_mosaic:
  {{
  ioctl_settopapi_struct_bdecode_open_mosaic st;
  bdecode_mosaic_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.settings) {
  rc = copy_from_user((void*)&settings, st.settings, sizeof(settings));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = bdecode_open_mosaic(st.parent,st.decode_id,st.settings ? &settings:NULL);
  bhandle_mgr_add(file->private_data, st.__retval, (settopapi_close_func)bdecode_close, "bdecode_close");
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_close:
  {{
  ioctl_settopapi_struct_bdecode_close st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bdecode_close(st.decode);
  bhandle_mgr_remove(file->private_data, st.decode, "bdecode_close");
  rc = 0;

  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_get:
  {{
  ioctl_settopapi_struct_bdecode_get st;
  bdecode_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bdecode_get(st.decode,st.settings ? &settings:NULL);
  rc = 0;

  if (st.settings) {
    rc = copy_to_user(st.settings, &settings, sizeof(settings));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_set:
  {{
  ioctl_settopapi_struct_bdecode_set st;
  bdecode_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.settings) {
  rc = copy_from_user((void*)&settings, st.settings, sizeof(settings));
  if (rc) break;
  }
  if ( settings.still_picture_done ) { settings.still_picture_done = b_proxy_create_callback(ioctl_settopapi_bdecode_settings_still_picture_done, st.decode, settings.callback_context); }
  if ( settings.video.source_changed ) { settings.video.source_changed = b_proxy_create_callback(ioctl_settopapi_bdecode_settings_video_source_changed, st.decode, settings.callback_context); }
  if ( settings.audio.source_changed ) { settings.audio.source_changed = b_proxy_create_callback(ioctl_settopapi_bdecode_settings_audio_source_changed, st.decode, settings.callback_context); }

  /* Make the function call */
  st.__retval = bdecode_set(st.decode,st.settings ? &settings:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_display_surface:
  {{
  ioctl_settopapi_struct_bdecode_display_surface st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bdecode_display_surface(st.decode,st.surface,st.window);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_start:
  {{
  ioctl_settopapi_struct_bdecode_start st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bdecode_start(st.decode,st.source,st.window);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_stop:
  {{
  ioctl_settopapi_struct_bdecode_stop st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bdecode_stop(st.decode);
  rc = 0;

  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_detach_audio:
  {{
  ioctl_settopapi_struct_bdecode_detach_audio st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bdecode_detach_audio(st.decode);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_attach_audio:
  {{
  ioctl_settopapi_struct_bdecode_attach_audio st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bdecode_attach_audio(st.decode,st.audio);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_set_audio_program:
  {{
  ioctl_settopapi_struct_bdecode_set_audio_program st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bdecode_set_audio_program(st.decode,st.index);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_get_audio:
  {{
  ioctl_settopapi_struct_bdecode_get_audio st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bdecode_get_audio(st.decode,st.audio_id);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_detach_video:
  {{
  ioctl_settopapi_struct_bdecode_detach_video st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bdecode_detach_video(st.decode);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_attach_video:
  {{
  ioctl_settopapi_struct_bdecode_attach_video st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bdecode_attach_video(st.decode,st.video);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_set_video_program:
  {{
  ioctl_settopapi_struct_bdecode_set_video_program st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bdecode_set_video_program(st.decode,st.index);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_get_video:
  {{
  ioctl_settopapi_struct_bdecode_get_video st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bdecode_get_video(st.decode,st.video_id);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_baudio_decode_get_status:
  {{
  ioctl_settopapi_struct_baudio_decode_get_status st;
  baudio_decode_status status;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  baudio_decode_get_status(st.audio,st.status ? &status:NULL);
  rc = 0;

  if (st.status) {
    rc = copy_to_user(st.status, &status, sizeof(status));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bvideo_decode_get_status:
  {{
  ioctl_settopapi_struct_bvideo_decode_get_status st;
  bvideo_decode_status status;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bvideo_decode_get_status(st.video,st.status ? &status:NULL);
  rc = 0;

  if (st.status) {
    rc = copy_to_user(st.status, &status, sizeof(status));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_get_status:
  {{
  ioctl_settopapi_struct_bdecode_get_status st;
  bdecode_status status;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bdecode_get_status(st.decode,st.status ? &status:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.status) {
    rc = copy_to_user(st.status, &status, sizeof(status));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_set_audio_volume:
  {{
  ioctl_settopapi_struct_bdecode_set_audio_volume st;
  baudio_volume volume;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.volume) {
  rc = copy_from_user((void*)&volume, st.volume, sizeof(volume));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = bdecode_set_audio_volume(st.decode,st.volume ? &volume:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_get_audio_volume:
  {{
  ioctl_settopapi_struct_bdecode_get_audio_volume st;
  baudio_volume volume;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bdecode_get_audio_volume(st.decode,st.volume ? &volume:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.volume) {
    rc = copy_to_user(st.volume, &volume, sizeof(volume));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_get_stc:
  {{
  ioctl_settopapi_struct_bdecode_get_stc st;
  uint32_t stc;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bdecode_get_stc(st.decode,st.stc ? &stc:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.stc) {
    rc = copy_to_user(st.stc, &stc, sizeof(stc));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_set_stc:
  {{
  ioctl_settopapi_struct_bdecode_set_stc st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bdecode_set_stc(st.decode,st.stc);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_slow_clock:
  {{
  ioctl_settopapi_struct_bdecode_slow_clock st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bdecode_slow_clock(st.decode,st.slow);
  rc = 0;

  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_read_metadata:
  {{
  ioctl_settopapi_struct_bdecode_read_metadata st;
  void * buffer;
  unsigned amount_read;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  unsigned char buffer_array[st.size];
  buffer = buffer_array;

  /* Make the function call */
  st.__retval = bdecode_read_metadata(st.decode,buffer,st.size,st.amount_read ? &amount_read:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.buffer) {
    rc = copy_to_user(st.buffer, buffer, st.size*sizeof(unsigned char));
    if (rc) {rc = -EFAULT; break;}
  }
  if (st.amount_read) {
    rc = copy_to_user(st.amount_read, &amount_read, sizeof(amount_read));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_allocate_capture_buffers:
  {{
  ioctl_settopapi_struct_bdecode_allocate_capture_buffers st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bdecode_allocate_capture_buffers(st.decode,st.count);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_acquire_capture_buffer:
  {{
  ioctl_settopapi_struct_bdecode_acquire_capture_buffer st;
  bool top_field;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bdecode_acquire_capture_buffer(st.decode,st.graphics,st.top_field ? &top_field:NULL);
  bhandle_mgr_add(file->private_data, st.__retval, (settopapi_close_func)bsurface_destroy, "bsurface_destroy");
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.top_field) {
    rc = copy_to_user(st.top_field, &top_field, sizeof(top_field));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bdecode_release_capture_buffer:
  {{
  ioctl_settopapi_struct_bdecode_release_capture_buffer st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bdecode_release_capture_buffer(st.decode,st.surface);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bsettop_get_power_state:
  {{
  ioctl_settopapi_struct_bsettop_get_power_state st;
  bsettop_power_state state;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bsettop_get_power_state(st.state ? &state:NULL);
  rc = 0;

  if (st.state) {
    rc = copy_to_user(st.state, &state, sizeof(state));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bsettop_set_power_state:
  {{
  ioctl_settopapi_struct_bsettop_set_power_state st;
  bsettop_power_state state;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.state) {
  rc = copy_from_user((void*)&state, st.state, sizeof(state));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = bsettop_set_power_state(st.state ? &state:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bsettop_init_frontend:
  {{
  ioctl_settopapi_struct_bsettop_init_frontend st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bsettop_init_frontend();
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_btuner_open:
  {{
  ioctl_settopapi_struct_btuner_open st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = btuner_open(st.tuner_id);
  bhandle_mgr_add(file->private_data, st.__retval, (settopapi_close_func)btuner_close, "btuner_close");
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_btuner_close:
  {{
  ioctl_settopapi_struct_btuner_close st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  btuner_close(st.tuner);
  bhandle_mgr_remove(file->private_data, st.tuner, "btuner_close");
  rc = 0;

  }
  }}
  break;

case BSETTOP_IOCTL_btuner_qam_params_init:
  {{
  ioctl_settopapi_struct_btuner_qam_params_init st;
  btuner_qam_params qam;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  btuner_qam_params_init(st.qam ? &qam:NULL,st.tuner);
  rc = 0;

  if (st.qam) {
    rc = copy_to_user(st.qam, &qam, sizeof(qam));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_btuner_ofdm_params_init:
  {{
  ioctl_settopapi_struct_btuner_ofdm_params_init st;
  btuner_ofdm_params ofdm;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  btuner_ofdm_params_init(st.ofdm ? &ofdm:NULL,st.tuner);
  rc = 0;

  if (st.ofdm) {
    rc = copy_to_user(st.ofdm, &ofdm, sizeof(ofdm));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_btuner_analog_params_init:
  {{
  ioctl_settopapi_struct_btuner_analog_params_init st;
  btuner_analog_params analog;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  btuner_analog_params_init(st.analog ? &analog:NULL,st.tuner);
  rc = 0;

  if (st.analog) {
    rc = copy_to_user(st.analog, &analog, sizeof(analog));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_btuner_qam_us_params_init:
  {{
  ioctl_settopapi_struct_btuner_qam_us_params_init st;
  btuner_qam_us_params us_param;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  btuner_qam_us_params_init(st.us_param ? &us_param:NULL,st.tuner);
  rc = 0;

  if (st.us_param) {
    rc = copy_to_user(st.us_param, &us_param, sizeof(us_param));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_btuner_sds_params_init:
  {{
  ioctl_settopapi_struct_btuner_sds_params_init st;
  btuner_sds_params sds;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  btuner_sds_params_init(st.sds ? &sds:NULL,st.tuner);
  rc = 0;

  if (st.sds) {
    rc = copy_to_user(st.sds, &sds, sizeof(sds));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_btuner_vsb_params_init:
  {{
  ioctl_settopapi_struct_btuner_vsb_params_init st;
  btuner_vsb_params vsb;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  btuner_vsb_params_init(st.vsb ? &vsb:NULL,st.tuner);
  rc = 0;

  if (st.vsb) {
    rc = copy_to_user(st.vsb, &vsb, sizeof(vsb));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_btuner_linein_open:
  {{
  ioctl_settopapi_struct_btuner_linein_open st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = btuner_linein_open(st.linein_id);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_btuner_tune_qam:
  {{
  ioctl_settopapi_struct_btuner_tune_qam st;
  btuner_qam_params params;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.params) {
  rc = copy_from_user((void*)&params, st.params, sizeof(params));
  if (rc) break;
  }
  if ( params.lock_callback ) { params.lock_callback = b_proxy_create_callback(ioctl_settopapi_btuner_qam_params_lock_callback, st.tuner, params.callback_context); }

  /* Make the function call */
  st.__retval = btuner_tune_qam(st.tuner,st.freq,st.params ? &params:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_btuner_tune_oob:
  {{
  ioctl_settopapi_struct_btuner_tune_oob st;
  btuner_qam_params params;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.params) {
  rc = copy_from_user((void*)&params, st.params, sizeof(params));
  if (rc) break;
  }
  if ( params.lock_callback ) { params.lock_callback = b_proxy_create_callback(ioctl_settopapi_btuner_oob_params_lock_callback, st.tuner, params.callback_context); }

  /* Make the function call */
  st.__retval = btuner_tune_oob(st.tuner,st.freq,st.params ? &params:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_btuner_tune_qam_us:
  {{
  ioctl_settopapi_struct_btuner_tune_qam_us st;
  btuner_qam_us_params params;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.params) {
  rc = copy_from_user((void*)&params, st.params, sizeof(params));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = btuner_tune_qam_us(st.tuner,st.freq,st.params ? &params:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_btuner_tune_sds:
  {{
  ioctl_settopapi_struct_btuner_tune_sds st;
  btuner_sds_params params;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.params) {
  rc = copy_from_user((void*)&params, st.params, sizeof(params));
  if (rc) break;
  }
  if ( params.lock_callback ) { params.lock_callback = b_proxy_create_callback(ioctl_settopapi_btuner_sds_params_lock_callback, st.tuner, params.callback_context); }

  /* Make the function call */
  st.__retval = btuner_tune_sds(st.tuner,st.freq,st.params ? &params:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_btuner_tune_vsb:
  {{
  ioctl_settopapi_struct_btuner_tune_vsb st;
  btuner_vsb_params params;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.params) {
  rc = copy_from_user((void*)&params, st.params, sizeof(params));
  if (rc) break;
  }
  if ( params.lock_callback ) { params.lock_callback = b_proxy_create_callback(ioctl_settopapi_btuner_vsb_params_lock_callback, st.tuner, params.callback_context); }

  /* Make the function call */
  st.__retval = btuner_tune_vsb(st.tuner,st.freq,st.params ? &params:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_btuner_tune_ofdm:
  {{
  ioctl_settopapi_struct_btuner_tune_ofdm st;
  btuner_ofdm_params params;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.params) {
  rc = copy_from_user((void*)&params, st.params, sizeof(params));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = btuner_tune_ofdm(st.tuner,st.freq,st.params ? &params:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_btuner_tune_rf:
  {{
  ioctl_settopapi_struct_btuner_tune_rf st;
  btuner_analog_params params;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.params) {
  rc = copy_from_user((void*)&params, st.params, sizeof(params));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = btuner_tune_rf(st.tuner,st.carrierfreq,st.params ? &params:NULL);
  bhandle_mgr_add(file->private_data, st.__retval, (settopapi_close_func)bstream_close, "bstream_close");
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_btuner_tune_linein:
  {{
  ioctl_settopapi_struct_btuner_tune_linein st;
  btuner_analog_params params;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.params) {
  rc = copy_from_user((void*)&params, st.params, sizeof(params));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = btuner_tune_linein(st.tuner,st.linein,st.params ? &params:NULL);
  bhandle_mgr_add(file->private_data, st.__retval, (settopapi_close_func)bstream_close, "bstream_close");
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_btuner_get_analog_status:
  {{
  ioctl_settopapi_struct_btuner_get_analog_status st;
  btuner_analog_status status;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = btuner_get_analog_status(st.tuner,st.status ? &status:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.status) {
    rc = copy_to_user(st.status, &status, sizeof(status));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_btuner_get_qam_status:
  {{
  ioctl_settopapi_struct_btuner_get_qam_status st;
  btuner_qam_status status;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = btuner_get_qam_status(st.tuner,st.status ? &status:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.status) {
    rc = copy_to_user(st.status, &status, sizeof(status));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_btuner_get_qam_us_status:
  {{
  ioctl_settopapi_struct_btuner_get_qam_us_status st;
  btuner_qam_us_status status;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = btuner_get_qam_us_status(st.tuner,st.status ? &status:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.status) {
    rc = copy_to_user(st.status, &status, sizeof(status));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_btuner_get_sds_status:
  {{
  ioctl_settopapi_struct_btuner_get_sds_status st;
  btuner_sds_status status;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = btuner_get_sds_status(st.tuner,st.status ? &status:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.status) {
    rc = copy_to_user(st.status, &status, sizeof(status));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_btuner_get_vsb_status:
  {{
  ioctl_settopapi_struct_btuner_get_vsb_status st;
  btuner_vsb_status status;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = btuner_get_vsb_status(st.tuner,st.status ? &status:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.status) {
    rc = copy_to_user(st.status, &status, sizeof(status));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_btuner_get_ofdm_status:
  {{
  ioctl_settopapi_struct_btuner_get_ofdm_status st;
  btuner_ofdm_status status;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = btuner_get_ofdm_status(st.tuner,st.status ? &status:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.status) {
    rc = copy_to_user(st.status, &status, sizeof(status));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_btuner_get_soft_decisions:
  {{
  ioctl_settopapi_struct_btuner_get_soft_decisions st;
  btuner_soft_decision * data;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  btuner_soft_decision data_array[st.length];
  data = data_array;

  /* Make the function call */
  st.__retval = btuner_get_soft_decisions(st.tuner,data,st.length);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.data) {
    rc = copy_to_user(st.data, data, st.length*sizeof(btuner_soft_decision));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bmem_alloc:
  {{
  ioctl_settopapi_struct_bmem_alloc st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bmem_alloc(st.buffer_length);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bmem_free:
  {{
  ioctl_settopapi_struct_bmem_free st;
  unsigned char buffer;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bmem_free(st.buffer ? &buffer:NULL);
  rc = 0;

  if (st.buffer) {
    rc = copy_to_user(st.buffer, &buffer, sizeof(buffer));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bcablecard_open:
  {{
  ioctl_settopapi_struct_bcablecard_open st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bcablecard_open(st.cablecard_id);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bcablecard_close:
  {{
  ioctl_settopapi_struct_bcablecard_close st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bcablecard_close(st.cablecard);
  rc = 0;

  }
  }}
  break;

case BSETTOP_IOCTL_bcablecard_get:
  {{
  ioctl_settopapi_struct_bcablecard_get st;
  bcablecard_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  bcablecard_get(st.cablecard,st.settings ? &settings:NULL);
  rc = 0;

  if (st.settings) {
    rc = copy_to_user(st.settings, &settings, sizeof(settings));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

case BSETTOP_IOCTL_bcablecard_set:
  {{
  ioctl_settopapi_struct_bcablecard_set st;
  bcablecard_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {
  if (st.settings) {
  rc = copy_from_user((void*)&settings, st.settings, sizeof(settings));
  if (rc) break;
  }

  /* Make the function call */
  st.__retval = bcablecard_set(st.cablecard,st.settings ? &settings:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bcablecard_route_add_tuner:
  {{
  ioctl_settopapi_struct_bcablecard_route_add_tuner st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bcablecard_route_add_tuner(st.cablecard,st.tuner);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bcablecard_route_remove_tuner:
  {{
  ioctl_settopapi_struct_bcablecard_route_remove_tuner st;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bcablecard_route_remove_tuner(st.cablecard,st.tuner);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  }
  }}
  break;

case BSETTOP_IOCTL_bcablecard_route_get:
  {{
  ioctl_settopapi_struct_bcablecard_route_get st;
  bcablecard_route_settings settings;

  rc = copy_from_user(&st, (void*)arg, sizeof(st));
  if (rc) break;
  {

  /* Make the function call */
  st.__retval = bcablecard_route_get(st.cablecard,st.tuner,st.settings ? &settings:NULL);
  rc = copy_to_user((void*)arg, &st, sizeof(st));
  if (rc) {rc = -EFAULT; break;}
  if (st.settings) {
    rc = copy_to_user(st.settings, &settings, sizeof(settings));
    if (rc) {rc = -EFAULT; break;}
  }
  }
  }}
  break;

