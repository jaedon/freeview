#**@@@+++@@@@******************************************************************
#*
#* Microsoft PlayReady
#* Copyright (c) Microsoft Corporation. All rights reserved.
#*
#**@@@---@@@@******************************************************************

#------------------------------------------------------------------------------
# Compile-time option section
#------------------------------------------------------------------------------
!IF "$(_DRM_BUILD_PROFILE_INT)" != ""
!IF "$(_DRM_BUILD_PROFILE_INT)" != "$(_DRM_BUILD_PROFILE_INT_VIA_PROFILE)"
!ERROR Build profile conflict "$(_DRM_BUILD_PROFILE_INT)" != "$(_DRM_BUILD_PROFILE_INT_VIA_PROFILE)"
!ENDIF
!ENDIF
_DRM_BUILD_PROFILE_INT=$(_DRM_BUILD_PROFILE_INT_VIA_PROFILE)
_DRM_C_DEFINES = $(_DRM_C_DEFINES) DRM_BUILD_PROFILE=$(_DRM_BUILD_PROFILE_INT)

!IF "$(DRM_ACTIVATION_PLATFORM_VIA_PROFILE)" != ""
_DRM_ACTIVATION_PLATFORM_INT=$(DRM_ACTIVATION_PLATFORM_VIA_PROFILE)
_DRM_C_DEFINES = $(_DRM_C_DEFINES) DRM_ACTIVATION_PLATFORM=$(_DRM_ACTIVATION_PLATFORM_INT)
!ELSE
!IF "$(DRM_SUPPORT_ACTIVATION_VIA_PROFILE)" == "1"
!ERROR DRM_ACTIVATION_PLATFORM_VIA_PROFILE must be set for a profile supporting activation
!ENDIF
!ENDIF

!IF "$(DRM_SUPPORT_LOCKING)" == ""
DRM_SUPPORT_LOCKING=$(DRM_SUPPORT_LOCKING_VIA_PROFILE)
!ENDIF
!IF "$(DRM_SUPPORT_LOCKING)" != "1" && "$(DRM_SUPPORT_LOCKING)" != "0"
!ERROR DRM_SUPPORT_LOCKING must be set to 1 or 0
!ENDIF
_DRM_C_DEFINES = $(_DRM_C_DEFINES) DRM_SUPPORT_LOCKING=$(DRM_SUPPORT_LOCKING)

!IF "$(DRM_SUPPORT_MULTI_THREADING)" == ""
DRM_SUPPORT_MULTI_THREADING=$(DRM_SUPPORT_MULTI_THREADING_VIA_PROFILE)
!ENDIF
!IF "$(DRM_SUPPORT_MULTI_THREADING)" != "1" && "$(DRM_SUPPORT_MULTI_THREADING)" != "0"
!ERROR DRM_SUPPORT_MULTI_THREADING must be set to 1 or 0
!ENDIF
_DRM_C_DEFINES = $(_DRM_C_DEFINES) DRM_SUPPORT_MULTI_THREADING=$(DRM_SUPPORT_MULTI_THREADING)

!IF "$(DRM_SUPPORT_LOCKING)" == "0"
!IF "$(DRM_SUPPORT_MULTI_THREADING)" == "1"
!ERROR "We cannot be thread safe unless file locking is supported"
!ENDIF
!ENDIF

!IF "$(DRM_SUPPORT_ECCPROFILING)" == ""
DRM_SUPPORT_ECCPROFILING=$(DRM_SUPPORT_ECCPROFILING_VIA_PROFILE)
!ENDIF
!IF "$(DRM_SUPPORT_ECCPROFILING)" != "1" && "$(DRM_SUPPORT_ECCPROFILING)" != "0"
!ERROR DRM_SUPPORT_ECCPROFILING must be set to 1 or 0
!ENDIF
_DRM_C_DEFINES = $(_DRM_C_DEFINES) DRM_SUPPORT_ECCPROFILING=$(DRM_SUPPORT_ECCPROFILING)

!IF "$(DRM_SUPPORT_INLINEDWORDCPY)" == ""
DRM_SUPPORT_INLINEDWORDCPY=$(DRM_SUPPORT_INLINEDWORDCPY_VIA_PROFILE)
!ENDIF
!IF "$(DRM_SUPPORT_INLINEDWORDCPY)" != "1" && "$(DRM_SUPPORT_INLINEDWORDCPY)" != "0"
!ERROR DRM_SUPPORT_INLINEDWORDCPY must be set to 1 or 0
!ENDIF
_DRM_C_DEFINES = $(_DRM_C_DEFINES) DRM_SUPPORT_INLINEDWORDCPY=$(DRM_SUPPORT_INLINEDWORDCPY)

!IF "$(DRM_SUPPORT_DATASTORE_PREALLOC)" == ""
DRM_SUPPORT_DATASTORE_PREALLOC=$(DRM_SUPPORT_DATASTORE_PREALLOC_VIA_PROFILE)
!ENDIF
!IF "$(DRM_SUPPORT_DATASTORE_PREALLOC)" != "1" && "$(DRM_SUPPORT_DATASTORE_PREALLOC)" != "0"
!ERROR DRM_SUPPORT_DATASTORE_PREALLOC must be set to 1 or 0
!ENDIF
_DRM_C_DEFINES = $(_DRM_C_DEFINES) DRM_SUPPORT_DATASTORE_PREALLOC=$(DRM_SUPPORT_DATASTORE_PREALLOC)

!IF "$(DRM_SUPPORT_REACTIVATION)" == ""
DRM_SUPPORT_REACTIVATION=$(DRM_SUPPORT_REACTIVATION_VIA_PROFILE)
!ENDIF
!IF "$(DRM_SUPPORT_REACTIVATION)" != "1" && "$(DRM_SUPPORT_REACTIVATION)" != "0"
!ERROR DRM_SUPPORT_REACTIVATION must be set to 1 or 0
!ENDIF
_DRM_C_DEFINES = $(_DRM_C_DEFINES) DRM_SUPPORT_REACTIVATION=$(DRM_SUPPORT_REACTIVATION)

!IF "$(DRM_SUPPORT_NATIVE_64BIT_TYPES)" == ""
DRM_SUPPORT_NATIVE_64BIT_TYPES=$(DRM_SUPPORT_NATIVE_64BIT_TYPES_VIA_PROFILE)
!ENDIF
!IF "$(DRM_SUPPORT_NATIVE_64BIT_TYPES)" != "1" && "$(DRM_SUPPORT_NATIVE_64BIT_TYPES)" != "0"
!ERROR DRM_SUPPORT_NATIVE_64BIT_TYPES must be set to 1 or 0
!ENDIF
_DRM_C_DEFINES = $(_DRM_C_DEFINES) DRM_SUPPORT_NATIVE_64BIT_TYPES=$(DRM_SUPPORT_NATIVE_64BIT_TYPES)

!IF "$(DRM_SUPPORT_FORCE_ALIGN)" == ""
DRM_SUPPORT_FORCE_ALIGN=$(DRM_SUPPORT_FORCE_ALIGN_VIA_PROFILE)
!ENDIF
!IF "$(DRM_SUPPORT_FORCE_ALIGN)" != "1" && "$(DRM_SUPPORT_FORCE_ALIGN)" != "0"
!ERROR DRM_SUPPORT_FORCE_ALIGN must be set to 1 or 0
!ENDIF
_DRM_C_DEFINES = $(_DRM_C_DEFINES) DRM_SUPPORT_FORCE_ALIGN=$(DRM_SUPPORT_FORCE_ALIGN)

!IF "$(DRM_SUPPORT_ASSEMBLY)" == ""
DRM_SUPPORT_ASSEMBLY=$(DRM_SUPPORT_ASSEMBLY_VIA_PROFILE)
!ENDIF
!IF "$(DRM_SUPPORT_ASSEMBLY)" != "1" && "$(DRM_SUPPORT_ASSEMBLY)" != "0"
!ERROR DRM_SUPPORT_ASSEMBLY must be set to 1 or 0
!ENDIF
_DRM_C_DEFINES = $(_DRM_C_DEFINES) DRM_SUPPORT_ASSEMBLY=$(DRM_SUPPORT_ASSEMBLY)

!IF "$(DRM_SUPPORT_PRECOMPUTE_GTABLE)" == ""
DRM_SUPPORT_PRECOMPUTE_GTABLE=$(DRM_SUPPORT_PRECOMPUTE_GTABLE_VIA_PROFILE)
!ENDIF
!IF "$(DRM_SUPPORT_PRECOMPUTE_GTABLE)" != "1" && "$(DRM_SUPPORT_PRECOMPUTE_GTABLE)" != "0"
!ERROR DRM_SUPPORT_PRECOMPUTE_GTABLE must be set to 1 or 0
!ENDIF
_DRM_C_DEFINES = $(_DRM_C_DEFINES) DRM_SUPPORT_PRECOMPUTE_GTABLE=$(DRM_SUPPORT_PRECOMPUTE_GTABLE)

!IF "$(DRM_SUPPORT_SECUREOEMHAL)" == ""
DRM_SUPPORT_SECUREOEMHAL=$(DRM_SUPPORT_SECUREOEMHAL_VIA_PROFILE)
!ENDIF
!IF "$(DRM_SUPPORT_SECUREOEMHAL)" != "1" && "$(DRM_SUPPORT_SECUREOEMHAL)" != "0"
!ERROR DRM_SUPPORT_SECUREOEMHAL must be set to 1 or 0
!ENDIF
_DRM_C_DEFINES = $(_DRM_C_DEFINES) DRM_SUPPORT_SECUREOEMHAL=$(DRM_SUPPORT_SECUREOEMHAL)

!IF "$(DRM_SUPPORT_SECUREOEMHAL_PLAY_ONLY)" == ""
DRM_SUPPORT_SECUREOEMHAL_PLAY_ONLY=$(DRM_SUPPORT_SECUREOEMHAL_PLAY_ONLY_VIA_PROFILE)
!ENDIF
!IF "$(DRM_SUPPORT_SECUREOEMHAL_PLAY_ONLY)" != "1" && "$(DRM_SUPPORT_SECUREOEMHAL_PLAY_ONLY)" != "0"
!ERROR DRM_SUPPORT_SECUREOEMHAL_PLAY_ONLY must be set to 1 or 0
!ENDIF
_DRM_C_DEFINES = $(_DRM_C_DEFINES) DRM_SUPPORT_SECUREOEMHAL_PLAY_ONLY=$(DRM_SUPPORT_SECUREOEMHAL_PLAY_ONLY)

!IF "$(DRM_SUPPORT_TRACING)" == ""
DRM_SUPPORT_TRACING=$(DRM_SUPPORT_TRACING_VIA_PROFILE)
!ENDIF
!IF "$(DRM_SUPPORT_TRACING)" != "1" && "$(DRM_SUPPORT_TRACING)" != "0"
!ERROR DRM_SUPPORT_TRACING must be set to 1 or 0
!ENDIF
_DRM_C_DEFINES = $(_DRM_C_DEFINES) DRM_SUPPORT_TRACING=$(DRM_SUPPORT_TRACING)

!IF "$(DRM_SUPPORT_PRIVATE_KEY_CACHE)" == ""
DRM_SUPPORT_PRIVATE_KEY_CACHE=$(DRM_SUPPORT_PRIVATE_KEY_CACHE_VIA_PROFILE)
!ENDIF
!IF "$(DRM_SUPPORT_PRIVATE_KEY_CACHE)" != "1" && "$(DRM_SUPPORT_PRIVATE_KEY_CACHE)" != "0"
!ERROR DRM_SUPPORT_PRIVATE_KEY_CACHE must be set to 1 or 0
!ENDIF
_DRM_C_DEFINES = $(_DRM_C_DEFINES) DRM_SUPPORT_PRIVATE_KEY_CACHE=$(DRM_SUPPORT_PRIVATE_KEY_CACHE)

!IF "$(DRM_SUPPORT_EMBEDDED_CERTS)" == ""
DRM_SUPPORT_EMBEDDED_CERTS=$(DRM_SUPPORT_EMBEDDED_CERTS_VIA_PROFILE)
!ENDIF
!IF "$(DRM_SUPPORT_EMBEDDED_CERTS)" != "1" && "$(DRM_SUPPORT_EMBEDDED_CERTS)" != "0"
!ERROR DRM_SUPPORT_EMBEDDED_CERTS must be set to 1 or 0
!ENDIF
_DRM_C_DEFINES = $(_DRM_C_DEFINES) DRM_SUPPORT_EMBEDDED_CERTS=$(DRM_SUPPORT_EMBEDDED_CERTS)

!IF "$(DRM_SUPPORT_DEVICE_SIGNING_KEY)" == ""
DRM_SUPPORT_DEVICE_SIGNING_KEY=$(DRM_SUPPORT_DEVICE_SIGNING_KEY_VIA_PROFILE)
!ENDIF
!IF "$(DRM_SUPPORT_DEVICE_SIGNING_KEY)" != "1" && "$(DRM_SUPPORT_DEVICE_SIGNING_KEY)" != "0"
!ERROR DRM_SUPPORT_DEVICE_SIGNING_KEY must be set to 1 or 0
!ENDIF
_DRM_C_DEFINES = $(_DRM_C_DEFINES) DRM_SUPPORT_DEVICE_SIGNING_KEY=$(DRM_SUPPORT_DEVICE_SIGNING_KEY)

!IF "$(DRM_SUPPORT_NONVAULTSIGNING)" == ""
DRM_SUPPORT_NONVAULTSIGNING=$(DRM_SUPPORT_NONVAULTSIGNING_VIA_PROFILE)
!ENDIF
!IF "$(DRM_SUPPORT_NONVAULTSIGNING)" != "1" && "$(DRM_SUPPORT_NONVAULTSIGNING)" != "0"
!ERROR DRM_SUPPORT_NONVAULTSIGNING must be set to 1 or 0
!ENDIF
_DRM_C_DEFINES = $(_DRM_C_DEFINES) DRM_SUPPORT_NONVAULTSIGNING=$(DRM_SUPPORT_NONVAULTSIGNING)

!IF "$(DRM_USE_IOCTL_HAL_GET_DEVICE_INFO)" == ""
DRM_USE_IOCTL_HAL_GET_DEVICE_INFO=$(DRM_USE_IOCTL_HAL_GET_DEVICE_INFO_VIA_PROFILE)
!ENDIF
!IF "$(DRM_USE_IOCTL_HAL_GET_DEVICE_INFO)" != "1" && "$(DRM_USE_IOCTL_HAL_GET_DEVICE_INFO)" != "0"
!ERROR DRM_USE_IOCTL_HAL_GET_DEVICE_INFO must be set to 1 or 0
!ENDIF
_DRM_C_DEFINES = $(_DRM_C_DEFINES) DRM_USE_IOCTL_HAL_GET_DEVICE_INFO=$(DRM_USE_IOCTL_HAL_GET_DEVICE_INFO)

!IF "$(_DATASTORE_WRITE_THRU)" == ""
_DATASTORE_WRITE_THRU=$(_DATASTORE_WRITE_THRU_VIA_PROFILE)
!ENDIF
!IF "$(_DATASTORE_WRITE_THRU)" != "1" && "$(_DATASTORE_WRITE_THRU)" != "0"
!ERROR _DATASTORE_WRITE_THRU must be set to 1 or 0
!ENDIF
_DRM_C_DEFINES = $(_DRM_C_DEFINES) _DATASTORE_WRITE_THRU=$(_DATASTORE_WRITE_THRU)

!IF "$(_ADDLICENSE_WRITE_THRU)" == ""
_ADDLICENSE_WRITE_THRU=$(_ADDLICENSE_WRITE_THRU_VIA_PROFILE)
!ENDIF
!IF "$(_ADDLICENSE_WRITE_THRU)" != "1" && "$(_ADDLICENSE_WRITE_THRU)" != "0"
!ERROR _ADDLICENSE_WRITE_THRU must be set to 1 or 0
!ENDIF
_DRM_C_DEFINES = $(_DRM_C_DEFINES) _ADDLICENSE_WRITE_THRU=$(_ADDLICENSE_WRITE_THRU)

!IF "$(DRM_HDS_COPY_BUFFER_SIZE)" == ""
DRM_HDS_COPY_BUFFER_SIZE=$(DRM_HDS_COPY_BUFFER_SIZE_VIA_PROFILE)
!ENDIF
!IF "$(DRM_HDS_COPY_BUFFER_SIZE)" == ""
!ERROR DRM_HDS_COPY_BUFFER_SIZE must be set to a valid value
!ENDIF
_DRM_C_DEFINES = $(_DRM_C_DEFINES) DRM_HDS_COPY_BUFFER_SIZE=$(DRM_HDS_COPY_BUFFER_SIZE)

!IF "$(DRM_TEST_SUPPORT_NET_IO)" == ""
DRM_TEST_SUPPORT_NET_IO=$(DRM_TEST_SUPPORT_NET_IO_VIA_PROFILE)
!ENDIF
!IF "$(DRM_TEST_SUPPORT_NET_IO)" != "1" && "$(DRM_TEST_SUPPORT_NET_IO)" != "0"
!ERROR DRM_TEST_SUPPORT_NET_IO must be set to 1 or 0
!ENDIF
_DRM_C_DEFINES = $(_DRM_C_DEFINES) DRM_TEST_SUPPORT_NET_IO=$(DRM_TEST_SUPPORT_NET_IO)

!IF "$(DRM_TEST_SUPPORT_ACTIVATION)" == ""
DRM_TEST_SUPPORT_ACTIVATION=$(DRM_TEST_SUPPORT_ACTIVATION_VIA_PROFILE)
!ENDIF
!IF "$(DRM_TEST_SUPPORT_ACTIVATION)" != "1" && "$(DRM_TEST_SUPPORT_ACTIVATION)" != "0"
!ERROR DRM_TEST_SUPPORT_ACTIVATION must be set to 1 or 0
!ENDIF
_DRM_C_DEFINES = $(_DRM_C_DEFINES) DRM_TEST_SUPPORT_ACTIVATION=$(DRM_TEST_SUPPORT_ACTIVATION)

!IF "$(USE_PK_NAMESPACES)" == ""
USE_PK_NAMESPACES=$(USE_PK_NAMESPACES_VIA_PROFILE)
!ENDIF
!IF "$(USE_PK_NAMESPACES)" != "1" && "$(USE_PK_NAMESPACES)" != "0"
!ERROR USE_PK_NAMESPACES must be set to 1 or 0
!ENDIF
_DRM_C_DEFINES = $(_DRM_C_DEFINES) USE_PK_NAMESPACES=$(USE_PK_NAMESPACES)

!IF "$(DRM_INCLUDE_PK_NAMESPACE_USING_STATEMENT)" == ""
DRM_INCLUDE_PK_NAMESPACE_USING_STATEMENT=$(DRM_INCLUDE_PK_NAMESPACE_USING_STATEMENT_VIA_PROFILE)
!ENDIF
!IF "$(DRM_INCLUDE_PK_NAMESPACE_USING_STATEMENT)" != "1" && "$(DRM_INCLUDE_PK_NAMESPACE_USING_STATEMENT)" != "0"
!ERROR DRM_INCLUDE_PK_NAMESPACE_USING_STATEMENT must be set to 1 or 0
!ENDIF
_DRM_C_DEFINES = $(_DRM_C_DEFINES) DRM_INCLUDE_PK_NAMESPACE_USING_STATEMENT=$(DRM_INCLUDE_PK_NAMESPACE_USING_STATEMENT)

!IF "$(DRM_KEYFILE_VERSION)" == ""
DRM_KEYFILE_VERSION=$(DRM_KEYFILE_VERSION_VIA_PROFILE)
!ENDIF

!IF "$(DRM_KEYFILE_VERSION)" == ""
!ERROR DRM_KEYFILE_VERSION must be set to a valid value
!ENDIF
_DRM_C_DEFINES = $(_DRM_C_DEFINES) DRM_KEYFILE_VERSION=$(DRM_KEYFILE_VERSION)

!IF "$(DRM_TOOLS_PRND_TRANSMITTER_USES_UPNP)"== ""
DRM_TOOLS_PRND_TRANSMITTER_USES_UPNP=$(DRM_TOOLS_PRND_TRANSMITTER_USES_UPNP_VIA_PROFILE)
!ENDIF
!IF "$(DRM_TOOLS_PRND_TRANSMITTER_USES_UPNP)" != "1" && "$(DRM_TOOLS_PRND_TRANSMITTER_USES_UPNP)" != "0"
!ERROR DRM_TOOLS_PRND_TRANSMITTER_USES_UPNP must be set to 1 or 0
!ENDIF
_DRM_C_DEFINES = $(_DRM_C_DEFINES) DRM_TOOLS_PRND_TRANSMITTER_USES_UPNP=$(DRM_TOOLS_PRND_TRANSMITTER_USES_UPNP)