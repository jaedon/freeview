#**@@@+++@@@@*********************************************************
#*
#* Microsoft PlayReady
#* Copyright (c) Microsoft Corporation. All rights reserved.
#*
#**@@@---@@@@********************************************************/

#==============================================================================
#
# Description:
#    This file assists in the construction of a list of dirs to build or clean.
#
# Inputs:
#    _DRM_DIRS_TARGETS: This is of the form:
#        FOO BAR{TARGET.FEATURE1, TARGET.FEATURE2, ...}
#
# Outputs:
#    _DRM_DIRS_TARGETS: This should be of the form:
#        FOO BAR{TARGET.FEATURESKIP, TARGET.FEATUREBUILD, ...}
#
# Note:
#    ANY feature flag entry which is NOT met causes the dir to be skipped.
#    Contrast this with how platform flags work in DrmPlatformComposeDirsTargets.mk.
#    (i.e. ALL features must be met)
#
#==============================================================================

!include "$(DRM_ROOT_PATH)DrmOverrideFeatureDefaults.mk"

!IF "$(DRM_SUPPORT_TEST_SETTINGS)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_TEST_SETTINGS=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_TEST_SETTINGS=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_TEST_SETTINGS=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_TEST_SETTINGS=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_CONTRACT)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_CONTRACT=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_CONTRACT=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_CONTRACT=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_CONTRACT=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_ACTIVATION)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_ACTIVATION=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_ACTIVATION=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_ACTIVATION=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_ACTIVATION=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_ANTIROLLBACK_CLOCK)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_ANTIROLLBACK_CLOCK=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_ANTIROLLBACK_CLOCK=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_ANTIROLLBACK_CLOCK=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_ANTIROLLBACK_CLOCK=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_APP_POLICY)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_APP_POLICY=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_APP_POLICY=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_APP_POLICY=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_APP_POLICY=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_APPREVOCATION)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_APPREVOCATION=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_APPREVOCATION=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_APPREVOCATION=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_APPREVOCATION=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_BBXLEGACY)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_BBXLEGACY=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_BBXLEGACY=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_BBXLEGACY=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_BBXLEGACY=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_BBXSLK)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_BBXSLK=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_BBXSLK=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_BBXSLK=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_BBXSLK=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_CERTCACHE)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_CERTCACHE=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_CERTCACHE=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_CERTCACHE=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_CERTCACHE=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_CERTPARSERCACHE)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_CERTPARSERCACHE=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_CERTPARSERCACHE=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_CERTPARSERCACHE=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_CERTPARSERCACHE=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_CLEANSTORE)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_CLEANSTORE=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_CLEANSTORE=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_CLEANSTORE=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_CLEANSTORE=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_CONTENTREVOCATION)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_CONTENTREVOCATION=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_CONTENTREVOCATION=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_CONTENTREVOCATION=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_CONTENTREVOCATION=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_COPYOPL)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_COPYOPL=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_COPYOPL=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_COPYOPL=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_COPYOPL=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_CRT)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_CRT=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_CRT=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_CRT=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_CRT=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_DELETEDSTORE)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_DELETEDSTORE=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_DELETEDSTORE=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_DELETEDSTORE=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_DELETEDSTORE=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_DEVCERTKEYGEN)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_DEVCERTKEYGEN=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_DEVCERTKEYGEN=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_DEVCERTKEYGEN=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_DEVCERTKEYGEN=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_DEVICEASSETS)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_DEVICEASSETS=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_DEVICEASSETS=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_DEVICEASSETS=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_DEVICEASSETS=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_DEVICEREVOCATION)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_DEVICEREVOCATION=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_DEVICEREVOCATION=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_DEVICEREVOCATION=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_DEVICEREVOCATION=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_DEVICESTORE)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_DEVICESTORE=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_DEVICESTORE=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_DEVICESTORE=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_DEVICESTORE=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_DLA)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_DLA=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_DLA=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_DLA=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_DLA=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_DOMAIN)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_DOMAIN=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_DOMAIN=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_DOMAIN=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_DOMAIN=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_EST)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_EST=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_EST=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_EST=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_EST=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_HDS)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_HDS=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_HDS=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_HDS=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_HDS=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_HDSBLOCKHEADERCACHE)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_HDSBLOCKHEADERCACHE=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_HDSBLOCKHEADERCACHE=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_HDSBLOCKHEADERCACHE=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_HDSBLOCKHEADERCACHE=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_LICENSE_SYNC)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_LICENSE_SYNC=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_LICENSE_SYNC=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_LICENSE_SYNC=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_LICENSE_SYNC=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_LICGEN)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_LICGEN=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_LICGEN=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_LICGEN=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_LICGEN=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_M2TSENCRYPTOR)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_M2TSENCRYPTOR=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_M2TSENCRYPTOR=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_M2TSENCRYPTOR=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_M2TSENCRYPTOR=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_METERING)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_METERING=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_METERING=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_METERING=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_METERING=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_MODELREVOCATION)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_MODELREVOCATION=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_MODELREVOCATION=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_MODELREVOCATION=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_MODELREVOCATION=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_MOVE)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_MOVE=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_MOVE=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_MOVE=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_MOVE=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_PERFORMANCE)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_PERFORMANCE=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_PERFORMANCE=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_PERFORMANCE=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_PERFORMANCE=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_PERSTREAMKEYS)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_PERSTREAMKEYS=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_PERSTREAMKEYS=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_PERSTREAMKEYS=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_PERSTREAMKEYS=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_PRNDTX)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_PRNDTX=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_PRNDTX=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_PRNDTX=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_PRNDTX=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_PRNDRX)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_PRNDRX=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_PRNDRX=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_PRNDRX=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_PRNDRX=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_SECURE_CLOCK)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_SECURE_CLOCK=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_SECURE_CLOCK=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_SECURE_CLOCK=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_SECURE_CLOCK=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_SYMOPT)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_SYMOPT=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_SYMOPT=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_SYMOPT=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_SYMOPT=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_THUMBNAIL)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_THUMBNAIL=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_THUMBNAIL=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_THUMBNAIL=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_THUMBNAIL=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_VIEWRIGHTS)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_VIEWRIGHTS=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_VIEWRIGHTS=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_VIEWRIGHTS=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_VIEWRIGHTS=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_WMDRM)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_WMDRM=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_WMDRM=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_WMDRM=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_WMDRM=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_WMDRMNET)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_WMDRMNET=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_WMDRMNET=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_WMDRMNET=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_WMDRMNET=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_XMLHASH)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_XMLHASH=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_XMLHASH=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_XMLHASH=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_XMLHASH=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_PROFILING)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_PROFILING=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_PROFILING=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_PROFILING=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_PROFILING=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_SECUREOEMHAL)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_SECUREOEMHAL=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_SECUREOEMHAL=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_SECUREOEMHAL=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_SECUREOEMHAL=TARGET.BUILD)
!ENDIF

!IF "$(DRM_SUPPORT_SECUREOEMHAL_PLAY_ONLY)" == "1"
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_SECUREOEMHAL_PLAY_ONLY=TARGET.BUILD)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_SECUREOEMHAL_PLAY_ONLY=TARGET.SKIP)
!ELSE
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.DRM_SUPPORT_SECUREOEMHAL_PLAY_ONLY=TARGET.SKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.!DRM_SUPPORT_SECUREOEMHAL_PLAY_ONLY=TARGET.BUILD)
!ENDIF

#==============================================================================
# Convert from SKIP/BUILD to FEATURESKIP/FEATUREBUILD
#==============================================================================

_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.SKIP=TARGET.FEATURESKIP)
_DRM_DIRS_TARGETS=$(_DRM_DIRS_TARGETS:TARGET.BUILD=TARGET.FEATUREBUILD)


